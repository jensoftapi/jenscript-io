// JenScript -  JavaScript HTML5/SVG Library
// Product of JenSoftAPI - Visualization Java & JS Libraries
// version : 1.1.6
// Author : Sebastien Janaud 
// Web Site : http://jenscript.io
// Twitter  : http://twitter.com/JenSoftAPI
// Copyright (C) 2008 - 2015 JenScript, product by JenSoftAPI company, France.
// build: 2015-11-07
// All Rights reserved

var JenScript={};!function(){JenScript={version:"1.1.6",views:[],sequenceId:0,SVG_NS:"http://www.w3.org/2000/svg",XLINK_NS:"http://www.w3.org/1999/xlink",SVG_VERSION:"1.1",createColor:function(){for(var a=(16777215*Math.random()<<0).toString(16);a.length<6;)a="0"+a;return"#"+a},agent:function(){var a=navigator.userAgent.toLowerCase(),b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}}(),ViewPart:{View:"View",North:"North",South:"South",West:"West",East:"East",Device:"Device"},ViewPartComponent:function(a){this.init(a)},View:function(a){this.init(a)},Projection:function(a){this.init(a)},Plugin:function(a){this.init(a)},view:function(a){return new JenScript.ViewBuilder(a)}},function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define(b):a.returnExports=b()}(this,function(){return JenScript})}(),function(){JenScript.Model={inheritPrototype:function(a,b){var c=Object.create(b.prototype);c.constructor=a,a.prototype=c},addMethods:function(a,b){var c=void 0;for(c in b)a.prototype[c]=b[c]}}}(),function(){JenScript.Math={log10:function(a){return Math.log(a)/Math.LN10},toRadians:function(a){return a*Math.PI/180},toDegrees:function(a){return 180*a/Math.PI},getPolarAngle:function(a,b,c,d){var e=-1;return c-a>0&&b-d>=0?e=Math.atan((b-d)/(c-a)):c-a>0&&0>b-d?e=Math.atan((b-d)/(c-a))+2*Math.PI:0>c-a?e=Math.atan((b-d)/(c-a))+Math.PI:c-a==0&&b-d>0?e=Math.PI/2:c-a==0&&0>b-d&&(e=3*Math.PI/2),e}}}(),function(){function a(a){var c={r:0,g:0,b:0},e=1,g=!1,h=!1;return"string"==typeof a&&(a=t(a)),"object"==typeof a&&(a.hasOwnProperty("r")&&a.hasOwnProperty("g")&&a.hasOwnProperty("b")?(c=b(a.r,a.g,a.b),g=!0,h="%"===String(a.r).substr(-1)?"prgb":"rgb"):a.hasOwnProperty("h")&&a.hasOwnProperty("s")&&a.hasOwnProperty("v")?(a.s=q(a.s),a.v=q(a.v),c=f(a.h,a.s,a.v),g=!0,h="hsv"):a.hasOwnProperty("h")&&a.hasOwnProperty("s")&&a.hasOwnProperty("l")&&(a.s=q(a.s),a.l=q(a.l),c=d(a.h,a.s,a.l),g=!0,h="hsl"),a.hasOwnProperty("a")&&(e=a.a)),e=j(e),{ok:g,format:a.format||h,r:z(255,A(c.r,0)),g:z(255,A(c.g,0)),b:z(255,A(c.b,0)),a:e}}function b(a,b,c){return{r:255*k(a,255),g:255*k(b,255),b:255*k(c,255)}}function c(a,b,c){a=k(a,255),b=k(b,255),c=k(c,255);var d,e,f=A(a,b,c),g=z(a,b,c),h=(f+g)/2;if(f==g)d=e=0;else{var i=f-g;switch(e=h>.5?i/(2-f-g):i/(f+g),f){case a:d=(b-c)/i+(c>b?6:0);break;case b:d=(c-a)/i+2;break;case c:d=(a-b)/i+4}d/=6}return{h:d,s:e,l:h}}function d(a,b,c){function d(a,b,c){return 0>c&&(c+=1),c>1&&(c-=1),1/6>c?a+6*(b-a)*c:.5>c?b:2/3>c?a+(b-a)*(2/3-c)*6:a}var e,f,g;if(a=k(a,360),b=k(b,100),c=k(c,100),0===b)e=f=g=c;else{var h=.5>c?c*(1+b):c+b-c*b,i=2*c-h;e=d(i,h,a+1/3),f=d(i,h,a),g=d(i,h,a-1/3)}return{r:255*e,g:255*f,b:255*g}}function e(a,b,c){a=k(a,255),b=k(b,255),c=k(c,255);var d,e,f=A(a,b,c),g=z(a,b,c),h=f,i=f-g;if(e=0===f?0:i/f,f==g)d=0;else{switch(f){case a:d=(b-c)/i+(c>b?6:0);break;case b:d=(c-a)/i+2;break;case c:d=(a-b)/i+4}d/=6}return{h:d,s:e,v:h}}function f(a,b,c){a=6*k(a,360),b=k(b,100),c=k(c,100);var d=x.floor(a),e=a-d,f=c*(1-b),g=c*(1-e*b),h=c*(1-(1-e)*b),i=d%6,j=[c,g,f,f,h,c][i],l=[h,c,c,g,f,f][i],m=[f,f,h,c,c,g][i];return{r:255*j,g:255*l,b:255*m}}function g(a,b,c,d){var e=[p(y(a).toString(16)),p(y(b).toString(16)),p(y(c).toString(16))];return d&&e[0].charAt(0)==e[0].charAt(1)&&e[1].charAt(0)==e[1].charAt(1)&&e[2].charAt(0)==e[2].charAt(1)?e[0].charAt(0)+e[1].charAt(0)+e[2].charAt(0):e.join("")}function h(a,b,c,d){var e=[p(r(d)),p(y(a).toString(16)),p(y(b).toString(16)),p(y(c).toString(16))];return e.join("")}function i(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[a[c]]=c);return b}function j(a){return a=parseFloat(a),(isNaN(a)||0>a||a>1)&&(a=1),a}function k(a,b){n(a)&&(a="100%");var c=o(a);return a=z(b,A(0,parseFloat(a))),c&&(a=parseInt(a*b,10)/100),x.abs(a-b)<1e-6?1:a%b/parseFloat(b)}function l(a){return z(1,A(0,a))}function m(a){return parseInt(a,16)}function n(a){return"string"==typeof a&&-1!=a.indexOf(".")&&1===parseFloat(a)}function o(a){return"string"==typeof a&&-1!=a.indexOf("%")}function p(a){return 1==a.length?"0"+a:""+a}function q(a){return 1>=a&&(a=100*a+"%"),a}function r(a){return Math.round(255*parseFloat(a)).toString(16)}function s(a){return m(a)/255}function t(a){a=a.replace(u,"").replace(v,"").toLowerCase();var b=!1;if(C[a])a=C[a],b=!0;else if("transparent"==a)return{r:0,g:0,b:0,a:0,format:"name"};var c;return(c=E.rgb.exec(a))?{r:c[1],g:c[2],b:c[3]}:(c=E.rgba.exec(a))?{r:c[1],g:c[2],b:c[3],a:c[4]}:(c=E.hsl.exec(a))?{h:c[1],s:c[2],l:c[3]}:(c=E.hsla.exec(a))?{h:c[1],s:c[2],l:c[3],a:c[4]}:(c=E.hsv.exec(a))?{h:c[1],s:c[2],v:c[3]}:(c=E.hex8.exec(a))?{a:s(c[1]),r:m(c[2]),g:m(c[3]),b:m(c[4]),format:b?"name":"hex8"}:(c=E.hex6.exec(a))?{r:m(c[1]),g:m(c[2]),b:m(c[3]),format:b?"name":"hex"}:(c=E.hex3.exec(a))?{r:m(c[1]+""+c[1]),g:m(c[2]+""+c[2]),b:m(c[3]+""+c[3]),format:b?"name":"hex"}:!1}var u=/^[\s,#]+/,v=/\s+$/,w=0,x=Math,y=x.round,z=x.min,A=x.max,B=x.random;JenScript.Color=function(b,c){if(b=b?b:"",c=c||{},b instanceof JenScript.Color)return b;if(!(this instanceof JenScript.Color))return new JenScript.Color(b,c);var d=a(b);this._r=d.r,this._g=d.g,this._b=d.b,this._a=d.a,this._roundA=y(100*this._a)/100,this._format=c.format||d.format,this._gradientType=c.gradientType,this._r<1&&(this._r=y(this._r)),this._g<1&&(this._g=y(this._g)),this._b<1&&(this._b=y(this._b)),this._ok=d.ok,this._tc_id=w++},JenScript.Color.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var a=this.toRgb();return(299*a.r+587*a.g+114*a.b)/1e3},setAlpha:function(a){return this._a=j(a),this._roundA=y(100*this._a)/100,this},toHsv:function(){var a=e(this._r,this._g,this._b);return{h:360*a.h,s:a.s,v:a.v,a:this._a}},toHsvString:function(){var a=e(this._r,this._g,this._b),b=y(360*a.h),c=y(100*a.s),d=y(100*a.v);return 1==this._a?"hsv("+b+", "+c+"%, "+d+"%)":"hsva("+b+", "+c+"%, "+d+"%, "+this._roundA+")"},toHsl:function(){var a=c(this._r,this._g,this._b);return{h:360*a.h,s:a.s,l:a.l,a:this._a}},toHslString:function(){var a=c(this._r,this._g,this._b),b=y(360*a.h),d=y(100*a.s),e=y(100*a.l);return 1==this._a?"hsl("+b+", "+d+"%, "+e+"%)":"hsla("+b+", "+d+"%, "+e+"%, "+this._roundA+")"},toHex:function(a){return g(this._r,this._g,this._b,a)},toHexString:function(a){return"#"+this.toHex(a)},toHex8:function(){return h(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:y(this._r),g:y(this._g),b:y(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+y(this._r)+", "+y(this._g)+", "+y(this._b)+")":"rgba("+y(this._r)+", "+y(this._g)+", "+y(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:y(100*k(this._r,255))+"%",g:y(100*k(this._g,255))+"%",b:y(100*k(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+y(100*k(this._r,255))+"%, "+y(100*k(this._g,255))+"%, "+y(100*k(this._b,255))+"%)":"rgba("+y(100*k(this._r,255))+"%, "+y(100*k(this._g,255))+"%, "+y(100*k(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":this._a<1?!1:D[g(this._r,this._g,this._b,!0)]||!1},toFilter:function(a){var b="#"+h(this._r,this._g,this._b,this._a),c=b,d=this._gradientType?"GradientType = 1, ":"";if(a){var e=JenScript.Color(a);c=e.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+d+"startColorstr="+b+",endColorstr="+c+")"},toString:function(a){var b=!!a;a=a||this._format;var c=!1,d=this._a<1&&this._a>=0,e=!b&&d&&("hex"===a||"hex6"===a||"hex3"===a||"name"===a);return e?"name"===a&&0===this._a?this.toName():this.toRgbString():("rgb"===a&&(c=this.toRgbString()),"prgb"===a&&(c=this.toPercentageRgbString()),("hex"===a||"hex6"===a)&&(c=this.toHexString()),"hex3"===a&&(c=this.toHexString(!0)),"hex8"===a&&(c=this.toHex8String()),"name"===a&&(c=this.toName()),"hsl"===a&&(c=this.toHslString()),"hsv"===a&&(c=this.toHsvString()),c||this.toHexString())}},JenScript.Color.fromRatio=function(a,b){if("object"==typeof a){var c={};for(var d in a)a.hasOwnProperty(d)&&(c[d]="a"===d?a[d]:q(a[d]));a=c}return JenScript.Color(a,b)},JenScript.Color.equals=function(a,b){return a&&b?JenScript.Color(a).toRgbString()==JenScript.Color(b).toRgbString():!1},JenScript.Color.random=function(){return JenScript.Color.fromRatio({r:B(),g:B(),b:B()})},JenScript.Color.desaturate=function(a,b){b=0===b?0:b||10;var c=JenScript.Color(a).toHsl();return c.s-=b/100,c.s=l(c.s),JenScript.Color(c)},JenScript.Color.saturate=function(a,b){b=0===b?0:b||10;var c=JenScript.Color(a).toHsl();return c.s+=b/100,c.s=l(c.s),JenScript.Color(c)},JenScript.Color.greyscale=function(a){return JenScript.Color.desaturate(a,100)},JenScript.Color.lighten=function(a,b){b=0===b?0:b||10;var c=JenScript.Color(a).toHsl();return c.l+=b/100,c.l=l(c.l),JenScript.Color(c)},JenScript.Color.brighten=function(a,b){b=0===b?0:b||10;var c=JenScript.Color(a).toRgb();return c.r=A(0,z(255,c.r-y(255*-(b/100)))),c.g=A(0,z(255,c.g-y(255*-(b/100)))),c.b=A(0,z(255,c.b-y(255*-(b/100)))),JenScript.Color(c)},JenScript.Color.darken=function(a,b){b=0===b?0:b||10;var c=JenScript.Color(a).toHsl();return c.l-=b/100,c.l=l(c.l),JenScript.Color(c)},JenScript.Color.complement=function(a){var b=JenScript.Color(a).toHsl();return b.h=(b.h+180)%360,JenScript.Color(b)},JenScript.Color.spin=function(a,b){var c=JenScript.Color(a).toHsl(),d=(y(c.h)+b)%360;return c.h=0>d?360+d:d,JenScript.Color(c)},JenScript.Color.mix=function(a,b,c){c=0===c?0:c||50;var d,e=JenScript.Color(a).toRgb(),f=JenScript.Color(b).toRgb(),g=c/100,h=2*g-1,i=f.a-e.a;d=h*i==-1?h:(h+i)/(1+h*i),d=(d+1)/2;var j=1-d,k={r:f.r*d+e.r*j,g:f.g*d+e.g*j,b:f.b*d+e.b*j,a:f.a*g+e.a*(1-g)};return JenScript.Color(k)},JenScript.Color.triad=function(a){var b=JenScript.Color(a).toHsl(),c=b.h;return[JenScript.Color(a),JenScript.Color({h:(c+120)%360,s:b.s,l:b.l}),JenScript.Color({h:(c+240)%360,s:b.s,l:b.l})]},JenScript.Color.tetrad=function(a){var b=JenScript.Color(a).toHsl(),c=b.h;return[JenScript.Color(a),JenScript.Color({h:(c+90)%360,s:b.s,l:b.l}),JenScript.Color({h:(c+180)%360,s:b.s,l:b.l}),JenScript.Color({h:(c+270)%360,s:b.s,l:b.l})]},JenScript.Color.splitcomplement=function(a){var b=JenScript.Color(a).toHsl(),c=b.h;return[JenScript.Color(a),JenScript.Color({h:(c+72)%360,s:b.s,l:b.l}),JenScript.Color({h:(c+216)%360,s:b.s,l:b.l})]},JenScript.Color.analogous=function(a,b,c){b=b||6,c=c||30;var d=JenScript.Color(a).toHsl(),e=360/c,f=[JenScript.Color(a)];for(d.h=(d.h-(e*b>>1)+720)%360;--b;)d.h=(d.h+e)%360,f.push(JenScript.Color(d));return f},JenScript.Color.monochromatic=function(a,b){b=b||6;for(var c=JenScript.Color(a).toHsv(),d=c.h,e=c.s,f=c.v,g=[],h=1/b;b--;)g.push(JenScript.Color({h:d,s:e,v:f})),f=(f+h)%1;return g},JenScript.Color.readability=function(a,b){var c=JenScript.Color(a),d=JenScript.Color(b),e=c.toRgb(),f=d.toRgb(),g=c.getBrightness(),h=d.getBrightness(),i=Math.max(e.r,f.r)-Math.min(e.r,f.r)+Math.max(e.g,f.g)-Math.min(e.g,f.g)+Math.max(e.b,f.b)-Math.min(e.b,f.b);return{brightness:Math.abs(g-h),color:i}},JenScript.Color.readable=function(a,b){var c=JenScript.Color.readability(a,b);return c.brightness>125&&c.color>500},JenScript.Color.mostReadable=function(a,b){for(var c=null,d=0,e=!1,f=0;f<b.length;f++){var g=JenScript.Color.readability(a,b[f]),h=g.brightness>125&&g.color>500,i=3*(g.brightness/125)+g.color/500;(h&&!e||h&&e&&i>d||!h&&!e&&i>d)&&(e=h,d=i,c=JenScript.Color(b[f]))}return c};var C=JenScript.Color.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},D=JenScript.Color.hexNames=i(C),E=function(){var a="[-\\+]?\\d+%?",b="[-\\+]?\\d*\\.\\d+%?",c="(?:"+b+")|(?:"+a+")",d="[\\s|\\(]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?",e="[\\s|\\(]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?";return{rgb:new RegExp("rgb"+d),rgba:new RegExp("rgba"+e),hsl:new RegExp("hsl"+d),hsla:new RegExp("hsla"+e),hsv:new RegExp("hsv"+d),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}()}(),function(){JenScript.RosePalette={BORDEAUX:"rgb(168, 45, 69)",PRIMROSE:"rgb(216, 90, 122)",PLUMWINE:"rgb(115, 51, 92)",AMETHYST:"rgb(170, 72, 134)",LAVENDER:"rgb(168, 151, 183)",FOXGLOWE:"rgb(136, 82, 152)",FLANNELGRAY:"rgb(109, 81, 75)",STONEGRAY:"rgb(166, 145, 140)",INDIGO:"rgb(61, 44, 105)",COALBLACK:"rgb(37, 38, 41)",LAPISBLUE:"rgb(88, 84, 141)",COBALT:"rgb(35, 56, 158)",TURQUOISE:"rgb(23, 130, 187)",AEGEANBLUE:"rgb(22, 125, 218)",NEPTUNE:"rgb(128, 182, 191)",CALYPSOBLUE:"rgb(91, 151, 168)",JADE:"rgb(143, 184, 175)",DEEPHARBOR:"rgb(44, 114, 97)",EMERALD:"rgb(62, 142, 78)",LEAFGREEN:"rgb(83, 133, 52)",PINE:"rgb(140, 187, 89)",LIME:"rgb(197, 208, 89)",PALMLEAF:"rgb(190, 168, 99)",SAGE:"rgb(203, 207, 148)",LEMONPEEL:"rgb(247, 239, 100)",SAFFRON:"rgb(235, 214, 92)",SANDALWOOD:"rgb(216, 204, 165)",MELON:"rgb(230, 193, 153)",SUNBURST:"rgb(235, 204, 131)",CHOCOLATE:"rgb(86, 51, 41)",LIGHTBROWN:"rgb(190, 94, 61)",SIENNA:"rgb(168, 72, 36)",HENNA:"rgb(219, 65, 32)",MANDARIN:"rgb(255, 136, 83)",CORALRED:"rgb(208, 58, 47)",REDWOOD:"rgb(203, 71, 52)",FLAMINGO:"rgb(225, 185, 197)",CARDINAL:"rgb(194, 37, 37)",PINGPIZZAZZ:"rgb(218, 118, 153)",AZALEA:"rgb(204, 74, 84)"}}(),function(){JenScript.Texture=function(a,b){this.Id="texture"+JenScript.sequenceId++,this.pattern=a,this.definitions=b},JenScript.Texture.prototype={getId:function(){return this.Id},getPattern:function(){return this.pattern},getDefinitions:function(){return this.definitions}},JenScript.Texture.getTriangleCarbonFiber=function(a){var b=void 0!==a?a:10,c=void 0!==a?a:10,d=new JenScript.SVGPattern,e=(new JenScript.SVGRect).origin(0,0).size(b,c).strokeNone().fill("darkgray"),f=(new JenScript.SVGPolygon).point(b/2,0).point(b/2,c).point(0,c/2).strokeNone().fill("black"),g=(new JenScript.SVGPolygon).point(b/2,0).point(b,0).point(b,c/2).strokeNone().fill("black"),h=(new JenScript.SVGPolygon).point(b,c/2).point(b,c).point(b/2,c).strokeNone().fill("black");return d.size(b,c).child(e.toSVG()).child(f.toSVG()).child(g.toSVG()).child(h.toSVG()),new JenScript.Texture(d)},JenScript.Texture.getSquareCarbonFiber=function(){var a=20,b=20,c=(new JenScript.SVGPattern).size(a,b),d=(new JenScript.SVGRect).origin(0,0).size(a,b).strokeNone().fill("rgb(60,60,60)");c.child(d.toSVG());for(var e,f=[],g=10,h=10,i=0,j=-10;12>j;j+=2*h){e=j,i=-g/2;for(var k=0;5>k;k++){var l="texture_gradient"+JenScript.sequenceId++,m=["0%","100%"],n=["black","darkgray"],o=(new JenScript.SVGLinearGradient).Id(l).from(i+g/2,e).to(i+g/2,e+h).shade(m,n);f[f.length]=o;var p=(new JenScript.SVGRect).origin(i,e).size(g,h).strokeNone().fill("url(#"+l+")");c.child(p.toSVG());var q="texture_gradient"+JenScript.sequenceId++,r=["0%","100%"],s=["black","darkgray"],t=(new JenScript.SVGLinearGradient).Id(q).from(i,e/4).to(i+g,e/4).shade(r,s);f[f.length]=t;var u=(new JenScript.SVGRect).origin(i,e).size(g,h/2).strokeNone().fill("url(#"+l+")");c.child(u.toSVG()),i+=g/2,e+=h/2}}return new JenScript.Texture(c,f)}}(),function(){JenScript.Bound2D=function(a,b,c,d){this.x=a,this.y=b,this.width=c,this.height=d,this.getX=function(){return this.x},this.getY=function(){return this.y},this.getWidth=function(){return this.width},this.getHeight=function(){return this.height},this.getCenterX=function(){return this.x+this.width/2},this.getCenterY=function(){return this.y+this.height/2},this.toString=function(){return"JenScript.Bound2D["+this.x+","+this.y+","+this.width+","+this.height+"]"},this.contains=function(a,b){return a>=this.x&&a<=this.x+this.width&&b>=this.y&&b<=this.y+this.height},this.isEmpty=function(){return this.width<=0||this.height<=0},this.intersects=function(a){if(this.isEmpty()||a.getWidth()<=0||a.getHeight()<=0)return!1;var b=this.getX(),c=this.getY();return a.getX()+a.getWidth()>b&&a.getY()+a.getHeight()>c&&a.getX()<b+this.getWidth()&&a.getY()<c+this.getHeight()}},JenScript.Point2D=function(a,b){this.x=a,this.y=b,this.getX=function(){return this.x},this.getY=function(){return this.y},this.toString=function(){return"JenScript.Point2D["+this.x+","+this.y+"]"},this.equals=function(a){return this.x===a.x&&this.y===a.y?!0:!1}},JenScript.GeometryPath=function(a){this.path=a,this.lengthOfPath=function(){return this.path.getTotalLength()},this.toString=function(){return"[object JenScript.GeometryPath]{path:"+this.path+"}"},this.pointAtLength=function(a){var b=this.path.getPointAtLength(a);return new JenScript.Point2D(b.x,b.y)},this.orthoLeftPointAtLength=function(a,b){var c,d,e=this.angleAtLength(a).rad,f=this.pointAtLength(a);return c=f.getX()+b*Math.sin(e),d=f.getY()-b*Math.cos(e),new JenScript.Point2D(c,d)},this.orthoRightPointAtLength=function(a,b){var c,d,e=this.angleAtLength(a).rad,f=this.pointAtLength(a);return c=f.getX()-b*Math.sin(e),d=f.getY()+b*Math.cos(e),new JenScript.Point2D(c,d)},this.angleAtLength=function(a){var b=2,c=this.pointAtLength(a-b),d=this.pointAtLength(a+b),e=Math.atan2(d.y-c.y,d.x-c.x),f=JenScript.Math.toDegrees(e);return{rad:e,deg:f,toString:function(){return"angle radian :"+e+", angle degree :"+f}}}}}(),function(){JenScript.GlyphMetric=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.GlyphMetric,{init:function(a){a=a||{},this.value=a.value,this.fontSize=void 0!==a.fontSize?a.fontSize:12,this.fontFamily=a.fontFamily,this.metricsLabel=a.metricsLabel,this.dy=void 0!==a.dy?a.dy:-5,this.rotate=void 0!==a.rotate?a.rotate:0,this.lengthOnPath,this.percentOnPath,this.metricPointRef,this.metricAngle,this.pointStart,this.pointEnd,this.fillColor=void 0!==a.fillColor?a.fillColor:"red",this.strokeColor=a.strokeColor},getFontSize:function(){return this.fontSize},setFontSize:function(a){this.fontSize=a},getFontFamily:function(){return this.fontFamily},setFontFamily:function(a){this.fontFamily=a},getValue:function(){return this.value},setValue:function(a){this.value=a},getFillColor:function(){return this.fillColor},setFillColor:function(a){this.fillColor=a},getMetricAngle:function(){return this.metricAngle},setMetricAngle:function(a){this.metricAngle=a},getOrthoLeftPoint:function(a,b){if(void 0===this.metricPointRef)return void 0;var c,d;return c=this.metricPointRef.getX()+b*Math.sin(JenScript.Math.toRadians(this.metricAngle))+a*Math.sin(JenScript.Math.toRadians(this.metricAngle+Math.PI/2)),d=this.metricPointRef.getY()-b*Math.cos(JenScript.Math.toRadians(this.metricAngle))-a*Math.cos(JenScript.Math.toRadians(this.metricAngle+Math.PI/2)),new JenScript.Point2D(c,d)},getOrthoRightPoint:function(a,b){if(void 0===this.metricPointRef)return void 0;var c=this.metricPointRef.getX()+b*Math.sin(JenScript.Math.toRadians(this.metricAngle))+a*Math.sin(JenScript.Math.toRadians(this.metricAngle-Math.PI/2)),d=this.metricPointRef.getY()-b*Math.cos(JenScript.Math.toRadians(this.metricAngle))-a*Math.cos(JenScript.Math.toRadians(this.metricAngle-Math.PI/2));return new JenScript.Point2D(c,d)},getRadialPoint:function(a){if(void 0===this.metricPointRef)return void 0;var b=this.metricPointRef.getX()+a*Math.sin(JenScript.Math.toRadians(this.metricAngle)),c=this.metricPointRef.getY()-a*Math.cos(JenScript.Math.toRadians(this.metricAngle));return new JenScript.Point2D(b,c)},getMetricPointRef:function(){return this.metricPointRef},setMetricPointRef:function(a){this.metricPointRef=a},getDy:function(){return this.dy},setDy:function(a){this.dy=a},getRotate:function(){return this.rotate},setRotate:function(a){this.rotate=a},getLengthOnPath:function(){return this.lengthOnPath},setLengthOnPath:function(a){this.lengthOnPath=a},getPercentOnPath:function(){return this.percentOnPath},setPercentOnPath:function(a){this.percentOnPath=a},getMetricsLabel:function(){return this.metricsLabel},setMetricsLabel:function(a){this.metricsLabel=a},getPointStart:function(){return this.pointStart},setPointStart:function(a){this.pointStart=a},getPointEnd:function(){return this.pointEnd},setPointEnd:function(a){this.pointEnd=a}})}(),function(){JenScript.GeneralMetricsPath=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.GeneralMetricsPath,{init:function(a){console.log("create general metrics path"),a=a||{},this.Id="generalmetricspath"+JenScript.sequenceId++,this.nature=void 0!==a.nature?a.nature:"User",this.projection,this.geometryPath,this.min=a.min,this.max=a.max,this.lengthPathDevice,this.userWidth,this.metrics=[],this.segments=[],this.graphicsContext},getProjectionNature:function(){return this.nature},setProjectionNature:function(a){this.nature=a},getProjection:function(){return projection},setProjection:function(a){this.projection=a},setRange:function(a,b){this.min=a,this.max=b},getMin:function(){return this.min},setMin:function(a){this.min=a},getMax:function(){return this.max},setMax:function(a){this.max=a},createPath:function(){this.svgPathElement=void 0!==this.extPath?this.extPath.attr("id",this.Id+"_path").attr("stroke","none").attr("fill","none").toSVG():(new JenScript.SVGElement).attr("id",this.Id+"_path").name("path").attr("stroke","none").attr("fill","none").attr("d",this.buildPath()).buildHTML(),this.geometryPath=new JenScript.GeometryPath(this.svgPathElement),this.lengthPathDevice=this.geometryPath.lengthOfPath(),void 0!==this.graphicsContext&&(this.graphicsContext.deleteGraphicsElement(this.Id),this.graphicsContext.definesSVG(this.svgPathElement))},addMetric:function(a){this.metrics[this.metrics.length]=a},clearMetric:function(){this.metrics=[]},getMetrics:function(){if(console.log("general metrics path get Metrics"),this.createPath(),void 0!==this.svgPathElement){if(0===this.geometryPath.lengthOfPath())return[];for(var a=0;a<this.metrics.length;a++){var b=this.metrics[a];if(b.getValue()<this.getMin()||b.getValue()>this.getMax())throw new Error("metrics value out of path range :"+b.getValue());var c=b.getValue(),d=this.lengthPathDevice*(c-this.min)/(this.max-this.min),e=d/this.lengthPathDevice*100;b.setLengthOnPath(d),b.setPercentOnPath(e),b.setMetricPointRef(this.geometryPath.pointAtLength(d)),b.setMetricAngle(this.geometryPath.angleAtLength(d).deg);var f=b.getMetricPointRef(),g=(new JenScript.SVGCircle).center(f.x,f.y).radius(3).fill("black");this.graphicsContext.insertSVG(g.toSVG());var h=b.getRadialPoint(10,"Right"),i=(new JenScript.SVGRect).origin(h.x,h.y).size(3,3).fill("red");this.graphicsContext.insertSVG(i.toSVG());var j=b.getOrthoRightPoint(0,15),k=(new JenScript.SVGRect).origin(j.x,j.y).size(3,3).fill("green");this.graphicsContext.insertSVG(k.toSVG());var l=b.getOrthoRightPoint(0,-10),m=(new JenScript.SVGRect).origin(l.x,l.y).size(3,3).fill("blue");this.graphicsContext.insertSVG(m.toSVG());var n=(new JenScript.SVGText).textAnchor("middle").attr("id",this.Id+"_metrics"+a).attr("transform","rotate("+b.getRotate()+" "+b.getMetricPointRef().x+" "+b.getMetricPointRef().y+")").fill(JenScript.RosePalette.HENNA).stroke("white").strokeWidth(.5).fontSize(20),o=(new JenScript.SVGTextPath).xlinkHref("#"+this.Id+"_path").startOffset(b.getPercentOnPath()+"%"),p=(new JenScript.SVGTSpan).dy(b.getDy()).textContent(b.getMetricsLabel());o.methodStretch(),o.spacingExact(),o.child(p.toSVG());var q=o.toSVG();n.child(q);for(var r=(n.toSVG(),0);r<q.getNumberOfChars();r++);}return this.metrics}},getMetricsPoint:function(a){if(a<this.getMin()||a>this.getMax())throw new Error("metrics value out of path range.");if(a===this.getMax())return geometryPath.pointAtLength(geometry.lengthOfPath());var b=this.lengthPathDevice*(a-this.min)/(this.max-this.min);return this.geometryPath.pointAtLength(b)},getSegments:function(){return this.segments},buildPath:function(){for(var a="",b=this.segments,c=this.nature,d=this.projection,e=function(a){return"User"===c?d.userToPixelX(a):"Device"===c?a:void 0},f=function(a){return"User"===c?d.userToPixelY(a):"Device"===c?a:void 0},g=0;g<b.length;g++)"M"===b[g].type&&(a=a+b[g].type+e(b[g].x)+","+f(b[g].y)+" "),"L"===b[g].type&&(a=a+b[g].type+e(b[g].x)+","+f(b[g].y)+" "),"Q"===b[g].type&&(a=a+b[g].type+e(b[g].x1)+","+f(b[g].y1)+" "+e(b[g].x)+","+f(b[g].y)+" "),"C"===b[g].type&&(a=a+b[g].type+e(b[g].x1)+","+f(b[g].y1)+" "+e(b[g].x2)+","+f(b[g].y2)+" "+e(b[g].x)+","+f(b[g].y)+" "),"A"===b[g].type&&(a=a+b[g].type+b[g].rx+","+b[g].ry+" "+b[g].xAxisRotation+" "+b[g].largeArcFlag+","+b[g].sweepFlag+" "+e(b[g].x)+","+f(b[g].y)+" "),"Z"===b[g].type&&(a=a+b[g].type+" ");return this.pathdata=a,a},registerSegment:function(a){return this.segments[this.segments.length]=a,this},moveTo:function(a,b){return this.registerSegment({type:"M",x:a,y:b}),this},lineTo:function(a,b){return this.registerSegment({type:"L",x:a,y:b}),this},curveTo:function(a,b,c,d,e,f){return this.registerSegment({type:"C",x1:a,y1:b,x2:c,y2:d,x:e,y:f}),this},smoothCurveTo:function(a,b,c,d){return this.registerSegment({type:"S",x2:a,y2:b,x:c,y:d}),this},quadTo:function(a,b,c,d){return this.registerSegment({type:"Q",x1:a,y1:b,x:c,y:d}),this},smoothQuadTo:function(a,b){return this.registerSegment({type:"T",x:a,y:b}),this},arcTo:function(a,b,c,d,e,f,g){return this.registerSegment({type:"A",rx:a,ry:b,xAxisRotation:c,largeArcFlag:d,sweepFlag:e,x:f,y:g}),this},close:function(){return this.registerSegment({type:"Z"}),this}})}(),function(){JenScript.SelectorPlugin=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.SelectorPlugin,JenScript.Plugin),JenScript.Model.addMethods(JenScript.SelectorPlugin,{_init:function(a){a=a||{},a.name="SelectorPlugin",JenScript.Plugin.call(this,a),this.press=!1,this.selectors=[],this.contextualized=!0},toString:function(){return"SelectorPlugin"},getGraphicsContext:function(){return new JenScript.Graphics({definitions:this.view.svgSelectorsDefinitions,graphics:this.view.svgSelectorsGraphics})},repaintPlugin:function(){this.repaintPluginPart(JenScript.ViewPart.South),this.repaintPluginPart(JenScript.ViewPart.North),this.repaintPluginPart(JenScript.ViewPart.East),this.repaintPluginPart(JenScript.ViewPart.West),this.repaintPluginPart(JenScript.ViewPart.Device)},repaintPluginPart:function(a){var b=this.getGraphicsContext(a);b.clearGraphics(),this.paintPlugin(b,a)},paintPlugin:function(a,b){this.isLockPassive()||b===JenScript.ViewPart.Device&&this.view.projections.length>1&&this.paintSelectors(a,b)},getView:function(){return this.view},setView:function(a){this.view=a},onPress:function(a,b,c,d){for(var e=this.getView().west+c,f=this.getView().north+d,g=0;g<this.selectors.length;g++)if(this.selectors[g].sensible.getBound2D().contains(e,f)){var h=this.selectors[g].projection;if(!h.isActive())return this.openSelector(this.selectors[g]),!0}return!1},openSelector:function(a){if(!this.openingSelector){var b=this;this.openingSelector=!0;for(var c=a.projection,d=function(c,d){setTimeout(function(){b.processOpeningSelector(a,c),d(c)},30*c)},e=1;10>=e;e++)d(e,function(d){10===d&&(b.getView().setActiveProjection(c),b.openingSelector=!1,document.getElementById(a.Id).setAttribute("x",a.x),document.getElementById(a.Id).setAttribute("y",a.y),document.getElementById(a.Id).setAttribute("width","10%"),document.getElementById(a.Id).setAttribute("height","10%"),b.checkSelectorSelectedOutline())})}},processOpeningSelector:function(a,b){this.openingSelector&&(document.getElementById(a.Id).setAttribute("x",0),document.getElementById(a.Id).setAttribute("y",0),document.getElementById(a.Id).setAttribute("width",10*b+"%"),document.getElementById(a.Id).setAttribute("height",10*b+"%"))},checkSelectorSelectedOutline:function(){for(var a=0;a<this.selectors.length;a++){var b=this.selectors[a];b.projection.isActive()?b.outlineElement.setAttribute("stroke","cyan"):b.outlineElement.setAttribute("stroke","gray")}},paintSelectors:function(a,b){if(!this.isLockPassive()&&b===JenScript.ViewPart.Device){this.selectors=[];for(var c=this.getView(),d=c.getProjections(),e=c.west+10,f=c.north+10,g=0;g<d.length;g++){var h=d[g],i=h.svgRootElement.cloneNode(!0);if(void 0!==i){var j="selector_"+c.Id+"_"+h.Id;i.removeAttribute("xmlns"),i.removeAttribute("version"),i.setAttribute("id",j),i.setAttribute("x",e),i.setAttribute("opacity",1),i.setAttribute("y",f),i.setAttribute("width","10%"),i.setAttribute("height","10%"),i.setAttribute("preserveAspectRatio","xMinYMin"),a.insertSVG(i);var k=(new JenScript.SVGRect).origin(e,f).size(.1*c.width,.1*c.height);k.fillNone().strokeWidth(.6);var l=k.toSVG();a.insertSVG(l),this.selectors[this.selectors.length]={Id:j,x:e,y:f,projection:h,svg:i,outlineElement:l,sensible:k},e=e+.1*c.width+10}}this.checkSelectorSelectedOutline()}}})}(),function(){JenScript.ViewBackground=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.ViewBackground,{init:function(a){a=a||{},this.Id="background"+JenScript.sequenceId++,this.clipId="backgroundclip"+JenScript.sequenceId++,this.clipable=!1},getId:function(){return this.Id},getClipId:function(){return this.clipId},getGraphics:function(){return this.g2d},isClipable:function(){return this.clipable},clip:function(a){this.isClipable()&&a.clip(this.getClipId())},getClip:function(){var a=this.view.getBackgroundClip(this),b=void 0;if(a.length>0){b=(new JenScript.SVGClipPath).Id(this.clipId);for(var c=0;c<a.length;c++)b.appendPath(a[c]);

}return b},paint:function(){this.getGraphics().clearGraphics();var a=this.getClip();void 0!==a&&(this.getGraphics().definesSVG(a.toSVG()),this.clipable=!0),this.paintViewBackground(this.view,this.getGraphics())},getBackgroundPath:function(){throw new Error("Abstract View Background, getBackgroundPath method should be provide by override.")},paintViewBackground:function(){throw new Error("Abstract View Background, paintViewBackground method should be provide by override.")}}),JenScript.RectViewBackground=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.RectViewBackground,JenScript.ViewBackground),JenScript.Model.addMethods(JenScript.RectViewBackground,{_init:function(a){a=a||{},this.opacity=void 0!==a.opacity?a.opacity:1,this.cornerRadius=void 0!==a.cornerRadius?a.cornerRadius:10,JenScript.ViewBackground.call(this,a)},getBackgroundPath:function(){return(new JenScript.SVGRect).origin(0,0).size(this.view.width,this.view.height).radius(this.cornerRadius,this.cornerRadius)}}),JenScript.ViewOutlineBackground=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.ViewOutlineBackground,JenScript.RectViewBackground),JenScript.Model.addMethods(JenScript.ViewOutlineBackground,{__init:function(a){a=a||{},this.strokeColor=void 0!==a.strokeColor?a.strokeColor:"black",this.strokeWidth=void 0!==a.strokeWidth?a.strokeWidth:1,JenScript.RectViewBackground.call(this,a)},paintViewBackground:function(a,b){var c=this.cornerRadius,d=this.cornerRadius,e=this.strokeWidth,f=(new JenScript.SVGPath).Id(this.Id);f.moveTo(0,d).arcTo(d,d,0,0,1,d,0).lineTo(a.width-c,0).arcTo(d,d,0,0,1,a.width,d).lineTo(a.width,a.height-d).arcTo(d,d,0,0,1,a.width-d,a.height).lineTo(d,a.height).arcTo(d,d,0,0,1,0,a.height-d).lineTo(0,d),f.moveTo(e,d+e).arcTo(d,d,0,0,1,d+e,e).lineTo(a.width-d-e,e).arcTo(d,d,0,0,1,a.width-e,d+e).lineTo(a.width-e,a.height-d-e).arcTo(d,d,0,0,1,a.width-d-e,a.height-e).lineTo(d+e,a.height-e).arcTo(d,d,0,0,1,e,a.height-d-e).lineTo(e,d+e),f.attr("fill-rule","evenodd").opacity(this.opacity),this.clip(f),f.fill(this.strokeColor).strokeNone().opacity(this.opacity),b.insertSVG(f.toSVG())}}),JenScript.GradientViewBackground=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.GradientViewBackground,JenScript.RectViewBackground),JenScript.Model.addMethods(JenScript.GradientViewBackground,{__init:function(a){a=a||{},this.gradientId="gradient"+JenScript.sequenceId++,this.shader=void 0!==a.shader?a.shader:{percents:["0%","100%"],colors:["rgb(32, 39, 55)","black"]},JenScript.RectViewBackground.call(this,a)},paintViewBackground:function(a,b){var c=(new JenScript.SVGLinearGradient).Id(this.gradientId).from(0,0).to(0,a.getHeight()).shade(this.shader.percents,this.shader.colors);b.definesSVG(c.toSVG());var d=(new JenScript.SVGRect).Id(this.Id).origin(0,0).size(a.width,a.height).radius(this.cornerRadius,this.cornerRadius);d.fillURL(this.gradientId).strokeNone().opacity(this.opacity),this.clip(d),b.insertSVG(d.toSVG())}}),JenScript.TexturedViewBackground=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.TexturedViewBackground,JenScript.RectViewBackground),JenScript.Model.addMethods(JenScript.TexturedViewBackground,{__init:function(a){this.texture=void 0!==a.texture?a.texture:JenScript.Texture.getTriangleCarbonFiber(),JenScript.RectViewBackground.call(this,a)},paintViewBackground:function(a,b){a.definesTexture(this.texture);var c=(new JenScript.SVGRect).Id(this.Id).origin(0,0).size(a.width,a.height).radius(this.cornerRadius,this.cornerRadius);c.fillURL(this.texture.getId()).strokeNone().opacity(this.opacity),this.clip(c),b.insertSVG(c.toSVG())}}),JenScript.DualViewBackground=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.DualViewBackground,JenScript.RectViewBackground),JenScript.Model.addMethods(JenScript.DualViewBackground,{__init:function(a){this.texture1=a.texture1,this.texture2=a.texture2,this.color1=void 0!==a.color1?a.color1:"black",this.color2=void 0!==a.color2?a.color2:"rgb(32, 39, 55)",JenScript.RectViewBackground.call(this,a)},paintViewBackground:function(a,b){void 0!==this.texture1&&a.definesTexture(this.texture1),void 0!==this.texture2&&a.definesTexture(this.texture2);var c=this.cornerRadius,d=(new JenScript.SVGPath).Id(this.Id);d.moveTo(0,c).quadTo(0,0,c,0).lineTo(a.width-c,0).quadTo(a.width,0,a.width,c).lineTo(a.width,a.height-c).quadTo(a.width,a.height,a.width-c,a.height).lineTo(c,a.height).quadTo(0,a.height,0,a.height-c).lineTo(0,c).moveTo(a.west,a.north).lineTo(a.width-a.east,a.north).lineTo(a.width-a.east,a.height-a.south).lineTo(a.west,a.height-a.south).lineTo(a.west,a.north),d.attr("fill-rule","evenodd").opacity(this.opacity),void 0!==this.texture1?d.fillURL(this.texture1.getId()):d.fill(this.color1),this.clip(d),b.insertSVG(d.toSVG());var e=(new JenScript.SVGRect).Id(this.Id).origin(a.west,a.north).size(a.devicePart.width,a.devicePart.height).opacity(this.opacity).strokeNone().fillNone();void 0!==this.texture2?e.fillURL(this.texture2.getId()):e.fill(this.color2),this.clip(e),b.insertSVG(e.toSVG())}})}(),function(){JenScript.ViewForeground=function(){this.init()},JenScript.Model.addMethods(JenScript.ViewForeground,{init:function(a){a=a||{},this.Id="foreground"+JenScript.sequenceId++,this.clipId="foregroundclip"+JenScript.sequenceId++,this.clipable=!1},getId:function(){return this.Id},getGraphics:function(){return this.g2d},getClipId:function(){return this.clipId},isClipable:function(){return this.clipable},clip:function(a){this.isClipable()&&a.clip(this.getClipId())},getClip:function(){var a=this.view.getBackgroundClip(this),b=void 0;if(a.length>0){b=(new JenScript.SVGClipPath).Id(this.clipId);for(var c=0;c<a.length;c++)b.appendPath(a[c])}return b},paint:function(){this.getGraphics().clearGraphics();var a=this.getClip();void 0!==a&&(this.getGraphics().definesSVG(a.toSVG()),this.clipable=!0),this.paintViewForeground(this.view,this.getGraphics())},paintViewForeground:function(){throw new Error("Abstract View Foreground, method should be overriden.")}}),JenScript.TextViewForeground=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.TextViewForeground,JenScript.ViewForeground),JenScript.Model.addMethods(JenScript.TextViewForeground,{_init:function(a){if(this.text=a.text,this.x=a.x,this.y=a.y,this.textColor=void 0!==a.textColor?a.textColor:JenScript.createColor(),this.textAnchor=void 0!==a.textAnchor?a.textAnchor:"start",this.opacity=void 0!==a.opacity?a.opacity:1,this.fontSize=void 0!==a.fontSize?a.fontSize:9,void 0===this.x)throw new Error("TextViewForeground, x undefined, it should be supplied");if(void 0===this.y)throw new Error("TextViewForeground, y undefined, it should be supplied");JenScript.ViewForeground.call(this,a)},setText:function(a){this.text=a,this.getGraphics().deleteGraphicsElement("text_"+this.Id),this.paintViewForeground(this.view,this.getGraphics())},paintViewForeground:function(a,b){var c=(new JenScript.SVGElement).name("text").attr("id","text_"+this.Id).attr("x",this.x).attr("y",this.y).attr("font-size",this.fontSize).attr("fill",this.textColor).attr("fill-opacity",this.opacity).attr("text-anchor",this.textAnchor).textContent(this.text);this.svg=c.buildHTML(),b.insertSVG(this.svg)}}),JenScript.GlossViewForeground=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.GlossViewForeground,JenScript.ViewForeground),JenScript.Model.addMethods(JenScript.GlossViewForeground,{_init:function(a){a=a||{},this.gradientId="gradient"+JenScript.sequenceId++,this.clipId="clip"+JenScript.sequenceId++,this.foregroundId="foreground"+JenScript.sequenceId++,this.heightRatio=a.heightRatio?a.heightRatio:.25,this.heightQuadDeviation=a.heightQuadDeviation?a.heightQuadDeviation:50,JenScript.ViewForeground.call(this,a)},paintViewForeground:function(a,b){var c=(new JenScript.SVGPath).moveTo(0,0).lineTo(0,this.heightRatio*a.height).quadTo(a.width/2,this.heightRatio*a.height+this.heightQuadDeviation,a.width,this.heightRatio*a.height).lineTo(a.width,0).close();this.clip(c);var d=["20%","100%"],e=["rgb(255,255,255)","rgb(255,255,255)"],f=(new JenScript.SVGLinearGradient).Id(this.gradientId).from(0,0).to(0,this.heightRatio*a.getHeight()).shade(d,e,[0,.2]);b.definesSVG(f.toSVG()),b.insertSVG(c.strokeNone().fill("url(#"+this.gradientId+")").toSVG())}})}(),function(){JenScript.Model.addMethods(JenScript.ViewPartComponent,{init:function(a){a=a||{},this.part=a.part,this.width=a.width,this.height=a.height,this.view=a.view,this.Id=this.part+JenScript.sequenceId++},getId:function(){return this.Id},getWidth:function(){return this.width},getHeight:function(){return this.height},on:function(a,b,c,d){var e=this.view.getWidgetPlugin()["on"+a],f=this.view.getSelectorPlugin()["on"+a];if(e.call(this.view.getWidgetPlugin(),b,this.part,c,d),f.call(this.view.getSelectorPlugin(),b,this.part,c,d),void 0!==this.view&&void 0!==this.view.getActiveProjection())for(var g=this.view.getActiveProjection(),h=g.getPlugins(),i=0;i<h.length;i++){var j=h[i]["on"+a];j.call(h[i],b,this.part,c,d)}}})}(),function(){JenScript.Graphics=function(a){this.init(a),this.definitions=a.definitions,this.graphics=a.graphics},JenScript.Model.addMethods(JenScript.Graphics,{init:function(a){a=a||{}},clearGraphics:function(a){if(void 0===a){for(;this.definitions.firstChild;)this.definitions.removeChild(this.definitions.firstChild);for(;this.graphics.firstChild;)this.graphics.removeChild(this.graphics.firstChild)}else{var b=document.getElementById(a);if(null!==b)for(;b.firstChild;)b.removeChild(b.firstChild)}},getGraphicsElement:function(a){return document.getElementById(a)},deleteGraphicsElement:function(a){var b=document.getElementById(a);if(void 0!==b&&null!==b&&void 0!==b.parentNode&&null!==b.parentNode){var c=b.parentNode.removeChild(b);return c}},definesTexture:function(a){var b=a.pattern,c=a.definitions;if(void 0!==c)for(var d=0;d<c.length;d++){var e=c[d];this.definitions.appendChild(e.toSVG())}void 0!==b&&this.definitions.appendChild(b.Id(a.getId()).toSVG())},definesSVG:function(a){this.definitions.appendChild(a)},insertSVG:function(a,b){void 0===b?this.graphics.appendChild(a):b.appendChild(a)}}),JenScript.SVGElement=function(){var a=function(){this.attributes={},this.childs=[],this.name=function(a){return this.n=a,this},this.textContent=function(a){return this.t=a,this},this.attr=function(a,b){return void 0!==a&&void 0!==b?(this.attributes[a]={name:a,value:b},this):void 0!==a&&void 0===b?this.attributes[a]:void 0},this.attrNS=function(a,b,c){return void 0!==b&&void 0!==c?(this.attributes[b]={ns:a,name:b,value:c},this):void 0!==b&&void 0===c?this.attributes[b]:void 0},this.removeAttr=function(a){return void 0!==a?(delete this.attributes[a],this):void 0},this.child=function(a){return void 0!==a&&(this.childs[this.childs.length]=a),this},this.buildHTML=function(){var a=document.createElementNS(JenScript.SVG_NS,this.n);for(var b in this.attributes)void 0===this.attributes[b].ns?a.setAttribute(this.attributes[b].name,this.attributes[b].value):a.setAttributeNS(this.attributes[b].ns,this.attributes[b].name,this.attributes[b].value);for(var c=0;c<this.childs.length;c++)a.appendChild(this.childs[c]);if(void 0!==this.t){var d=document.createTextNode(this.t);a.appendChild(d)}return a}},b=new a;return b},JenScript.SVGGeometry=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.SVGGeometry,{init:function(){this.rootBuilder=new JenScript.SVGElement},builder:function(){return this.rootBuilder},toSVG:function(){return this.rootBuilder.buildHTML()},attr:function(a,b){return void 0!==a&&void 0!==b?(this.rootBuilder.attr(a,b),this):void 0!==a&&void 0===b?this.rootBuilder.attr(a):void 0},attrNS:function(a,b,c){return void 0!==b&&void 0!==c?(this.rootBuilder.attrNS(a,b,c),this):void 0!==b&&void 0===c?this.rootBuilder.attr(b):void 0},name:function(a){return this.rootBuilder.attr("name",a),this},child:function(a){return this.rootBuilder.child(a),this},textContent:function(a){return this.rootBuilder.textContent(a),this},Id:function(a){return this.rootBuilder.attr("id",a),this},style:function(a){return this.rootBuilder.attr("style",a),this},stroke:function(a){return this.rootBuilder.attr("stroke",a),this},strokeNone:function(){return this.rootBuilder.attr("stroke","none"),this},strokeWidth:function(a){return this.rootBuilder.attr("stroke-width",a),this},strokeLineJoin:function(a){return this.rootBuilder.attr("stroke-linejoin",a),this},strokeLineCap:function(a){return this.rootBuilder.attr("stroke-linecap",a),this},strokeOpacity:function(a){return this.rootBuilder.attr("stroke-opacity",a),this},fill:function(a){return this.rootBuilder.attr("fill",a),this},fillURL:function(a){return this.rootBuilder.attr("fill","url(#"+a+")"),this},fillNone:function(){return this.rootBuilder.attr("fill","none"),this},fillOpacity:function(a){return this.rootBuilder.attr("fill-opacity",a),this},opacity:function(a){return this.rootBuilder.attr("opacity",a),this},clip:function(a){return this.rootBuilder.attr("clip-path","url(#"+a+")"),this},fontSize:function(a){return this.rootBuilder.attr("font-size",a),this},fontFamily:function(a){return this.rootBuilder.attr("font-family",a),this},pointerEvents:function(a){return this.rootBuilder.attr("pointer-events",a),this}}),JenScript.SVGViewBox=function(){this._init()},JenScript.Model.inheritPrototype(JenScript.SVGViewBox,JenScript.SVGGeometry),JenScript.Model.addMethods(JenScript.SVGViewBox,{_init:function(){JenScript.SVGGeometry.call(this,{}),this.builder().name("svg").attr("xmlns",JenScript.SVG_NS).attr("xmlns:xlink",JenScript.XLINK_NS).attr("version",JenScript.SVG_VERSION)},viewBox:function(a){return this.attr("viewBox",a),this},width:function(a){return this.attr("width",a),this},height:function(a){return this.attr("height",a),this}}),JenScript.SVGRect=function(){this._init()},JenScript.Model.inheritPrototype(JenScript.SVGRect,JenScript.SVGGeometry),JenScript.Model.addMethods(JenScript.SVGRect,{_init:function(){JenScript.SVGGeometry.call(this,{}),this.builder().name("rect")},getBound2D:function(){return new JenScript.Bound2D(this.attr("x").value,this.attr("y").value,this.attr("width").value,this.attr("height").value)},origin:function(a,b){return this.attr("x",a),this.attr("y",b),this},size:function(a,b){return this.attr("width",a),this.attr("height",b),this},radius:function(a,b){return this.attr("rx",a),this.attr("ry",b),this}}),JenScript.SVGPolygon=function(){this._init()},JenScript.Model.inheritPrototype(JenScript.SVGPolygon,JenScript.SVGGeometry),JenScript.Model.addMethods(JenScript.SVGPolygon,{_init:function(){JenScript.SVGGeometry.call(this,{}),this.builder().name("polygon"),this.points=[]},buildPolygon:function(){for(var a="",b=0;b<this.points.length;b++)a=a+this.points[b].getX()+","+this.points[b].getY()+" ";return a},point:function(a,b){return this.points[this.points.length]=new JenScript.Point2D(a,b),this.attr("points",this.buildPolygon()),this}}),JenScript.SVGClipPath=function(){this._init()},JenScript.Model.inheritPrototype(JenScript.SVGClipPath,JenScript.SVGGeometry),JenScript.Model.addMethods(JenScript.SVGClipPath,{_init:function(){JenScript.SVGGeometry.call(this,{}),this.builder().name("clipPath").attr("clipPathUnits","userSpaceOnUse")},appendPath:function(a){return this.child(a.toSVG()),this}}),JenScript.SVGLine=function(){this._init()},JenScript.Model.inheritPrototype(JenScript.SVGLine,JenScript.SVGGeometry),JenScript.Model.addMethods(JenScript.SVGLine,{_init:function(){JenScript.SVGGeometry.call(this,{}),this.builder().name("line")},from:function(a,b){return this.attr("x1",a),this.attr("y1",b),this},to:function(a,b){return this.attr("x2",a),this.attr("y2",b),this}}),JenScript.SVGLinearGradient=function(){this._init()},JenScript.Model.inheritPrototype(JenScript.SVGLinearGradient,JenScript.SVGGeometry),JenScript.Model.addMethods(JenScript.SVGLinearGradient,{_init:function(){JenScript.SVGGeometry.call(this,{}),this.builder().name("linearGradient").attr("gradientUnits","userSpaceOnUse")},from:function(a,b){return this.attr("x1",a),this.attr("y1",b),this},to:function(a,b){return this.attr("x2",a),this.attr("y2",b),this},shade:function(a,b,c){for(var d=a.length,e=0;d>e;e++){var f=1;void 0!==c&&(f=c[e]);var g=(new JenScript.SVGElement).name("stop").attr("offset",a[e]).attr("stop-color",b[e]).attr("stop-opacity",f).buildHTML();this.child(g)}return this}}),JenScript.SVGRadialGradient=function(){this._init()},JenScript.Model.inheritPrototype(JenScript.SVGRadialGradient,JenScript.SVGGeometry),JenScript.Model.addMethods(JenScript.SVGRadialGradient,{_init:function(){JenScript.SVGGeometry.call(this,{}),this.builder().name("radialGradient").attr("gradientUnits","userSpaceOnUse")},center:function(a,b){return this.attr("cx",a),this.attr("cy",b),this},focus:function(a,b){return this.attr("fx",a),this.attr("fy",b),this},radius:function(a){return this.attr("r",a),this},spread:function(a){return this.attr("spreadMethod",a),this},transform:function(a){return this.attr("gradientTransform",a),this},shade:function(a,b){for(var c=a.length,d=0;c>d;d++){var e=(new JenScript.SVGElement).name("stop").attr("offset",a[d]).attr("style","stop-color:"+b[d]).buildHTML();this.child(e)}return this}}),JenScript.SVGFilter=function(){this._init()},JenScript.Model.inheritPrototype(JenScript.SVGFilter,JenScript.SVGGeometry),JenScript.Model.addMethods(JenScript.SVGFilter,{_init:function(){JenScript.SVGGeometry.call(this,{}),this.builder().name("filter").attr("filterUnits","userSpaceOnUse")},from:function(a,b){return this.attr("x",a),this.attr("y",b),this},size:function(a,b){return this.attr("width",a),this.attr("height",b),this}}),JenScript.SVGMask=function(){this._init()},JenScript.Model.inheritPrototype(JenScript.SVGMask,JenScript.SVGGeometry),JenScript.Model.addMethods(JenScript.SVGMask,{_init:function(){JenScript.SVGGeometry.call(this,null),this.builder().name("mask").attr("maskUnits","userSpaceOnUse")},from:function(a,b){return this.attr("x",a),this.attr("y",b),this},size:function(a,b){return this.attr("width",a),this.attr("height",b),this}}),JenScript.SVGPattern=function(){this._init()},JenScript.Model.inheritPrototype(JenScript.SVGPattern,JenScript.SVGGeometry),JenScript.Model.addMethods(JenScript.SVGPattern,{_init:function(){JenScript.SVGGeometry.call(this,null),this.builder().name("pattern").attr("patternUnits","userSpaceOnUse")},origin:function(a,b){return this.attr("x",a),this.attr("y",b),this},size:function(a,b){return this.attr("width",a),this.attr("height",b),this}}),JenScript.SVGScript=function(){this._init()},JenScript.Model.inheritPrototype(JenScript.SVGScript,JenScript.SVGGeometry),JenScript.Model.addMethods(JenScript.SVGScript,{_init:function(){JenScript.SVGGeometry.call(this,null),this.builder().name("script").attr("type","application/ecmascript")},script:function(a){return this.textContent("\n//<![CDATA[\n"+a+"\n//]]>"),this}}),JenScript.SVGGroup=function(){this._init()},JenScript.Model.inheritPrototype(JenScript.SVGGroup,JenScript.SVGGeometry),JenScript.Model.addMethods(JenScript.SVGGroup,{_init:function(){JenScript.SVGGeometry.call(this,null),this.builder().name("g")}}),JenScript.SVGDefinitions=function(){this._init()},JenScript.Model.inheritPrototype(JenScript.SVGDefinitions,JenScript.SVGGeometry),JenScript.Model.addMethods(JenScript.SVGDefinitions,{_init:function(){JenScript.SVGGeometry.call(this,null),this.builder().name("defs")}}),JenScript.SVGCircle=function(){this._init()},JenScript.Model.inheritPrototype(JenScript.SVGCircle,JenScript.SVGGeometry),JenScript.Model.addMethods(JenScript.SVGCircle,{_init:function(){JenScript.SVGGeometry.call(this,null),this.builder().name("circle")},center:function(a,b){return this.attr("cx",a),this.attr("cy",b),this},radius:function(a){return this.attr("r",a),this}}),JenScript.SVGText=function(){this._init()},JenScript.Model.inheritPrototype(JenScript.SVGText,JenScript.SVGGeometry),JenScript.Model.addMethods(JenScript.SVGText,{_init:function(){JenScript.SVGGeometry.call(this,null),this.builder().name("text")},location:function(a,b){return this.attr("x",a),this.attr("y",b),this},textAnchor:function(a){return this.attr("text-anchor",a),this}}),JenScript.SVGImage=function(){this._init()},JenScript.Model.inheritPrototype(JenScript.SVGImage,JenScript.SVGGeometry),JenScript.Model.addMethods(JenScript.SVGImage,{_init:function(){JenScript.SVGGeometry.call(this,null),this.builder().name("image")},xlinkHref:function(a){return this.attrNS(JenScript.XLINK_NS,"href",a),this},origin:function(a,b){return this.attr("x",a),this.attr("y",b),this},size:function(a,b){return this.attr("width",a),this.attr("height",b),this}}),JenScript.SVGTextPath=function(){this._init()},JenScript.Model.inheritPrototype(JenScript.SVGTextPath,JenScript.SVGGeometry),JenScript.Model.addMethods(JenScript.SVGTextPath,{_init:function(){JenScript.SVGGeometry.call(this,null),this.builder().name("textPath")},xlinkHref:function(a){return this.attrNS(JenScript.XLINK_NS,"href",a),this},startOffset:function(a){return this.attr("startOffset",a),this},method:function(a){return this.attr("method",a),this},methodAlign:function(){return this.attr("method","align"),this},methodStretch:function(){return this.attr("method","stretch"),this},spacing:function(a){return this.attr("spacing",a),this},spacingAuto:function(){return this.attr("spacing","auto"),this},spacingExact:function(){return this.attr("spacing","exact"),this}}),JenScript.SVGTSpan=function(){this._init()},JenScript.Model.inheritPrototype(JenScript.SVGTSpan,JenScript.SVGGeometry),JenScript.Model.addMethods(JenScript.SVGTSpan,{_init:function(){JenScript.SVGGeometry.call(this,null),this.builder().name("tspan")},dx:function(a){return this.attr("dx",a),this},dy:function(a){return this.attr("dy",a),this}}),JenScript.SVGPath=function(){this._init()},JenScript.Model.inheritPrototype(JenScript.SVGPath,JenScript.SVGGeometry),JenScript.Model.addMethods(JenScript.SVGPath,{_init:function(){JenScript.SVGGeometry.call(this,null),this.builder().name("path"),this.segments=[],this.buildAuto=!0},getSegments:function(){return this.segments},pointAtLength:function(a){return this.geometryPath.pointAtLength(a)},angleAtLength:function(a){return this.geometryPath.angleAtLength(a)},buildPath:function(){for(var a="",b=this.segments,c=0;c<b.length;c++)"M"===b[c].type&&(a=a+b[c].type+b[c].x+","+b[c].y+" "),"L"===b[c].type&&(a=a+b[c].type+b[c].x+","+b[c].y+" "),"Q"===b[c].type&&(a=a+b[c].type+b[c].x1+","+b[c].y1+" "+b[c].x+","+b[c].y+" "),"C"===b[c].type&&(a=a+b[c].type+b[c].x1+","+b[c].y1+" "+b[c].x2+","+b[c].y2+" "+b[c].x+","+b[c].y+" "),"A"===b[c].type&&(a=a+b[c].type+b[c].rx+","+b[c].ry+" "+b[c].xAxisRotation+" "+b[c].largeArcFlag+","+b[c].sweepFlag+" "+b[c].x+","+b[c].y+" "),"Z"===b[c].type&&(a=a+b[c].type+" ");return this.pathdata=a,a},finalyze:function(){this.attr("d",this.buildPath())},registerSegment:function(a){return this.segments[this.segments.length]=a,this.buildAuto&&this.attr("d",this.buildPath()),this},moveTo:function(a,b){return this.registerSegment({type:"M",x:a,y:b}),this},lineTo:function(a,b){return this.registerSegment({type:"L",x:a,y:b}),this},curveTo:function(a,b,c,d,e,f){return this.registerSegment({type:"C",x1:a,y1:b,x2:c,y2:d,x:e,y:f}),this},smoothCurveTo:function(a,b,c,d){return this.registerSegment({type:"S",x2:a,y2:b,x:c,y:d}),this},quadTo:function(a,b,c,d){return this.registerSegment({type:"Q",x1:a,y1:b,x:c,y:d}),this},smoothQuadTo:function(a,b){return this.registerSegment({type:"T",x:a,y:b}),this},arcTo:function(a,b,c,d,e,f,g){return this.registerSegment({type:"A",rx:a,ry:b,xAxisRotation:c,largeArcFlag:d,sweepFlag:e,x:f,y:g}),this},close:function(){return this.registerSegment({type:"Z"}),this}})}(),function(){JenScript.Model.addMethods(JenScript.View,{toString:function(){return"JenScript.View[name :"+this.name+" , Id : "+this.Id+"]"},init:function(a){a=a||{},this.part=JenScript.ViewPart.View,this.name=a.name,this.Id="view_"+this.name,this.SVG_NS="http://www.w3.org/2000/svg",this.XLINK_NS="http://www.w3.org/1999/xlink";var b=document.getElementById(this.name);if(null===b||void 0===b){console.log("jenscript view container "+b+" does not exist");var c=document.createElement("div");c.setAttribute("id",this.name),document.body.appendChild(c)}else for(;b.hasChildNodes();)b.removeChild(b.lastChild);if(this.width=void 0!==a.width?a.width:document.getElementById(this.name).clientWidth,this.height=void 0!==a.height?a.height:document.getElementById(this.name).clientHeight,this.scale=void 0!==a.scale?a.scale:1,void 0!==a.holders&&(a.west=void 0!==a.west?a.west:a.holders,a.east=void 0!==a.east?a.east:a.holders,a.south=void 0!==a.south?a.south:a.holders,a.north=void 0!==a.north?a.north:a.holders),this.west=void 0!==a.west?a.west:40,this.east=void 0!==a.east?a.east:40,this.north=void 0!==a.north?a.north:40,this.south=void 0!==a.south?a.south:40,this.width-this.west-this.east<0)throw new Error("View width is two small with e/w holders");if(this.height-this.north-this.south<0)throw new Error("View height is two small with n/s holders");this.viewBackgrounds=[],this.backgroundEnable=!0,this.viewForegrounds=[],this.foregroundEnable=!0,this.projections=[],this.activeProjection,this.folderGuardInterval=4,this.listeners=[],this.dispatcherStrategy=void 0!==a.dispatcher?a.dispatcher:"foreground",this.widgetPlugin=new JenScript.WidgetPlugin,this.widgetPlugin.setView(this);var d=this;this.addViewListener("projectionRegister",function(){d.widgetPlugin.repaintPlugin("view listener 1")},"widget plugin attach :view projection register listener"),this.selectorPlugin=new JenScript.SelectorPlugin,this.selectorPlugin.setView(this);var d=this;this.addViewListener("projectionRegister",function(){d.selectorPlugin.repaintPlugin("view listener 2")},"selector plugin attach :view projection register listener"),this.createPartComponents(),this.contextualizeGraphics();var e=new JenScript.TextViewForeground({fontSize:6,x:this.west,y:this.north-2,text:"JenScript "+JenScript.version+" - www.jensoftapi.com"});this.addViewForeground(e)},getBackgroundClip:function(a){for(var b=[],c=0;c<this.viewBackgrounds.length;c++){var d=this.viewBackgrounds[c];if(d.Id===a.Id)return b;var e=d.getBackgroundPath();b[b.length]=e}return b},addViewBackground:function(a){this.viewBackgrounds[this.viewBackgrounds.length]=a,this.contextualizeBackground(a)},removeViewBackground:function(a){if(void 0===a.Id)return null;for(var b=[],c=0;c<this.viewBackgrounds.length;c++){var d=this.viewBackgrounds[c];d.Id===a.Id?a.getGraphics().clearGraphics():b[b.length]=d}this.viewBackgrounds=b},contextualizeBackground:function(a){var b=(new JenScript.SVGGroup).Id(a.Id).toSVG(),c=(new JenScript.SVGGroup).Id(this.Id+"_background_definitions").toSVG(),d=(new JenScript.SVGGroup).Id(this.Id+"_background_graphics").toSVG();b.appendChild(c),b.appendChild(d),this.svgRootBackground.appendChild(b);var e=new JenScript.Graphics({definitions:c,graphics:d});a.view=this,a.g2d=e,a.paint.call(a,{})},addViewForeground:function(a){this.viewForegrounds[this.viewForegrounds.length]=a,this.contextualizeForeground(a)},removeViewForeground:function(a){if(void 0===a.Id)return null;for(var b=[],c=0;c<this.viewForegrounds.length;c++){var d=this.viewForegrounds[c];d.Id===a.Id?a.getGraphics().clearGraphics():b[b.length]=d}this.viewForegrounds=b},contextualizeForeground:function(a){var b=(new JenScript.SVGGroup).Id(a.Id).toSVG(),c=(new JenScript.SVGGroup).Id(this.Id+"_foreground_definitions").toSVG(),d=(new JenScript.SVGGroup).Id(this.Id+"_foreground_graphics").toSVG();b.appendChild(c),b.appendChild(d),this.svgRootForeground.appendChild(b);var e=new JenScript.Graphics({definitions:c,graphics:d});a.view=this,a.g2d=e,a.paint.call(a,{})},addViewListener:function(a,b,c){if(void 0===c)throw new Error("View listener, listener name should be supplied.");var d={action:a,onEvent:b,name:c};this.listeners[this.listeners.length]=d},fireViewEvent:function(a){for(var b=0;b<this.listeners.length;b++){var c=this.listeners[b];a===c.action&&c.onEvent(this)}},createPartComponents:function(){this.devicePart=new JenScript.ViewPartComponent({part:JenScript.ViewPart.Device,width:this.width-this.west-this.east,height:this.height-this.north-this.south,view:this}),this.westPart=new JenScript.ViewPartComponent({part:JenScript.ViewPart.West,width:this.west,height:this.height-this.north-this.south,view:this}),this.eastPart=new JenScript.ViewPartComponent({part:JenScript.ViewPart.East,width:this.east,height:this.height-this.north-this.south,view:this}),this.southPart=new JenScript.ViewPartComponent({part:JenScript.ViewPart.South,width:this.width,height:this.south,view:this}),this.northPart=new JenScript.ViewPartComponent({part:JenScript.ViewPart.North,width:this.width,height:this.north,view:this})},getId:function(){return this.Id},getWidth:function(){return this.width},getHeight:function(){return this.height},getWidgetPlugin:function(){return this.widgetPlugin},getSelectorPlugin:function(){return this.selectorPlugin},getPlaceHolderAxisEast:function(){return this.east},getPlaceHolderAxisWest:function(){return this.west},getPlaceHolderAxisSouth:function(){return this.south},getPlaceHolderAxisNorth:function(){return this.north},setBackgroundEnable:function(a){this.backgroundEnable=a},registerProjection:function(a){a.setView(this),this.projections[this.projections.length]=a,this.activeProjection=a,this.activeProjection.setActive(!0),this.projections.sort(function(a,b){var c=a.isActive(),d=b.isActive();return c&&!d?1:-1}),this.contextualizeGraphicsProjection(a),this.setActiveProjection(a),this.fireViewEvent("projectionRegister")},getActiveProjection:function(){return this.activeProjection},getProjections:function(){return this.projections},setActiveProjection:function(a){for(var b=0;b<this.projections.length;b++){var c=this.projections[b];c.Id!==a.Id&&c.isActive()&&(c.setActive(!1),this.fireViewEvent("projectionPassive"))}this.activeProjection.Id!==a.Id&&(this.activeProjection=a,this.activeProjection.setActive(!0),this.fireViewEvent("projectionActive"))},getComponent:function(a){return a===JenScript.ViewPart.North?this.northPart:a===JenScript.ViewPart.South?this.southPart:a===JenScript.ViewPart.East?this.eastPart:a===JenScript.ViewPart.West?this.westPart:a===JenScript.ViewPart.Device?this.devicePart:void 0},contextualizeGraphics:function(){this.createViewNode(),"background"===this.dispatcherStrategy&&this.createDispatcherNode(),this.createViewDefsNode(),this.createBackgroundNode(),this.createProjectionsNode(),this.createSelectorsNode(),this.createWidgetsNode(),this.createForegroundNode(),"foreground"===this.dispatcherStrategy&&this.createDispatcherNode()},createViewNode:function(){var a=this.scale*parseFloat(this.width),b=this.scale*parseFloat(this.height);this.svgRootElement=(new JenScript.SVGViewBox).Id(this.Id).viewBox("0 0 "+this.width+" "+this.height).width(a).height(b).toSVG();var c=document.getElementById(this.name);c.appendChild(this.svgRootElement)},createViewDefsNode:function(){this.svgViewGlobalDefinitions=(new JenScript.SVGGroup).Id(this.Id+"_global_definitions").toSVG(),this.svgRootElement.appendChild(this.svgViewGlobalDefinitions);var a=JenScript.Texture.getTriangleCarbonFiber();a.Id="texture_carbon1",this.definesTexture(a);var b=JenScript.Texture.getSquareCarbonFiber();b.Id="texture_carbon2",this.definesTexture(b)},definesTexture:function(a){var b=a.pattern,c=a.definitions;if(void 0!==c)for(var d=0;d<c.length;d++){var e=c[d];this.svgViewGlobalDefinitions.appendChild(e.toSVG())}void 0!==b&&this.svgViewGlobalDefinitions.appendChild(b.Id(a.getId()).toSVG())},createBackgroundNode:function(){this.svgRootBackground=(new JenScript.SVGGroup).Id(this.Id+"_background").toSVG(),this.svgRootElement.appendChild(this.svgRootBackground)},createForegroundNode:function(){this.svgRootForeground=(new JenScript.SVGGroup).Id(this.Id+"_foreground").toSVG(),this.svgRootElement.appendChild(this.svgRootForeground)},createProjectionsNode:function(){this.svgProjections=(new JenScript.SVGGroup).Id(this.Id+"_projections").toSVG(),this.svgRootElement.appendChild(this.svgProjections);

},createSelectorsNode:function(){var a=document.createElementNS(this.SVG_NS,"g");a.setAttribute("id",this.Id+"_selectors"),this.svgSelectorsDefinitions=document.createElementNS(this.SVG_NS,"g"),this.svgSelectorsDefinitions.setAttribute("id",this.Id+"_selectors_definitions"),this.svgSelectorsGraphics=document.createElementNS(this.SVG_NS,"g"),this.svgSelectorsGraphics.setAttribute("id",this.Id+"_selectors_graphics"),a.appendChild(this.svgSelectorsDefinitions),a.appendChild(this.svgSelectorsGraphics),this.svgRootElement.appendChild(a)},createWidgetsNode:function(){var a=document.createElementNS(this.SVG_NS,"svg");a.setAttribute("id",this.Id+"_widgets"),a.setAttribute("x",this.west),a.setAttribute("y",this.north),a.setAttribute("width",this.devicePart.getWidth()),a.setAttribute("height",this.devicePart.getHeight()),this.svgWidgetsDefinitions=document.createElementNS(this.SVG_NS,"defs"),this.svgWidgetsDefinitions.setAttribute("id",this.Id+"_widgets_definitions"),a.appendChild(this.svgWidgetsDefinitions),this.svgWidgetsGraphics=document.createElementNS(this.SVG_NS,"g"),this.svgWidgetsGraphics.setAttribute("id",this.Id+"_widgets_graphics"),a.appendChild(this.svgWidgetsGraphics),this.svgRootElement.appendChild(a)},createDispatcherNode:function(){this.svgDispatcher=(new JenScript.SVGGroup).Id(this.Id+"_dispatcher").toSVG(),this.svgRootElement.appendChild(this.svgDispatcher),this.contextualizeViewDispatcher(this.southPart,new JenScript.Point2D(0,this.height-this.south)),this.contextualizeViewDispatcher(this.northPart,new JenScript.Point2D(0,0)),this.contextualizeViewDispatcher(this.eastPart,new JenScript.Point2D(this.width-this.east,this.north)),this.contextualizeViewDispatcher(this.westPart,new JenScript.Point2D(0,this.north)),this.contextualizeViewDispatcher(this.devicePart,new JenScript.Point2D(this.west,this.north))},contextualizeGraphicsProjection:function(a){this.attachProjectionActiveListener(a),this.attachProjectionSelectorListener(a),a.svgRootElement=document.createElementNS(this.SVG_NS,"svg"),a.svgRootElement.setAttribute("id",a.Id),a.svgRootElement.setAttribute("xmlns",JenScript.SVG_NS),a.svgRootElement.setAttribute("xmlns:xlink",JenScript.XLINK_NS),a.svgRootElement.setAttribute("version","1.1"),a.svgRootElement.setAttribute("viewBox","0 0 "+this.width+" "+this.height),a.svgDefsElement=document.createElementNS(this.SVG_NS,"defs"),a.svgDefsElement.setAttribute("id",a.Id+"_definitions"),a.svgRootElement.appendChild(a.svgDefsElement),a.svgPartsGroup=document.createElementNS(this.SVG_NS,"g"),a.svgPartsGroup.setAttribute("xmlns",this.SVG_NS),a.svgPartsGroup.setAttribute("id",a.Id+"_parts"),a.svgRootElement.appendChild(a.svgPartsGroup),this.svgProjections.appendChild(a.svgRootElement),a.svgPartPlugins={},this.contextualizeProjectionPartGraphics(a,this.southPart,new JenScript.Point2D(0,this.height-this.south)),this.contextualizeProjectionPartGraphics(a,this.northPart,new JenScript.Point2D(0,0)),this.contextualizeProjectionPartGraphics(a,this.eastPart,new JenScript.Point2D(this.width-this.east,this.north)),this.contextualizeProjectionPartGraphics(a,this.westPart,new JenScript.Point2D(0,this.north)),this.contextualizeProjectionPartGraphics(a,this.devicePart,new JenScript.Point2D(this.west,this.north))},attachProjectionSelectorListener:function(a){var b=this;a.addProjectionListener("boundChanged",function(){b.selectorPlugin.repaintPlugin("selector bound listener")},"projection bound listener to repaint selector"),a.addProjectionListener("pluginRegister",function(){b.selectorPlugin.repaintPlugin("selector plugin register listener")},"projection plugin register listener to repaint selector")},attachProjectionActiveListener:function(a){a.addProjectionListener("lockActive",function(a){a.svgRootElement.setAttribute("opacity",1)},"view projection active listener to change projection opacity"),a.addProjectionListener("unlockActive",function(a){"ACTIVE"===a.paintMode&&a.svgRootElement.setAttribute("opacity",0),"ALWAYS"===a.paintMode&&a.svgRootElement.setAttribute("opacity",1)},"view projection unactive listener to change projection opacity")},contextualizeProjectionPartGraphics:function(a,b,c){var d=document.createElementNS(this.SVG_NS,"svg");d.setAttribute("id",a.Id+"_"+b.part);var e=document.createElementNS(this.SVG_NS,"g");e.setAttribute("id",a.Id+"_"+b.part+"_plugins"),d.appendChild(e),d.setAttribute("x",c.getX()),d.setAttribute("y",c.getY()),d.setAttribute("width",b.getWidth()),d.setAttribute("height",b.getHeight()),a.svgPartPlugins[b.part]=e,a.svgPartsGroup.appendChild(d)},contextualizePluginGraphics:function(a){var b=a.getProjection(),c=this;a.svgRoot={},a.svgPluginPartsGraphics={},a.svgPluginPartsDefinitions={};var d=function(d){var e=document.createElementNS(c.SVG_NS,"g");e.setAttribute("id",b.Id+"_"+d.part+"_"+a.Id),e.setAttribute("transform","translate("+a.tx+","+a.ty+") scale("+a.sx+","+a.sy+")");var f=document.createElementNS(c.SVG_NS,"defs");f.setAttribute("id",b.Id+"_"+d.part+"_"+a.Id+"_definition"),e.appendChild(f);var g=document.createElementNS(c.SVG_NS,"g");g.setAttribute("id",b.Id+"_"+d.part+"_"+a.Id+"_graphics"),e.appendChild(g),a.svgRoot[d.part]=e,a.svgPluginPartsGraphics[d.part]=g,a.svgPluginPartsDefinitions[d.part]=f,b.svgPartPlugins[d.part].appendChild(e)};d(this.southPart),d(this.northPart),d(this.eastPart),d(this.westPart),d(this.devicePart),a.contextualized=!0,a.repaintPlugin()},contextualizeViewDispatcher:function(a,b){function c(a){var b=window.event||a,c=Math.max(-1,Math.min(1,b.wheelDelta||-b.detail)),d={originalEvent:b,target:b.target||b.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==b.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){b.preventDefault?b.preventDefault():b.returnValue=!1}};d.deltaY=c,h(d,"Wheel")}var d=document.createElementNS(this.SVG_NS,"svg");d.setAttribute("id",this.Id+"_"+a.part+"_dispatcher"),d.setAttribute("x",b.getX()+"px"),d.setAttribute("y",b.getY()+"px"),d.setAttribute("width",a.getWidth()+"px"),d.setAttribute("height",a.getHeight()+"px");var e=document.createElementNS(this.SVG_NS,"rect");e.setAttribute("id",this.Id+"_dispatcher"),e.setAttribute("x","0"),e.setAttribute("y","0"),e.setAttribute("width",a.getWidth()),e.setAttribute("height",a.getHeight()),e.setAttribute("style","stroke: black;stroke-opacity: 0; fill: #0000ff;fill-opacity :0");var f=function(a){var b=e.getBoundingClientRect(),c=b.left,d=b.top,f=a.clientX-c,g=a.clientY-d;return{x:f,y:g}},g=this,h=function(b,c){var d=f(b);g.getComponent(a.part).on(c,b,d.x,d.y)},i=function(b,c){b.preventDefault?b.preventDefault():b.defaultPrevented&&(b.defaultPrevented=!0);var d=b.touches[0],f=void 0;"touchmove"===b.type&&(f="mousemove"),"touchdstart"===b.type&&(f="mousedown"),"touchend"===b.type&&(f="mouseup",d=b.changedTouches[0]);var h=new MouseEvent(f,{clientX:d.clientX,clientY:d.clientY}),i=e.getBoundingClientRect();g.getComponent(a.part).on(c,h,d.clientX-i.left,d.clientY-i.top)};"ontouchstart"in window?(console.log("touch is supported"),e.addEventListener("touchstart",function(a){i(a,"Press")},!1),e.addEventListener("touchmove",function(a){i(a,"Move")},!1),e.addEventListener("touchend",function(a){i(a,"Release")},!1)):(e.addEventListener("mousemove",function(a){h(a,"Move")},!1),e.addEventListener("mouseclick",function(a){h(a,"Click")},!1),e.addEventListener("mousedown",function(a){h(a,"Press")},!1),e.addEventListener("mouseup",function(a){h(a,"Release")},!1),e.addEventListener("mouseover",function(a){h(a,"Enter")},!1),e.addEventListener("mouseout",function(a){h(a,"Exit")},!1),e.addEventListener?(e.addEventListener("mousewheel",c,!1),e.addEventListener("DOMMouseScroll",c,!1)):e.attachEvent("onmousewheel",c)),d.appendChild(e),this.svgDispatcher.appendChild(d)},getDevice:function(){return this.devicePart},newFolderIntanceByPosition:function(a,b,c,d,e){for(var f=this.getDevice().getWidth(),g=this.getDevice().getHeight(),h=this.folderGuardInterval,i=parseInt(f/(b+2*h)+""),j=parseInt(g/(c+2*h)+""),k=[],l=0;i>=l;l++)for(var m=0;j>=m;m++){var n=new JenScript.WidgetFolder;n.Id=a,n.width=b,n.height=c,n.xIndex=l,n.yIndex=m,n.guardInterval=h,k[k.length]=n,i>l&&j>m?(n.x=(b+2*h)*l+h,n.y=(c+2*h)*m+h):l===i&&m===j?(n.mx=!0,n.x=f-b-h,n.y=g-c-h):i>l&&m===j?(n.mx=!0,n.x=(b+2*h)*l+h,n.y=g-c-h):l===i&&j>m&&(n.mx=!1,n.x=f-b-h,n.y=(c+2*h)*m+h)}for(var o=0;o<k.length;o++){var p=k[o];if(d>p.x&&d<p.x+p.width&&e>p.y&&e<p.y+p.height)return p}return void 0},newWidgetFolderIntance:function(a,b,c,d,e){var f=this.getDevice().getWidth(),g=this.getDevice().getHeight(),h=this.folderGuardInterval,i=parseInt(f/(b+2*h)),j=parseInt(g/(c+2*h));0>d&&(d=0),d>i&&(d=i),0>e&&(e=0),e>j&&(e=j);var k=new JenScript.WidgetFolder;return k.Id=a,k.width=b,k.height=c,k.xIndex=d,k.yIndex=e,k.guardInterval=h,i>d&&j>e?(k.x=(b+2*h)*d+h,k.y=(c+2*h)*e+h):d==i&&e==j?(k.x=f-b-h,k.y=g-c-h):i>d&&e==j?(k.x=(b+2*h)*d+h,k.y=g-c-h):d==i&&j>e&&(k.x=f-b-h,k.y=(c+2*h)*e+h),k}})}(),function(){JenScript.ViewBuilder=function(a){var b=new JenScript.View(a);return{projection:function(a,c){var d;return"linear"===a&&(d=new JenScript.LinearProjection(c)),"logx"===a&&(d=new JenScript.LogXProjection(c)),"logy"===a&&(d=new JenScript.LogYProjection(c)),"logxy"===a&&(d=new JenScript.LogXLogYProjection(c)),"timex"===a&&(d=new JenScript.TimeXProjection(c)),"timey"===a&&(d=new JenScript.TimeYProjection(c)),{pie:function(a){return new JenScript.PieBuilder(b,d,a)},donut3d:function(a){return new JenScript.Donut3DBuilder(b,d,a)},donut2d:function(a){return new JenScript.Donut2DBuilder(b,d,a)}}}}}}(),function(){JenScript.Model.addMethods(JenScript.Projection,{init:function(a){a=a||{},this.Id="proj_"+JenScript.sequenceId++,this.name=a.name,this.initial=!0,this.themeColor=void 0!==a.themeColor?a.themeColor:JenScript.createColor(),this.listeners=[],this.view=void 0,this.plugins=[],this.visible=!0,this.paintMode=void 0!==a.paintMode?a.paintMode:"ALWAYS",this.active=!1},toString:function(){var a=void 0===this.getView()?"view not still bind":this.getView().Id;return"JenScript.Projection=[Id:"+this.Id+",active :"+this.isActive()+","+this.getMinX()+","+this.getMaxX()+","+this.getMinY()+","+this.getMaxY()+","+a+"]"},addProjectionListener:function(a,b,c){if(void 0===c)throw new Error("Projection listener, listener name should be supplied.");var d={action:a,onEvent:b,name:c};this.listeners[this.listeners.length]=d},fireProjectionEvent:function(a){for(var b=0;b<this.listeners.length;b++){var c=this.listeners[b];a===c.action&&c.onEvent(this)}},getId:function(){return this.Id},setVisible:function(){this.name=visible},isVisible:function(){return this.visible},setActive:function(a){this.active=a,this.fireProjectionEvent(this.active?"lockActive":"unlockActive")},isActive:function(){return this.active},setName:function(a){this.name=a},getName:function(){return this.name},setView:function(a){this.view=a,this.fireProjectionEvent("viewRegister")},getView:function(){return this.view},setThemeColor:function(a){this.themeColor=a},getThemeColor:function(){return this.themeColor},unregisterPlugin:function(a){for(var b=[],c=0;c<this.plugins.length;c++){var d=this.plugins[c];d.Id===a.Id?(a.destroyGraphics(),a.contextualized=!1):b[b.length]=d}this.plugins=b},registerPlugin:function(a){if(void 0!==a.getProjection()&&a.getProjection().Id!==this.Id)throw new Error("Plugin "+a.name+" projection is already set, plugin can not be shared projection.");a.setProjection(this),this.plugins[this.plugins.length]=a;var b=this;a.addPluginListener("lock",function(a){for(var c=0;c<b.plugins.length;c++){var d=b.plugins[c];d.Id!==a.Id&&d.isSelectable()&&d.isLockSelected()&&d.unselect()}},"Projection plugin lock/unlock listener"),this.plugins.sort(function(a,b){var c=a.getPriority(),d=b.getPriority();return d>c?-1:c>d?1:0}),a.onProjectionRegister(),this.getView().contextualizePluginGraphics(a),this.fireProjectionEvent("pluginRegister")},getPlugins:function(){return this.plugins},getPluginAtIndex:function(a){return this.plugins[a]},getIndexOf:function(a){for(var b=0;b<this.plugins.length;b++)if(a.Id===this.plugins[b].Id)return b;return-1},getUserWidth:function(){return this.maxX-this.minX},getUserHeight:function(){return this.maxY-this.minY},getPixelWidth:function(){return this.view.getDevice().width},getPixelHeight:function(){return this.view.getDevice().height},getMinX:function(){return this.minX},getMaxX:function(){return this.maxX},getMinY:function(){return this.minY},getMaxY:function(){return this.maxY},getBounds:function(){return{minX:this.getMinX(),maxX:this.getMaxX(),minY:this.getMinY(),maxY:this.getMaxY()}},userToPixel:function(a){return new JenScript.Point2D(this.userToPixelX(a.x),this.userToPixelY(a.y))},pixelToUser:function(a){return new JenScript.Point2D(this.pixelToUserX(a.x),this.pixelToUserY(a.y))}})}(),function(){JenScript.LinearProjection=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.LinearProjection,JenScript.Projection),JenScript.Model.addMethods(JenScript.LinearProjection,{_init:function(a){JenScript.Projection.call(this,a),this.bound(a.minX,a.maxX,a.minY,a.maxY)},validateBound:function(a,b,c,d){if(a>b)throw new Error("projection error: maxx argument should be greater than minx");if(c>d)throw new Error("projection error: maxy argument should be greater than miny")},bound:function(a,b,c,d){try{this.validateBound(a,b,c,d),this.initial&&(this.initialMinX=a,this.initialMaxX=b,this.initialMinY=c,this.initialMaxY=d,this.initial=!1),this.minX=a,this.maxX=b,this.minY=c,this.maxY=d,void 0!==this.view&&void 0!==this.view.getDevice()&&(this.scaleX=this.getPixelWidth()/this.getUserWidth(),this.scaleY=this.getPixelHeight()/this.getUserHeight())}catch(e){throw new Error("Invalid bound projection with cause :"+e.message)}this.fireProjectionEvent("boundChanged")},getScaleX:function(){return void 0===this.scaleX&&(this.scaleX=this.getPixelWidth()/this.getUserWidth()),this.scaleX},getScaleY:function(){return void 0===this.scaleY&&(this.scaleY=this.getPixelHeight()/this.getUserHeight()),this.scaleY},userToPixelX:function(a){return this.getScaleX()*(a-this.getMinX())},userToPixelY:function(a){return-this.getScaleY()*(a-this.getMaxY())},pixelToUserX:function(a){return a/this.getScaleX()+this.getMinX()},pixelToUserY:function(a){return-(a/this.getScaleY()-this.getMaxY())}})}(),function(){JenScript.IdentityProjection=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.IdentityProjection,JenScript.LinearProjection),JenScript.Model.addMethods(JenScript.IdentityProjection,{__init:function(a){a=a||{},JenScript.LinearProjection.call(this,a),this.bound(-1,1,-1,1)}})}(),function(){JenScript.LogXProjection=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.LogXProjection,JenScript.LinearProjection),JenScript.Model.addMethods(JenScript.LogXProjection,{__init:function(a){JenScript.LinearProjection.call(this,a)},validateBound:function(a,b,c,d){if(a>b)throw new Error("projection "+this.name+" error: maxx argument should be greater than minx");if(c>d)throw new Error("projection "+this.name+" error: maxy argument should be greater than miny");if(0>=a)throw new Error("projection "+this.name+" error: min x value should be grater than 0 , out of Log range authorized.")},userToPixelX:function(a){var b=this.getPixelWidth()/(JenScript.Math.log10(this.getMaxX())-JenScript.Math.log10(this.getMinX()));return b*(JenScript.Math.log10(a)-JenScript.Math.log10(this.getMinX()))},pixelToUserX:function(a){var b=this.getPixelWidth()/(JenScript.Math.log10(this.getMaxX())-JenScript.Math.log10(this.getMinX()));return Math.pow(10,a/b+JenScript.Math.log10(this.getMinX()))}})}(),function(){JenScript.LogYProjection=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.LogYProjection,JenScript.LinearProjection),JenScript.Model.addMethods(JenScript.LogYProjection,{__init:function(a){JenScript.LinearProjection.call(this,a)},validateBound:function(a,b,c,d){if(a>b)throw new Error("projection "+this.name+" error: maxx argument should be greater than minx");if(c>d)throw new Error("projection "+this.name+" error: maxy argument should be greater than miny");if(0>=c)throw new Error("projection "+this.name+" error: min y value should be grater than 0 , out of Log range authorized.")},userToPixelY:function(a){var b=this.getPixelHeight()/(JenScript.Math.log10(this.getMaxY())-JenScript.Math.log10(this.getMinY()));return-b*(JenScript.Math.log10(a)-JenScript.Math.log10(this.getMaxY()))},pixelToUserY:function(a){var b=this.getPixelHeight()/(JenScript.Math.log10(this.getMaxY())-JenScript.Math.log10(this.getMinY()));return Math.pow(10,-(a/b-JenScript.Math.log10(this.getMaxY())))}})}(),function(){JenScript.LogXLogYProjection=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.LogXLogYProjection,JenScript.LinearProjection),JenScript.Model.addMethods(JenScript.LogXLogYProjection,{__init:function(a){JenScript.LinearProjection.call(this,a)},validateBound:function(a,b,c,d){if(a>b)throw new Error("projection "+this.name+" error: maxx argument should be greater than minx");if(c>d)throw new Error("projection "+this.name+" error: maxy argument should be greater than miny");if(0>=a)throw new Error("projection "+this.name+" error: min x value should be grater than 0 , out of Log range authorized.");if(0>=c)throw new Error("projection "+this.name+" error: min y value should be grater than 0 , out of Log range authorized.")},userToPixelX:function(a){return JenScript.LogXProjection.prototype.userToPixelX.call(this,a)},userToPixelY:function(a){return JenScript.LogYProjection.prototype.userToPixelY.call(this,a)},pixelToUserX:function(a){return JenScript.LogXProjection.prototype.pixelToUserX.call(this,a)},pixelToUserY:function(a){return JenScript.LogYProjection.prototype.pixelToUserY.call(this,a)}})}(),function(){JenScript.TimeProjection=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.TimeProjection,JenScript.LinearProjection),JenScript.Model.addMethods(JenScript.TimeProjection,{__init:function(a){JenScript.LinearProjection.call(this,a)},durationMillis:function(){return this.getMaxDate().getTime()-this.getMinDate().getTime()},durationMinutes:function(){var a=6e4,b=this.durationMillis()/a;return b},durationHours:function(){var a=36e5,b=this.durationMillis()/a;return b},durationDays:function(){var a=864e5,b=this.durationMillis()/a;return b},durationWeeks:function(){var a=6048e5,b=this.durationMillis()/a;return b},durationMonth:function(){var a=24192e5,b=this.durationMillis()/a;return b},durationYear:function(){var a=31536e6,b=this.durationMillis()/a;return b}})}(),function(){JenScript.TimeXProjection=function(a){this.___init(a)},JenScript.Model.inheritPrototype(JenScript.TimeXProjection,JenScript.TimeProjection),JenScript.Model.addMethods(JenScript.TimeXProjection,{___init:function(a){a.minX=a.minXDate.getTime(),a.maxX=a.maxXDate.getTime(),JenScript.TimeProjection.call(this,a)},getMinDate:function(){return this.getMinXAsDate()},getMaxDate:function(){return this.getMaxXAsDate()},getMinXAsDate:function(){return new Date(this.getMinX())},getMaxXAsDate:function(){return new Date(this.getMaxX())},pixelToTime:function(a){var b=this.pixelToUserX(a);return new Date(b)},timeToPixel:function(a){var b=a.getTime();return this.userToPixelX(b)},getTimeDurationPixel:function(){return this.getPixelWidth()},boundTimeX:function(a,b,c,d){boundLinear(a.getTime(),b.getTime(),c,d)}})}(),function(){JenScript.TimeYProjection=function(a){this.___init(a)},JenScript.Model.inheritPrototype(JenScript.TimeYProjection,JenScript.TimeProjection),JenScript.Model.addMethods(JenScript.TimeYProjection,{___init:function(a){a.minY=a.minYDate.getTime(),a.maxY=a.maxYDate.getTime(),JenScript.TimeProjection.call(this,a)},getMinYAsDate:function(){return new Date(this.getMinY())},getMaxYAsDate:function(){return new Date(this.getMaxY())},getMinDate:function(){return this.getMinYAsDate()},getMaxDate:function(){return this.getMaxYAsDate()},pixelToTime:function(a){var b=this.pixelToUserY(a);return new Date(b)},timeToPixel:function(a){var b=a.getTime();return this.userToPixelY(b)},getTimeDurationPixel:function(){return this.getPixelHeight()},boundTimeY:function(a,b,c,d){this.boundLinear(a,b,c.getTime(),d.getTime())},getHeightAsMinutes:function(){var a=this.getMinY(),b=this.getMaxY(),c=b-a,d=6e4,e=c/d;return e}})}(),function(){JenScript.DalleProjection=function(a,b){this.squareTileSize=b,this.zoom=a,this.maxTileIndex=Math.pow(2,this.zoom)-1;var c=Math.pow(2,this.zoom);this.dimension={width:c*this.squareTileSize,height:c*this.squareTileSize,getWidth:function(){return this.width},getHeight:function(){return this.height}}},JenScript.DalleProjection.prototype={getZoom:function(){return this.zoom},getSquareTileSize:function(){return this.squareTileSize},getMaxTileIndex:function(){return this.maxTileIndex},toString:function(){return"projection dalle[Level:"+this.zoom+";square:"+this.squareTileSize+"]"},getDalleDimension:function(){return this.dimension},getDalleCenter:function(){return new JenScript.Point2D(this.dimension.width/2,this.dimension.height/2)},geoToPixel:function(a){var b=this.dimension.getWidth()*((a.getLongitude()+180)/360),c=this.dimension.getHeight()/2-Math.log(Math.tan(Math.PI/4+JenScript.Math.toRadians(a.getLatitude())/2))/(2*Math.PI)*this.dimension.getWidth();return new JenScript.Point2D(b,c)},latitudeToPixel:function(a){var b=this.dimension.getHeight()/2-Math.log(Math.tan(Math.PI/4+JenScript.Math.toRadians(a)/2))/(2*Math.PI)*this.dimension.getWidth();return b},longitudeToPixel:function(a){var b=this.dimension.getWidth()*((a+180)/360);return b},pixelToGeo:function(a){var b=a.getX()/this.dimension.getWidth()*360-180,c=2*Math.PI/this.dimension.getWidth(),d=this.dimension.getHeight()/2-a.getY(),e=Math.exp(c*d),f=Math.atan(e),g=2*(f-Math.PI/4),h=JenScript.Math.toDegrees(g);return new JenScript.GeoPosition(h,b)},pixelToLatitude:function(a){var b=2*Math.PI/this.dimension.getWidth(),c=this.dimension.getHeight()/2-a,d=Math.exp(b*c),e=Math.atan(d),f=2*(e-Math.PI/4),g=JenScript.Math.toDegrees(f);return g},pixelToLongitude:function(a){var b=a/this.dimension.getWidth()*360-180;return b},latToYIndex:function(a){var b=Math.floor((1-Math.log(Math.tan(a*Math.PI/180)+1/Math.cos(a*Math.PI/180))/Math.PI)/2*(1<<this.zoom));return parseInt(b)},longToXIndex:function(a){var b=Math.floor((a+180)/360*(1<<this.zoom));return parseInt(b)},tileToLong:function(a){return a/Math.pow(2,this.zoom)*360-180},tileToLat:function(a){var b=Math.PI-2*Math.PI*a/Math.pow(2,this.zoom);return 180/Math.PI*Math.atan(.5*(Math.exp(b)-Math.exp(-b)))}},JenScript.GeoPosition=function(a,b){this.latitude=a,this.longitude=b},JenScript.GeoPosition.prototype={getLatitude:function(){return this.latitude},getLongitude:function(){return this.longitude},equals:function(a){return a instanceof JenScript.GeoPosition?a.latitude==this.latitude&&a.longitude==this.longitude:!1},toPoint2D:function(){return new JenScript.Point2D(this.longitude,this.latitude)},toString:function(){return"geo position["+this.latitude+", "+this.longitude+"]"}},JenScript.MapProjection=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.MapProjection,JenScript.Projection),JenScript.Model.addMethods(JenScript.MapProjection,{_init:function(a){JenScript.Projection.call(this,a),this.level=void 0!==a.level?a.level:3,this.square=void 0!==a.square?a.square:256,this.centerPosition=void 0!==a.centerPosition?a.centerPosition:new JenScript.GeoPosition(48.8380405,-.5938274),this.projection=new JenScript.DalleProjection(this.level,this.square)},getCenterPosition:function(){return this.centerPosition},setCenterPosition:function(a){this.centerPosition=a,this.fireProjectionEvent("boundChanged")},bound:function(a,b,c,d){try{var e=a+Math.abs(b-a)/2,f=c+Math.abs(d-c)/2;this.setCenterPosition(new JenScript.GeoPosition(f,e))}catch(g){throw new Error("Invalid bound projection with cause :"+g.message)}},getProjection:function(){return this.projection},getLevel:function(){return this.level},setLevel:function(a){0>a||(this.level=a,this.projection=new JenScript.DalleProjection(a,this.square),this.fireProjectionEvent("boundChanged"))},getMinX:function(){var a=this.projection.longitudeToPixel(this.getCenterPosition().getLongitude());return this.projection.pixelToLongitude(a-this.getPixelWidth()/2)},getMaxX:function(){var a=this.projection.longitudeToPixel(this.getCenterPosition().getLongitude());return this.projection.pixelToLongitude(a+this.getPixelWidth()/2)},getMinY:function(){var a=this.projection.latitudeToPixel(this.getCenterPosition().getLatitude());return this.projection.pixelToLatitude(a+this.getPixelHeight()/2)},getMaxY:function(){var a=this.projection.latitudeToPixel(this.getCenterPosition().getLatitude());return this.projection.pixelToLatitude(a-this.getPixelHeight()/2)},userToPixelX:function(a){var b=this.projection.longitudeToPixel(this.getCenterPosition().getLongitude());return-b+this.getPixelWidth()/2+this.projection.longitudeToPixel(a)},userToPixelY:function(a){var b=this.projection.latitudeToPixel(this.getCenterPosition().getLatitude());return-b+this.getPixelHeight()/2+this.projection.latitudeToPixel(a)},latToPixel:function(a){return this.userToPixelY(a)},longToPixel:function(a){return this.userToPixelX(a)},pixelToUserX:function(a){var b=this.projection.longitudeToPixel(this.getCenterPosition().getLongitude()),c=this.projection.pixelToLongitude(b-this.getPixelWidth()/2+a);return c},pixelToUserY:function(a){var b=this.projection.latitudeToPixel(this.getCenterPosition().getLatitude()),c=this.projection.pixelToLatitude(b-this.getPixelHeight()/2+a);return c},pixelToLat:function(a){return this.pixelToUserY(a)},pixelToLong:function(a){return this.pixelToUserX(a)},geoToPixel:function(a){return new JenScript.Point2D(this.userToPixelX(a.longitude),this.userToPixelY(a.latitude))},pixelToGeo:function(a){return new JenScript.GeoPosition(this.pixelToUserX(a.x),this.pixelToUserY(a.y))}})}(),function(){JenScript.Model.addMethods(JenScript.Plugin,{init:function(a){a=a||{},this.projection=void 0,this.name=void 0!==a.name?a.name:"AnonymousPlugin",this.Id="plugin_"+this.name+"_"+JenScript.sequenceId++,this.priority=void 0!==a.priority?a.priority:0,this.selectable=void 0!==a.selectable?a.selectable:!1,this.pluginlisteners=[],this.widgets=[],this.lockSelected=!1,this.lockPassive=!1,this.contextualized=!1,this.tx=0,this.ty=0,this.sx=1,this.sy=1},resetTransform:function(){this.tx=0,this.ty=0,this.sx=1,this.sy=1,void 0!==this.svgRoot&&this.applyTransform()},applyTransform:function(){this.svgRoot.Device.setAttribute("transform","translate("+this.tx+","+this.ty+") scale("+this.sx+","+this.sy+")")},translate:function(a,b,c){this.tx=a,this.ty=b,void 0!==this.svgRoot&&(this.applyTransform(),(void 0===c||c!==!1)&&this.firePluginEvent("translate"))},scale:function(a,b,c){this.sx=a,this.sy=b,void 0!==this.svgRoot&&(this.applyTransform(),(void 0===c||c!==!1)&&this.firePluginEvent("scale"))},u2p:function(a){var b=this.getProjection().userToPixel(a);return new JenScript.Point2D(b.x*this.sx+this.tx,b.y*this.sy+this.ty)},p2u:function(a){return this.getProjection().pixelToUser(new JenScript.Point2D((a.x-this.tx)/this.sx,(a.y-this.ty)/this.sy))},getId:function(){return this.Id},toString:function(){return"JenScript.Plugin=["+this.name+","+this.Id+"]"},getProjection:function(){return this.projection},getView:function(){try{return this.getProjection().getView()}catch(a){return void 0}},getDevice:function(){try{return this.getProjection().getView().getDevice()}catch(a){return void 0}},getWidgetPlugin:function(){return this.getProjection().getView().getWidgetPlugin()},getGraphicsContext:function(a){if(!this.contextualized)return void 0;try{return new JenScript.Graphics({definitions:this.svgPluginPartsDefinitions[a],graphics:this.svgPluginPartsGraphics[a],selectors:this.getProjection().getView().svgSelectors})}catch(b){return void 0}},destroyGraphics:function(){this.getGraphicsContext(JenScript.ViewPart.South).clearGraphics(),this.getGraphicsContext(JenScript.ViewPart.North).clearGraphics(),this.getGraphicsContext(JenScript.ViewPart.East).clearGraphics(),this.getGraphicsContext(JenScript.ViewPart.West).clearGraphics(),this.getGraphicsContext(JenScript.ViewPart.Device).clearGraphics()},repaintPlugin:function(){this.contextualized&&(this.repaintPluginPart(JenScript.ViewPart.South),this.repaintPluginPart(JenScript.ViewPart.North),this.repaintPluginPart(JenScript.ViewPart.East),this.repaintPluginPart(JenScript.ViewPart.West),this.repaintPluginPart(JenScript.ViewPart.Device),this.firePluginEvent("repaint"))},repaintPluginPart:function(a){if(this.contextualized){var b=this.getGraphicsContext(a);void 0!==b&&(b.clearGraphics(),this.paintPlugin(b,a))}},addPluginListener:function(a,b,c){if(void 0===c)throw new Error("Plugin listener, listener name should be supplied.");var d={action:a,onEvent:b,name:c};this.pluginlisteners[this.pluginlisteners.length]=d},firePluginEvent:function(a){for(var b=0;b<this.pluginlisteners.length;b++){var c=this.pluginlisteners[b];a===c.action&&c.onEvent(this)}},onProjectionRegister:function(){},setProjection:function(a){this.projection=a,this.firePluginEvent("projectionRegister")},setPriority:function(a){this.priority=a},getPriority:function(){return this.priority},isSelectable:function(){return this.selectable},setSelectable:function(a){this.selectable=a},isLockSelected:function(){return this.lockSelected},select:function(){this.lockSelected=!0,this.firePluginEvent("lock")},unselect:function(){this.lockSelected=!1,this.firePluginEvent("unlock")},isLockPassive:function(){return this.lockPassive},passive:function(){this.lockPassive=!0},unpassive:function(){this.lockPassive=!1},paintPlugin:function(){},onClick:function(){},onMove:function(){},onPress:function(){},onRelease:function(){},onEnter:function(){},onExit:function(){},onWheel:function(){},hasWidgets:function(){return this.widgets.length>0},isWidgetSensible:function(a,b){for(var c=0;c<this.widgets.length;c++){var d=this.widgets[c];if(d.isSensible(a,b))return!0}return!1},registerWidget:function(a){a.setHost(this),a.onRegister(),this.widgets[this.widgets.length]=a}})}(),function(){JenScript.WidgetPlugin=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.WidgetPlugin,JenScript.Plugin),JenScript.Model.addMethods(JenScript.WidgetPlugin,{_init:function(a){a=a||{},a.name="WidgetPlugin",JenScript.Plugin.call(this,a),this.press=!1,this.contextualized=!0},toString:function(){return"WidgetPlugin"},getGraphicsContext:function(){return new JenScript.Graphics({definitions:this.view.svgWidgetsDefinitions,graphics:this.view.svgWidgetsGraphics,selectors:this.view.svgSelectors})},repaintPlugin:function(){},repaintPluginPart:function(){},paintPlugin:function(){},getView:function(){return this.view},setView:function(a){this.view=a},moveWidgetOperationCheckPress:function(a,b,c,d){for(var e=function(a,b,c){return b>a.x&&b<a.x+a.width&&c>a.y&&c<a.y+a.height?!0:!1},f=this.getActiveProjection(),g=0;g<f.plugins.length;g++){var h=f.plugins[g];if(!h.isSelectable()||h.isLockSelected())for(var i=0;i<h.widgets.length;i++){var j=h.widgets[i],k=j.getWidgetFolder();void 0!==k&&(e(k,c,d)&&!j.isNoMoveOperation()?(k.currentDragX=c,k.currentDragY=d,k.startPress(),j.create(),j.createGhost(),this.passivePlugins()):(k.interruptPress(),this.activePlugins()))}}},moveWidgetOperationCheckDrag:function(a,b,c,d){for(var e=this.getActiveProjection(),f=0;f<e.plugins.length;f++)for(var g=e.plugins[f],h=0;h<g.widgets.length;h++){var i=g.widgets[h],j=i.getWidgetFolder();void 0!==j&&j.lockPress&&(j.currentDragX=c,j.currentDragY=d,i.create(),i.createGhost())}},moveWidgetOperationCheckRelease:function(){for(var a=this.getActiveProjection(),b=0;b<a.plugins.length;b++)for(var c=a.plugins[b],d=0;d<c.widgets.length;d++){var e=c.widgets[d],f=e.getWidgetFolder();void 0!==f&&f.lockPress&&(void 0!==f.targetFolder&&(e.postWidget(),this.activePlugins(),e.create(),e.destroyGhost()),f.interruptPress())}},onMove:function(a,b,c,d){this.press?(this.moveWidgetOperationCheckDrag(a,b,c,d),this.dispatchDrag(a,b,c,d)):this.dispatchMove(a,b,c,d);

},dispatchMove:function(a,b,c,d){if(b===JenScript.ViewPart.Device)for(var e=this.getActiveProjection(),f=0;f<e.plugins.length;f++){var g=e.plugins[f];if(g.isSelectable()&&g.isLockSelected())for(var h=0;h<g.widgets.length;h++){var i=g.widgets[h];i.interceptMove(c,d)}else for(var h=0;h<g.widgets.length;h++){var i=g.widgets[h];i.interceptMove(c,d)}}},onWheel:function(a,b,c,d){this.dispatchWheel(a,b,c,d)},dispatchWheel:function(){for(var a=this.getActiveProjection(),b=0;b<a.plugins.length;b++){var c=a.plugins[b];if(c.isSelectable()&&c.isLockSelected())for(var d=0;d<c.widgets.length;d++);else for(var d=0;d<c.widgets.length;d++);}},dispatchDrag:function(a,b,c,d){for(var e=this.getActiveProjection(),f=0;f<e.plugins.length;f++){var g=e.plugins[f];if(g.isSelectable()&&g.isLockSelected())for(var h=0;h<g.widgets.length;h++){var i=g.widgets[h];i.interceptDrag(c,d)}else for(var h=0;h<g.widgets.length;h++){var i=g.widgets[h];i.interceptDrag(c,d)}}},onPress:function(a,b,c,d){this.press=!0,this.moveWidgetOperationCheckPress(a,b,c,d),this.dispatchPress(a,b,c,d)},dispatchPress:function(a,b,c,d){for(var e=this.getActiveProjection(),f=0;f<e.plugins.length;f++){var g=e.plugins[f];if(g.isSelectable()&&g.isLockSelected())for(var h=0;h<g.widgets.length;h++){var i=g.widgets[h];i.interceptPress(c,d)}else for(var h=0;h<g.widgets.length;h++){var i=g.widgets[h];i.interceptPress(c,d)}}},onRelease:function(a,b,c,d){this.press=!1,this.moveWidgetOperationCheckRelease(a,b,c,d),this.dispatchRelease(a,b,c,d)},dispatchRelease:function(a,b,c,d){for(var e=this.getActiveProjection(),f=0;f<e.plugins.length;f++){var g=e.plugins[f];if(g.isSelectable()&&g.isLockSelected())for(var h=0;h<g.widgets.length;h++){var i=g.widgets[h];i.interceptReleased(c,d)}else for(var h=0;h<g.widgets.length;h++){var i=g.widgets[h];i.interceptReleased(c,d)}}},passivePlugins:function(){for(var a=this.getActiveProjection(),b=0;b<a.plugins.length;b++){var c=a.plugins[b];c.passive()}},activePlugins:function(){for(var a=this.getActiveProjection(),b=0;b<a.plugins.length;b++){var c=a.plugins[b];c.unpassive()}},getActiveProjection:function(){return this.getView().getActiveProjection()}})}(),function(){JenScript.Widget=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.Widget,{init:function(a){a=a||{},this.name=void 0!==a.name?a.name:"widget undefined name",this.Id=void 0!==a.Id?a.Id:"widget"+JenScript.sequenceId++,this.host,this.widgetFolder,this.width=void 0!==a.width?a.width:0,this.height=void 0!==a.height?a.height:0,this.xIndex=void 0!==a.xIndex?a.xIndex:0,this.yIndex=void 0!==a.yIndex?a.yIndex:0,this.sensibleShapes=[],this.noMoveOperation=!1,this.isMovable=!0,this.orphanLock=!1},onRegister:function(){},getId:function(){return this.Id},getWidth:function(){return this.width},getHeight:function(){return this.height},getxIndex:function(){return this.xIndex},getyIndex:function(){return this.yIndex},setNoMoveOperation:function(a){this.noMoveOperation=a},isNoMoveOperation:function(){return this.noMoveOperation},isSensible:function(a,b){for(var c=0;c<this.sensibleShapes.length;c++)if(this.sensibleShapes[c].contains(a,b))return!0;return!1},getSensibleShapes:function(){return this.sensibleShapes},clearSensibleShape:function(){this.sensibleShapes=[]},setSensibleShapes:function(a){this.sensibleShapes=a},addSensibleShape:function(a){this.sensibleShapes[this.sensibleShapes.length]=a},interceptMove:function(a,b){this.checkMoveOperation(a,b)},interceptPress:function(){},interceptDrag:function(){},interceptReleased:function(){this.setNoMoveOperation(!1)},interceptWheel:function(){},getHost:function(){return this.host},setHost:function(a){this.host=a},getWidgetFolder:function(){return this.widgetFolder},setWidgetFolder:function(a){this.widgetFolder=a},getThemeColor:function(){return this.host.getThemeColor()},postWidget:function(){this.xIndex=this.widgetFolder.targetFolder.xIndex,this.yIndex=this.widgetFolder.targetFolder.yIndex},create:function(){var a=this.getHost().getView(),b=new JenScript.Graphics({definitions:a.svgWidgetsDefinitions,graphics:a.svgWidgetsGraphics});b.deleteGraphicsElement(this.Id),this.paint(b)},destroy:function(){var a=this.getHost().getView(),b=new JenScript.Graphics({definitions:a.svgWidgetsDefinitions,graphics:a.svgWidgetsGraphics});b.deleteGraphicsElement(this.Id)},createGhost:function(){var a=this.getHost().getView(),b=new JenScript.Graphics({definitions:a.svgWidgetsDefinitions,graphics:a.svgWidgetsGraphics});b.deleteGraphicsElement(this.Id+"_ghost"),void 0!=this.getWidgetFolder()&&this.getWidgetFolder().lockPress&&this.createPotential(b)},destroyGhost:function(){var a=this.getHost().getView(),b=new JenScript.Graphics({definitions:a.svgWidgetsDefinitions,graphics:a.svgWidgetsGraphics});b.deleteGraphicsElement(this.Id+"_ghost")},createPotential:function(a){a.deleteGraphicsElement(this.Id+"_ghost");var b=(new JenScript.SVGGroup).Id(this.Id+"_ghost"),c=this,d=c.getWidgetFolder(),e=(new JenScript.SVGRect).origin(d.currentDragX-d.width/2,d.currentDragY-d.height/2).size(d.width,d.height);e.stroke("green").fillNone(),b.child(e.toSVG());var f=this.getHost().getView().newFolderIntanceByPosition(d.Id,d.width,d.height,d.currentDragX,d.currentDragY);if(void 0!==f){var g=(new JenScript.SVGRect).origin(f.x,f.y).size(f.width,f.height);this.isEmptyFolder(f)?(d.potentialFolder=f,d.targetFolder=f,g.fill("rgba(0, 255, 0, 0.6)").strokeNone()):g.fill("rgba(255,0,0,0.6)").strokeNone(),b.child(g.toSVG()),a.insertSVG(b.toSVG())}},isEmptyFolder:function(a){for(var b=a.getBounds2D(),c=this.getHost(),d=0;d<c.widgets.length;d++){var e=c.widgets[d];if(e.Id!==this.Id){var f=e.getWidgetFolder();if(b.intersects(f.getBounds2D()))return!1}}for(var g=this.getHost().getProjection(),h=0;h<g.plugins.length;h++){var i=g.plugins[h];if(i.hasWidgets()&&c.Id!==i.Id)for(var d=0;d<i.widgets.length;d++){var j=i.widgets[d],f=j.getWidgetFolder();if(b.intersects(f.getBounds2D()))return console.log("collide with "+j.name),!1}}return!0},paintWidget:function(){},layoutFolder:function(){var a=this.getHost().getProjection().getView();if(void 0===this.getWidgetFolder())this.setWidgetFolder(a.newWidgetFolderIntance(this.getId(),this.getWidth(),this.getHeight(),this.getxIndex(),this.getyIndex()));else{var b=a.newWidgetFolderIntance(this.getId(),this.getWidth(),this.getHeight(),this.getxIndex(),this.getyIndex());this.getWidgetFolder().updateFrame(b.x,b.y,b.width,b.height)}},paint:function(a){(this.getHost().isLockSelected()||!this.isOrphanLock())&&this.getHost().getProjection().isActive()&&(this.layoutFolder(),this.paintWidget(a))},checkMoveOperation:function(a,b){return this.getHost().isLockSelected()||!this.isOrphanLock()?this.isMovable?void this.setNoMoveOperation(this.isSensible(a,b)?!0:!1):void this.setNoMoveOperation(!0):void 0},isMovable:function(){return this.isMovable},setMovable:function(a){this.isMovable=a},isOrphanLock:function(){return this.orphanLock},setOrphanLock:function(a){this.orphanLock=a},attachPluginLockUnlockFactory:function(a){var b=this;this.getHost().addPluginListener("lock",function(){b.create()},"Plugin lock listener, create for reason : "+a),this.getHost().addPluginListener("unlock",function(){b.destroy()},"Plugin lock listener, destroy for reason : "+a),this.getHost().addPluginListener("projectionRegister",function(c){void 0!==c.getProjection().getView()?b.attachViewActivePassiveFactory():c.getProjection().addProjectionListener("viewRegister",function(){b.attachViewActivePassiveFactory()},"Wait for projection view registering for reason : "+a)},"Plugin listener for projection register for reason : "+a)},attachViewActivePassiveFactory:function(a){var b=this,c=this.getHost().getProjection().getView();void 0!==c&&(c.addViewListener("projectionActive",function(){b.getHost().isLockSelected()&&b.create()},"Projection active listener, create for reason :"+a),c.addViewListener("projectionPassive",function(){b.getHost().isLockSelected()&&b.destroy()},"Projection passive listener, destroy for reason : "+a))}})}(),function(){JenScript.WidgetFolder=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.WidgetFolder,{init:function(a){a=a||{}},toString:function(){return"WidgetFolder [Id="+this.Id+", xIndex="+this.xIndex+", yIndex="+this.yIndex+", x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+"]"},getBounds2D:function(){return new JenScript.Bound2D(this.x,this.y,this.width,this.height)},getId:function(){return this.Id},startPress:function(){this.lockPress=!0},interruptPress:function(){this.lockPress=!1},updateFrame:function(a,b,c,d){this.x=a,this.y=b,this.width=c,this.height=d}})}(),function(){JenScript.AbstractWidgetGeometry=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.AbstractWidgetGeometry,{init:function(){this.sensibleShapes=[]},solveGeometry:function(){},interceptSensibleShape:function(a,b){for(var c=0;c<this.sensibleShapes.length;c++)if(sensibleShapes[c].contains(a,b))return!0;return!1},getSensibleShapes:function(){return this.sensibleShapes},clearSensibleShape:function(){this.sensibleShapes=[]},setSensibleShapes:function(a){this.sensibleShapes=a},addSensibleShape:function(a){this.sensibleShapes[this.sensibleShapes.length]=a}})}(),function(){JenScript.AbstractBarGeometry=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.AbstractBarGeometry,JenScript.AbstractWidgetGeometry),JenScript.Model.addMethods(JenScript.AbstractBarGeometry,{_init:function(a){this.bound2D,this.outlineShape,this.rect1,this.rect2,this.button1,this.button2,this.rollover1=!1,this.rollover2=!1,this.solveRequest=!0,this.margin=4,this.radius,this.inset=3,this.barOrientation=a.barOrientation,JenScript.AbstractWidgetGeometry.call(this,a)},solveBarGeometry:function(){var a=this.bound2D,b=this.margin,c=this.inset,d=this.radius;"Horizontal"==this.barOrientation?(this.outlineShape=(new JenScript.SVGRect).origin(a.getX(),a.getY()).size(a.getWidth(),a.getHeight()).radius(d/3,d/2),this.rect1=new JenScript.Bound2D(a.getX()+b+c,a.getY()+c,d-2*c,d-2*c),this.rect2=new JenScript.Bound2D(a.getX()+c+a.getWidth()-b-d,a.getY()+c,d-2*c,d-2*c)):"Vertical"==this.barOrientation&&(this.outlineShape=(new JenScript.SVGRect).origin(a.getX(),a.getY()).size(a.getWidth(),a.getHeight()).radius(d/2,d/3),this.rect1=new JenScript.Bound2D(a.getX()+c,a.getY()+b+c,d-2*c,d-2*c),this.rect2=new JenScript.Bound2D(a.getX()+c,a.getY()+a.getHeight()-d-b+c,d-2*c,d-2*c)),this.clearSensibleShape(),this.addSensibleShape(this.rect1),this.addSensibleShape(this.rect2)},solveButton1Geometry:function(){},solveButton2Geometry:function(){},solveGeometry:function(a){if(this.solveRequest){if(this.bound2D=a,"Horizontal"===this.barOrientation?this.radius=a.height:"Vertical"===this.barOrientation&&(this.radius=a.width),void 0==this.barOrientation)return;this.solveBarGeometry(),this.solveButton1Geometry(this.rect1),this.solveButton2Geometry(this.rect2),this.solveRequest=!1}}}),JenScript.PlusMinusBarGeometry=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.PlusMinusBarGeometry,JenScript.AbstractBarGeometry),JenScript.Model.addMethods(JenScript.PlusMinusBarGeometry,{__init:function(a){JenScript.AbstractBarGeometry.call(this,a)},solveButton1Geometry:function(a){this.button1="Horizontal"===this.barOrientation?(new JenScript.SVGPath).moveTo(a.getX(),a.getY()+a.getHeight()/2).lineTo(a.getX()+a.getWidth(),a.getY()+a.getHeight()/2):(new JenScript.SVGPath).moveTo(a.getX()+a.getWidth()/2,a.getY()).lineTo(a.getX()+a.getWidth()/2,a.getY()+a.getHeight()).moveTo(a.getX(),a.getY()+a.getHeight()/2).lineTo(a.getX()+a.getWidth(),a.getY()+a.getHeight()/2)},solveButton2Geometry:function(a){this.button2="Horizontal"===this.barOrientation?(new JenScript.SVGPath).moveTo(a.getX()+a.getWidth()/2,a.getY()).lineTo(a.getX()+a.getWidth()/2,a.getY()+a.getHeight()).moveTo(a.getX(),a.getY()+a.getHeight()/2).lineTo(a.getX()+a.getWidth(),a.getY()+a.getHeight()/2):(new JenScript.SVGPath).moveTo(a.getX(),a.getY()+a.getHeight()/2).lineTo(a.getX()+a.getWidth(),a.getY()+a.getHeight()/2)}}),JenScript.BackwardForwardBarGeometry=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.BackwardForwardBarGeometry,JenScript.AbstractBarGeometry),JenScript.Model.addMethods(JenScript.BackwardForwardBarGeometry,{__init:function(a){JenScript.AbstractBarGeometry.call(this,a)},solveButton1Geometry:function(a){this.button1="Horizontal"==this.barOrientation?(new JenScript.SVGPath).moveTo(a.getX(),a.getY()+a.getHeight()/2).lineTo(a.getX()+a.getWidth(),a.getY()).lineTo(a.getX()+a.getWidth(),a.getY()+a.getHeight()).close():(new JenScript.SVGPath).moveTo(a.getX(),a.getY()+a.getHeight()).lineTo(a.getX()+a.getWidth()/2,a.getY()).lineTo(a.getX()+a.getWidth(),a.getY()+a.getHeight()).close()},solveButton2Geometry:function(a){this.button2="Horizontal"==this.barOrientation?(new JenScript.SVGPath).moveTo(a.getX(),a.getY()).lineTo(a.getX()+a.getWidth(),a.getY()+a.getHeight()/2).lineTo(a.getX(),a.getY()+a.getHeight()).close():(new JenScript.SVGPath).moveTo(a.getX(),a.getY()).lineTo(a.getX()+a.getWidth()/2,a.getY()+a.getHeight()).lineTo(a.getX()+a.getWidth(),a.getY()).close()}}),JenScript.AbstractBarWidget=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.AbstractBarWidget,JenScript.Widget),JenScript.Model.addMethods(JenScript.AbstractBarWidget,{_init:function(a){this.geometry=a.geometry,this.barOrientation=a.barOrientation,this.outlineFillColor=a.outlineFillColor,this.shader=a.shader,this.outlineStrokeColor=a.outlineStrokeColor,this.outlineStrokeWidth=void 0!==a.outlineStrokeWidth?a.outlineStrokeWidth:2,this.button1FillColor=a.button1FillColor,this.button2FillColor=a.button2FillColor,this.button1DrawColor=a.button1DrawColor,this.button2DrawColor=a.button2DrawColor,this.button1RolloverFillColor=a.button1RolloverFillColor,this.button2RolloverFillColor=a.button2RolloverFillColor,this.button1RolloverDrawColor=a.button1RolloverDrawColor,this.button2RolloverDrawColor=a.button2RolloverDrawColor,void 0!==a.buttonFillColor&&this.setButtonFillColor(a.buttonFillColor),void 0!==a.buttonRolloverFillColor&&this.setButtonRolloverFillColor(a.buttonRolloverFillColor),void 0!==a.buttonDrawColor&&this.setButtonDrawColor(a.buttonDrawColor),void 0!==a.buttonRolloverDrawColor&&this.setButtonRolloverDrawColor(a.buttonRolloverDrawColor),this.buttonStrokeWidth=void 0!==a.buttonStrokeWidth?a.buttonStrokeWidth:1,this.button1Visible=!0,this.button2Visible=!0,this.svg={},a.Id=void 0!==a.Id?a.Id:"abstractbarwidget",a.width=void 0!==a.width?a.width:80,a.height=void 0!==a.height?a.height:18,a.xIndex=void 0!==a.xIndex?a.xIndex:2,a.yIndex=void 0!==a.yIndex?a.yIndex:100,a.barOrientation=void 0!==a.barOrientation?a.barOrientation:"Horizontal",JenScript.Widget.call(this,a)},setOutlineFillColor:function(a){this.outlineFillColor=a},setOutlineStrokeColor:function(a){this.outlineStrokeColor=a},setOutlineStrokeWidth:function(a){this.outlineStrokeWidth=a},setButtonRolloverFillColor:function(a){this.button1RolloverFillColor=a,this.button2RolloverFillColor=a},setButtonRolloverDrawColor:function(a){this.button1RolloverDrawColor=a,this.button2RolloverDrawColor=a},setButtonFillColor:function(a){this.button1FillColor=a,this.button2FillColor=a},setButtonDrawColor:function(a){this.button1DrawColor=a,this.button2DrawColor=a},setShader:function(a){this.shader=a},interceptMove:function(a,b){this.checkMoveOperation(a,b),this.trackRollover(a,b)},trackRollover:function(a,b){void 0!=this.geometry.rect1&&this.geometry.rect1.contains(a,b)?this.geometry.rollover1||(this.geometry.rollover1=!0,this.onButton1RolloverOn()):this.geometry.rollover1&&(this.geometry.rollover1=!1,this.onButton1RolloverOff()),void 0!=this.geometry.rect2&&this.geometry.rect2.contains(a,b)?this.geometry.rollover2||(this.geometry.rollover2=!0,this.onButton2RolloverOn()):this.geometry.rollover2&&(this.geometry.rollover2=!1,this.onButton2RolloverOff())},onButton1RolloverOn:function(){void 0!==this.button1RolloverDrawColor&&this.svg.button1.setAttribute("stroke",this.button1RolloverDrawColor),void 0!==this.button1RolloverFillColor&&this.svg.button1.setAttribute("fill",this.button1RolloverFillColor)},onButton1RolloverOff:function(){void 0!==this.button1DrawColor&&this.svg.button1.setAttribute("stroke",this.button1DrawColor),void 0!==this.button1FillColor&&this.svg.button1.setAttribute("fill",this.button1FillColor)},onButton2RolloverOn:function(){void 0!==this.button2RolloverDrawColor&&this.svg.button2.setAttribute("stroke",this.button2RolloverDrawColor),void 0!==this.button2RolloverFillColor&&this.svg.button2.setAttribute("fill",this.button2RolloverFillColor)},onButton2RolloverOff:function(){void 0!==this.button1DrawColor&&this.svg.button2.setAttribute("stroke",this.button2DrawColor),void 0!==this.button1FillColor&&this.svg.button2.setAttribute("fill",this.button2FillColor)},onButton1Press:function(){},onButton2Press:function(){},onButton1Released:function(){},onButton2Released:function(){},interceptPress:function(a,b){(this.getHost().isLockSelected()||!this.isOrphanLock())&&(void 0!==this.geometry.rect1&&this.geometry.rect1.contains(a,b)&&this.onButton1Press(),void 0!=this.geometry.rect2&&this.geometry.rect2.contains(a,b)&&this.onButton2Press())},interceptDrag:function(){},interceptReleased:function(){this.onButton1Released(),this.onButton2Released()},onPaintStart:function(){},onPaintEnd:function(){},paintWidget:function(a){if(void 0!==this.getWidgetFolder()&&void 0!==this.geometry){this.onPaintStart();var b=this.getWidgetFolder(),c=b.getBounds2D();this.geometry.solveRequest=!0,this.geometry.solveGeometry(c),this.setSensibleShapes(this.geometry.getSensibleShapes()),a.deleteGraphicsElement(this.Id);var d=(new JenScript.SVGGroup).Id(this.Id),e=void 0;if(this.geometry.outlineShape.fillNone().strokeNone(),void 0!=this.shader&&void 0!=this.shader.percents&&void 0!=this.shader.colors){var f=void 0,g=void 0;"Horizontal"==this.barOrientation?(f={x:c.getCenterX(),y:c.getY()},g={x:c.getCenterX(),y:c.getY()+c.getHeight()}):(f={x:c.getX(),y:c.getCenterY()},g={x:c.getX()+c.getWidth(),y:c.getCenterY()});var h="gradient"+JenScript.sequenceId++,i=(new JenScript.SVGLinearGradient).Id(h).from(f.x,f.y).to(g.x,g.y).shade(this.shader.percents,this.shader.colors,this.shader.opacity).toSVG();console.log("shade bar"),a.definesSVG(i),this.geometry.outlineShape.fill("url(#"+h+")")}if(void 0!==this.outlineFillColor&&this.geometry.outlineShape.fill(this.outlineFillColor),void 0!==this.outlineStrokeColor&&this.geometry.outlineShape.stroke(this.outlineStrokeColor).strokeWidth(this.outlineStrokeWidth),e=this.geometry.outlineShape.toSVG(),d.child(e),this.svg.outline=e,this.button1Visible){var j=this.geometry.button1,k=this.geometry.rollover1?this.button1RolloverFillColor:this.button1FillColor,l=this.geometry.rollover1?this.button1RolloverDrawColor:this.button1DrawColor;j.fill(k),j.stroke(l).strokeWidth(this.buttonStrokeWidth);var m=j.toSVG();this.svg.button1=m,d.child(m)}if(this.button2Visible){var n=this.geometry.button2,k=this.geometry.rollover2?this.button2RolloverFillColor:this.button2FillColor,l=this.geometry.rollover2?this.button2RolloverDrawColor:this.button2DrawColor;n.fill(k),n.stroke(l).strokeWidth(this.buttonStrokeWidth);var o=n.toSVG();this.svg.button2=o,d.child(o)}a.insertSVG(d.toSVG()),this.onPaintEnd()}}}),JenScript.AbstractPlusMinusBarWidget=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.AbstractPlusMinusBarWidget,JenScript.AbstractBarWidget),JenScript.Model.addMethods(JenScript.AbstractPlusMinusBarWidget,{__init:function(a){a=a||{},a.geometry=new JenScript.PlusMinusBarGeometry(a),JenScript.AbstractBarWidget.call(this,a)}}),JenScript.AbstractBackwardForwardBarWidget=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.AbstractBackwardForwardBarWidget,JenScript.AbstractBarWidget),JenScript.Model.addMethods(JenScript.AbstractBackwardForwardBarWidget,{__init:function(a){a=a||{},a.geometry=new JenScript.BackwardForwardBarGeometry(a),JenScript.AbstractBarWidget.call(this,a)}})}(),function(){JenScript.AbstractPadGeometry=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.AbstractPadGeometry,JenScript.AbstractWidgetGeometry),JenScript.Model.addMethods(JenScript.AbstractPadGeometry,{_init:function(){this.bound2D,this.centerX,this.centerY,this.radius,this.fragmentRadius,this.baseShape,this.controlShape,this.rectNorth,this.rectSouth,this.rectWest,this.rectEast,this.northButton,this.eastButton,this.southButton,this.westButton,this.northRollover=!1,this.eastRollover=!1,this.southRollover=!1,this.westRollover=!1,this.inset=6,this.solveRequest=!0},solvePadGeometry:function(){var a=this.centerX,b=this.centerY,c=this.inset,d=this.radius,e=this.fragmentRadius;this.baseShape=(new JenScript.SVGCircle).center(a,b).radius(d),this.controlShape=new JenScript.SVGPath;var f=this.controlShape;f.moveTo(a-e,b-e),f.lineTo(a-e,b-2*e),f.curveTo(a-e,b-d,a+e,b-d,a+e,b-2*e),f.lineTo(a+e,b-e),f.lineTo(a+2*e,b-e),f.curveTo(a+d,b-e,a+d,b+e,a+2*e,b+e),f.lineTo(a+e,b+e),f.lineTo(a+e,b+2*e),f.curveTo(a+e,b+d,a-e,b+d,a-e,b+2*e),f.lineTo(a-e,b+e),f.lineTo(a-2*e,b+e),f.curveTo(a-d,b+e,a-d,b-e,a-2*e,b-e),f.close(),this.rectNorth=new JenScript.Bound2D(a-e+c,b-3*e+c,2*e-2*c,2*e-2*c),this.rectSouth=new JenScript.Bound2D(a-e+c,b+e+c,2*e-2*c,2*e-2*c),this.rectWest=new JenScript.Bound2D(a-3*e+c,b-e+c,2*e-2*c,2*e-2*c),this.rectEast=new JenScript.Bound2D(a+e+c,b-e+c,2*e-2*c,2*e-2*c),this.clearSensibleShape(),this.addSensibleShape(this.rectNorth),this.addSensibleShape(this.rectSouth),this.addSensibleShape(this.rectWest),this.addSensibleShape(this.rectEast)},solveButtonNorthGeometry:function(){},solveButtonSouthGeometry:function(){},solveButtonWestGeometry:function(){},solveButtonEastGeometry:function(){},solveGeometry:function(a){this.solveRequest&&(this.bound2D=a,this.centerX=a.getCenterX(),this.centerY=a.getCenterY(),this.radius=a.getWidth()/2,this.fragmentRadius=this.radius/3,this.solvePadGeometry(),this.solveButtonNorthGeometry(this.rectNorth),this.solveButtonSouthGeometry(this.rectSouth),this.solveButtonWestGeometry(this.rectWest),this.solveButtonEastGeometry(this.rectEast),this.solveRequest=!1)}}),JenScript.AbstractPadWidget=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.AbstractPadWidget,JenScript.Widget),JenScript.Model.addMethods(JenScript.AbstractPadWidget,{_init:function(a){this.padGeometry=a.geometry,this.baseFillColor=a.baseFillColor,this.baseStrokeColor=a.baseStrokeColor,this.baseStrokeWidth=a.baseStrokeWidth,this.controlFillColor=a.controlFillColor,this.controlStrokeColor=a.controlStrokeColor,this.controlStrokeWidth=a.controlStrokeWidth,this.buttonFillColor=a.buttonFillColor,this.buttonRolloverFillColor=a.buttonRolloverFillColor,this.buttonStrokeColor=a.buttonStrokeColor,this.buttonRolloverStrokeColor=a.buttonRolloverStrokeColor,this.buttonStrokeWidth=a.buttonStrokeWidth,this.svg={},JenScript.Widget.call(this,a)},interceptDrag:function(){},interceptReleased:function(){this.onNorthButtonReleased(),this.onSouthButtonReleased(),this.onWestButtonReleased(),this.onEastButtonReleased()},paintWidget:function(a){if(this.getHost().isLockSelected()&&void 0!=this.getWidgetFolder()&&void 0!=this.padGeometry){a.deleteGraphicsElement(this.Id);var b=(new JenScript.SVGGroup).Id(this.Id),c=this.getWidgetFolder(),d=c.getBounds2D();this.padGeometry.solveRequest=!0,this.padGeometry.solveGeometry(d),this.setSensibleShapes(this.padGeometry.getSensibleShapes());var e=this.padGeometry;void 0!==this.baseFillColor&&(e.baseShape.fill(this.baseFillColor).strokeNone(),this.svg.baseFill=e.baseShape.toSVG(),b.child(this.svg.baseFill)),void 0!==this.baseStrokeColor&&(e.baseShape.stroke(this.baseStrokeColor).strokeWidth(this.baseStrokeWidth).fillNone(),this.svg.baseStroke=e.baseShape.toSVG(),b.child(this.svg.baseStroke)),void 0!=this.controlFillColor&&(e.controlShape.fill(this.controlFillColor).strokeNone(),this.svg.controlFill=e.controlShape.toSVG(),b.child(this.svg.controlFill)),void 0!=this.controlStrokeColor&&(e.controlShape.stroke(this.controlStrokeColor).strokeWidth(this.controlStrokeWidth).fillNone(),this.svg.controlStroke=e.controlShape.toSVG(),b.child(this.svg.controlStroke));var f=this;this.svg.buttons={};var g=function(a,c,d){f.svg.buttons[d]={};var e=a===!0?f.buttonRolloverFillColor:f.buttonFillColor,g=a===!0?f.buttonRolloverStrokeColor:f.buttonStrokeColor;void 0!==e&&(c.fill(e).strokeNone(),f.svg.buttons[d].fill=c.toSVG(),b.child(f.svg.buttons[d].fill)),void 0!==g&&(c.stroke(g).strokeWidth(this.buttonStrokeWidth).fillNone(),f.svg.buttons[d].stroke=c.toSVG(),b.child(f.svg.buttons[d].stroke))};g(e.northRollover,e.northButton,"north"),g(e.southRollover,e.southButton,"south"),g(e.westRollover,e.westButton,"west"),g(e.eastRollover,e.eastButton,"east"),a.insertSVG(b.toSVG())}},interceptMove:function(a,b){if(this.checkMoveOperation(a,b),void 0!==this.getWidgetFolder()){var c=this.padGeometry;return this.getWidgetFolder().getBounds2D().contains(a,b)?void this.trackRollover(a,b):(c.northRollover=!1,c.southRollover=!1,c.westRollover=!1,c.eastRollover=!1,this.onNorthButtonRolloverOff(),this.onSouthButtonRolloverOff(),this.onWestButtonRolloverOff(),void this.onEastButtonRolloverOff())}},trackRollover:function(a,b){var c=this.padGeometry;void 0!=c.rectNorth&&c.rectNorth.contains(a,b)?c.northRollover||(c.northRollover=!0,this.onNorthButtonRolloverOn()):c.northRollover&&(c.northRollover=!1,this.onNorthButtonRolloverOff()),void 0!=c.rectSouth&&c.rectSouth.contains(a,b)?c.southRollover||(c.southRollover=!0,this.onSouthButtonRolloverOn()):c.southRollover&&(c.southRollover=!1,this.onSouthButtonRolloverOff()),void 0!=c.rectWest&&c.rectWest.contains(a,b)?c.westRollover||(c.westRollover=!0,this.onWestButtonRolloverOn()):c.westRollover&&(c.westRollover=!1,this.onWestButtonRolloverOff()),void 0!=c.rectEast&&c.rectEast.contains(a,b)?c.eastRollover||(c.eastRollover=!0,this.onEastButtonRolloverOn()):c.eastRollover&&(c.eastRollover=!1,this.onEastButtonRolloverOff())},_rollOn:function(a){this.svg.buttons[a].stroke.setAttribute("stroke",this.buttonRolloverStrokeColor),this.svg.buttons[a].fill.setAttribute("fill",this.buttonRolloverFillColor)},_rollOff:function(a){this.svg.buttons[a].stroke.setAttribute("stroke",this.buttonStrokeColor),this.svg.buttons[a].fill.setAttribute("fill",this.buttonFillColor)},onNorthButtonRolloverOn:function(){this._rollOn("north")},onNorthButtonRolloverOff:function(){this._rollOff("north")},onSouthButtonRolloverOn:function(){this._rollOn("south")},onSouthButtonRolloverOff:function(){this._rollOff("south")},onWestButtonRolloverOn:function(){this._rollOn("west")},onWestButtonRolloverOff:function(){this._rollOff("west")},onEastButtonRolloverOn:function(){this._rollOn("east")},onEastButtonRolloverOff:function(){this._rollOff("east")},onNorthButtonPress:function(){},onSouthButtonPress:function(){},onWestButtonPress:function(){},onEastButtonPress:function(){},onNorthButtonReleased:function(){},onSouthButtonReleased:function(){},onWestButtonReleased:function(){},onEastButtonReleased:function(){},interceptPress:function(a,b){var c=this.padGeometry;void 0!=c.rectNorth&&this.padGeometry.rectNorth.contains(a,b)&&this.onNorthButtonPress(),void 0!=this.padGeometry.rectSouth&&c.rectSouth.contains(a,b)&&this.onSouthButtonPress(),void 0!=c.rectWest&&c.rectWest.contains(a,b)&&this.onWestButtonPress(),void 0!=c.rectEast&&c.rectEast.contains(a,b)&&this.onEastButtonPress()}}),JenScript.BackwardForwardPadGeometry=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.BackwardForwardPadGeometry,JenScript.AbstractPadGeometry),JenScript.Model.addMethods(JenScript.BackwardForwardPadGeometry,{__init:function(a){a=a||{},JenScript.AbstractPadGeometry.call(this,a)},solveButtonNorthGeometry:function(a){this.northButton=new JenScript.SVGPath,this.northButton.moveTo(a.getX(),a.getY()+a.getHeight()),this.northButton.lineTo(a.getX()+a.getWidth()/2,a.getY()),this.northButton.lineTo(a.getX()+a.getWidth(),a.getY()+a.getHeight()),this.northButton.close()},solveButtonSouthGeometry:function(a){this.southButton=new JenScript.SVGPath,this.southButton.moveTo(a.getX(),a.getY()),this.southButton.lineTo(a.getX()+a.getWidth()/2,a.getY()+a.getHeight()),this.southButton.lineTo(a.getX()+a.getWidth(),a.getY()),this.southButton.close()},solveButtonWestGeometry:function(a){this.westButton=new JenScript.SVGPath,this.westButton.moveTo(a.getX(),a.getY()+a.getHeight()/2),this.westButton.lineTo(a.getX()+a.getWidth(),a.getY()),this.westButton.lineTo(a.getX()+a.getWidth(),a.getY()+a.getHeight()),this.westButton.close()},solveButtonEastGeometry:function(a){this.eastButton=new JenScript.SVGPath,this.eastButton.moveTo(a.getX(),a.getY()),this.eastButton.lineTo(a.getX()+a.getWidth(),a.getY()+a.getHeight()/2),this.eastButton.lineTo(a.getX(),a.getY()+a.getHeight()),this.eastButton.close()}}),JenScript.PlusMinusPadGeometry=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.PlusMinusPadGeometry,JenScript.AbstractPadGeometry),JenScript.Model.addMethods(JenScript.PlusMinusPadGeometry,{__init:function(a){a=a||{},JenScript.AbstractPadGeometry.call(this,a)},solveButtonNorthGeometry:function(a){this.northButton=new JenScript.SVGPath,this.northButton.moveTo(a.getX()+a.getWidth()/2,a.getY()),this.northButton.lineTo(a.getX()+a.getWidth()/2,a.getY()+a.getHeight()),this.northButton.moveTo(a.getX(),a.getY()+a.getHeight()/2),this.northButton.lineTo(a.getX()+a.getWidth(),a.getY()+a.getHeight()/2)},solveButtonSouthGeometry:function(a){this.southButton=new JenScript.SVGPath,this.southButton.moveTo(a.getX(),a.getY()+a.getHeight()/2),this.southButton.lineTo(a.getX()+a.getWidth(),a.getY()+a.getHeight()/2)},solveButtonWestGeometry:function(a){this.westButton=new JenScript.SVGPath,this.westButton.moveTo(a.getX(),a.getY()+a.getHeight()/2),this.westButton.lineTo(a.getX()+a.getWidth(),a.getY()+a.getHeight()/2)},solveButtonEastGeometry:function(a){this.eastButton=new JenScript.SVGPath,this.eastButton.moveTo(a.getX()+a.getWidth()/2,a.getY()),this.eastButton.lineTo(a.getX()+a.getWidth()/2,a.getY()+a.getHeight()),this.eastButton.moveTo(a.getX(),a.getY()+a.getHeight()/2),this.eastButton.lineTo(a.getX()+a.getWidth(),a.getY()+a.getHeight()/2)}}),JenScript.AbstractBackwardForwardPadWidget=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.AbstractBackwardForwardPadWidget,JenScript.AbstractPadWidget),JenScript.Model.addMethods(JenScript.AbstractBackwardForwardPadWidget,{__init:function(a){a=a||{},a.geometry=new JenScript.BackwardForwardPadGeometry,JenScript.AbstractPadWidget.call(this,a)}}),JenScript.AbstractPlusMinusPadWidget=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.AbstractPlusMinusPadWidget,JenScript.AbstractPadWidget),JenScript.Model.addMethods(JenScript.AbstractPlusMinusPadWidget,{__init:function(a){a=a||{},a.geometry=new JenScript.PlusMinusPadGeometry,JenScript.AbstractPadWidget.call(this,a)}})}(),function(){JenScript.AbstractButtonGeometry=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.AbstractButtonGeometry,JenScript.AbstractWidgetGeometry),JenScript.Model.addMethods(JenScript.AbstractButtonGeometry,{_init:function(a){this.bound2D,this.outlineShape,this.rect,this.button,this.rollover=!1,this.solveRequest=!0,this.radius=void 0!==a.radius?a.radius:3,this.inset=void 0!==a.inset?a.inset:4,JenScript.AbstractWidgetGeometry.call(this,a)},solveButtonGeometry:function(){},solveGeometry:function(a){if(this.solveRequest){this.bound2D=a;var b=this.inset;this.outlineShape=(new JenScript.SVGRect).origin(a.getX(),a.getY()).size(a.getWidth(),a.getHeight()),this.rect=new JenScript.Bound2D(a.getX()+b,a.getY()+b,a.getWidth()-2*b,a.getHeight()-2*b),this.clearSensibleShape(),this.addSensibleShape(this.rect),this.solveButtonGeometry(this.rect),this.solveRequest=!1}}}),JenScript.ButtonGeometry=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.ButtonGeometry,JenScript.AbstractButtonGeometry),JenScript.Model.addMethods(JenScript.ButtonGeometry,{__init:function(a){JenScript.AbstractButtonGeometry.call(this,a);

},solveButtonGeometry:function(a){this.button=(new JenScript.SVGRect).origin(a.getX(),a.getY()).size(a.getWidth(),a.getHeight()).radius(this.radius,this.radius)}}),JenScript.AbstractButtonWidget=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.AbstractButtonWidget,JenScript.Widget),JenScript.Model.addMethods(JenScript.AbstractButtonWidget,{_init:function(a){this.geometry=a.geometry,this.text=a.text,this.textId,this.textColor=void 0!==a.textColor?a.textColor:"black",this.fontSize=void 0!==a.fontSize?a.fontSize:12,this.shader=a.shader,this.buttonFillColor=a.buttonFillColor,this.buttonDrawColor=a.buttonDrawColor,this.buttonRolloverFillColor=a.buttonRolloverFillColor,this.buttonRolloverDrawColor=a.buttonRolloverDrawColor,this.buttonStrokeWidth=void 0!==a.buttonStrokeWidth?a.buttonStrokeWidth:1,this.buttonFillColorOpacity=void 0!==a.buttonFillColorOpacity?a.buttonFillColorOpacity:1,this.buttonDrawColorOpacity=void 0!==a.buttonDrawColorOpacity?a.buttonDrawColorOpacity:1,this.buttonVisible=!0,this.svg={},a.Id=void 0!==a.Id?a.Id:"AbstractButtonWidget",a.width=void 0!==a.width?a.width:80,a.height=void 0!==a.height?a.height:24,a.xIndex=void 0!==a.xIndex?a.xIndex:100,a.yIndex=void 0!==a.yIndex?a.yIndex:100,JenScript.Widget.call(this,a)},setButtonRolloverFillColor:function(a){this.buttonRolloverFillColor=a},setButtonRolloverDrawColor:function(a){this.buttonRolloverDrawColor=a},setButtonFillColor:function(a){this.buttonFillColor=a},setButtonFillColorOpacity:function(a){this.buttonFillColorOpacity=a},setButtonDrawColor:function(a){this.buttonDrawColor=a},setButtonDrawColorOpacity:function(a){this.buttonDrawColorOpacity=a},setShader:function(a){this.shader=a},interceptMove:function(a,b){this.checkMoveOperation(a,b),this.trackRollover(a,b)},trackRollover:function(a,b){void 0!=this.geometry.rect&&this.geometry.rect.contains(a,b)?this.geometry.rollover||(this.geometry.rollover=!0,this.onButtonRolloverOn()):this.geometry.rollover&&(this.geometry.rollover=!1,this.onButtonRolloverOff())},onButtonRolloverOn:function(){this.svg.button.setAttribute("stroke",this.buttonRolloverDrawColor),void 0!==this.buttonRolloverFillColor?this.svg.button.setAttribute("fill",this.buttonRolloverFillColor):void 0!==this.buttonFillColor?this.svg.button.setAttribute("fill",this.buttonFillColor):this.svg.button.removeAttribute("fill");var a=this.getWidgetFolder(),b=a.getBounds2D(),c=(new JenScript.SVGElement).name("text").attr("id",this.textId).attr("x",b.getX()+b.getWidth()).attr("y",b.getY()).attr("font-size",this.fontSize).attr("fill",this.textColor).attr("fill-opacity",1).attr("text-anchor","middle").textContent(this.text);this.svg.group.appendChild(c.buildHTML())},onButtonRolloverOff:function(){this.svg.button.setAttribute("stroke",this.buttonDrawColor),void 0!==this.buttonFillColor?this.svg.button.setAttribute("fill",this.buttonFillColor):void 0!==this.buttonFillColor?this.svg.button.setAttribute("fill",this.buttonFillColor):this.svg.button.removeAttribute("fill");var a=document.getElementById(this.textId);a&&this.svg.group.removeChild(a)},onButtonPress:function(){},onButtonReleased:function(){},interceptPress:function(a,b){(this.getHost().isLockSelected()||!this.isOrphanLock())&&void 0!==this.geometry.rect&&this.geometry.rect.contains(a,b)&&this.onButtonPress()},interceptDrag:function(){},interceptReleased:function(){this.onButtonReleased()},onPaintStart:function(){},onPaintEnd:function(){},paintWidget:function(a){if(void 0!==this.getWidgetFolder()&&void 0!==this.geometry){this.onPaintStart();var b=this.getWidgetFolder(),c=b.getBounds2D();this.geometry.solveRequest=!0,this.geometry.solveGeometry(c),this.setSensibleShapes(this.geometry.getSensibleShapes()),a.deleteGraphicsElement(this.Id);var d=(new JenScript.SVGGroup).Id(this.Id),e=void 0;if(void 0!=this.shader&&void 0!=this.shader.percents&&void 0!=this.shader.colors){var f={x:c.getCenterX(),y:c.getY()},g={x:c.getCenterX(),y:c.getY()+c.getHeight()},h="gradient"+JenScript.sequenceId++;(new JenScript.SVGLinearGradient).Id(h).from(f.x,f.y).to(g.x,g.y).shade(this.shader.percents,this.shader.colors).toSVG()}if(e=this.geometry.outlineShape.toSVG(),this.svg.outline=e,this.buttonVisible){var i=this.geometry.button,j=this.geometry.rollover?this.buttonRolloverFillColor:this.buttonFillColor,k=this.geometry.rollover?this.buttonRolloverDrawColor:this.buttonDrawColor;void 0!==j?i.fill(j).fillOpacity(this.buttonFillColorOpacity):i.fillNone(),i.stroke(k).strokeWidth(this.buttonStrokeWidth).strokeOpacity(this.buttonDrawColorOpacity);var l=i.toSVG();this.svg.button=l,d.child(l)}this.textId="buttontext_"+this.Id;var m=d.toSVG();this.svg.group=m,a.insertSVG(m),this.onPaintEnd()}}}),JenScript.ButtonWidget=function(a){this.___init(a)},JenScript.Model.inheritPrototype(JenScript.ButtonWidget,JenScript.AbstractButtonWidget),JenScript.Model.addMethods(JenScript.ButtonWidget,{___init:function(a){a=a||{},a.Id="buttonwidget"+JenScript.sequenceId++,a.width=void 0!==a.width?a.width:60,a.height=void 0!==a.height?a.height:24,a.text=void 0!==a.text?a.text:"Text Label",a.name=void 0!==a.name?a.name:"Unamed Button Widget",a.xIndex=void 0!==a.xIndex?a.xIndex:100,a.yIndex=void 0!==a.yIndex?a.yIndex:100,a.geometry=new JenScript.ButtonGeometry(a),a.buttonDrawColor=void 0!==a.buttonDrawColor?a.buttonDrawColor:"black",a.buttonRolloverDrawColor=void 0!==a.buttonRolloverDrawColor?a.buttonRolloverDrawColor:"green",a.buttonDrawColorOpacity=void 0!==a.buttonDrawColorOpacity?a.buttonDrawColorOpacity:1,a.buttonFillColor=void 0!==a.buttonFillColor?a.buttonFillColor:"gray",a.buttonRolloverFillColor=void 0!==a.buttonRolloverFillColor?a.buttonRolloverFillColor:"orange",a.buttonFillColorOpacity=void 0!==a.buttonFillColorOpacity?a.buttonFillColorOpacity:1,JenScript.AbstractButtonWidget.call(this,a);this.setOrphanLock(!1),this.onPress=a.onPress},onButtonPress:function(){this.getHost().isLockSelected()&&this.onPress&&this.onPress()},onRegister:function(){void 0!==this.getHost().getProjection()?this.create():this.getHost().addPluginListener("projectionRegister",function(a){void 0!==a.getProjection().getView()?this.create():a.getProjection().addProjectionListener("viewRegister",function(){this.create()},"Wait for projection view registering for reason : simple button plugin")},"Plugin listener for projection register for reason : simple button plugin")}})}(),function(){JenScript.ButtonPlugin=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.ButtonPlugin,JenScript.Plugin),JenScript.Model.addMethods(JenScript.ButtonPlugin,{_init:function(a){a=a||{},a.name="SimpleButtonPlugin",a.selectable=!1,JenScript.Plugin.call(this,a)},paintPlugin:function(){},onProjectionRegister:function(){this.select()}})}(),function(){JenScript.DeviceOutlinePlugin=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.DeviceOutlinePlugin,JenScript.Plugin),JenScript.Model.addMethods(JenScript.DeviceOutlinePlugin,{_init:function(a){a=a||{},this.color=void 0!==a.color?a.color:"darkgray",this.strokeWidth=void 0!==a.strokeWidth?a.strokeWidth:1,a.priority=1e3,a.name="DeviceOutlinePlugin",JenScript.Plugin.call(this,a)},paintPlugin:function(a,b){if(b===JenScript.ViewPart.Device){var c=this.getProjection().getView(),d=c.devicePart,e=(new JenScript.SVGRect).origin(this.strokeWidth/2,this.strokeWidth/2).size(d.width-this.strokeWidth,d.height-this.strokeWidth).stroke(this.color).strokeWidth(this.strokeWidth).fillNone();a.insertSVG(e.toSVG())}}})}(),function(){JenScript.AbstractLabel=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.AbstractLabel,{init:function(a){a=a||{},this.Id=void 0!==a.Id?a.Id:"label"+JenScript.sequenceId++,this.opacity=void 0!==a.opacity?a.opacity:1,this.name=void 0!==a.name?a.name:"Unamed Label",this.location=void 0!==a.location?a.location:new JenScript.Point2D(0,0),this.text=void 0!==a.text?a.text:"Label",this.textColor=a.textColor,this.fontSize=void 0!==a.fontSize?a.fontSize:12,this.textAnchor=void 0!==a.textAnchor?a.textAnchor:"start",this.paintType=void 0!==a.paintType?a.paintType:"Both",this.cornerRadius=void 0!==a.cornerRadius?a.cornerRadius:0,this.outlineWidth=void 0!==a.outlineWidth?a.outlineWidth:1,this.shader=a.shader,this.outlineColor=a.outlineColor,this.fillColor=a.fillColor,this.fillOpacity=void 0!==a.fillOpacity?a.fillOpacity:1,this.proj,this.nature=void 0!==a.nature?a.nature:"Device",this.svg={}},equals:function(a){return void 0===a?!1:void 0===a.Id?!1:a.Id===this.Id},setProjection:function(a){this.proj=a},getProjection:function(){return this.proj},setNature:function(a){this.nature=a},getNature:function(){return this.nature},setText:function(a){this.text=a},getText:function(){return this.text},setX:function(a){this.location.x=a},setY:function(a){this.location.y=a},getX:function(){return this.location.x},getY:function(){return this.location.y},setLocation:function(a){this.location=a},setLocation:function(a){this.location=a},getLocation:function(){return this.location},setTextColor:function(a){this.textColor=a},getTextColor:function(){return this.textColor},setFontSize:function(a){this.fontSize=a},getFontSize:function(){return this.fontSize},setTextAnchor:function(a){this.textAnchor=a},getTextAnchor:function(){return this.textAnchor},setShader:function(a){this.shader=a},getShader:function(){return this.shader},setOutlineColor:function(a){this.outlineColor=a},getOutlineColor:function(){return this.outlineColor},setOutlineWidth:function(a){this.outlineWidth=a},getOutlineWidth:function(){return this.outlineWidth},setFillColor:function(a){this.fillColor=a},getFillColor:function(){return this.fillColor},setOpacity:function(a){this.opacity=a},getOpacity:function(){return this.opacity},paintLabel:function(a){var b,c,d=(new JenScript.SVGGroup).Id(this.Id).opacity(this.opacity);void 0!==this.proj&&"User"===this.nature?(b=this.proj.userToPixelX(this.getLocation().x),c=this.proj.userToPixelY(this.getLocation().y)):(b=this.getLocation().x,c=this.getLocation().y);var e=void 0!==this.getTextColor()?this.getTextColor():"black",f=(new JenScript.SVGElement).name("text").attr("x",b).attr("y",c).attr("font-size",this.getFontSize()).attr("fill",e).attr("text-anchor",this.getTextAnchor()).textContent(this.getText()).buildHTML();d.child(f),a.deleteGraphicsElement(this.Id);var g=d.toSVG();if(this.svg.label=g,a.insertSVG(g),"None"!==this.paintType){var h=f.getBBox(),i=(new JenScript.SVGRect).origin(h.x-10,h.y-2).size(h.width+20,h.height+4).radius(this.cornerRadius,this.cornerRadius).strokeNone().fillNone();if("Fill"===this.paintType||"Both"===this.paintType)if(void 0!==this.fillColor)i.fill(this.fillColor).fillOpacity(this.fillOpacity);else if(void 0!==this.shader&&void 0!==this.shader.percents&&void 0!==this.shader.colors){var j=(new JenScript.SVGLinearGradient).Id(this.Id+"gradient").from(h.x,h.y-2).to(h.x,h.y+4+h.height).shade(this.getShader().percents,this.getShader().colors,this.getShader().opacity).fillOpacity(this.fillOpacity).toSVG();a.deleteGraphicsElement(this.Id+"gradient"),a.definesSVG(j),i.fillURL(this.Id+"gradient")}("Stroke"===this.paintType||"Both"===this.paintType)&&void 0!==this.getOutlineColor()&&i.stroke(this.getOutlineColor()).strokeWidth(this.outlineWidth),f.parentNode.insertBefore(i.toSVG(),f)}}})}(),function(){JenScript.TextLabel=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.TextLabel,JenScript.AbstractLabel),JenScript.Model.addMethods(JenScript.TextLabel,{_init:function(a){JenScript.AbstractLabel.call(this,a)},paint:function(a){this.paintLabel(a)}})}(),function(){JenScript.TextLabelPlugin=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.TextLabelPlugin,JenScript.Plugin),JenScript.Model.addMethods(JenScript.TextLabelPlugin,{_init:function(a){a=a||{},a.name="TextLabelPlugin",this.labels=[],JenScript.Plugin.call(this,a)},onProjectionRegister:function(){var a=this;this.getProjection().addProjectionListener("boundChanged",function(){a.repaintPlugin()},"TextLabelPlugin projection bound changed")},addLabel:function(a){if(!(a instanceof JenScript.TextLabel))throw new Error("TextLabel should be provided");this.labels[this.labels.length]=a,this.repaintPlugin()},removeLabel:function(a){for(var b=[],c=0;c<this.labels.length;c++)this.labels[c].equals(a)||(b[b.length]=this.labels[c]);this.labels=b,this.repaintPlugin()},paintPlugin:function(a,b){if(b===JenScript.ViewPart.Device)for(var c=0;c<this.labels.length;c++)this.labels[c].setProjection(this.getProjection()),this.labels[c].paint(a)}})}(),function(){JenScript.DumpCoordinatePlugin=function(){this.dumpListeners=[],JenScript.Plugin.call(this,{name:"DumpCoordinatePlugin"})},JenScript.Model.inheritPrototype(JenScript.DumpCoordinatePlugin,JenScript.Plugin),JenScript.DumpCoordinatePlugin.prototype.addDumpListener=function(a,b){var c={action:a,onEvent:b};this.dumpListeners[this.dumpListeners.length]=c},JenScript.DumpCoordinatePlugin.prototype.fireEvent=function(a,b,c,d){for(var e=0;e<this.dumpListeners.length;e++)a===this.dumpListeners[e].action&&this.dumpListeners[e].onEvent({user:b,device:new JenScript.Point2D(c,d)})},JenScript.DumpCoordinatePlugin.prototype.getUserProjection=function(a,b){return this.getProjection().pixelToUser({x:a,y:b})},JenScript.DumpCoordinatePlugin.prototype.onClick=function(a,b,c,d){if(b===JenScript.ViewPart.Device){var e=this.getUserProjection(c,d);this.fireEvent("click",e,c,d)}},JenScript.DumpCoordinatePlugin.prototype.onMove=function(a,b,c,d){if(b===JenScript.ViewPart.Device){var e=this.getUserProjection(c,d);this.fireEvent("move",e,c,d)}},JenScript.DumpCoordinatePlugin.prototype.onPress=function(a,b,c,d){if(b===JenScript.ViewPart.Device){var e=this.getUserProjection(c,d);this.fireEvent("press",e,c,d)}},JenScript.DumpCoordinatePlugin.prototype.onRelease=function(a,b,c,d){if(b===JenScript.ViewPart.Device){var e=this.getUserProjection(c,d);this.fireEvent("release",e,c,d)}}}(),function(){JenScript.GeneralMetricsPathPlugin=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.GeneralMetricsPathPlugin,JenScript.Plugin),JenScript.Model.addMethods(JenScript.GeneralMetricsPathPlugin,{_init:function(a){a=a||{},a.name="JenScript.GeneralMetricsPathPlugin",this.generalMetricsPath=a.path,this.generalMetricsPath.plugin=this,JenScript.Plugin.call(this,a)},onProjectionRegister:function(){var a=this;this.getProjection().addProjectionListener("boundChanged",function(){a.repaintPlugin()},"GeneralMetricsPath projection bound changed")},paintPlugin:function(a,b){if(b==JenScript.ViewPart.Device){this.generalMetricsPath.projection=this.getProjection(),this.generalMetricsPath.graphicsContext=a,this.generalMetricsPath.createPath(),this.generalMetricsPath.svgPathElement.setAttribute("stroke","red"),this.generalMetricsPath.svgPathElement.setAttribute("fill","none"),a.insertSVG(this.generalMetricsPath.svgPathElement.cloneNode(!0));for(var c=this.generalMetricsPath.getMetrics(a),d=0;d<c.length;d++){c[d]}}}})}(),function(){JenScript.Donut2DPlugin=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.Donut2DPlugin,JenScript.Plugin),JenScript.Model.addMethods(JenScript.Donut2DPlugin,{_init:function(a){a=a||{},a.name="Donut2DPlugin",this.donuts=[],this.donutListeners=[],JenScript.Plugin.call(this,a)},addDonut:function(a){a.plugin=this,this.donuts[this.donuts.length]=a,this.repaintPlugin()},select:function(a){for(var b=0;b<this.donuts.length;b++)if(this.donuts[b].name===a)return this.donuts[b]},addDonutListener:function(a,b){var c={action:a,onEvent:b};this.donutListeners[this.donutListeners.length]=c},fireDonutEvent:function(a,b){for(var c=0;c<this.donutListeners.length;c++)this.donutListeners[c].action===a&&this.donutListeners[c].onEvent(b)},dispatchDonutAction:function(a,b,c,d){for(var e=this,f=function(a){"move"===b?a.lockRollover?e.fireDonutEvent("move",{slice:a,x:c,y:d,device:{x:c,y:d}}):(a.lockRollover=!0,e.fireDonutEvent("enter",{slice:a,x:c,y:d,device:{x:c,y:d}}),e.fireDonutEvent("move",{slice:a,x:c,y:d,device:{x:c,y:d}})):"press"===b?e.fireDonutEvent("press",{slice:a,x:c,y:d,device:{x:c,y:d}}):"release"===b&&e.fireDonutEvent("release",{slice:a,x:c,y:d,device:{x:c,y:d}})},g=function(a){return"move"===b&&a.lockRollover?(a.lockRollover=!1,e.fireDonutEvent("exit",{slice:a,x:c,y:d,device:{x:c,y:d}}),!0):void 0},h=0;h<this.donuts.length;h++)for(var i=this.donuts[h],j=0;j<i.slices.length;j++){var k=i.slices[j],l=Math.sqrt((k.sc.y-d)*(k.sc.y-d)+(k.sc.x-c)*(k.sc.x-c)),m=0;if(l<=i.outerRadius&&l>=i.innerRadius){c>k.sc.x&&d<k.sc.y?m=Math.atan((k.sc.y-d)/(c-k.sc.x)):c>k.sc.x&&d>=k.sc.y?m=Math.atan((k.sc.y-d)/(c-k.sc.x))+2*Math.PI:c<k.sc.x?m=Math.atan((k.sc.y-d)/(c-k.sc.x))+Math.PI:c===k.sc.x&&d<k.sc.y?m=Math.PI/2:c===k.sc.x&&d>k.sc.y&&(m=3*Math.PI/2);var n=JenScript.Math.toDegrees(m);n>k.startAngleDegree&&n<k.startAngleDegree+k.extendsDegree?f(k):n<k.startAngle&&k.startAngleDegree+k.extendsDegree>360&&k.startAngleDegree+k.extendsDegree-360>=n?f(k):g(k)}else g(k)}return!1},onPress:function(a,b,c,d){return this.dispatchDonutAction(a,"press",c,d)},onRelease:function(a,b,c,d){return this.dispatchDonutAction(a,"release",c,d)},onMove:function(a,b,c,d){return this.dispatchDonutAction(a,"move",c,d)},onClick:function(a,b,c,d){return this.dispatchDonutAction(a,"click",c,d)},onEnter:function(a,b,c,d){return this.dispatchDonutAction(a,"enter",c,d)},onExit:function(a,b,c,d){return this.dispatchDonutAction(a,"exit",c,d)},onProjectionRegister:function(){var a=this;this.getProjection().addProjectionListener("boundChanged",function(){a.repaintPlugin()},"donut2D projection bound changed")},repaintDonuts:function(){this.repaintPlugin()},paintPlugin:function(a,b){if(b===JenScript.ViewPart.Device)for(var c=0;c<this.donuts.length;c++){var d=this.donuts[c];if(d.isSolvable()){d.solveDonut2D(),a.deleteGraphicsElement(d.Id),d.svg.donutRoot=(new JenScript.SVGGroup).Id(d.Id).toSVG(),a.insertSVG(d.svg.donutRoot),void 0!==d.fill&&d.fill.fillDonut2D(a,d),void 0!==d.stroke&&d.stroke.strokeDonut2D(a,d);for(var c=0;c<d.effects.length;c++){var e=d.effects[c];e.effectDonut2D(a,d)}for(var c=0;c<d.slices.length;c++){var f=d.slices[c];void 0!==f.fill&&f.fill.fillDonut2DSlice(a,f),void 0!==f.stroke&&f.stroke.strokeDonut2DSlice(a,f)}for(var g=0;g<d.slices.length;g++)for(var h=d.slices[g],i=h.getSliceLabels(),j=0;j<i.length;j++)i[j].paintDonut2DSliceLabel(a,h)}}}})}(),function(){JenScript.Donut2D=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.Donut2D,{init:function(a){a=a||{},this.Id="donut2d"+JenScript.sequenceId++,this.name=void 0!==a.name?a.name:"Donut2D name undefined",this.nature=void 0!==a.nature?a.nature:"User",this.centerX=void 0!==a.centerX?a.centerX:0,this.centerY=void 0!==a.centerY?a.centerY:0,this.outerRadius=void 0!==a.outerRadius?a.outerRadius:100,this.innerRadius=void 0!==a.innerRadius?a.innerRadius:60,this.startAngleDegree=void 0!==a.startAngleDegree?a.startAngleDegree:0,this.stroke,this.fill=new JenScript.Donut2DDefaultFill,this.effects=[],this.slices=[],this.plugin,this.svg={}},getId:function(){return this.Id},getInnerRadius:function(){return this.innerRadius},getOuterRadius:function(){return this.outerRadius},getCenterX:function(){return this.centerX},getCenterY:function(){return this.centerY},setStroke:function(a){this.stroke=a,this.plugin.repaintPlugin()},setFill:function(a){this.fill=a,this.plugin.repaintPlugin()},addEffect:function(a){this.effects[this.effects.length]=a,this.plugin.repaintPlugin()},addSlice:function(a){return a.donut=this,this.slices[this.slices.length]=a,this.plugin.repaintPlugin(),this},slice:function(a){var b=new JenScript.Donut2DSlice(a);return this.addSlice(b),this},addSlices:function(a){for(var b=0;b<a.length;b++)this.addSlice(a[b]);return this},select:function(a){for(var b=0;b<this.slices.length;b++)if(this.slices[b].name===a)return this.slices[b]},isSolvable:function(){return this.slices.length>0},solveDonut2D:function(){for(var a=this,b=(function(){if("User"==a.nature){var b=a.plugin.getProjection().userToPixel(new JenScript.Point2D(a.centerX,a.centerY));a.buildCenterX=b.x,a.buildCenterY=b.y}else"Device"==a.nature&&(a.buildCenterX=a.centerX,a.buildCenterY=a.centerY);a.buildCenter=new JenScript.Point2D(a.buildCenterX,a.buildCenterY)}(),function(){for(var b=0,c=0;c<a.slices.length;c++){var d=a.slices[c];b+=d.value}for(var c=0;c<a.slices.length;c++){var d=a.slices[c],e=d.value/b;d.ratio=e}}(),0);b<this.slices.length;b++){var c=this.slices[b];this.solveSlice(c)}},solveSlice:function(a){var b=360*a.getRatio();this.startAngleDegree>360&&(this.startAngleDegree=this.startAngleDegree-360);var c=this.startAngleDegree+b/2;c>360&&(c-=360);var d=this.startAngleDegree,e=this.buildCenterX+a.divergence*Math.cos(JenScript.Math.toRadians(c)),f=this.buildCenterY-a.divergence*Math.sin(JenScript.Math.toRadians(c));a.sc={x:e,y:f};var g={x:e+this.outerRadius*Math.cos(JenScript.Math.toRadians(d)),y:f-this.outerRadius*Math.sin(JenScript.Math.toRadians(d))},h={x:e+this.outerRadius*Math.cos(JenScript.Math.toRadians(d+b)),y:f-this.outerRadius*Math.sin(JenScript.Math.toRadians(d+b))};a.ob=g,a.oe=h;var i=b>180?"1":"0",j="M"+g.x+","+g.y+" A"+this.outerRadius+","+this.outerRadius+" 0 "+i+",0 "+h.x+","+h.y;a.outerArc=j;var k={x:e+this.innerRadius*Math.cos(JenScript.Math.toRadians(d)),y:f-this.innerRadius*Math.sin(JenScript.Math.toRadians(d))},l={x:e+this.innerRadius*Math.cos(JenScript.Math.toRadians(d+b)),y:f-this.innerRadius*Math.sin(JenScript.Math.toRadians(d+b))};a.ib=k,a.ie=l;var m="M"+k.x+","+k.y+" A"+this.sliceInnerEnd+","+this.sliceInnerEnd+" 0 "+i+",0 "+l.x+","+l.y;a.innerArc=m;var n="M"+g.x+","+g.y+" A"+this.outerRadius+","+this.outerRadius+" 0 "+i+",0 "+h.x+","+h.y+" L "+l.x+","+l.y+" A"+this.innerRadius+","+this.innerRadius+" 0 "+i+",1 "+k.x+","+k.y+" Z";a.face=n,a.medianDegree=c,a.startAngleDegree=d,a.endAngleDegree=d+b,a.extendsDegree=b,d+=b,this.startAngleDegree=d},getSlices:function(){return this.slices},isLockRollover:function(){for(var a=0;a<this.slices.length;a++){var b=this.slices[a];if(b.lockRollover)return!0}return!1}})}(),function(){JenScript.Donut2DSlice=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.Donut2DSlice,{init:function(a){if(a=a||{},this.name=void 0!==a.name?a.name:"Donut2DSlice name undefined",this.value=void 0!==a.value?a.value:1,this.themeColor=void 0!==a.themeColor?a.themeColor:JenScript.createColor(),this.divergence=void 0!==a.divergence?a.divergence:0,this.fillOpacity=void 0!==a.fillOpacity?a.fillOpacity:1,this.strokeOpacity=void 0!==a.strokeOpacity?a.strokeOpacity:1,this.ratio,this.startAngleDegree,this.endAngleDegree,this.face,this.outerArc,this.innerArc,this.lockRollover=!1,this.stroke,this.fill,this.sliceLabels=[],this.donut,this.value<=0)throw new Error("Slice value should be greater than 0")},setThemeColor:function(a){this.color=a},getThemeColor:function(){return this.themeColor},setDivergence:function(a){this.divergence=a},getDivergence:function(){return this.divergence},setDivergence:function(a){this.divergence=a},getDivergence:function(){return this.divergence},setFillOpacity:function(a){this.fillOpacity=a},getFillOpacity:function(){return this.fillOpacity},setStrokeOpacity:function(a){this.strokeOpacity=a},getStrokeOpacity:function(){return this.strokeOpacity},addSliceLabel:function(a){void 0===a.textColor&&(a.textColor=this.themeColor),this.sliceLabels[this.sliceLabels.length]=a,void 0!==this.donut&&void 0!==this.donut.plugin&&this.donut.plugin.repaintDonuts()},getSliceLabels:function(){return this.sliceLabels},getRatio:function(){return this.ratio},setStroke:function(a){this.stroke=a},setFill:function(a){this.fill=a},getStroke:function(){return this.stroke},getFill:function(){return this.fill}})}(),function(){JenScript.AbstractDonut2DFill=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.AbstractDonut2DFill,{init:function(a){a=a||{},this.name=a.name},fillDonut2D:function(){throw new Error("AbstractDonut2DFill fillDonut2D method should be provide by override.")}}),JenScript.Donut2DDefaultFill=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.Donut2DDefaultFill,JenScript.AbstractDonut2DFill),JenScript.Model.addMethods(JenScript.Donut2DDefaultFill,{_init:function(a){a=a||{},this.fillColor=a.fillColor,a.name="JenScript.Donut2DDefaultFill",JenScript.AbstractDonut2DFill.call(this,a)},fillDonut2D:function(a,b){for(var c=0;c<b.slices.length;c++){var d=b.slices[c],e=void 0!==this.fillColor?this.fillColor:d.themeColor,f=(new JenScript.SVGElement).name("path").attr("d",d.face).attr("stroke","none").attr("fill",e).attr("fill-opacity",d.fillOpacity);b.svg.donutRoot.appendChild(f.buildHTML())}}}),JenScript.Donut2DRadialFill=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.Donut2DRadialFill,JenScript.AbstractDonut2DFill),JenScript.Model.addMethods(JenScript.Donut2DRadialFill,{_init:function(a){a=a||{},this.fillColor=a.fillColor,a.name="JenScript.Donut2DRadialFill",JenScript.AbstractDonut2DFill.call(this,a)},fillDonut2D:function(a,b){for(var c=b.outerRadius,d=b.innerRadius,e=d+(c-d)/2,f=e/c*100+"%",g=d/c*100+"%",h=[g,f,"100%"],i=0;i<b.slices.length;i++){var j=b.slices[i],k=void 0!==this.fillColor?new JenScript.Color(this.fillColor).toHexString():new JenScript.Color(j.themeColor).toHexString(),l=JenScript.Color.darken(k).toHexString(),m=[l,k,l],n="gradient"+JenScript.sequenceId++,o=(new JenScript.SVGRadialGradient).Id(n).center(j.sc.x,j.sc.y).focus(j.sc.x,j.sc.y).radius(b.outerRadius).shade(h,m).toSVG();a.definesSVG(o);var p=(new JenScript.SVGElement).name("path").attr("d",j.face).attr("stroke","none").attr("fill","url(#"+n+")").attr("fill-opacity",j.fillOpacity);b.svg.donutRoot.appendChild(p.buildHTML())}}}),JenScript.AbstractDonut2DSliceFill=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.AbstractDonut2DSliceFill,{init:function(a){a=a||{},this.name=a.name},fillDonut2DSlice:function(){throw new Error("JenScript.AbstractDonut2DSliceFill fillDonut2DSlice method should be provide by override")}}),JenScript.Donut2DSliceDefaultFill=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.Donut2DSliceDefaultFill,JenScript.AbstractDonut2DSliceFill),JenScript.Model.addMethods(JenScript.Donut2DSliceDefaultFill,{_init:function(a){a=a||{},this.fillColor=a.fillColor,a.name="JenScript.Donut2DSliceDefaultFill",JenScript.AbstractDonut2DSliceFill.call(this,a)},fillDonut2DSlice:function(a,b){var c=void 0!==this.fillColor?this.fillColor:b.themeColor,d=(new JenScript.SVGElement).name("path").attr("d",b.face).attr("stroke","none").attr("fill",c).attr("fill-opacity",b.fillOpacity);b.donut.svg.donutRoot.appendChild(d.buildHTML())}}),JenScript.Donut2DSliceRadialFill=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.Donut2DSliceRadialFill,JenScript.AbstractDonut2DFill),JenScript.Model.addMethods(JenScript.Donut2DSliceRadialFill,{_init:function(a){a=a||{},this.fillColor=a.fillColor,a.name="JenScript.Donut2DSliceRadialFill",JenScript.AbstractDonut2DSliceFill.call(this,a)},fillDonut2DSlice:function(a,b){var c=b.donut.outerRadius,d=b.donut.innerRadius,e=d+(c-d)/2,f=e/c*100+"%",g=d/c*100+"%",h=[g,f,"100%"],i=void 0!==this.fillColor?new JenScript.Color(this.fillColor).toHexString():new JenScript.Color(b.themeColor).toHexString(),j=JenScript.Color.darken(i).toHexString(),k=[j,i,j],l="gradient"+JenScript.sequenceId++,m=(new JenScript.SVGRadialGradient).Id(l).center(b.sc.x,b.sc.y).focus(b.sc.x,b.sc.y).radius(b.donut.outerRadius).shade(h,k).toSVG();a.definesSVG(m);var n=(new JenScript.SVGElement).name("path").attr("d",b.face).attr("stroke","none").attr("fill","url(#"+l+")");b.donut.svg.donutRoot.appendChild(n.buildHTML())}})}(),function(){JenScript.AbstractDonut2Stroke=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.AbstractDonut2Stroke,{init:function(a){a=a||{},this.name=a.name},strokeDonut2D:function(){throw new Error("AbstractDonut2Stroke, strokeDonut2D method should be provide by override")}}),JenScript.Donut2DDefaultStroke=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.Donut2DDefaultStroke,JenScript.AbstractDonut2Stroke),JenScript.Model.addMethods(JenScript.Donut2DDefaultStroke,{_init:function(a){a=a||{},this.strokeColor=a.strokeColor,this.strokeWidth=a.strokeWidth,a.name="JenScript.Donut2DDefaultDraw",JenScript.AbstractDonut2Stroke.call(this,a)},strokeDonut2D:function(a,b){for(var c=0;c<b.slices.length;c++){var d=b.slices[c],e=void 0!==this.strokeColor?this.strokeColor:d.themeColor,f=(new JenScript.SVGElement).name("path").attr("d",d.face).attr("stroke",e).attr("stroke-opacity",d.strokeOpacity).attr("fill","none");b.svg.donutRoot.appendChild(f.buildHTML())}}}),JenScript.AbstractDonut2DSliceStroke=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.AbstractDonut2DSliceStroke,{init:function(a){a=a||{},this.name=a.name},strokeDonut2DSlice:function(){throw new Error("JenScript.AbstractDonut2DSliceStroke strokeDonut2DSlice method should be provide by override.")}}),JenScript.Donut2DSliceDefaultStroke=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.Donut2DSliceDefaultStroke,JenScript.AbstractDonut2DSliceStroke),JenScript.Model.addMethods(JenScript.Donut2DSliceDefaultStroke,{_init:function(a){a=a||{},this.strokeColor=a.strokeColor,this.strokeWidth=a.strokeWidth,a.name="JenScript.Donut2DSliceDefaultStroke",JenScript.AbstractDonut2DSliceStroke.call(this,a)},strokeDonut2DSlice:function(a,b){var c=void 0!==this.strokeColor?this.strokeColor:b.themeColor,d=(new JenScript.SVGElement).name("path").attr("d",b.face).attr("stroke",c).attr("fill","none");b.donut.svg.donutRoot.appendChild(d.buildHTML())}})}(),function(){JenScript.AbstractDonut2DEffect=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.AbstractDonut2DEffect,{init:function(a){a=a||{},this.name=a.name},effectDonut2D:function(){}}),JenScript.Donut2DLinearEffect=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.Donut2DLinearEffect,JenScript.AbstractDonut2DEffect),JenScript.Model.addMethods(JenScript.Donut2DLinearEffect,{_init:function(a){a=a||{},this.offsetRadius=3,this.incidence=void 0!==a.incidence?a.incidence:120,this.defaultShader={percents:["0%","49%","51%","100%"],opacity:[.6,0,0,.6],colors:["rgb(60, 60, 60)","rgb(255,255,255)","rgb(255,255,255)","rgb(255, 255, 255)"]},this.shader=void 0!==a.shader?a.shader:this.defaultShader,a.name="JenScript.Donut2DLinearEffect",this.fillOpacity=void 0!==a.fillOpacity?a.fillOpacity:1,this.gradientsIds=[],JenScript.AbstractDonut2DEffect.call(this,a)},effectDonut2D:function(a,b){for(var c=0;c<this.gradientsIds.length;c++)a.deleteGraphicsElement(this.gradientsIds[c]);this.gradientsIds=[];for(var c=0;c<b.slices.length;c++){var d=b.slices[c],e=b.outerRadius-this.offsetRadius,f=b.innerRadius+this.offsetRadius,g=d.startAngleDegree,h=d.extendsDegree,i=h>180?"1":"0",j=function(a,b){return{x:d.sc.x+a*Math.cos(JenScript.Math.toRadians(b)),y:d.sc.y-a*Math.sin(JenScript.Math.toRadians(b))}},k=j(e,g),l=j(e,g+h),m=j(f,g),n=j(f,g+h),o="M"+k.x+","+k.y+" A"+e+","+e+" 0 "+i+",0 "+l.x+","+l.y+" L "+n.x+","+n.y+" A"+f+","+f+" 0 "+i+",1 "+m.x+","+m.y+" Z",p=j(e,this.incidence),q=j(e,this.incidence+180);void 0===this.shader&&(this.shader=this.defaultShader);var r="gradient"+JenScript.sequenceId++;this.gradientsIds[this.gradientsIds.length]=r;var s=(new JenScript.SVGLinearGradient).Id(r).from(p.x,p.y).to(q.x,q.y).shade(this.shader.percents,this.shader.colors,this.shader.opacity).toSVG();a.definesSVG(s);var t=(new JenScript.SVGElement).name("path").attr("d",o).attr("stroke","none").attr("fill-opacity",d.fillOpacity).attr("fill","url(#"+r+")");b.svg.donutRoot.appendChild(t.buildHTML())}}}),JenScript.Donut2DReflectionEffect=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.Donut2DReflectionEffect,JenScript.AbstractDonut2DEffect),JenScript.Model.addMethods(JenScript.Donut2DReflectionEffect,{_init:function(a){a=a||{},this.deviation=void 0!==a.deviation?a.deviation:3,this.opacity=void 0!==a.opacity?a.opacity:.3,this.length=void 0!==a.length?a.length:.5,this.verticalOffset=void 0!==a.verticalOffset?a.verticalOffset:0,
a.name="JenScript.Donut2DReflectionEffect",JenScript.AbstractDonut2DEffect.call(this,a)},effectDonut2D:function(a,b){var c=b.svg.donutRoot.getBBox(),d="clip"+JenScript.sequenceId++,e=(new JenScript.SVGRect).origin(c.x,c.y+c.height).size(c.width,c.height*this.length),f=(new JenScript.SVGClipPath).Id(d).appendPath(e);a.definesSVG(f.toSVG());var g="filter"+JenScript.sequenceId++,h=(new JenScript.SVGFilter).Id(g).from(c.x,c.y).size(c.width,c.height).toSVG(),i=(new JenScript.SVGElement).name("feGaussianBlur").attr("in","SourceGraphic").attr("stdDeviation",this.deviation);h.appendChild(i.buildHTML()),a.definesSVG(h);var j=b.svg.donutRoot.cloneNode(!0);j.removeAttribute("id"),j.setAttribute("filter","url(#"+g+")"),j.setAttribute("transform","translate(0,"+c.height+"), scale(1,-1), translate(0,"+(-2*(c.y+c.height/2)-this.verticalOffset)+")"),j.setAttribute("opacity",this.opacity);var k=(new JenScript.SVGElement).name("g").buildHTML();j.setAttribute("id",j.getAttribute("id")+"_reflection"+JenScript.sequenceId++),k.setAttribute("clip-path","url(#"+d+")"),k.appendChild(j),a.insertSVG(k)}})}(),function(){JenScript.Donut2DAbstractLabel=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.Donut2DAbstractLabel,JenScript.AbstractLabel),JenScript.Model.addMethods(JenScript.Donut2DAbstractLabel,{_init:function(a){JenScript.AbstractLabel.call(this,a)},paintDonut2DSliceLabel:function(){throw new Error("paintDonut2DSliceLabel method should be provide by override")}}),JenScript.Donut2DBorderLabel=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.Donut2DBorderLabel,JenScript.Donut2DAbstractLabel),JenScript.Model.addMethods(JenScript.Donut2DBorderLabel,{__init:function(a){a=a||{},this.margin=void 0!==a.margin?a.margin:50,this.linkExtends=void 0!==a.linkExtends?a.linkExtends:30,a.name="JenScript.Donut2DBorderLabel",JenScript.Donut2DAbstractLabel.call(this,a)},setMargin:function(a){this.margin=a,this.slice.donut.plugin.repaintPlugin()},setLinkExtends:function(a){this.linkExtends=a,this.slice.donut.plugin.repaintPlugin()},paintDonut2DSliceLabel:function(a,b){var c=b.donut.getOuterRadius(),d=b.medianDegree,e=b.donut.buildCenterX+(c+b.getDivergence())*Math.cos(JenScript.Math.toRadians(d)),f=b.donut.buildCenterY-(c+b.getDivergence())*Math.sin(JenScript.Math.toRadians(d)),g=b.donut.buildCenterX+(c+this.linkExtends+b.getDivergence())*Math.cos(JenScript.Math.toRadians(d)),h=b.donut.buildCenterY-(c+this.linkExtends+b.getDivergence())*Math.sin(JenScript.Math.toRadians(d)),i=0,j=h,k=0,l=h,m="middle";d>=270&&360>=d||d>=0&&90>=d?(i=b.donut.buildCenterX+c+this.margin-5,k=b.donut.buildCenterX+c+this.margin+5,m="start",270===d&&(m="middle"),90===d&&(m="middle")):(i=b.donut.buildCenterX-c-this.margin+5,k=b.donut.buildCenterX-c-this.margin-5,m="end");var n="M "+e+","+f+" Q "+g+","+h+" "+i+","+j,o=(new JenScript.SVGElement).name("path").attr("d",n).attr("fill","none").attr("stroke","darkgray").buildHTML();this.setTextAnchor(m),this.setLocation(new JenScript.Point2D(k,l));var p=void 0!==this.textColor?this.textColor:b.themeColor;this.setTextColor(p),this.paintLabel(a),this.svg.label.appendChild(o)}}),JenScript.Donut2DRadialLabel=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.Donut2DRadialLabel,JenScript.Donut2DAbstractLabel),JenScript.Model.addMethods(JenScript.Donut2DRadialLabel,{__init:function(a){a=a||{},this.offsetRadius=void 0!==a.offsetRadius?a.offsetRadius:20,a.name="JenScript.Donut2DAbstractLabel",JenScript.Donut2DAbstractLabel.call(this,a)},setOffsetRadius:function(a){this.offsetRadius=a,this.slice.donut.plugin.repaintPlugin()},paintDonut2DSliceLabel:function(a,b){var c={x:b.sc.x+(b.donut.outerRadius+this.offsetRadius)*Math.cos(JenScript.Math.toRadians(b.medianDegree)),y:b.sc.y-(b.donut.outerRadius+this.offsetRadius)*Math.sin(JenScript.Math.toRadians(b.medianDegree))},d="middle",e=0;b.medianDegree>0&&b.medianDegree<90?(d="start",e=10):b.medianDegree>90&&b.medianDegree<270?(d="end",e=-10):b.medianDegree>270&&b.medianDegree<=360?(d="start",e=10):(90===b.medianDegree||270===b.medianDegree)&&(d="middle"),this.setLocation(new JenScript.Point2D(c.x,c.y)),this.setTextAnchor(d);var f=void 0!==this.textColor?this.textColor:b.themeColor;this.setTextColor(f),this.paintLabel(a)}})}(),function(){JenScript.Donut2DBuilder=function(a,b,c){a.registerProjection(b);var d=new JenScript.Donut2DPlugin;b.registerPlugin(d);var e=new JenScript.Donut2D(c);d.addDonut(e);var f,g=[],h=[],i=[],j=function(a){var b=new JenScript.Donut2DSlice(a);return f=b,e.addSlice(b),h.push(b),this},k=function(a,b){var c;return"radial"===a&&(c=new JenScript.Donut2DRadialLabel(b)),"border"===a&&(c=new JenScript.Donut2DBorderLabel(b)),f.addSliceLabel(c),g.push(c),this},l=function(a,b){var c;return"linear"===a&&(c=new JenScript.Donut2DLinearEffect(b)),"reflection"===a&&(c=new JenScript.Donut2DReflectionEffect(b)),e.addEffect(c),i.push(c),this},m=function(a){return l("linear",a),this},n=function(a){return l("reflection",a),this};return{slice:j,label:k,effect:l,linearFx:m,reflectFx:n,view:function(){return a},projection:function(){return b},donut:function(){return e},labels:function(){return g},slices:function(){return j}}}}(),function(){JenScript.Donut3DPlugin=function(a){a=a||{},a.name="Donut3DPlugin",this.donuts=[],JenScript.Plugin.call(this,a)},JenScript.Model.inheritPrototype(JenScript.Donut3DPlugin,JenScript.Plugin),JenScript.Model.addMethods(JenScript.Donut3DPlugin,{addDonut:function(a){a.plugin=this,this.donuts[this.donuts.length]=a,this.repaintPlugin()},onProjectionRegister:function(){var a=this;this.getProjection().addProjectionListener("boundChanged",function(){a.repaintPlugin()},"donut3D projection bound changed")},repaintDonuts:function(){this.repaintPlugin()},paintPlugin:function(a,b){if(b===JenScript.ViewPart.Device)for(var c=0;c<this.donuts.length;c++){var d=this.donuts[c];if(d.isSolvable()){d.solveDonut3D(),a.deleteGraphicsElement(d.Id),d.svg.donutRoot=(new JenScript.SVGGroup).Id(d.Id).toSVG(),a.insertSVG(d.svg.donutRoot),d.donut3DPaint.paintDonut3D(a,d);for(var c=0;c<d.effects.length;c++){var e=d.effects[c];e.effectDonut3D(a,d)}for(var f=0;f<d.slices.length;f++)for(var g=d.slices[f],h=g.getSliceLabels(),i=0;i<h.length;i++)h[i].paintDonut3DSliceLabel(a,g)}}}})}(),function(){JenScript.Donut3D=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.Donut3D,{init:function(a){a=a||{},this.Id="donut3d"+JenScript.sequenceId++,this.name=void 0!==a.name?a.name:"donut3D"+JenScript.sequenceId++,this.innerRadius=void 0!==a.innerRadius?a.innerRadius:60,this.outerRadius=void 0!==a.outerRadius?a.outerRadius:120,this.thickness=void 0!==a.thickness?a.thickness:50,this.tilt=void 0!==a.tilt?a.tilt:40,this.startAngleDegree=void 0!==a.startAngleDegree?a.startAngleDegree:40,this.centerX=void 0!==a.centerX?a.centerX:0,this.centerY=void 0!==a.centerY?a.centerY:0,this.nature=void 0!==a.nature?a.nature:"User",this.projectionThickness,this.outerA,this.outerB,this.innerA,this.innerB,this.donut3DPaint=new JenScript.Donut3DDefaultPaint,this.plugin,this.slices=[],this.effects=[],this.svg={}},setInnerRadius:function(a){this.innerRadius=a},setOuterRadius:function(a){this.outerRadius=a},setThickness:function(a){this.thickness=a},setTilt:function(a){this.tilt=a},setStartAngleDegree:function(a){this.startAngleDegree=a},setCenterX:function(a){this.centerX=a},setCenterY:function(a){this.centerY=a},setCenter:function(a,b){this.centerX=a,this.centerY=b},setNature:function(a){this.nature=a},addEffect:function(a){this.effects[this.effects.length]=a,this.plugin.repaintPlugin()},shift:function(){function a(a){setTimeout(function(){b.startAngleDegree=b.startAngleDegree+36,b.plugin.repaint()},100*a)}for(var b=this,c=0;10>c;c++)a(c)},shift:function(a,b,c){function d(a){setTimeout(function(){g.startAngleDegree=g.startAngleDegree+f>360?g.startAngleDegree+f-360:g.startAngleDegree+f<0?g.startAngleDegree+f+360:g.startAngleDegree+f,g.plugin.repaintDonuts()},a*e)}for(var e=b/c,f=a/c,g=this,h=0;c>h;h++)d(h)},addSlice:function(a){return a.donut=this,this.slices[this.slices.length]=a,this.plugin.repaintDonuts(),this},slice:function(a){var b=new JenScript.Donut3DSlice(a);return this.addSlice(b),this},addSlices:function(a){for(var b=0;b<a.length;b++)this.addSlice(a[b]);return this},getTopFace:function(){for(var a="",b=0;b<this.slices.length;b++)for(var c=this.slices[b],d=0;d<c.fragments.length;d++){var e=c.fragments[d];a+=e.topFace}return a},isSolvable:function(){return this.slices.length>0},solveDonut3D:function(){if(this.tilt<0||this.tilt>90)throw new Error("donut 3D tilt out of range[0,90]");var a=this;!function(){if(a.startAngleDegree>0){if(a.startAngleDegree>=360)for(;a.startAngleDegree>=360;)a.startAngleDegree=a.startAngleDegree-360}else for(;a.startAngleDegree>=0;)a.startAngleDegree=a.startAngleDegree+360}(),function(){var b=a.thickness/90;a.projectionThickness=b*(90-a.tilt)}(),function(){var b=a.outerRadius/90,c=a.innerRadius/90;a.outerA=a.outerRadius,a.outerB=b*a.tilt,a.innerA=a.innerRadius,a.innerB=c*a.tilt}(),function(){for(var b=0,c=0;c<a.slices.length;c++)b+=a.slices[c].value;for(var c=0;c<a.slices.length;c++){var d=a.slices[c].value/b;a.slices[c].normalizedValue=d}}();for(var b=this.startAngleDegree,c=0;c<this.slices.length;c++)this.solveSliceFragments(this.slices[c],b),b=this.slices[c].endAngleDegree,b>360&&(b-=360)},solveSliceFragments:function(a,b){a.clearFragments(),a.painted=!1;var c=b,d=360*a.normalizedValue;a.startAngleDegree=c,a.endAngleDegree=c+d;var e=c+d/2;e>360&&(e-=360),a.medianDegree=e;var f=this.getDonutCenter(),g=f.x+a.divergence*Math.cos(JenScript.Math.toRadians(e)),h=f.y-a.divergence*Math.sin(JenScript.Math.toRadians(e));a.sc={x:g,y:h};for(var i=c,j=d,k=d;k>0;){j=this.getFragmentExtendsDegree(c,d,i,k);var l=this.createSliceFragment(a,i,j);a.addFragment(l),k-=j,i+=j,i>=360&&(i-=360)}},getFragmentExtendsDegree:function(a,b,c,d){if(c>=0&&180>c){var e=180-c;return d>=e?e:d}if(c>=180&&360>c){var e=360-c;return d>=e?e:d}return 0},getDonutCenter:function(){return"User"===this.nature?this.plugin.getProjection().userToPixel({x:this.centerX,y:this.centerY}):"Device"==this.nature?{x:this.centerX,y:this.centerY}:void 0},createSliceFragment:function(a,b,c){var d=new JenScript.Donut3DSlice({name:a.name+".part",value:1,themeColor:a.themeColor});d.fragment=!0,d.parentSlice=a,b>=0&&180>b?(d.type="Back",d.name=d.name+".back"):b>=180&&360>b&&(d.type="Front",d.name=d.name+".front");var e=this.getDonutCenter(),f=a.divergence/90,g=f*this.tilt,h=a.divergence,i=g,j=e.x+h*Math.cos(JenScript.Math.toRadians(a.startAngleDegree+Math.abs(a.endAngleDegree-a.startAngleDegree)/2)),k=e.y-i*Math.sin(JenScript.Math.toRadians(a.startAngleDegree+Math.abs(a.endAngleDegree-a.startAngleDegree)/2)),l={x:j+this.outerA*Math.cos(JenScript.Math.toRadians(b)),y:k-this.outerB*Math.sin(JenScript.Math.toRadians(b))},m={x:j+this.outerA*Math.cos(JenScript.Math.toRadians(b+c)),y:k-this.outerB*Math.sin(JenScript.Math.toRadians(b+c))};d.sos=l,d.soe=m;var n=c>180?"1":"0",o="M"+l.x+","+l.y+" A"+this.outerA+","+this.outerB+" 0 "+n+",0 "+m.x+","+m.y,p="M"+l.x+","+(l.y+this.projectionThickness)+" A"+this.outerA+","+this.outerB+" 0 "+n+",0 "+m.x+","+(m.y+this.projectionThickness);d.outerArcTop=o,d.outerArcBottom=p;var q={x:j+this.innerA*Math.cos(JenScript.Math.toRadians(b)),y:k-this.innerB*Math.sin(JenScript.Math.toRadians(b))},r={x:j+this.innerA*Math.cos(JenScript.Math.toRadians(b+c)),y:k-this.innerB*Math.sin(JenScript.Math.toRadians(b+c))};d.sis=q,d.sie=r;var s="M"+q.x+","+q.y+" A"+this.innerA+","+this.innerB+" 0 "+n+",0 "+r.x+","+r.y,t="M"+q.x+","+(q.y+this.projectionThickness)+" A"+this.innerA+","+this.innerB+" 0 "+n+",0 "+r.x+","+(r.y+this.projectionThickness);d.innerArcTop=s,d.innerArcBottom=t;var u="M"+l.x+","+l.y+" A"+this.outerA+","+this.outerB+" 0 "+n+",0 "+m.x+","+m.y+" L "+r.x+","+r.y+" A"+this.innerA+","+this.innerB+" 0 "+n+",1 "+q.x+","+q.y+" Z";d.topFace=u;var v="M"+l.x+","+(l.y+this.projectionThickness)+" A"+this.outerA+","+this.outerB+" 0 "+n+",0 "+m.x+","+(m.y+this.projectionThickness)+" L "+r.x+","+(r.y+this.projectionThickness)+" A"+this.innerA+","+this.innerB+" 0 "+n+",1 "+q.x+","+(q.y+this.projectionThickness)+" Z";return d.bottomFace=v,d.startFace="M "+l.x+","+l.y+" L "+q.x+","+q.y+" L "+q.x+","+(q.y+this.projectionThickness)+" L "+l.x+","+(l.y+this.projectionThickness)+" Z",d.endFace="M "+m.x+","+m.y+" L "+r.x+","+r.y+" L "+r.x+","+(r.y+this.projectionThickness)+" L "+m.x+","+(m.y+this.projectionThickness)+" Z",d.innerFace="M "+q.x+","+q.y+" A "+this.innerA+","+this.innerB+" 0 "+n+",0 "+r.x+","+r.y+" L "+r.x+","+(r.y+this.projectionThickness)+" A "+this.innerA+","+this.innerB+" 0 "+n+",1 "+q.x+","+(q.y+this.projectionThickness)+" Z",d.outerFace="M "+l.x+","+l.y+" A "+this.outerA+","+this.outerB+" 0 "+n+",0 "+m.x+","+m.y+" L "+m.x+","+(m.y+this.projectionThickness)+" A "+this.outerA+","+this.outerB+" 0 "+n+",1 "+l.x+","+(l.y+this.projectionThickness)+" Z",d.startAngleDegree=b,d.endAngleDegree=b+c,d},isIn:function(a,b){for(var c=0;c<b.length;c++)if(a.Id===b[c].Id)return!0;return!1},getSlicesFragmentOnAngle:function(a,b,c){if(0>b||b>360||0>c||c>360)throw new Error("StarAngleDegree and EndAngleDegree out of range [0,360]");if(b>c)throw new Error("EndAngleDegree should be  greater than StartAngleDegree");for(var d=[],e=0;e<a.fragments.length;e++){var f=a.fragments[e];f.startAngleDegree>=b&&f.endAngleDegree>=b&&f.startAngleDegree<=c&&f.endAngleDegree<=c?d[d.length]=f:f.startAngleDegree<=b&&f.endAngleDegree>=b&&f.startAngleDegree<=c&&f.endAngleDegree<=c?d[d.length]=f:f.startAngleDegree>=b&&f.endAngleDegree>=b&&f.startAngleDegree<=c&&f.endAngleDegree>=c?d[d.length]=f:f.startAngleDegree<=b&&f.endAngleDegree>=b&&f.startAngleDegree<=c&&f.endAngleDegree>=c&&(d[d.length]=f)}return d},getSliceOnAngle:function(a){if(0>a&&a>360)throw new Error("angleDegree out of range [0,360]");for(var b=0;b<this.slices.length;b++){var c=this.slices[b];if(c.endAngleDegree<=360){if(c.startAngleDegree<=a&&c.endAngleDegree>=a)return c}else if(c.endAngleDegree>360){var d=a;a<c.startAngleDegree&&(d=a+360);var e=c.startAngleDegree<=d,f=c.endAngleDegree>=d;if(e&&f)return c}}return void 0},getSlicesOnAngle:function(a){if(0>a&&a>360)throw new Error("angleDegree out of range [0,360]");for(var b=[],c=0;c<this.slices.length;c++){var d=this.slices[c];if(d.endAngleDegree<=360)d.startAngleDegree<=a&&d.endAngleDegree>=a&&(b[b.length]=d);else if(d.endAngleDegree>360){var e=a;a<d.startAngleDegree&&(e=a+360);var f=d.startAngleDegree<=e,g=d.endAngleDegree>=e;f&&g&&(b[b.length]=d)}}return b},getSlicesOnRangeAngle:function(a,b){if(0>a||a>360||0>b||b>360)throw new Error("StarAngleDegree and EndAngleDegree out of range [0,360]");if(a>b)throw new Error("EndAngleDegree should be  greater than StartAngleDegree");for(var c=[],d=0;d<this.slices.length;d++){var e=this.slices[d];e.startAngleDegree>=a&&e.endAngleDegree>=a&&e.startAngleDegree<=b&&e.endAngleDegree<=b?c[c.length]=e:e.startAngleDegree<=a&&e.endAngleDegree>=a&&e.startAngleDegree<=b&&e.endAngleDegree<=b?c[c.length]=e:e.startAngleDegree>=a&&e.endAngleDegree>=a&&e.startAngleDegree<=b&&e.endAngleDegree>=b?c[c.length]=e:e.startAngleDegree<=a&&e.endAngleDegree>=a&&e.startAngleDegree<=b&&e.endAngleDegree>=b&&(c[c.length]=e)}return c},getPaintOrder:function(){this.getPaintOrderFragments();for(var a=[],b=this.getSlicesOnAngle(90),c=this.getSlicesOnAngle(270),d=0;d<b.length;d++)void 0===b[d]||this.isIn(b[d],a)||this.isIn(b[d],c)||(a[a.length]=b[d]);for(var e=this.getSlicesOnRangeAngle(90,270),f=0;f<e.length;f++)this.isIn(e[f],a)||this.isIn(e[f],c)||(a[a.length]=e[f]);var g=this.getSliceOnAngle(0),h=this.getSlicesOnRangeAngle(0,90);h.reverse();for(var i=0;i<h.length;i++)this.isIn(h[i],a)||!h[i].Id!==g.Id||this.isIn(h[i],c)||(a[a.length]=h[i]);void 0===g||this.isIn(g,a)||this.isIn(g,c)||(a[a.length]=g);var j=this.getSlicesOnRangeAngle(270,360);j.reverse();for(var k=0;k<j.length;k++)this.isIn(j[k],a)||this.isIn(j[k],c)||(a[a.length]=j[k]);for(var l=0;l<c.length;l++)void 0!==c[l]&&(a[a.length]=c[l]);return a},getPaintOrderFragments:function(){for(var a=[],b=this.getSlicesOnAngle(90),c=[],d=0;d<b.length;d++)for(var e=b[d],f=e.fragments,g=0;g<f.length;g++)c[c.length]=f[g];for(var h=this.getSlicesOnAngle(270),i=[],d=0;d<h.length;d++)for(var j=h[d],f=j.fragments,g=0;g<f.length;g++)i[i.length]=f[g];for(var d=0;d<c.length;d++){var k=c[d];k.startAngleDegree<=90&&k.endAngleDegree>=90&&(a[a.length]=k)}for(var d=0;d<c.length;d++){var k=c[d];this.isIn(k,a)||this.isIn(k,i)||(a[a.length]=k)}for(var l=this.getSlicesOnRangeAngle(90,270),d=0;d<l.length;d++)for(var m=l[d],f=m.fragments,g=0;g<f.length;g++){var n=f[g];this.isIn(n,a)||this.isIn(n,i)||(a[a.length]=n)}var o=this.getSliceOnAngle(0),p=this.getSlicesOnRangeAngle(0,90);p.reverse();for(var d=0;d<p.length;d++)for(var q=p[d],r=this.getSlicesFragmentOnAngle(q,0,90),g=0;g<r.length;g++){var s=r[g];if(!this.isIn(s,a)&&!this.isIn(s,o.fragments))if(this.isIn(s,i))for(var t=0;t<i.length;t++){var u=i[t];u.Id===s.Id&&"Back"===s.type&&(a[a.length]=s)}else a[a.length]=s}for(var v=o.fragments,d=v.length-1;d>=0;d--){var w=v[d];if(void 0!==w&&!this.isIn(w,a))if(this.isIn(w,i))for(var g=0;g<i.length;g++){var u=i[g];u.Id===w.Id&&"Back"===w.type&&(a[a.length]=w)}else a[a.length]=w}var x=this.getSlicesOnRangeAngle(270,360);x.reverse();for(var d=0;d<x.length;d++)for(var y=x[d],z=this.getSlicesFragmentOnAngle(y,270,360),g=0;g<z.length;g++){var A=z[g];if(!this.isIn(A,a)&&!this.isIn(A,o.fragments))if(this.isIn(A,i))for(var t=0;t<i.length;t++){var u=i[t];u.Id===A.Id&&"Back"===A.type&&(a[a.length]=A)}else a[a.length]=A}for(var d=0;d<i.length;d++){var B=i[d];this.isIn(B,a)||(a[a.length]=B)}return a}})}(),function(){JenScript.Donut3DSlice=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.Donut3DSlice,{init:function(a){if(a=a||{},this.Id="donut3dslice"+JenScript.sequenceId++,this.name=a.name,this.value=void 0!==a.value?a.value:1,this.themeColor=a.themeColor,this.divergence=void 0!==a.divergence?a.divergence:0,this.normalizedValue,this.startAngleDegree,this.endAngleDegree,this.outerArcTop,this.innerArcTop,this.outerArcBottom,this.innerArcBottom,this.topFace,this.bottomFace,this.startFace,this.endFace,this.innerFace,this.outerFace,this.sos,this.soe,this.sis,this.sie,this.sliceLabels=[],this.type,this.isFragment,this.parentSlice,this.innerModel,this.centerX,this.centerY,this.painted=!1,this.lockEnter=!1,this.donut,this.fragments=[],this.value<=0)throw new Error("Slice value should be greater than 0")},setName:function(a){this.name=a},getName:function(){return this.name},setValue:function(a){this.value=a},getValue:function(){return this.value},setDivergence:function(a){this.divergence=a},getDivergence:function(){return this.divergence},setThemeColor:function(a){this.themeColor=a},getThemeColor:function(){return this.themeColor},getSliceLabels:function(){return this.sliceLabels},addSliceLabel:function(a){this.sliceLabels[this.sliceLabels.length]=a,a.slice=this,void 0!==this.donut&&void 0!==this.donut.plugin&&this.donut.plugin.repaintDonuts()},set:function(a,b,c){this.name=a,this.value=b,this.themeColor=c,void 0!==this.donut&&void 0!==this.donut.plugin&&this.donut.plugin.repaintDonuts()},clearFragments:function(){this.fragments=[]},addFragment:function(a){this.fragments[this.fragments.length]=a},isFirst:function(a){return this.fragments[0].Id===a.Id},isLast:function(a){return this.fragments[this.fragments.length-1].Id===a.Id},getFrontInnerFace:function(){for(var a="",b=0;b<this.fragments.length;b++){var c=this.fragments[b];"Front"===c.type&&(a+=c.innerFace)}return a},getBackInnerFace:function(){for(var a="",b=0;b<this.fragments.length;b++){var c=this.fragments[b];"Back"===c.type&&(a+=c.innerFace)}return a}})}(),function(){JenScript.Donut3DDefaultPaint=function(){this.incidenceAngleDegree=90,this.paintTopEffect=!0,this.paintInnerEffect=!0,this.paintOuterEffect=!0,this.alphaTop=.8,this.alphaInner=1,this.alphaOuter=1,this.alphaFill=.7,this.fillBackBottom=!0,this.fillBackOuter=!0,this.fillBackInner=!0,this.fillBackTop=!0,this.fillBackStart=!0,this.fillBackEnd=!0,this.fillFrontBottom=!0,this.fillFrontOuter=!0,this.fillFrontInner=!0,this.fillFrontTop=!0,this.fillFrontStart=!0,this.fillFrontEnd=!0},JenScript.Model.addMethods(JenScript.Donut3DDefaultPaint,{paintDonut3D:function(a,b){for(var c=b.getPaintOrderFragments(),d=0;d<c.length;d++){var e=c[d];this._paintDonut3DFill(a,b,e),this.paintTopEffect&&this._paintTopEffect(a,b,e),this.paintOuterEffect&&this._paintOuterEffect(a,b,e),this.paintInnerEffect&&this._paintInnerEffect(a,b,e),e.painted=!0}},_paintOuterEffect:function(a,b){for(var c=b.getDonutCenter(),d="",e=0;e<b.slices.length;e++)for(var f=b.slices[e].fragments,g=0;g<f.length;g++){var h=f[g];"Front"===h.type&&(d=d+" "+h.outerFace)}var i="gradient"+JenScript.sequenceId++,j=c.x-b.outerA,k=c.y,l=c.x+b.outerA,m=c.y,n=["0%","40%","80%","100%"],o="rgb(40, 40, 40)",p="rgb(40, 40, 40)",q="rgb(255, 255, 255)",r="rgb(255, 255, 255)",s=[o,p,q,r],t=[.3,.05,.05,.5],u=(new JenScript.SVGLinearGradient).Id(i).from(j,k).to(l,m).shade(n,s,t).toSVG();a.definesSVG(u);var v=(new JenScript.SVGElement).name("path").attr("d",d).attr("fill","url(#"+i+")").attr("opacity",this.alphaOuter).buildHTML();b.svg.donutRoot.appendChild(v)},_paintInnerEffect:function(a,b){for(var c="",d=0;d<b.slices.length;d++)for(var e=b.slices[d].fragments,f=0;f<e.length;f++){var g=e[f];"Back"===g.type&&(c=c+" "+g.innerFace)}var h="clip"+JenScript.sequenceId++,i=(new JenScript.SVGElement).name("clipPath").attr("id",h).buildHTML(),j=b.getDonutCenter(),k=(new JenScript.SVGElement).name("ellipse").attr("cx",j.x).attr("cy",j.y).attr("rx",b.innerA).attr("ry",b.innerB).buildHTML();i.appendChild(k),a.definesSVG(i);var l=j.x+b.innerA,m=j.y,n=j.x-b.innerA,o=j.y,p=["0%","40%","80%","100%"],q="rgb(40, 40, 40)",r="rgb(40, 40, 40)",s="rgb(240, 240, 240)",t="rgb(240, 240, 240)",u=[q,r,s,t],v=[.2,.3,0,.6],w="gradient"+JenScript.sequenceId++,x=(new JenScript.SVGLinearGradient).Id(w).from(l,m).to(n,o).shade(p,u,v).toSVG();a.definesSVG(x);var y=(new JenScript.SVGElement).name("path").attr("d",c).attr("clip-path","url(#"+h+")").attr("fill","url(#"+w+")").attr("opacity",this.alphaInner).buildHTML();b.svg.donutRoot.appendChild(y)},paintEndEffect:function(){},_paintTopEffect:function(a,b,c){var d=b.getDonutCenter(),e=b.getSliceOnAngle(this.incidenceAngleDegree),f=e.divergence/90,g=f*b.tilt,h=e.divergence,i=g,j=d.x+h*Math.cos(JenScript.Math.toRadians(e.startAngleDegree+Math.abs(e.endAngleDegree-e.startAngleDegree)/2)),k=d.y-i*Math.sin(JenScript.Math.toRadians(e.startAngleDegree+Math.abs(e.endAngleDegree-e.startAngleDegree)/2)),l=j+b.outerA*Math.cos(JenScript.Math.toRadians(this.incidenceAngleDegree)),m=k-b.outerB*Math.sin(JenScript.Math.toRadians(this.incidenceAngleDegree)),n=b.getSliceOnAngle(this.incidenceAngleDegree+180),o=n.divergence/90,p=o*b.tilt,q=n.divergence,r=p,s=d.x+q*Math.cos(JenScript.Math.toRadians(n.startAngleDegree+Math.abs(n.endAngleDegree-n.startAngleDegree)/2)),t=d.y-r*Math.sin(JenScript.Math.toRadians(n.startAngleDegree+Math.abs(n.endAngleDegree-n.startAngleDegree)/2)),u=s+b.outerA*Math.cos(JenScript.Math.toRadians(this.incidenceAngleDegree+180)),v=t-b.outerB*Math.sin(JenScript.Math.toRadians(this.incidenceAngleDegree+180)),w="rgb(40, 40, 40)",x="rgb(40, 40, 40)",y="rgb(255, 255, 255)",z="rgb(255, 255, 255)",A=["0%","45%","55%","100%"],B=[w,x,y,z],C=[.5,0,0,.8],D="gradient"+JenScript.sequenceId++,E=(new JenScript.SVGLinearGradient).Id(D).from(l,m).to(u,v).shade(A,B,C).toSVG();if(a.definesSVG(E),void 0!==c&&void 0!==c.topFace){var F=(new JenScript.SVGElement).name("path").attr("d",c.topFace).attr("opacity",this.alphaTop).attr("fill","url(#"+D+")").buildHTML();b.svg.donutRoot.appendChild(F)}},_paintDonut3DFill:function(a,b,c){if(this.fillBackOuter&&"Back"===c.type){var d=(new JenScript.SVGElement).name("path").attr("d",c.outerFace).attr("opacity",this.alphaFill).attr("fill",c.themeColor).buildHTML();b.svg.donutRoot.appendChild(d)}if(this.fillBackBottom&&"Back"===c.type){var e=(new JenScript.SVGElement).name("path").attr("d",c.bottomFace).attr("opacity",this.alphaFill).attr("fill",c.themeColor).buildHTML();b.svg.donutRoot.appendChild(e)}if(this.fillBackInner&&"Back"==c.type){var f="clip"+JenScript.sequenceId++,g=(new JenScript.SVGElement).name("clipPath").attr("id",f).buildHTML(),h=(new JenScript.SVGElement).name("path").attr("d",b.getTopFace()).buildHTML();g.appendChild(h),a.definesSVG(g);var i=(new JenScript.SVGElement).name("path").attr("d",c.innerFace).attr("opacity",this.alphaFill).attr("fill",c.themeColor).buildHTML();b.svg.donutRoot.appendChild(i)}if(this.fillBackStart&&"Back"===c.type&&c.parentSlice.isFirst(c)){var j=(new JenScript.SVGElement).name("path").attr("d",c.startFace).attr("opacity",this.alphaFill).attr("fill",c.themeColor).buildHTML();b.svg.donutRoot.appendChild(j),c.parentSlice.isFirst(c)&&(c.parentSlice.startAngleDegree<=90||c.parentSlice.startAngleDegree>=270)}if(this.fillBackEnd&&"Back"===c.type&&c.parentSlice.isLast(c)){var k=(new JenScript.SVGElement).name("path").attr("d",c.endFace).attr("opacity",this.alphaFill).attr("fill",c.themeColor).buildHTML();b.svg.donutRoot.appendChild(k),c.parentSlice.isLast(c)&&c.endAngleDegree>=90&&c.endAngleDegree<=270}if(this.fillBackTop&&"Back"===c.type){var l=(new JenScript.SVGElement).name("path").attr("d",c.topFace).attr("opacity",this.alphaFill).attr("fill",c.themeColor).buildHTML();b.svg.donutRoot.appendChild(l)}if(this.fillFrontInner&&"Front"===c.type){var m=(new JenScript.SVGElement).name("path").attr("d",c.innerFace).attr("opacity",this.alphaFill).attr("fill",c.themeColor).buildHTML();b.svg.donutRoot.appendChild(m)}if(this.fillFrontBottom&&"Front"===c.type){var e=(new JenScript.SVGElement).name("path").attr("d",c.bottomFace).attr("opacity",this.alphaFill).attr("fill",c.themeColor).buildHTML();b.svg.donutRoot.appendChild(e)}if(this.fillFrontStart&&"Front"===c.type&&c.parentSlice.isFirst(c)){var j=(new JenScript.SVGElement).name("path").attr("d",c.startFace).attr("opacity",this.alphaFill).attr("fill",c.themeColor).buildHTML();b.svg.donutRoot.appendChild(j),c.parentSlice.isFirst(c)&&(c.startAngleDegree<90||c.startAngleDegree>270)}if(this.fillFrontEnd&&"Front"===c.type&&c.parentSlice.isLast(c)){var k=(new JenScript.SVGElement).name("path").attr("d",c.endFace).attr("opacity",this.alphaFill).attr("fill",c.themeColor).buildHTML();b.svg.donutRoot.appendChild(k),c.parentSlice.isLast(c)&&c.endAngleDegree>90&&c.endAngleDegree<270}if(this.fillFrontOuter&&"Front"===c.type){var d=(new JenScript.SVGElement).name("path").attr("d",c.outerFace).attr("opacity",this.alphaFill).attr("fill",c.themeColor).buildHTML();b.svg.donutRoot.appendChild(d)}if(this.fillFrontTop&&"Front"===c.type){var l=(new JenScript.SVGElement).name("path").attr("d",c.topFace).attr("opacity",this.alphaFill).attr("fill",c.themeColor).buildHTML();b.svg.donutRoot.appendChild(l)}}})}(),function(){JenScript.Donut3DAbstractLabel=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.Donut3DAbstractLabel,JenScript.AbstractLabel),JenScript.Model.addMethods(JenScript.Donut3DAbstractLabel,{_init:function(a){JenScript.AbstractLabel.call(this,a)},paintDonut3DSliceLabel:function(){throw new Error("paintDonut3DSliceLabel method should be provide by override")}}),JenScript.Donut3DBorderLabel=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.Donut3DBorderLabel,JenScript.Donut3DAbstractLabel),JenScript.Model.addMethods(JenScript.Donut3DBorderLabel,{__init:function(a){a=a||{},this.margin=void 0!==a.margin?a.margin:50,this.linkExtends=void 0!==a.linkExtends?a.linkExtends:30,a.name="JenScript.Donut3DBorderLabel",JenScript.Donut3DAbstractLabel.call(this,a)},setMargin:function(a){this.margin=a;var b=this.slice.donut.plugin.getGraphicsContext(JenScript.ViewPart.Device);this.paintDonut3DSliceLabel(b,this.slice)},setLinkExtends:function(a){this.linkExtends=a;var b=this.slice.donut.plugin.getGraphicsContext(JenScript.ViewPart.Device);this.paintDonut3DSliceLabel(b,this.slice)},paintDonut3DSliceLabel:function(a,b){var c=b.donut.getDonutCenter(),d=b.startAngleDegree+Math.abs(b.endAngleDegree-b.startAngleDegree)/2;d>=360&&(d-=360);var e=c.x+(b.donut.outerA+b.divergence)*Math.cos(JenScript.Math.toRadians(d)),f=c.y-(b.donut.outerB+b.divergence)*Math.sin(JenScript.Math.toRadians(d)),g=c.x+(b.donut.outerA+this.linkExtends+b.divergence)*Math.cos(JenScript.Math.toRadians(d)),h=c.y-(b.donut.outerB+this.linkExtends+b.divergence)*Math.sin(JenScript.Math.toRadians(d)),i=0,j=h,k=0,l=h,m="middle";d>=270&&360>=d||d>=0&&90>=d?(i=c.x+b.donut.outerA+this.margin-5,k=c.x+b.donut.outerA+this.margin+5,m="start",270===d&&(m="middle"),90===d&&(m="middle")):(i=c.x-b.donut.outerA-this.margin+5,k=c.x-b.donut.outerA-this.margin-5,m="end");var n="M "+e+","+f+" Q "+g+","+h+" "+i+","+j,o=(new JenScript.SVGElement).name("path").attr("d",n).attr("fill","none").attr("stroke","darkgray").buildHTML();this.setTextAnchor(m),this.setLocation(new JenScript.Point2D(k,l));var p=void 0!==this.textColor?this.textColor:b.themeColor;this.setTextColor(p),this.paintLabel(a),this.svg.label.appendChild(o)}}),JenScript.Donut3DRadialLabel=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.Donut3DRadialLabel,JenScript.Donut3DAbstractLabel),JenScript.Model.addMethods(JenScript.Donut3DRadialLabel,{__init:function(a){a=a||{},this.offsetRadius=void 0!==a.offsetRadius?a.offsetRadius:20,a.name="JenScript.Donut3DRadialLabel",JenScript.Donut2DAbstractLabel.call(this,a)},setOffsetRadius:function(a){this.offsetRadius=a,this.slice.donut.plugin.repaintPlugin()},paintDonut3DSliceLabel:function(a,b){var c={x:b.sc.x+(b.donut.outerA+this.offsetRadius)*Math.cos(JenScript.Math.toRadians(b.medianDegree)),y:b.sc.y-(b.donut.outerB+this.offsetRadius)*Math.sin(JenScript.Math.toRadians(b.medianDegree))},d="middle",e=0;b.medianDegree>0&&b.medianDegree<90?(d="start",e=10):b.medianDegree>90&&b.medianDegree<270?(d="end",e=-10):b.medianDegree>270&&b.medianDegree<=360?(d="start",e=10):(90===b.medianDegree||270===b.medianDegree)&&(d="middle"),this.setLocation(new JenScript.Point2D(c.x,c.y)),this.setTextAnchor(d);var f=void 0!==this.textColor?this.textColor:b.themeColor;this.setTextColor(f),this.paintLabel(a)}})}(),function(){JenScript.Donut3DBuilder=function(a,b,c){a.registerProjection(b);var d=new JenScript.Donut3DPlugin;b.registerPlugin(d);var e=new JenScript.Donut3D(c);d.addDonut(e);var f,g=[],h=[],i=function(a){var b=new JenScript.Donut3DSlice(a);return f=b,e.addSlice(b),h.push(b),this},j=function(a,b){var c;return"radial"===a&&(c=new JenScript.Donut3DRadialLabel(b)),"border"===a&&(c=new JenScript.Donut3DBorderLabel(b)),f.addSliceLabel(c),g.push(c),this},k=function(a,b){var c;return"reflection"===a&&(c=new JenScript.Donut3DReflectionEffect(b)),e.addEffect(c),effects.push(c),this},l=function(a){return k("reflection",a),this};return{slice:i,label:j,effect:k,reflectFx:l,view:function(){return a},projection:function(){return b},donut:function(){return e},labels:function(){return g},slices:function(){return i}}}}(),function(){JenScript.AbstractDonut3DEffect=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.AbstractDonut3DEffect,{init:function(a){a=a||{},this.name=a.name},effectDonut3D:function(){}}),JenScript.Donut3DReflectionEffect=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.Donut3DReflectionEffect,JenScript.AbstractDonut3DEffect),JenScript.Model.addMethods(JenScript.Donut3DReflectionEffect,{_init:function(a){a=a||{},this.deviation=void 0!==a.deviation?a.deviation:3,this.opacity=void 0!==a.opacity?a.opacity:.3,this.length=void 0!==a.length?a.length:.5,this.verticalOffset=void 0!==a.verticalOffset?a.verticalOffset:0,a.name="JenScript.Donut3DReflectionEffect",JenScript.AbstractDonut3DEffect.call(this,a)},effectDonut3D:function(a,b){var c=b.svg.donutRoot.getBBox(),d="clip"+JenScript.sequenceId++,e=(new JenScript.SVGRect).origin(c.x,c.y+c.height).size(c.width,c.height*this.length),f=(new JenScript.SVGClipPath).Id(d).appendPath(e);

a.definesSVG(f.toSVG());var g="filter"+JenScript.sequenceId++,h=(new JenScript.SVGFilter).Id(g).from(c.x,c.y).size(c.width,c.height).toSVG(),i=(new JenScript.SVGElement).name("feGaussianBlur").attr("in","SourceGraphic").attr("stdDeviation",this.deviation);h.appendChild(i.buildHTML()),a.definesSVG(h);var j=b.svg.donutRoot.cloneNode(!0);j.removeAttribute("id"),j.setAttribute("filter","url(#"+g+")"),j.setAttribute("transform","translate(0,"+c.height+"), scale(1,-1), translate(0,"+(-2*(c.y+c.height/2)-this.verticalOffset)+")"),j.setAttribute("opacity",this.opacity);var k=(new JenScript.SVGElement).name("g").buildHTML();j.setAttribute("id",j.getAttribute("id")+"_reflection"+JenScript.sequenceId++),k.setAttribute("clip-path","url(#"+d+")"),k.appendChild(j),a.insertSVG(k)}})}(),function(){JenScript.PiePlugin=function(a){a=a||{},this.pies=[],this.pieListeners=[],JenScript.Plugin.call(this,{name:"PiePlugin"})},JenScript.Model.inheritPrototype(JenScript.PiePlugin,JenScript.Plugin),JenScript.Model.addMethods(JenScript.PiePlugin,{addPie:function(a){a.plugin=this,this.pies[this.pies.length]=a,this.repaintPlugin()},onProjectionRegister:function(){var a=this;this.getProjection().addProjectionListener("boundChanged",function(){a.repaintPlugin()},"Pie projection bound changed")},addPieListener:function(a,b){var c={action:a,onEvent:b};this.pieListeners[this.pieListeners.length]=c},firePieEvent:function(a,b){for(var c=0;c<this.pieListeners.length;c++)this.pieListeners[c].action===a&&this.pieListeners[c].onEvent(b)},dispatchPieAction:function(a,b,c,d){for(var e=this,f=function(a){"move"===b?a.lockRollover?e.firePieEvent("move",{slice:a,x:c,y:d,device:{x:c,y:d}}):(a.lockRollover=!0,e.firePieEvent("enter",{slice:a,x:c,y:d,device:{x:c,y:d}}),e.firePieEvent("move",{slice:a,x:c,y:d,device:{x:c,y:d}})):"press"===b?e.firePieEvent("press",{slice:a,x:c,y:d,device:{x:c,y:d}}):"release"===b&&e.firePieEvent("release",{slice:a,x:c,y:d,device:{x:c,y:d}})},g=function(a){return"move"===b&&a.lockRollover?(a.lockRollover=!1,e.firePieEvent("exit",{slice:a,x:c,y:d,device:{x:c,y:d}}),!0):void 0},h=0;h<this.pies.length;h++){var i=this.pies[h];if(i.solved)for(var j=0;j<i.slices.length;j++){var k=i.slices[j],l=Math.sqrt((k.sc.y-d)*(k.sc.y-d)+(k.sc.x-c)*(k.sc.x-c)),m=0;l<i.radius?(c>k.sc.x&&d<k.sc.y?m=Math.atan((k.sc.y-d)/(c-k.sc.x)):c>k.sc.x&&d>=k.sc.y?m=Math.atan((k.sc.y-d)/(c-k.sc.x))+2*Math.PI:c<k.sc.x?m=Math.atan((k.sc.y-d)/(c-k.sc.x))+Math.PI:c===k.sc.x&&d<k.sc.y?m=Math.PI/2:c===k.sc.x&&d>k.sc.y&&(m=3*Math.PI/2),JenScript.Math.toDegrees(m)>k.startAngleDegree&&JenScript.Math.toDegrees(m)<k.startAngleDegree+k.extendsDegree?f(k):JenScript.Math.toDegrees(m)<k.startAngleDegree&&k.startAngleDegree+k.extendsDegree>360&&k.startAngleDegree+k.extendsDegree-360>=JenScript.Math.toDegrees(m)?f(k):g(k)):g(k)}}return!1},onPress:function(a,b,c,d){this.dispatchPieAction(a,"press",c,d)},onRelease:function(a,b,c,d){this.dispatchPieAction(a,"release",c,d)},onMove:function(a,b,c,d){this.dispatchPieAction(a,"move",c,d)},onClick:function(a,b,c,d){this.dispatchPieAction(a,"click",c,d)},onEnter:function(a,b,c,d){this.dispatchPieAction(a,"enter",c,d)},onExit:function(a,b,c,d){this.dispatchPieAction(a,"exit",c,d)},paintPlugin:function(a,b){if(b===JenScript.ViewPart.Device)for(var c=0;c<this.pies.length;c++){var d=this.pies[c];if(d.isSolvable()){d.solvePie(),a.deleteGraphicsElement(d.Id),d.svg.pieRoot=(new JenScript.SVGGroup).Id(d.Id).opacity(d.opacity).toSVG(),a.insertSVG(d.svg.pieRoot),void 0!==d.stroke&&d.stroke.strokePie(a,d),void 0!==d.fill&&d.fill.fillPie(a,d);for(var e=0;e<d.effects.length;e++)d.effects[e].paintPieEffect(a,d);for(var e=0;e<d.slices.length;e++){var f=d.slices[e],g=new JenScript.Graphics({definitions:this.svgPluginPartsDefinitions[b],graphics:d.svg.pieRoot,selectors:this.getProjection().getView().svgSelectors});void 0!==f.getSliceLabel()&&f.getSliceLabel().paintPieSliceLabel(g,f)}}}}})}(),function(){JenScript.Pie=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.Pie,{init:function(a){a=a||{},this.name=void 0!==a.name?a.name:"Pie name undefined",this.Id=void 0!==a.Id?a.Id:"pie"+JenScript.sequenceId++,this.x=void 0!==a.x?a.x:0,this.y=void 0!==a.y?a.y:0,this.radius=void 0!==a.radius?a.radius:80,this.opacity=void 0!==a.opacity?a.opacity:1,this.startAngleDegree=void 0!==a.startAngleDegree?a.startAngleDegree:0,this.nature=void 0!==a.nature?a.nature:"User",this.effects=[],this.slices=[],this.svg={},this.paint=!0},repaint:function(){void 0!==this.plugin&&this.paint&&this.plugin.repaintPlugin()},setX:function(a){this.x=a,this.repaint()},getX:function(){return this.x},setY:function(a){this.y=a,this.repaint()},getY:function(){return this.y},setRadius:function(a){this.radius=a,this.repaint()},getRadius:function(){return this.radius},setNature:function(a){this.nature=a,this.repaint()},getNature:function(){return this.nature},setStartAngleDegree:function(a){this.startAngleDegree=a,this.repaint()},getStartAngleDegree:function(){return this.startAngleDegree},addEffect:function(a){this.effects[this.effects.length]=a,this.repaint()},setStroke:function(a){this.stroke=a,this.repaint()},setFill:function(a){this.fill=a,this.repaint()},addSlice:function(a){return a.pie=this,this.slices[this.slices.length]=a,this.repaint(),this},slice:function(a){var b=new JenScript.PieSlice(a);return this.addSlice(b),this},addSlices:function(a){for(var b=0;b<a.length;b++)this.addSlice(a[b]);return this},buildSlice:function(a){var b=360*a.getRatio();a.extendsDegree=b,this.startAngleDegree>360&&(this.startAngleDegree=this.startAngleDegree-360),a.startAngleDegree=this.startAngleDegree,a.endAngleDegree=this.startAngleDegree+b;var c=this.startAngleDegree+b/2;c>360&&(c-=360),a.medianDegree=c;var d=function(a,b,c){return{x:a.x+b*Math.cos(JenScript.Math.toRadians(c)),y:a.y-b*Math.sin(JenScript.Math.toRadians(c))}},e=d(this.buildCenter,a.divergence,c),f=d(e,this.radius,a.startAngleDegree),g=d(e,this.radius,a.endAngleDegree);a.sc=e,a.ss=f,a.se=g;var h="0";b>180&&(h="1"),a.svgPath="M"+f.x+","+f.y+" A"+this.radius+","+this.radius+" 0 "+h+",0 "+g.x+","+g.y+" L"+e.x+","+e.y+" Z",this.startAngleDegree=this.startAngleDegree+b},projection:function(){if("User"==this.nature){var a=this.plugin.getProjection().userToPixel(new JenScript.Point2D(this.x,this.y));this.buildCenterX=a.x,this.buildCenterY=a.y,this.buildCenter=new JenScript.Point2D(this.buildCenterX,this.buildCenterY)}else"Device"==this.nature&&(this.buildCenterX=this.centerX,this.buildCenterY=this.centerY,this.buildCenter=new JenScript.Point2D(this.buildCenterX,this.buildCenterY))},solvePie:function(){{var a=this;!function(){for(var b=0,c=0;c<a.slices.length;c++){var d=a.slices[c];b+=d.value}for(var c=0;c<a.slices.length;c++){var d=a.slices[c],e=d.value/b;d.ratio=e}}()}this.projection();for(var b=0;b<this.slices.length;b++){var c=this.slices[b];this.buildSlice(c)}this.solved=!0},isSolvable:function(){return this.slices.length>0},shift:function(){function a(a){setTimeout(function(){b.startAngleDegree=b.startAngleDegree+36,b.plugin.repaintPlugin()},100*a)}for(var b=this,c=0;10>c;c++)a(c)}})}(),function(){JenScript.PieSlice=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.PieSlice,{init:function(a){if(a=a||{},this.Id=void 0!==a.Id?a.Id:"slice"+JenScript.sequenceId++,this.name=void 0!==a.name?a.name:"PieSlice name undefined",this.value=void 0!==a.value?a.value:1,this.opacity=void 0!==a.opacity?a.opacity:1,this.themeColor=void 0!==a.themeColor?a.themeColor:JenScript.createColor(),this.divergence=void 0!==a.divergence?a.divergence:0,this.value<0)throw new Error("Slice value should be greater than 0")},repaint:function(){void 0!==this.pie&&this.pie.repaint()},setName:function(a){this.name=a},getName:function(){return this.name},setValue:function(a){if(this.value<0)throw new Error("Slice value should be greater than 0");this.value=a,this.repaint()},getValue:function(){return this.value},getRatio:function(){return this.ratio},setSliceLabel:function(a){void 0!==a&&(a.slice=this),this.sliceLabel=a,this.repaint()},getSliceLabel:function(){return this.sliceLabel},setThemeColor:function(a){this.themeColor=a,this.repaint()},getThemeColor:function(){return this.themeColor},setDivergence:function(a){this.divergence=a,this.repaint()},getDivergence:function(){return this.divergence}})}(),function(){JenScript.AbstractPieStroke=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.AbstractPieStroke,{init:function(a){a=a||{},this.name=a.name},strokePie:function(){}}),JenScript.PieDefaultStroke=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.PieDefaultStroke,JenScript.AbstractPieStroke),JenScript.Model.addMethods(JenScript.PieDefaultStroke,{_init:function(a){a=a||{},this.strokeColor=a.strokeColor,this.strokeWidth=void 0!==a.strokeWidth?a.strokeWidth:1,a.name="JenScript.PieDefaultStroke",JenScript.AbstractPieStroke.call(this,a)},strokePie:function(a,b){for(var c=0;c<b.slices.length;c++){var d=b.slices[c],e=void 0!==this.strokeColor?this.strokeColor:d.themeColor,f=(new JenScript.SVGElement).name("path").attr("d",d.svgPath).attr("stroke",e).attr("strokeWidth",this.strokeWidth).attr("fill","none");b.svg.pieRoot.appendChild(f.buildHTML())}}})}(),function(){JenScript.AbstractPieFill=function(a){this.init(a)},JenScript.AbstractPieFill.prototype={init:function(a){a=a||{},this.Id=void 0!==a.Id?a.Id:"_fill"+JenScript.sequenceId++,this.opacity=void 0!==a.opacity?a.opacity:1,this.name=a.name},fillPie:function(){throw new Error("Abstract Pie Fill, this method should be provide by overriden.")}},JenScript.PieDefaultFill=function(a){this.init(a)},JenScript.Model.inheritPrototype(JenScript.PieDefaultFill,JenScript.AbstractPieFill),JenScript.Model.addMethods(JenScript.PieDefaultFill,{_init:function(a){a=a||{},this.fillColor=a.fillColor,a.name="JenScript.PieDefaultFill",JenScript.AbstractPieFill.call(this,a)},fillPie:function(a,b){var c=(new JenScript.SVGGroup).Id(b.Id+this.Id).opacity(this.opacity).toSVG();a.deleteGraphicsElement(b.Id+this.Id);for(var d=0;d<b.slices.length;d++){var e=b.slices[d],f=void 0!==this.fillColor?this.fillColor:e.themeColor,g=(new JenScript.SVGElement).name("path").attr("fill",f).attr("d",e.svgPath).buildHTML(),h=(new JenScript.SVGGroup).Id(b.Id+this.Id+e.Id).opacity(e.opacity).toSVG();a.deleteGraphicsElement(b.Id+this.Id+e.Id),h.appendChild(g),c.appendChild(h)}b.svg.pieRoot.appendChild(c)}})}(),function(){JenScript.AbstractPieEffect=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.AbstractPieEffect,{init:function(a){a=a||{},this.Id=void 0!==a.Id?a.Id:"_effect"+JenScript.sequenceId++,this.name=a.name,this.opacity=void 0!==a.opacity?a.opacity:1,this.projection=void 0},setProjection:function(a){this.projection=a},getProjection:function(){return this.projection},paintPieEffect:function(){throw new Error("Abstract Pie Effect, this method should be provide by overriden.")}}),JenScript.PieReflectionEffect=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.PieReflectionEffect,JenScript.AbstractPieEffect),JenScript.Model.addMethods(JenScript.PieReflectionEffect,{_init:function(a){a=a||{},this.deviation=void 0!==a.deviation?a.deviation:3,this.opacity=void 0!==a.opacity?a.opacity:.3,this.length=void 0!==a.length?a.length:.5,this.verticalOffset=void 0!==a.verticalOffset?a.verticalOffset:0,a.name="JenScript.PieReflectionEffect",JenScript.AbstractPieEffect.call(this,a)},paintPieEffect:function(a,b){var c=(new JenScript.SVGGroup).Id(b.Id+this.Id).opacity(this.opacity).toSVG();a.deleteGraphicsElement(b.Id+this.Id);var d=b.svg.pieRoot.getBBox(),e="clip"+JenScript.sequenceId++,f=(new JenScript.SVGRect).origin(d.x,d.y+d.height).size(d.width,d.height*this.length),g=(new JenScript.SVGClipPath).Id(e).appendPath(f);a.definesSVG(g.toSVG());var h="filter"+JenScript.sequenceId++,i=(new JenScript.SVGFilter).Id(h).from(d.x,d.y).size(d.width,d.height).toSVG(),j=(new JenScript.SVGElement).name("feGaussianBlur").attr("in","SourceGraphic").attr("stdDeviation",this.deviation);i.appendChild(j.buildHTML()),a.definesSVG(i);var k=b.svg.pieRoot.cloneNode(!0);k.removeAttribute("id"),k.setAttribute("filter","url(#"+h+")"),k.setAttribute("transform","translate(0,"+d.height+"), scale(1,-1), translate(0,"+(-2*(d.y+d.height/2)-this.verticalOffset)+")"),k.setAttribute("opacity",this.opacity);var l=(new JenScript.SVGElement).name("g").buildHTML();k.setAttribute("id",k.getAttribute("id")+"_reflection"+JenScript.sequenceId++),l.setAttribute("clip-path","url(#"+e+")"),l.appendChild(k),c.appendChild(l),b.svg.pieRoot.appendChild(c)}}),JenScript.PieLinearEffect=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.PieLinearEffect,JenScript.AbstractPieEffect),JenScript.Model.addMethods(JenScript.PieLinearEffect,{_init:function(a){a=a||{},a.name="JenScript.PieLinearEffect",this.incidence=void 0!==a.incidence?a.incidence:120,this.offset=void 0!==a.offset?a.offset:3,this.fillOpacity=void 0!==a.fillOpacity?a.fillOpacity:1,this.shader=a.shader,this.gradientIds=[],JenScript.AbstractPieEffect.call(this,a)},setIncidence:function(a){this.incidence=a},getIncidence:function(){return this.incidence},setOffserRadius:function(a){this.offset=a},getOffserRadius:function(){return this.offset},paintPieEffect:function(a,b){var c=(new JenScript.SVGGroup).Id(b.Id+this.Id).opacity(this.opacity).toSVG();a.deleteGraphicsElement(b.Id+this.Id);for(var d=0;d<this.gradientIds.length;d++)a.deleteGraphicsElement(this.gradientIds[d]);this.gradientIds=[];for(var d=0;d<b.slices.length;d++){var e=b.slices[d],f="0";e.extendsDegree>180&&(f="1");var g=function(a,b,c){return{x:a.x+b*Math.cos(JenScript.Math.toRadians(c)),y:a.y-b*Math.sin(JenScript.Math.toRadians(c))}},h=g(e.sc,b.radius-this.offset,e.startAngleDegree),i=g(e.sc,b.radius-this.offset,e.endAngleDegree),j=g(e.sc,b.radius-this.offset,this.incidence),k=g(e.sc,b.radius-this.offset,this.incidence+180),l=["0%","49%","51%","100%"],m=["rgb(60,60,60)","rgb(255,255,255)","rgb(255,255,255)","rgb(255,255,255)"],n=[.8,0,0,.8];void 0===this.shader&&(this.shader={percents:l,colors:m,opacity:n});var o="gradient"+JenScript.sequenceId++;this.gradientIds[this.gradientIds.length]=o;var p=(new JenScript.SVGLinearGradient).Id(o).from(j.x,j.y).to(k.x,k.y).shade(this.shader.percents,this.shader.colors,this.shader.opacity).toSVG();a.definesSVG(p);var q="M"+h.x+","+h.y+" A"+(b.radius-this.offset)+","+(b.radius-this.offset)+" 0 "+f+",0 "+i.x+","+i.y+" L"+e.sc.x+","+e.sc.y+" Z",r=(new JenScript.SVGElement).name("path").attr("fill","url(#"+o+")").attr("d",q).attr("fill-opacity",this.fillOpacity).buildHTML();a.deleteGraphicsElement(b.Id+this.Id+e.Id);var s=(new JenScript.SVGGroup).Id(b.Id+this.Id+e.Id).opacity(e.opacity).toSVG();s.appendChild(r),c.appendChild(s)}b.svg.pieRoot.appendChild(c)}})}(),function(){JenScript.PieAbstractLabel=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.PieAbstractLabel,JenScript.AbstractLabel),JenScript.Model.addMethods(JenScript.PieAbstractLabel,{_init:function(a){JenScript.AbstractLabel.call(this,a)},paintPieSliceLabel:function(){throw new Error("paintPieSliceLabel method should be provide by override")}}),JenScript.PieBorderLabel=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.PieBorderLabel,JenScript.PieAbstractLabel),JenScript.Model.addMethods(JenScript.PieBorderLabel,{__init:function(a){a=a||{},this.margin=void 0!==a.margin?a.margin:50,this.linkExtends=void 0!==a.linkExtends?a.linkExtends:30,a.name="JenScript.PieBorderLabel",JenScript.PieAbstractLabel.call(this,a)},setMargin:function(a){this.margin=a,this.slice.pie.plugin.repaintPlugin()},setLinkExtends:function(a){this.linkExtends=a,this.slice.pie.plugin.repaintPlugin()},paintPieSliceLabel:function(a,b){var c=b.pie.radius,d=b.medianDegree,e=b.pie.buildCenterX+(c+b.getDivergence())*Math.cos(JenScript.Math.toRadians(d)),f=b.pie.buildCenterY-(c+b.getDivergence())*Math.sin(JenScript.Math.toRadians(d)),g=b.pie.buildCenterX+(c+this.linkExtends+b.getDivergence())*Math.cos(JenScript.Math.toRadians(d)),h=b.pie.buildCenterY-(c+this.linkExtends+b.getDivergence())*Math.sin(JenScript.Math.toRadians(d)),i=0,j=h,k=0,l=h,m="middle";d>=270&&360>=d||d>=0&&90>=d?(i=b.pie.buildCenterX+c+this.margin-5,k=b.pie.buildCenterX+c+this.margin+5,m="start",270===d&&(m="middle"),90===d&&(m="middle")):(i=b.pie.buildCenterX-c-this.margin+5,k=b.pie.buildCenterX-c-this.margin-5,m="end");var n="M "+e+","+f+" Q "+g+","+h+" "+i+","+j,o=(new JenScript.SVGElement).name("path").attr("d",n).attr("fill","none").attr("stroke","darkgray").buildHTML();this.setTextAnchor(m),this.setLocation(new JenScript.Point2D(k,l));var p=void 0!==this.textColor?this.textColor:b.themeColor;this.setTextColor(p),this.setOpacity(b.opacity),this.paintLabel(a),this.svg.label.appendChild(o)}}),JenScript.PieRadialLabel=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.PieRadialLabel,JenScript.PieAbstractLabel),JenScript.Model.addMethods(JenScript.PieRadialLabel,{__init:function(a){a=a||{},this.offsetRadius=void 0!==a.offsetRadius?a.offsetRadius:20,a.name="JenScript.PieRadialLabel",JenScript.PieAbstractLabel.call(this,a)},setOffsetRadius:function(a){this.offsetRadius=a,this.slice.pie.plugin.repaintPlugin()},paintPieSliceLabel:function(a,b){var c={x:b.sc.x+(b.pie.radius+this.offsetRadius)*Math.cos(JenScript.Math.toRadians(b.medianDegree)),y:b.sc.y-(b.pie.radius+this.offsetRadius)*Math.sin(JenScript.Math.toRadians(b.medianDegree))},d="middle",e=0;b.medianDegree>0&&b.medianDegree<90?(d="start",e=10):b.medianDegree>90&&b.medianDegree<270?(d="end",e=-10):b.medianDegree>270&&b.medianDegree<=360?(d="start",e=10):(90===b.medianDegree||270===b.medianDegree)&&(d="middle"),this.setLocation(new JenScript.Point2D(c.x,c.y)),this.setTextAnchor(d);var f=void 0!==this.textColor?this.textColor:b.themeColor;this.setTextColor(f),this.setOpacity(b.opacity),this.paintLabel(a)}})}(),function(){JenScript.PieBuilder=function(a,b,c){a.registerProjection(b);var d=new JenScript.PiePlugin;b.registerPlugin(d);var e=new JenScript.Pie(c);d.addPie(e);var f=new JenScript.PieDefaultFill;e.setFill(f);var g,h=[],i=[],j=[],k=function(a){var b=new JenScript.PieSlice(a);return g=b,e.addSlice(b),i.push(b),this},l=function(a,b){var c;return"radial"===a&&(c=new JenScript.PieRadialLabel(b)),"border"===a&&(c=new JenScript.PieBorderLabel(b)),g.setSliceLabel(c),h.push(c),this},m=function(a,b){var c;return"linear"===a&&(c=new JenScript.PieLinearEffect(b)),"reflection"===a&&(c=new JenScript.PieReflectionEffect(b)),e.addEffect(c),j.push(c),this},n=function(a){return m("linear",a),this},o=function(a){return m("reflection",a),this};return{slice:k,label:l,effect:m,linearFx:n,reflectFx:o,view:function(){return a},projection:function(){return b},pie:function(){return e},labels:function(){return h},slices:function(){return k},effects:function(){return j}}}}(),function(){JenScript.TranslateMode=function(a){this.mode=a.toLowerCase(),this.isTx=function(){return"x"===this.mode||"tx"===this.mode||"translatex"===this.mode},this.isTy=function(){return"y"===this.mode||"ty"===this.mode||"translatey"===this.mode},this.isTxy=function(){return"xy"===this.mode||"txy"===this.mode||"translatexy"===this.mode}},JenScript.TranslatePlugin=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.TranslatePlugin,JenScript.Plugin),JenScript.Model.addMethods(JenScript.TranslatePlugin,{_init:function(a){a=a||{},a.name="TranslatePlugin",a.selectable=!0,a.priority=1e3,this.translateListeners=[],this.lockTranslate=!1,this.translateStartX,this.translateStartY,this.translateCurrentX,this.translateCurrentY,this.translateDx=0,this.translateDy=0,this.mode=new JenScript.TranslateMode(void 0!==a.mode?a.mode:"xy"),JenScript.Plugin.call(this,a)},getTranslateDx:function(){return this.translateDx},getTranslateDy:function(){return this.translateDy},isLockTranslate:function(){return this.lockTranslate},isTranslateAuthorized:function(a,b,c,d){return b===JenScript.ViewPart.Device&&this.isLockSelected()&&!this.isLockPassive()&&!this.isWidgetSensible(c,d)},onPress:function(a,b,c,d){a.preventDefault&&a.preventDefault(),this.isTranslateAuthorized(a,b,c,d)?this.startTranslate(new JenScript.Point2D(c,d)):console.log("press translate not authorize to start : "+this.Id)},onRelease:function(a,b,c,d){this.isTranslateAuthorized(a,b,c,d)?this.stopTranslate(new JenScript.Point2D(c,d)):console.log("release translate not authorize to stop : "+this.Id)},onExit:function(a,b,c,d){this.stopTranslate(new JenScript.Point2D(c,d))},onMove:function(a,b,c,d){a.preventDefault&&a.preventDefault(),this.isTranslateAuthorized(a,b,c,d)&&this.lockTranslate&&this.boundTranslate(new JenScript.Point2D(c,d))},startTranslate:function(a){this.lockTranslate=!0,this.translateStartX=a.x,this.translateStartY=a.y,this.fireTranslateEvent("start")},stopTranslate:function(a){this.translateCurrentX=a.x,this.translateCurrentY=a.y,this.lockTranslate=!1,this.fireTranslateEvent("stop")},addTranslateListener:function(a,b,c){if(void 0===c)throw new Error("Translate listener, listener name should be supplied.");var d={action:a,onEvent:b,name:c};this.translateListeners[this.translateListeners.length]=d},fireTranslateEvent:function(a){for(var b=0;b<this.translateListeners.length;b++){var c=this.translateListeners[b];a===c.action&&c.onEvent(this)}},shift:function(a,b){this.lockPassive=!0;var c=this;void 0===b&&(b={step:5,sleep:5,fraction:20});var d=void 0!==b.step?b.step:5,e=void 0!==b.sleep?b.sleep:5,f=void 0!==b.fraction?b.fraction:20,g=this.getProjection().getPixelHeight()/f,h=this.getProjection().getPixelWidth()/f,i=0,j=0;"North"==a&&(j=g),"South"==a&&(j=-g),"West"==a&&(i=h),"East"==a&&(i=-h);var k=function(a,b){setTimeout(function(){c.boundTranslate(new JenScript.Point2D(i*a,j*a),!1),b(a)},a*e)};this.startTranslate(new JenScript.Point2D(0,0));for(var l=0;d>=l;l++)k(l,function(a){a===d&&(c.lockPassive=!1,c.stopTranslate(new JenScript.Point2D(0,0)))})},boundTranslate:function(a){this.translateCurrentX=a.x,this.translateCurrentY=a.y;var b=this.translateCurrentX-this.translateStartX,c=this.translateCurrentY-this.translateStartY;this.mode.isTx()?c=0:this.mode.isTy()&&(b=0),this.processTranslate(b,c),this.translateStartX=this.translateCurrentX,this.translateStartY=this.translateCurrentY,this.fireTranslateEvent("bound")},processTranslate:function(a,b){this.translateDx=a,this.translateDy=b;var c=this.getProjection();if(void 0!==c){var d=c.getPixelWidth(),e=c.getPixelHeight(),f={x:-a,y:e-b},g={x:d-a,y:-b},h=c.pixelToUser(f),i=c.pixelToUser(g);c.bound(h.x,i.x,h.y,i.y)}},onProjectionRegister:function(){}})}(),function(){JenScript.TranslatePad=function(a){this.___init(a)},JenScript.Model.inheritPrototype(JenScript.TranslatePad,JenScript.AbstractBackwardForwardPadWidget),JenScript.Model.addMethods(JenScript.TranslatePad,{___init:function(a){a=a||{},a.Id="translate_pad"+JenScript.sequenceId++,a.width=64,a.height=64,a.xIndex=60,a.yIndex=100,JenScript.AbstractBackwardForwardPadWidget.call(this,a),this.baseFillColor=JenScript.RosePalette.COALBLACK,this.baseStrokeColor=JenScript.RosePalette.MELON,this.baseStrokeWidth=1,this.controlStrokeColor=JenScript.RosePalette.AEGEANBLUE,this.controlStrokeWidth=1,this.buttonFillColor=JenScript.RosePalette.CALYPSOBLUE,this.buttonRolloverFillColor=JenScript.RosePalette.MELON,this.buttonStrokeColor=JenScript.RosePalette.COALBLACK,this.buttonRolloverStrokeColor=JenScript.RosePalette.MELON,this.buttonStrokeWidth=1},onNorthButtonPress:function(){this.getHost().isLockSelected()&&this.getHost().shift("North")},onSouthButtonPress:function(){this.getHost().isLockSelected()&&this.getHost().shift("South")},onWestButtonPress:function(){this.getHost().isLockSelected()&&this.getHost().shift("West")},onEastButtonPress:function(){this.getHost().isLockSelected()&&this.getHost().shift("East")},onRegister:function(){this.attachPluginLockUnlockFactory("Tranlate Pad widget factory")}})}(),function(){JenScript.TranslateX=function(a){this.___init(a)},JenScript.Model.inheritPrototype(JenScript.TranslateX,JenScript.AbstractBackwardForwardBarWidget),JenScript.Model.addMethods(JenScript.TranslateX,{___init:function(a){a=a||{},a.Id="translate_tx"+JenScript.sequenceId++,a.width=void 0!==a.width?a.width:100,a.height=void 0!==a.height?a.height:16,a.xIndex=void 0!==a.xIndex?a.xIndex:2,a.yIndex=void 0!==a.yIndex?a.yIndex:100,a.barOrientation="Horizontal",JenScript.AbstractBackwardForwardBarWidget.call(this,a),this.sample=void 0!==a.sample?a.sample:{step:10,sleep:5,fraction:10},this.setOrphanLock(!0)},onButton1Press:function(){this.getHost().isLockSelected()&&this.getHost().shift("West",this.sample)},onButton2Press:function(){this.getHost().isLockSelected()&&this.getHost().shift("East",this.sample)},onRegister:function(){this.attachPluginLockUnlockFactory("TranlateX widget factory")}})}(),function(){JenScript.TranslateY=function(a){this.___init(a)},JenScript.Model.inheritPrototype(JenScript.TranslateY,JenScript.AbstractBackwardForwardBarWidget),JenScript.Model.addMethods(JenScript.TranslateY,{___init:function(a){a=a||{},a.Id="translate_ty"+JenScript.sequenceId++,a.width=void 0!==a.width?a.width:16,a.height=void 0!==a.height?a.height:100,a.xIndex=void 0!==a.xIndex?a.xIndex:100,a.yIndex=void 0!==a.yIndex?a.yIndex:1,a.barOrientation="Vertical",JenScript.AbstractBackwardForwardBarWidget.call(this,a),this.sample=void 0!==a.sample?a.sample:{step:10,sleep:5,fraction:10},this.setOrphanLock(!0)},onButton1Press:function(){this.getHost().isLockSelected()&&this.getHost().shift("North",this.sample)},onButton2Press:function(){this.getHost().isLockSelected()&&this.getHost().shift("South",this.sample)},onRegister:function(){this.attachPluginLockUnlockFactory("TranlateY widget factory")}})}(),function(){JenScript.TranslateCompassWidget=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.TranslateCompassWidget,JenScript.Widget),JenScript.Model.addMethods(JenScript.TranslateCompassWidget,{_init:function(a){a=a||{},this.translateCompassWidgetID="translate_compass"+JenScript.sequenceId++,this.compassSquareSize=void 0!==a.compassSquareSize?a.compassSquareSize:64,this.compassWidget,this.compassStyle="Merge",this.name,this.ringDrawColor="rgba(91,151,168,0.7)",this.ringFillColor=void 0!==a.ringFillColor?a.ringFillColor:"red",this.ringFillOpacity=.5,this.ringDrawOpacity=1,this.ringNeedleDrawColor,this.ringNeedleFillColor,this.averageCounter=0,this.maxAverage=2,this.averageDx=0,this.averageDy=0,this.compassGeometry=new this.CompassGeometry(0,0,this.compassSquareSize/2-10,this.compassSquareSize/2-4),this.needleGeometry=new this.NeedleGeometry,this.needleVector=new this.NeedleVector,a.Id=this.translateCompassWidgetID,a.width=this.compassSquareSize,a.height=this.compassSquareSize,a.xIndex=100,a.yIndex=0,JenScript.Widget.call(this,a)},CompassGeometry:function(a,b,c,d){this.centerX=a,this.centerY=b,this.innerRadius=c,this.outerRadius=d,this.builCompass=function(){}},NeedleGeometry:function(){this.theta=0,this.paint="rgba(0, 0, 0, 0.6)",this.colorTheme="white",this.alphaProjection=18},NeedleVector:function(){this.startx=0,this.endx=0,this.starty=0,this.endy=0},onRegister:function(){var a=this;this.getHost().addTranslateListener("start",function(){a.create()},"Translate compass widget translate start listener, create"),this.getHost().addTranslateListener("bound",function(){a.averageCounter<a.maxAverage?(a.averageCounter++,a.averageDx=a.averageDx+a.getHost().getTranslateDx(),a.averageDy=a.averageDy+a.getHost().getTranslateDy()):(a.needleVector.startx=0,a.needleVector.endx=a.averageDx/a.averageCounter,a.needleVector.starty=0,a.needleVector.endy=a.averageDy/a.averageCounter,a.destroy(),a.create(),a.averageCounter=0,a.averageDx=0,a.averageDy=0)},"translate compass widget translate process listener"),this.getHost().addTranslateListener("stop",function(){a.destroy()},"translate compass widget translate stop listener, destroy")},getCompassGeometry:function(){return this.compassGeometry},solveCompass:function(){var a=this.getWidgetFolder(),b=a.x+a.width/2,c=a.y+a.height/2;this.getCompassGeometry().centerX=b,this.getCompassGeometry().centerY=c;var d=0,e=this.needleVector.startx,f=this.needleVector.starty,g=this.needleVector.endx,h=this.needleVector.endy;g>e&&f>=h?d=Math.atan((f-h)/(g-e)):g>e&&h>f?d=Math.atan((f-h)/(g-e))+2*Math.PI:e>g?d=Math.atan((f-h)/(g-e))+Math.PI:g==e&&f>h?d=Math.PI/2:g==e&&h>f&&(d=3*Math.PI/2),this.needleGeometry.theta=JenScript.Math.toDegrees(d)},paintTranslateCompass:function(a){var b=this.getWidgetFolder();if(void 0===b)return void console.log("compass widget folder is undefined");this.solveCompass();var c=this.compassGeometry,d=this.needleGeometry,e=(new JenScript.SVGPath).moveTo(c.centerX-c.outerRadius,c.centerY).arcTo(c.outerRadius,c.outerRadius,0,1,1,c.centerX+c.outerRadius,c.centerY).arcTo(c.outerRadius,c.outerRadius,0,1,1,c.centerX-c.outerRadius,c.centerY).moveTo(c.centerX-c.innerRadius,c.centerY).arcTo(c.innerRadius,c.innerRadius,0,1,1,c.centerX+c.innerRadius,c.centerY).arcTo(c.innerRadius,c.innerRadius,0,1,1,c.centerX-c.innerRadius,c.centerY).attr("fill-rule","evenodd").strokeNone().fill(this.ringFillColor).fillOpacity(this.ringFillOpacity).close(),f=2,g=8,h=18,i=d.theta,j=(c.outerRadius+g)*Math.cos(JenScript.Math.toRadians(i)),k=(c.outerRadius+g)*Math.sin(JenScript.Math.toRadians(i)),l=(c.innerRadius+f)*Math.cos(JenScript.Math.toRadians(i-h)),m=(c.innerRadius+f)*Math.sin(JenScript.Math.toRadians(i-h)),n=(c.innerRadius+f)*Math.cos(JenScript.Math.toRadians(i+h)),o=(c.innerRadius+f)*Math.sin(JenScript.Math.toRadians(i+h)),p=(new JenScript.SVGPath).moveTo(c.centerX+j,c.centerY-k).lineTo(c.centerX+n,c.centerY-o).lineTo(c.centerX+l,c.centerY-m).strokeNone().fill(this.ringFillColor).strokeOpacity(this.ringDrawOpacity).close(),q=(new JenScript.SVGGroup).Id(this.Id);a.deleteGraphicsElement(this.Id),q.child(e.toSVG()).child(p.toSVG()),a.insertSVG(q.toSVG())},paintWidget:function(a){void 0!==this.getHost()&&this.getHost().isLockTranslate()&&this.paintTranslateCompass(a)}})}(),function(){JenScript.TranslateSynchronizer=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.TranslateSynchronizer,{init:function(a){this.translateList=[],this.dispathingEvent=!1;var b=a.translates;if(!this.dispathingEvent){this.dispathingEvent=!0;for(var c=0;c<b.length;c++){var d=this;b[c].addTranslateListener("start",function(a){d.translateStarted(a)}," Translate synchronizer, start listener"),b[c].addTranslateListener("bound",function(a){d.bound(a)}," Translate synchronizer, bound listener"),b[c].addTranslateListener("stop",function(a){d.translateStoped(a)}," Translate synchronizer, stop listener"),b[c].addPluginListener("lock",function(a){d.pluginSelected(a)},"Translate Synchronizer plugin lock listener"),b[c].addPluginListener("unlock",function(a){d.pluginSelected(a)},"Translate Synchronizer plugin unlock listener"),this.translateList[this.translateList.length]=b[c]}this.dispathingEvent=!1}},pluginSelected:function(a){if(!this.dispathingEvent){this.dispathingEvent=!0;for(var b=0;b<this.translateList.length;b++){var c=this.translateList[b];c.Id!==a.Id&&c.select()}this.dispathingEvent=!1}},pluginUnlockSelected:function(a){if(!this.dispathingEvent){this.dispathingEvent=!0;for(var b=0;b<this.translateList.length;b++){var c=this.translateList[b];c.Id!==a.Id&&c.unselect()}this.dispathingEvent=!1}},translateL2RChanged:function(){},translateB2TChanged:function(){},translateStarted:function(a){if(!this.dispathingEvent){this.dispathingEvent=!0;for(var b=0;b<this.translateList.length;b++){var c=this.translateList[b];c.Id!==a.Id&&c.startTranslate(new JenScript.Point2D(a.translateStartX,a.translateStartY))}this.dispathingEvent=!1}},bound:function(a){if(!this.dispathingEvent){this.dispathingEvent=!0;for(var b=0;b<this.translateList.length;b++){var c=this.translateList[b];c.Id!==a.Id&&c.boundTranslate({x:a.translateCurrentX,y:a.translateCurrentY})}this.dispathingEvent=!1}},translateStoped:function(a){if(!this.dispathingEvent){this.dispathingEvent=!0;for(var b=0;b<this.translateList.length;b++){
var c=this.translateList[b];c.Id!==a.Id&&c.stopTranslate(new JenScript.Point2D(a.translateCurrentX,a.translateCurrentY))}this.dispathingEvent=!1}}})}(),function(){JenScript.ZoomBoxMode=function(a){this.mode=a.toLowerCase(),this.isBx=function(){return"x"===this.mode||"bx"===this.mode||"box"===this.mode},this.isBy=function(){return"y"===this.mode||"by"===this.mode||"boy"===this.mode},this.isBxy=function(){return"xy"===this.mode||"bxy"===this.mode||"boxxy"===this.mode}},JenScript.ZoomBoxPlugin=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.ZoomBoxPlugin,JenScript.Plugin),JenScript.Model.addMethods(JenScript.ZoomBoxPlugin,{_init:function(a){a=a||{},a.name="ZoomBox",a.selectable=!0,a.priority=1e3,this.zoomBoxDrawColor=a.zoomBoxDrawColor,this.zoomBoxFillColor=a.zoomBoxFillColor,this.mode=new JenScript.ZoomBoxMode(void 0!==a.mode?a.mode:"xy"),this.speed=void 0!==a.speed?a.speed:"default",this.minimalDelatX=16,this.minimalDeltaY=16,this.drag=!1,this.lockEffect=!1,this.lockZoomingTransaction=!1,this.zoomBoxStartX,this.zoomBoxStartY,this.zoomBoxCurrentX,this.zoomBoxCurrentY,this.zoomFxBoxStartX,this.zoomFxBoxStartY,this.zoomFxBoxCurrentX,this.zoomFxBoxCurrentY,this.boxHistory=[],this.maxHistory=8,this.zoomBack=[],this.boxListeners=[],JenScript.Plugin.call(this,a)},onProjectionRegister:function(){var a=this;this.getProjection().addProjectionListener("boundChanged",function(){a.repaintPlugin()},a.toString())},fireEvent:function(a){for(var b=0;b<this.boxListeners.length;b++){var c=this.boxListeners[b];c.action===a&&c.onEvent(this)}},addBoxListener:function(a,b){var c={action:a,onEvent:b};this.boxListeners[this.boxListeners.length]=c},onPress:function(a,b,c,d){a.preventDefault&&a.preventDefault(),b===JenScript.ViewPart.Device&&this.isLockSelected()&&(this.isLockPassive()||(this.drag=!0,this.processZoomStart(new JenScript.Point2D(c,d))))},processZoomStart:function(a){this.zoomBoxStartX=a.getX(),this.zoomBoxStartY=a.getY(),this.zoomBoxCurrentX=this.zoomBoxStartX,this.zoomBoxCurrentY=this.zoomBoxStartY,this.zoomFxBoxStartX=0,this.zoomFxBoxStartY=0,this.zoomFxBoxCurrentX=0,this.zoomFxBoxCurrentY=0,this.fireEvent("boxStart"),this.lockZoomingTransaction=!0},onRelease:function(a,b){b===JenScript.ViewPart.Device&&(this.drag=!1,this.isLockSelected()&&(this.isLockPassive()||(this.isForwardCondition()?this.processZoomOut():this.isValidateBound()&&this.processZoomIn(),this.repaintPlugin())))},onMove:function(a,b,c,d){b===JenScript.ViewPart.Device&&this.drag&&(this.processZoomBound(new JenScript.Point2D(c,d)),this.repaintPlugin())},processZoomBound:function(a){this.zoomBoxCurrentX=a.getX(),this.zoomBoxCurrentY=a.getY(),this.fireEvent("boxBound")},isValidateBound:function(){if(this.mode.isBxy()){if(this.zoomBoxCurrentX>this.zoomBoxStartX+this.minimalDelatX&&this.zoomBoxCurrentY>this.zoomBoxStartY+this.minimalDeltaY)return!0}else if(this.mode.isBx()){if(this.zoomBoxCurrentX>this.zoomBoxStartX+this.minimalDelatX)return!0}else if(this.mode.isBy()&&this.zoomBoxCurrentY>this.zoomBoxStartY+this.minimalDeltaY)return!0;return!1},isForwardCondition:function(){if(this.mode.isBxy()){if(this.zoomBoxCurrentX<this.zoomBoxStartX||this.zoomBoxCurrentY<this.zoomBoxStartY)return!0}else if(this.mode.isBx()){if(this.zoomBoxCurrentX<this.zoomBoxStartX)return!0}else if(this.mode.isBy()&&this.zoomBoxCurrentY<this.zoomBoxStartY)return!0;return!1},processZoomOut:function(){function a(a,d){setTimeout(function(){var e=c.zoomBack[a];b.bound(e.minX,e.maxX,e.minY,e.maxY),d(a)},20*a)}var b=this.getProjection(),c=this;c.zoomBack.reverse();for(var d=0;d<this.zoomBack.length;d++)a(d,function(a){a===c.zoomBack.length-1&&setTimeout(function(){c.fireEvent("boxFinish"),c.repaintPlugin()},10)});this.fireEvent("boxOut")},processZoomIn:function(){function a(a,b){var c=s*a;console.log(" millis :"+c),setTimeout(function(){t.lockZoomingTransaction=!0;var c=0,d=0,e=0,s=0;t.mode.isBxy()?(c=g+k*a,d=h-l*a,e=i+m*a,s=j-n*a,t.zoomFxBoxStartX=t.zoomBoxStartX-o*a,t.zoomFxBoxStartY=t.zoomBoxStartY-r*a,t.zoomFxBoxCurrentX=t.zoomBoxCurrentX+p*a,t.zoomFxBoxCurrentY=t.zoomBoxCurrentY+q*a):t.mode.isBx()?(c=g+k*a,d=h-l*a,e=f.getMinY(),s=f.getMaxY(),t.zoomFxBoxStartX=t.zoomBoxStartX-o*a,t.zoomFxBoxStartY=0,t.zoomFxBoxCurrentX=t.zoomBoxCurrentX+p*a,t.zoomFxBoxCurrentY=t.getProjection().getPixelHeight()):t.mode.isBy()&&(c=f.getMinX(),d=f.getMaxX(),e=i+m*a,s=j-n*a,t.zoomFxBoxStartX=0,t.zoomFxBoxStartY=t.zoomBoxStartY-r*a,t.zoomFxBoxCurrentX=t.getProjection().getPixelWidth(),t.zoomFxBoxCurrentY=t.zoomBoxCurrentY+q*a),f.bound(c,d,e,s),t.zoomBack[u++]=f.getBounds(),b(a)},c)}this.lockEffect=!0;var b={x:this.zoomBoxStartX,y:this.zoomBoxStartY},c={x:this.zoomBoxCurrentX,y:this.zoomBoxCurrentY},d=this.getProjection().pixelToUser(b),e=this.getProjection().pixelToUser(c),f=this.getProjection(),g=f.minX,h=f.maxX,i=f.minY,j=f.maxY;this.boxHistory[this.boxHistory.length]={minx:g,maxx:h,miny:i,maxy:j};var k=Math.abs(f.minX-d.x)/10,l=Math.abs(f.maxX-e.x)/10,m=Math.abs(f.minY-e.y)/10,n=Math.abs(f.maxY-d.y)/10,o=Math.abs(f.userToPixelX(k)-f.userToPixelX(0)),p=Math.abs(f.userToPixelX(l)-f.userToPixelX(0)),q=Math.abs(f.userToPixelY(m)-f.userToPixelY(0)),r=Math.abs(f.userToPixelY(n)-f.userToPixelY(0)),s=200;"slow"===this.speed&&(s=60),"default"===this.speed&&(s=30),"fast"===this.speed&&(s=10);var t=this;t.zoomBack=[];for(var u=0,v=1;10>=v;v++)a(v,function(a){t.zoomBack[u++]=f.getBounds(),10===a&&(t.lockEffect=!1,t.lockZoomingTransaction=!1,setTimeout(function(){t.fireEvent("boxFinish"),t.repaintPlugin()},10))});this.fireEvent("boxIn")},paintBox:function(a){var b=this.zoomBoxCurrentX-this.zoomBoxStartX,c=this.zoomBoxCurrentY-this.zoomBoxStartY,d=0,e=0,f=0,g=0;this.mode.isBxy()?(d=this.zoomBoxStartX,e=this.zoomBoxStartY,f=b,g=c):this.mode.isBx()?(d=this.zoomBoxStartX,e=0,f=b,g=this.getProjection().getPixelHeight()):this.mode.isBy()&&(d=0,e=this.zoomBoxStartY,f=this.getProjection().getPixelWidth(),g=c);var h=void 0!==this.zoomBoxFillColor?this.zoomBoxFillColor:this.getProjection().getThemeColor(),i=void 0!==this.zoomBoxDrawColor?this.zoomBoxDrawColor:this.getProjection().getThemeColor(),j=(new JenScript.SVGRect).origin(d,e).size(f,g).strokeWidth(.5).stroke(i).fillOpacity(.2).strokeOpacity(.8).fill(h).toSVG();a.insertSVG(j)},paintBoxEffect:function(a){var b=this.zoomFxBoxCurrentX-this.zoomFxBoxStartX,c=this.zoomFxBoxCurrentY-this.zoomFxBoxStartY,d=void 0!==this.zoomBoxFillColor?this.zoomBoxFillColor:this.getProjection().getThemeColor(),e=void 0!==this.zoomBoxDrawColor?this.zoomBoxDrawColor:this.getProjection().getThemeColor(),f=(new JenScript.SVGRect).origin(this.zoomFxBoxStartX,this.zoomFxBoxStartY).size(b,c).strokeWidth(.5).stroke(e).fillOpacity(.2).strokeOpacity(.8).fill(d).toSVG();a.insertSVG(f)},paintPlugin:function(a,b){b===JenScript.ViewPart.Device&&this.lockZoomingTransaction&&(!this.lockEffect&&this.isValidateBound()?this.paintBox(a,b):this.paintBoxEffect(a))},getBoxStartDevicePoint:function(){return new JenScript.Point2D(this.zoomBoxStartX,this.zoomBoxStartY)},getBoxCurrentDevicePoint:function(){return new JenScript.Point2D(this.zoomBoxCurrentX,this.zoomBoxCurrentY)},getBoxStartUserPoint:function(){return this.getProjection().pixelToUser(this.getBoxStartDevicePoint())},getBoxCurrentUserPoint:function(){return this.getProjection().pixelToUser(this.getBoxCurrentDevicePoint())}})}(),function(){JenScript.ZoomBoxSynchronizer=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.ZoomBoxSynchronizer,{init:function(a){this.boxesList=[],this.dispathingEvent=!1;var b=a.boxes;if(!this.dispathingEvent){this.dispathingEvent=!0;for(var c=0;c<b.length;c++){var d=this;b[c].addBoxListener("boxStart",function(a){d.boxStart(a)}),b[c].addBoxListener("boxBound",function(a){d.boxBound(a)}),b[c].addBoxListener("boxIn",function(a){d.boxIn(a)}),b[c].addBoxListener("boxOut",function(a){d.boxOut(a)}),b[c].addBoxListener("boxFinish",function(a){d.boxFinish(a)}),b[c].addPluginListener("lock",function(a){d.pluginSelected(a)},"ZoomBox Synchronizer plugin lock listener"),b[c].addPluginListener("unlock",function(a){d.pluginSelected(a)},"ZoomBox Synchronizer plugin unlock listener"),this.boxesList[this.boxesList.length]=b[c]}this.dispathingEvent=!1}},pluginSelected:function(a){if(!this.dispathingEvent){this.dispathingEvent=!0;for(var b=0;b<this.boxesList.length;b++){var c=this.boxesList[b];c.Id!==a.Id&&(console.log("lock other box"),c.select())}this.dispathingEvent=!1}},pluginUnlockSelected:function(a){if(!this.dispathingEvent){this.dispathingEvent=!0;for(var b=0;b<this.boxesList.length;b++){var c=this.boxesList[b];c.Id!==a.Id&&c.unselect()}this.dispathingEvent=!1}},boxStart:function(a){if(!this.dispathingEvent){this.dispathingEvent=!0;for(var b=0;b<this.boxesList.length;b++){var c=this.boxesList[b];if(c.Id!==a.Id){var d=a.getBoxStartDevicePoint();c.processZoomStart(d),c.repaintPlugin()}}this.dispathingEvent=!1}},boxBound:function(a){if(!this.dispathingEvent){this.dispathingEvent=!0;for(var b=0;b<this.boxesList.length;b++){var c=this.boxesList[b];if(c.Id!==a.Id){var d=a.getBoxCurrentDevicePoint();c.processZoomBound(d),c.repaintPlugin()}}this.dispathingEvent=!1}},boxIn:function(a){if(!this.dispathingEvent){this.dispathingEvent=!0;for(var b=0;b<this.boxesList.length;b++){var c=this.boxesList[b];c.Id!==a.Id&&c.processZoomIn()}this.dispathingEvent=!1}},boxOut:function(a){if(!this.dispathingEvent){this.dispathingEvent=!0;for(var b=0;b<this.boxesList.length;b++){var c=this.boxesList[b];c.Id!==a.Id&&c.processZoomOut()}this.dispathingEvent=!1}},boxFinish:function(){}})}(),function(){JenScript.ZoomLensPlugin=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.ZoomLensPlugin,JenScript.Plugin),JenScript.Model.addMethods(JenScript.ZoomLensPlugin,{_init:function(a){a=a||{},a.name="ZoomLensPlugin",a.selectable=!0,a.priority=1e3,this.zoomInLock=!1,this.zoomOutLock=!1,this.zoomMiliTempo=100,this.factor=30,this.processNature,this.lensListeners=[],this.lensType=void 0!==a.lensType?a.lensType:"LensXY",JenScript.Plugin.call(this,a)},getProcessNature:function(){return this.processNature},onRelease:function(){this.zoomInLock=!1,this.zoomOutLock=!1},addLensListener:function(a,b,c){var d={action:a,onEvent:b,name:c};this.lensListeners[this.lensListeners.length]=d},fireLensEvent:function(a){for(var b=0;b<this.lensListeners.length;b++){var c=this.lensListeners[b];c.action===a&&c.onEvent(this)}},stopZoomIn:function(){this.zoomInLock=!1},stopZoomOut:function(){this.zoomOutLock=!1},startZoomIn:function(a){this.zoomInLock=!0;for(var b=this,c=function(c){setTimeout(function(){b.zoomIn(a)},c*b.zoomMiliTempo)},d=0;10>d;d++)c(d)},startZoomOut:function(a){this.zoomOutLock=!0;for(var b=this,c=function(){setTimeout(function(){b.zoomOut(a)},d*b.zoomMiliTempo)},d=0;10>d;d++)c(d)},zoomIn:function(a){this.processNature=a;var b=this.getProjection(),c=b.getPixelWidth(),d=b.getPixelHeight(),e=this.factor,f=void 0,g=void 0;"ZoomXY"===a?(f={x:c/e,y:d-d/e},g={x:c-c/e,y:d/e}):"ZoomX"===a?(f={x:c/e,y:d},g={x:c-c/e,y:0}):"ZoomY"===a&&(f={x:0,y:d-d/e},g={x:c,y:d/e});var h=b.pixelToUser(f),i=b.pixelToUser(g);"LensXY"==this.lensType?b.bound(h.x,i.x,h.y,i.y):"LensX"===this.lensType?b.bound(h.x,i.x,b.getMinY(),b.getMaxY()):"LensY"===this.lensType&&b.bound(b.getMinX(),b.getMaxX(),h.y,i.y),this.fireLensEvent("zoomIn")},zoomOut:function(a){this.processNature=a;var b=this.getProjection(),c=b.getPixelWidth(),d=b.getPixelHeight(),e=this.factor,f=void 0,g=void 0;"ZoomXY"===a?(f={x:-c/e,y:d+d/e},g={x:c+c/e,y:-d/e}):"ZoomX"===a?(f={x:-c/e,y:d},g={x:c+c/e,y:0}):"ZoomY"===a&&(f={x:0,y:d+d/e},g={x:c,y:-d/e});var h=b.pixelToUser(f),i=b.pixelToUser(g);"LensXY"===this.lensType?b.bound(h.x,i.x,h.y,i.y):"LensX"===this.lensType?b.bound(h.x,i.x,b.getMinY(),b.getMaxY()):"LensY"===this.lensType&&b.bound(b.getMinX(),b.getMaxX(),h.y,i.y),this.fireLensEvent("zoomOut")}})}(),function(){JenScript.ZoomLensSynchronizer=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.ZoomLensSynchronizer,{init:function(a){this.lensList=[],this.dispathingEvent=!1;var b=a.lenses;if(!this.dispathingEvent){this.dispathingEvent=!0;for(var c=0;c<b.length;c++){var d=this;b[c].addLensListener("zoomIn",function(a){d.zoomIn(a)}," Lens synchronizer, zoomIn listener"),b[c].addLensListener("zoomOut",function(a){d.zoomOut(a)}," Lens synchronizer, zoomOut listener"),b[c].addPluginListener("lock",function(a){d.pluginSelected(a)},"Lens Synchronizer plugin lock listener"),b[c].addPluginListener("unlock",function(a){d.pluginSelected(a)},"Lens Synchronizer plugin unlock listener"),this.lensList[this.lensList.length]=b[c]}this.dispathingEvent=!1}},pluginSelected:function(a){if(!this.dispathingEvent){this.dispathingEvent=!0;for(var b=0;b<this.lensList.length;b++){var c=this.lensList[b];c.Id!==a.Id&&c.select()}this.dispathingEvent=!1}},pluginUnlockSelected:function(a){if(!this.dispathingEvent){this.dispathingEvent=!0;for(var b=0;b<this.lensList.length;b++){var c=this.lensList[b];c.Id!==a.Id&&c.unselect()}this.dispathingEvent=!1}},zoomIn:function(a){if(!this.dispathingEvent){this.dispathingEvent=!0;for(var b=0;b<this.lensList.length;b++){var c=this.lensList[b];c.Id!==a.Id&&c.zoomIn(a.getProcessNature())}this.dispathingEvent=!1}},zoomOut:function(a){if(!this.dispathingEvent){this.dispathingEvent=!0;for(var b=0;b<this.lensList.length;b++){var c=this.lensList[b];c.Id!==a.Id&&c.zoomOut(a.getProcessNature())}this.dispathingEvent=!1}}})}(),function(){JenScript.LensPad=function(a){this.___init(a)},JenScript.Model.inheritPrototype(JenScript.LensPad,JenScript.AbstractPlusMinusPadWidget),JenScript.Model.addMethods(JenScript.LensPad,{___init:function(a){a=a||{},a.Id="lens_pad"+JenScript.sequenceId++,a.width=64,a.height=64,a.xIndex=60,a.yIndex=100,JenScript.AbstractPlusMinusPadWidget.call(this,a),this.baseFillColor=JenScript.RosePalette.COALBLACK,this.baseStrokeColor=JenScript.RosePalette.MELON,this.baseStrokeWidth=1,this.controlStrokeColor=JenScript.RosePalette.AEGEANBLUE,this.controlStrokeWidth=1,this.buttonFillColor=JenScript.RosePalette.EMERALD,this.buttonRolloverFillColor=JenScript.RosePalette.MELON,this.buttonStrokeColor=JenScript.RosePalette.FOXGLOWE,this.buttonRolloverStrokeColor=JenScript.RosePalette.MELON,this.buttonStrokeWidth=1},onNorthButtonPress:function(){this.getHost().isLockSelected()&&this.getHost().startZoomIn("ZoomY")},onSouthButtonPress:function(){this.getHost().isLockSelected()&&this.getHost().startZoomOut("ZoomY")},onWestButtonPress:function(){this.getHost().isLockSelected()&&this.getHost().startZoomOut("ZoomX")},onEastButtonPress:function(){this.getHost().isLockSelected()&&this.getHost().startZoomIn("ZoomX")},onRegister:function(){this.attachPluginLockUnlockFactory("Lens Pad widget factory")}})}(),function(){JenScript.LensX=function(a){this.___init(a)},JenScript.Model.inheritPrototype(JenScript.LensX,JenScript.AbstractPlusMinusBarWidget),JenScript.Model.addMethods(JenScript.LensX,{___init:function(a){a=a||{},a.Id="lensX"+JenScript.sequenceId++,a.width=void 0!==a.width?a.width:100,a.height=void 0!==a.height?a.height:16,a.xIndex=void 0!==a.xIndex?a.xIndex:3,a.yIndex=void 0!==a.yIndex?a.yIndex:100,a.barOrientation="Horizontal",JenScript.AbstractPlusMinusBarWidget.call(this,a),this.setOrphanLock(!0)},onButton1Press:function(){this.getHost().isLockSelected()&&this.getHost().startZoomOut("ZoomX")},onButton2Press:function(){this.getHost().isLockSelected()&&this.getHost().startZoomIn("ZoomX")},onRegister:function(){this.attachPluginLockUnlockFactory("LensX widget widget factory")}})}(),function(){JenScript.LensY=function(a){this.___init(a)},JenScript.Model.inheritPrototype(JenScript.LensY,JenScript.AbstractPlusMinusBarWidget),JenScript.Model.addMethods(JenScript.LensY,{___init:function(a){a=a||{},a.Id="LensY"+JenScript.sequenceId++,a.width=void 0!==a.width?a.width:16,a.height=void 0!==a.height?a.height:100,a.xIndex=void 0!==a.xIndex?a.xIndex:100,a.yIndex=void 0!==a.yIndex?a.yIndex:2,a.barOrientation="Vertical",JenScript.AbstractPlusMinusBarWidget.call(this,a),this.setOrphanLock(!0)},onButton1Press:function(){this.getHost().isLockSelected()&&this.getHost().startZoomIn("ZoomY")},onButton2Press:function(){this.getHost().isLockSelected()&&this.getHost().startZoomOut("ZoomY")},onRegister:function(){this.attachPluginLockUnlockFactory("LensY widget widget factory")}})}(),function(){JenScript.ZoomWheelMode=function(a){this.mode=a.toLowerCase(),this.isWx=function(){return"x"===this.mode||"wx"===this.mode||"wheelx"===this.mode},this.isWy=function(){return"y"===this.mode||"wy"===this.mode||"wheely"===this.mode},this.isWxy=function(){return"xy"===this.mode||"wxy"===this.mode||"wheelxy"===this.mode}},JenScript.ZoomWheelPlugin=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.ZoomWheelPlugin,JenScript.Plugin),JenScript.Model.addMethods(JenScript.ZoomWheelPlugin,{_init:function(a){a=a||{},a.name="ZoomWheelPlugin",a.selectable=!1,a.priority=1e3,this.mode=new JenScript.ZoomWheelMode(void 0!==a.mode?a.mode:"xy"),this.multiplier=void 0!==a.multiplier?a.multiplier:2,this.factor=60,this.wheelListeners=[],JenScript.Plugin.call(this,a)},addWheelListener:function(a,b,c){var d={action:a,onEvent:b,name:c};this.wheelListeners[this.wheelListeners.length]=d},fireWheelEvent:function(a){for(var b=0;b<this.wheelListeners.length;b++){var c=this.wheelListeners[b];c.action===a&&c.onEvent(this)}},onPress:function(){this.stopWheel=!0},onRelease:function(){this.stopWheel=!1},onWheel:function(a){a.preventDefault();var b=this,c=function(a){setTimeout(function(){b.zoomIn()},100*a)},d=function(a){setTimeout(function(){b.zoomOut()},100*a)},e=function(a){if(0>a)for(var b=-a,e=0;b>e;e++)c(e);else for(var b=a,e=0;b>e;e++)d(e)};a.deltaY&&e(a.deltaY*this.multiplier)},zoomIn:function(){if(!this.stopWheel){var a=this.getProjection().getPixelWidth(),b=this.getProjection().getPixelHeight(),c=void 0,d=void 0;this.mode.isWxy()?(c={x:a/this.factor,y:b-b/this.factor},d={x:a-a/this.factor,y:b/this.factor}):this.mode.isWx()?(c={x:a/this.factor,y:b},d={x:a-a/this.factor,y:0}):this.mode.isWy()&&(c={x:0,y:b-b/this.factor},d={x:a,y:b/this.factor});var e=this.getProjection().pixelToUser(c),f=this.getProjection().pixelToUser(d);this.getProjection().bound(e.x,f.x,e.y,f.y),this.fireWheelEvent("zoomIn")}},zoomOut:function(){if(!this.stopWheel){var a=this.getProjection().getPixelWidth(),b=this.getProjection().getPixelHeight(),c=void 0,d=void 0;this.mode.isWxy()?(c={x:-a/this.factor,y:b+b/this.factor},d={x:a+a/this.factor,y:-b/this.factor}):this.mode.isWx()?(c={x:-a/this.factor,y:b},d={x:a+a/this.factor,y:0}):this.mode.isWy()&&(c={x:0,y:b+b/this.factor},d={x:a,y:-b/this.factor});var e=this.getProjection().pixelToUser(c),f=this.getProjection().pixelToUser(d);this.getProjection().bound(e.x,f.x,e.y,f.y),this.fireWheelEvent("zoomOut")}}})}(),function(){JenScript.ZoomWheelSynchronizer=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.ZoomWheelSynchronizer,{init:function(a){this.wheelList=[],this.dispathingEvent=!1;var b=a.wheels;if(!this.dispathingEvent){this.dispathingEvent=!0;for(var c=0;c<b.length;c++){var d=this;b[c].addWheelListener("zoomIn",function(a){d.zoomIn(a)}," Wheel synchronizer, zoomIn listener"),b[c].addWheelListener("zoomOut",function(a){d.zoomOut(a)}," Wheel synchronizer, zoomOut listener"),this.wheelList[this.wheelList.length]=b[c]}this.dispathingEvent=!1}},pluginSelected:function(a){if(!this.dispathingEvent){this.dispathingEvent=!0;for(var b=0;b<this.wheelList.length;b++){var c=this.wheelList[b];c.Id!==a.Id&&c.select()}this.dispathingEvent=!1}},pluginUnlockSelected:function(a){if(!this.dispathingEvent){this.dispathingEvent=!0;for(var b=0;b<this.wheelList.length;b++){var c=this.wheelList[b];c.Id!==a.Id&&c.unselect()}this.dispathingEvent=!1}},zoomIn:function(a){if(!this.dispathingEvent){this.dispathingEvent=!0;for(var b=0;b<this.wheelList.length;b++){var c=this.wheelList[b];c.Id!==a.Id&&c.zoomIn()}this.dispathingEvent=!1}},zoomOut:function(a){if(!this.dispathingEvent){this.dispathingEvent=!0;for(var b=0;b<this.wheelList.length;b++){var c=this.wheelList[b];c.Id!==a.Id&&c.zoomOut()}this.dispathingEvent=!1}}})}(),function(){"use strict";function a(a,b,c,d,e,f){if(p){var h,i=["new JenScript.BigNumber","compareTo","divide","equals","gt","gte","lt","lte","substract","modulo","add","multiply","toFraction"][s?0>s?-s:s:0>1/s?1:0]+"()",j=g?" out of range":" not a"+(e?" non-zero":"n")+" integer";throw j=([i+" number type has more than 15 significant digits",i+" not a base "+c+" number",i+" base"+j,i+" not a number"][b]||c+"() "+b+(f?" not a boolean or binary digit":j+(d?" or not ["+(g?" negative, positive":" integer, integer")+" ]":"")))+": "+a,g=s=0,h=new Error(j),h.name="JenScript.BigNumber Error",h}}function b(a,b,d,e){function f(a,c){var e,f,g=0,h=a.length,i=[0];for(c=c||d;h>g;g++){for(f=i.length,e=0;f>e;i[e]*=c,e++);for(i[0]+=r.indexOf(a.charAt(g)),e=0;e<i.length;e++)i[e]>b-1&&(null==i[e+1]&&(i[e+1]=0),i[e+1]+=i[e]/b^0,i[e]%=b)}return i.reverse()}function g(a){for(var b=0,c=a.length,d="";c>b;d+=r.charAt(a[b++]));return d}var h,i,j,k,l,m;if(37>d&&(a=a.toLowerCase()),(h=a.indexOf("."))>-1)if(h=a.length-h-1,i=f(new JenScript.BigNumber(d).pow(h).toF(),10),k=a.split("."),j=f(k[1]),k=f(k[0]),m=c(j,i,j.length-i.length,e,b,1&k[k.length-1]),l=m.c,h=m.e){for(;++h;l.unshift(0));a=g(k)+"."+g(l)}else l[0]?k[h=k.length-1]<b-1?(++k[h],a=g(k)):a=new JenScript.BigNumber(g(k),b).add(new JenScript.BigNumber(1)).toString(b):a=g(k);else a=g(f(a));return a}function c(a,b,c,d,f,g){var h,i,k,l,m,p=b.slice(),q=h=b.length,r=a.length,s=a.slice(0,h),t=s.length,u=new JenScript.BigNumber(1),v=u.c=[],w=0,x=j+(u.e=c)+1;for(u.s=d,d=0>x?0:x;t++<h;s.push(0));p.unshift(0);do{for(k=0;f>k;k++){if(h!=(t=s.length))l=h>t?1:-1;else for(m=-1,l=0;++m<h;)if(b[m]!=s[m]){l=b[m]>s[m]?1:-1;break}if(!(0>l))break;for(i=t==h?b:p;t;){if(s[--t]<i[t]){for(m=t;m&&!s[--m];s[m]=f-1);--s[m],s[t]+=f}s[t]-=i[t]}for(;!s[0];s.shift());}v[w++]=l?k:++k,s[0]&&l?s[t]=a[q]||0:s=[a[q]]}while((q++<r||null!=s[0])&&d--);return v[0]||1==w||(--u.e,v.shift()),w>x&&e(u,j,f,g,null!=s[0]),u.e>o?u.c=u.e=null:u.e<n&&(u.c=[u.e=0]),u}function d(a,b,c){var d=b-(a=new JenScript.BigNumber(a)).e,f=a.c;if(!f)return a.toString();for(f.length>++b&&e(a,d,10),d=0==f[0]?d+1:c?b:a.e+d+1;f.length<d;f.push(0));return d=a.e,1==c||2==c&&(--b<d||l>=d)?(a.s<0&&f[0]?"-":"")+(f.length>1?(f.splice(1,0,"."),f.join("")):f[0])+(0>d?"e":"e+")+d:a.toString()}function e(a,b,c,d,e){var f=a.c,g=a.s<0,h=c/2,i=a.e+b+1,j=f[i],l=e||0>i||null!=f[i+1];if(e=4>k?(null!=j||l)&&(0==k||2==k&&!g||3==k&&g):j>h||j==h&&(4==k||l||6==k&&(1&f[i-1]||!b&&d)||7==k&&!g||8==k&&g),1>i||!f[0])return f.length=0,f.push(0),e?(f[0]=1,a.e=-b):a.e=0,a;if(f.length=i--,e)for(--c;++f[i]>c;)f[i]=0,i--||(++a.e,f.unshift(1));for(i=f.length;!f[--i];f.pop());return a}function f(a,b,c){var d=k;return k=c,a=new JenScript.BigNumber(a),a.c&&e(a,b,10),k=d,a}var g,h=1e9,i=1e6,j=20,k=4,l=-7,m=21,n=-h,o=h,p=!0,q=parseInt,r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_",s=0,t=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,u=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")};JenScript.BigNumber=function(c,d){var e,h,i,l,m,q,v=this;if(!(v instanceof JenScript.BigNumber))return new JenScript.BigNumber(c,d);if(c instanceof JenScript.BigNumber){if(s=0,d===e)return v.s=c.s,v.e=c.e,void(v.c=(c=c.c)?c.slice():c);c+=""}if("string"!=typeof c&&(c=(i="number"==typeof c||"[object Number]"==Object.prototype.toString.call(c))&&0===c&&0>1/c?"-0":c+""),q=c,d===e&&t.test(c))v.s="-"==c.charAt(0)?(c=c.slice(1),-1):1;else{if(10==d)return f(c,j,k);if(c=u.call(c).replace(/^\+(?!-)/,""),v.s="-"==c.charAt(0)?(c=c.replace(/^-(?!-)/,""),-1):1,null!=d?d!=(0|d)&&p||(g=!(d>=2&&65>d))?(a(d,2),m=t.test(c)):(l="["+r.slice(0,d=0|d)+"]+",c=c.replace(/\.$/,"").replace(/^\./,"0."),(m=new RegExp("^"+l+"(?:\\."+l+")?$",37>d?"i":"").test(c))?(i&&(c.replace(/^0\.0*|\./,"").length>15&&a(q,0),i=!i),c=b(c,10,d,v.s)):"Infinity"!=c&&"NaN"!=c&&(a(q,1,d),c="NaN")):m=t.test(c),!m)return v.c=v.e=null,"Infinity"!=c&&("NaN"!=c&&a(q,3),v.s=null),void(s=0)}for((e=c.indexOf("."))>-1&&(c=c.replace(".","")),(h=c.search(/e/i))>0?(0>e&&(e=h),e+=+c.slice(h+1),c=c.substring(0,h)):0>e&&(e=c.length),h=0;"0"==c.charAt(h);h++);if(d=c.length,i&&d>15&&c.slice(h).length>15&&a(q,0),s=0,(e-=h+1)>o)v.c=v.e=null;else if(h==d||n>e)v.c=[v.e=0];else{for(;"0"==c.charAt(--d););for(v.e=e,v.c=[],e=0;d>=h;v.c[e++]=+c.charAt(h++));}},JenScript.BigNumber.ROUND_UP=0,JenScript.BigNumber.ROUND_DOWN=1,JenScript.BigNumber.ROUND_CEIL=2,JenScript.BigNumber.ROUND_FLOOR=3,JenScript.BigNumber.ROUND_HALF_UP=4,JenScript.BigNumber.ROUND_HALF_DOWN=5,JenScript.BigNumber.ROUND_HALF_EVEN=6,JenScript.BigNumber.ROUND_HALF_CEIL=7,JenScript.BigNumber.ROUND_HALF_FLOOR=8,JenScript.BigNumber.config=function(){var b,c,d=0,e={},f=arguments,i=f[0],r="config",t=function(a,b,c){return!((g=b>a||a>c)||q(a)!=a&&0!==a)},u=i&&"object"==typeof i?function(){return i.hasOwnProperty(c)?null!=(b=i[c]):void 0}:function(){return f.length>d?null!=(b=f[d++]):void 0};return u(c="DECIMAL_PLACES")&&(t(b,0,h)?j=0|b:a(b,c,r)),e[c]=j,u(c="ROUNDING_MODE")&&(t(b,0,8)?k=0|b:a(b,c,r)),e[c]=k,u(c="EXPONENTIAL_AT")&&(t(b,-h,h)?l=-(m=~~(0>b?-b:+b)):!g&&b&&t(b[0],-h,0)&&t(b[1],0,h)?(l=~~b[0],m=~~b[1]):a(b,c,r,1)),e[c]=[l,m],u(c="RANGE")&&(t(b,-h,h)&&~~b?n=-(o=~~(0>b?-b:+b)):!g&&b&&t(b[0],-h,-1)&&t(b[1],1,h)?(n=~~b[0],o=~~b[1]):a(b,c,r,1,1)),e[c]=[n,o],u(c="ERRORS")&&(b===!!b||1===b||0===b?(g=s=0,q=(p=!!b)?parseInt:parseFloat):a(b,c,r,0,0,1)),e[c]=p,e},JenScript.BigNumber.prototype.abs=function(){var a=new JenScript.BigNumber(this);return a.s<0&&(a.s=1),a},JenScript.BigNumber.prototype.ceil=function(){return f(this,0,2)},JenScript.BigNumber.prototype.compareTo=function(a,b){var c,d=this,e=d.c,f=(s=-s,a=new JenScript.BigNumber(a,b)).c,g=d.s,h=a.s,i=d.e,j=a.e;if(!g||!h)return null;if(c=e&&!e[0],b=f&&!f[0],c||b)return c?b?0:-h:g;if(g!=h)return g;if(c=0>g,b=i==j,!e||!f)return b?0:!e^c?1:-1;if(!b)return i>j^c?1:-1;for(g=-1,h=(i=e.length)<(j=f.length)?i:j;++g<h;)if(e[g]!=f[g])return e[g]>f[g]^c?1:-1;return i==j?0:i>j^c?1:-1},JenScript.BigNumber.prototype.divide=function(a,b){var d=this.c,e=this.e,f=this.s,g=(s=2,a=new JenScript.BigNumber(a,b)).c,h=a.e,i=a.s,j=f==i?1:-1;return(e||d&&d[0])&&(h||g&&g[0])?c(d,g,e-h,j,10):new JenScript.BigNumber(f&&i&&(d?!g||d[0]!=g[0]:g)?d&&0==d[0]||!g?0*j:j/0:0/0)},JenScript.BigNumber.prototype.equals=function(a,b){return s=3,0===this.compareTo(a,b)},JenScript.BigNumber.prototype.floor=function(){return f(this,0,3)},JenScript.BigNumber.prototype.greaterThan=function(a,b){return s=4,this.compareTo(a,b)>0},JenScript.BigNumber.prototype.greaterThanOrEqualTo=function(a,b){return s=5,1==(b=this.compareTo(a,b))||0===b},JenScript.BigNumber.prototype.isFinite=function(){return!!this.c},JenScript.BigNumber.prototype.isNaN=function(){return!this.s},JenScript.BigNumber.prototype.isNegative=function(){return this.s<0},JenScript.BigNumber.prototype.isZero=function(){return!!this.c&&0==this.c[0]},JenScript.BigNumber.prototype.lessThan=function(a,b){return s=6,this.compareTo(a,b)<0},JenScript.BigNumber.prototype.lessThanOrEqualTo=function(a,b){return s=7,-1==(b=this.compareTo(a,b))||0===b},JenScript.BigNumber.prototype.subtract=function(a,b){var c,d,e,f,g=this,h=g.s;if(b=(s=8,a=new JenScript.BigNumber(a,b)).s,!h||!b)return new JenScript.BigNumber(0/0);if(h!=b)return a.s=-b,g.add(a);var i=g.c,j=g.e,l=a.c,m=a.e;if(!j||!m){if(!i||!l)return i?(a.s=-b,a):new JenScript.BigNumber(l?g:0/0);if(!i[0]||!l[0])return l[0]?(a.s=-b,a):new JenScript.BigNumber(i[0]?g:3==k?-0:0)}if(i=i.slice(),h=j-m){for(c=(f=0>h)?(h=-h,i):(m=j,l),c.reverse(),b=h;b--;c.push(0));c.reverse()}else for(e=((f=i.length<l.length)?i:l).length,h=b=0;e>b;b++)if(i[b]!=l[b]){f=i[b]<l[b];break}if(f&&(c=i,i=l,l=c,a.s=-a.s),(b=-((e=i.length)-l.length))>0)for(;b--;i[e++]=0);for(b=l.length;b>h;){if(i[--b]<l[b]){for(d=b;d&&!i[--d];i[d]=9);--i[d],i[b]+=10}i[b]-=l[b]}for(;0==i[--e];i.pop());for(;0==i[0];i.shift(),--m);return(n>m||!i[0])&&(i[0]||(a.s=3==k?-1:1),i=[m=0]),a.c=i,a.e=m,a},JenScript.BigNumber.prototype.modulo=function(a,b){var c=this,d=c.c,e=(s=9,a=new JenScript.BigNumber(a,b)).c,f=c.s,g=a.s;return b=!f||!g||e&&!e[0],b||d&&!d[0]?new JenScript.BigNumber(b?0/0:c):(c.s=a.s=1,b=1==a.compareTo(c),c.s=f,a.s=g,b?new JenScript.BigNumber(c):(f=j,g=k,j=0,k=1,c=c.divide(a),j=f,k=g,this.subtract(c.multiply(a))))},JenScript.BigNumber.prototype.negated=function(){var a=new JenScript.BigNumber(this);return a.s=-a.s||null,a},JenScript.BigNumber.prototype.add=function(a,b){var c,d=this,e=d.s;if(b=(s=10,a=new JenScript.BigNumber(a,b)).s,!e||!b)return new JenScript.BigNumber(0/0);if(e!=b)return a.s=-b,d.subtract(a);var f=d.e,g=d.c,h=a.e,i=a.c;if(!f||!h){if(!g||!i)return new JenScript.BigNumber(e/0);if(!g[0]||!i[0])return i[0]?a:new JenScript.BigNumber(g[0]?d:0*e)}if(g=g.slice(),e=f-h){for(c=e>0?(h=f,i):(e=-e,g),c.reverse();e--;c.push(0));c.reverse()}for(g.length-i.length<0&&(c=i,i=g,g=c),e=i.length,b=0;e;b=(g[--e]=g[e]+i[e]+b)/10^0,g[e]%=10);for(b&&(g.unshift(b),++h>o&&(g=h=null)),e=g.length;0==g[--e];g.pop());return a.c=g,a.e=h,a},JenScript.BigNumber.prototype.toPower=function(b){var c=0*b==0?0|b:b,d=new JenScript.BigNumber(this),e=new JenScript.BigNumber(1);if(((g=-i>b||b>i)&&(c=1*b/0)||q(b)!=b&&0!==b&&!(c=0/0))&&!a(b,"exponent","pow")||!c)return new JenScript.BigNumber(Math.pow(d.toString(),c));for(c=0>c?-c:c;1&c&&(e=e.multiply(d)),c>>=1,c;)d=d.multiply(d);return 0>b?new JenScript.BigNumber(1).divide(e):e},JenScript.BigNumber.prototype.round=function(b,c){return b=null==b||((g=0>b||b>h)||q(b)!=b)&&!a(b,"decimal places","round")?0:0|b,c=null==c||((g=0>c||c>8)||q(c)!=c&&0!==c)&&!a(c,"mode","round")?k:0|c,f(this,b,c)},JenScript.BigNumber.prototype.squareRoot=function(){var a,b,c,d,f=this,g=f.c,h=f.s,i=f.e,l=j,m=k,n=new JenScript.BigNumber("0.5");if(1!==h||!g||!g[0])return new JenScript.BigNumber(!h||0>h&&(!g||g[0])?0/0:g?f:1/0);for(h=Math.sqrt(f.toString()),k=1,0==h||h==1/0?(a=g.join(""),a.length+i&1||(a+="0"),b=new JenScript.BigNumber(Math.sqrt(a)+""),b.c||(b.c=[1]),b.e=((i+1)/2|0)-(0>i||1&i)):b=new JenScript.BigNumber(a=h.toString()),c=b.e,h=c+(j+=4),3>h&&(h=0),i=h;;)if(d=b,b=n.multiply(d.add(f.divide(d))),d.c.slice(0,h).join("")===b.c.slice(0,h).join("")){if(g=b.c,h-=a&&b.e<c,9!=g[h]||9!=g[h-1]||9!=g[h-2]||!(9==g[h-3]||a&&4==g[h-3])){if(!(g[i]||g[i-1]||g[i-2]||g[i-3]&&5!=g[i-3]||(g.length>i-2&&(g.length=i-2),b.multiply(b).equals(f)))){for(;g.length<i-3;)g.push(0);g[i-3]++}return k=m,e(b,j=l,10),b}if(a&&9==g[h-3]&&(d=b.round(l,0),d.multiply(d).equals(f)))return k=m,j=l,d;j+=4,h+=4,a=""}},JenScript.BigNumber.prototype.multiply=function(a,b){var c,d=this,e=d.c,f=(s=11,a=new JenScript.BigNumber(a,b)).c,g=d.e,h=a.e,i=d.s;if(a.s=i==(b=a.s)?1:-1,!((g||e&&e[0])&&(h||f&&f[0])))return new JenScript.BigNumber(!i||!b||e&&!e[0]&&!f||f&&!f[0]&&!e?0/0:e&&f?0*a.s:a.s/0);for(a.e=g+h,(i=e.length)<(b=f.length)&&(c=e,e=f,f=c,h=i,i=b,b=h),h=i+b,c=[];h--;c.push(0));for(g=b-1;g>-1;g--){for(b=0,h=i+g;h>g;b=c[h]+f[g]*e[h-g-1]+b,c[h--]=b%10|0,b=b/10|0);b&&(c[h]=(c[h]+b)%10)}for(b&&++a.e,!c[0]&&c.shift(),h=c.length;!c[--h];c.pop());return a.c=a.e>o?a.e=null:a.e<n?[a.e=0]:c,a},JenScript.BigNumber.prototype.toExponential=function(b){return d(this,(null==b||((g=0>b||b>h)||q(b)!=b&&0!==b)&&!a(b,"decimal places","toE"))&&this.c?this.c.length-1:0|b,1)},JenScript.BigNumber.prototype.toFixed=function(b){var c,e,f,i=this;return null==b||((g=0>b||b>h)||q(b)!=b&&0!==b)&&!a(b,"decimal places","toF")||(f=i.e+(0|b)),c=l,b=m,l=-(m=1/0),f==e?e=i.toString():(e=d(i,f),i.s<0&&i.c&&(i.c[0]?e.indexOf("-")<0&&(e="-"+e):e=e.replace(/^-/,""))),l=c,m=b,e},JenScript.BigNumber.prototype.toFraction=function(b){var c,d,e,f,h,i,l,m=f=new JenScript.BigNumber(1),n=e=new JenScript.BigNumber("0"),q=this,r=q.c,t=o,u=j,v=k,w=new JenScript.BigNumber(1);if(!r)return q.toString();for(l=w.e=r.length-q.e-1,(null==b||(!(s=12,i=new JenScript.BigNumber(b)).s||(g=i.compareTo(m)<0||!i.c)||p&&i.e<i.c.length-1)&&!a(b,"max denominator","toFr")||(b=i).compareTo(w)>0)&&(b=l>0?w:m),o=1/0,
i=new JenScript.BigNumber(r.join("")),j=0,k=1;c=i.divide(w),h=f.add(c.multiply(n)),1!=h.compareTo(b);)f=n,n=h,m=e.add(c.multiply(h=m)),e=h,w=i.subtract(c.multiply(h=w)),i=h;return h=b.subtract(f).divide(n),e=e.add(h.multiply(m)),f=f.add(h.multiply(n)),e.s=m.s=q.s,j=2*l,k=v,d=m.divide(n).subtract(q).abs().compareTo(e.divide(f).subtract(q).abs())<1?[m.toString(),n.toString()]:[e.toString(),f.toString()],o=t,j=u,d},JenScript.BigNumber.prototype.toPrecision=function(b){return null==b||((g=1>b||b>h)||q(b)!=b)&&!a(b,"precision","toP")?this.toString():d(this,0|--b,2)},JenScript.BigNumber.prototype.toString=function(c){var e,f,h,i=this,j=i.e;if(null===j)f=i.s?"Infinity":"NaN";else{if(c===e&&(l>=j||j>=m))return d(i,i.c.length-1,1);if(f=i.c.join(""),0>j){for(;++j;f="0"+f);f="0."+f}else if(h=f.length,j>0)if(++j>h)for(j-=h;j--;f+="0");else h>j&&(f=f.slice(0,j)+"."+f.slice(j));else if(e=f.charAt(0),h>1)f=e+"."+f.slice(1);else if("0"==e)return e;if(null!=c)if((g=!(c>=2&&65>c))||c!=(0|c)&&p)a(c,"base","toString");else if(f=b(f,0|c,10,i.s),"0"==f)return f}return i.s<0?"-"+f:f},JenScript.BigNumber.prototype.toNumber=function(){var a=this;return+a||(a.s?0*a.s:0/0)},JenScript.BigNumber.prototype.valueOf=function(){return this.toString()}}(),function(){JenScript.MetricsType={XMetrics:"XMetrics",YMetrics:"YMetrics"},JenScript.Axis={AxisSouth:"AxisSouth",AxisEast:"AxisEast",AxisWest:"AxisWest",AxisNorth:"AxisNorth"},JenScript.DeviceAxis={AxisX:"AxisX",AxisY:"AxisY"},JenScript.Metrics=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.Metrics,{init:function(a){a=a||{},this.Id="metrics"+JenScript.sequenceId++,this.metricsType=a.metricsType,this.deviceValue,this.userValue,this.metricsMarkerColor,this.metricsLabelColor,this.format,this.metricsLabel,this.lockMarker,this.lockLabel,this.visible=!0,this.rotate=!1,this.markerLocation,this.markerPosition},getTickMarkerSize:function(){return this.minor?this.metricsPlugin.minor.tickMarkerSize:this.median?this.metricsPlugin.median.tickMarkerSize:this.metricsPlugin.major.tickMarkerSize},getTickMarkerColor:function(){return this.minor?this.metricsPlugin.minor.tickMarkerColor:this.median?this.metricsPlugin.median.tickMarkerColor:this.metricsPlugin.major.tickMarkerColor},getTickMarkerStroke:function(){return this.minor?this.metricsPlugin.minor.tickMarkerStroke:this.median?this.metricsPlugin.median.tickMarkerStroke:this.metricsPlugin.major.tickMarkerColor},getTickTextColor:function(){return this.minor?this.metricsPlugin.minor.tickTextColor:this.median?this.metricsPlugin.median.tickTextColor:this.metricsPlugin.major.tickTextColor},getTickTextFontSize:function(){return this.minor?0:this.median?this.metricsPlugin.median.tickTextFontSize:this.metricsPlugin.major.tickTextFontSize},getTickTextOffset:function(){return this.minor?0:this.median?this.metricsPlugin.median.tickTextOffset:this.metricsPlugin.major.tickTextOffset},setDeviceValue:function(a){this.deviceValue=a},setUserValue:function(a){this.userValue=a},getDeviceValue:function(){return this.deviceValue},getUserValue:function(){return this.userValue},setRotate:function(a){this.rotate=a},isRotate:function(){return this.rotate},setMarkerLocation:function(a){this.markerLocation=a},getMarkerLocation:function(){return this.markerLocation},setMarkerPosition:function(a){this.markerPosition=a},getMarkerPosition:function(){return this.markerPosition},setMetricsType:function(a){this.metricsType=a},getMetricsType:function(){return this.metricsType},getMetricsMarkerColor:function(){return this.metricsMarkerColor},setMetricsMarkerColor:function(a){this.metricsMarkerColor=a}}),JenScript.TimePointMetrics=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.TimePointMetrics,JenScript.Metrics),JenScript.Model.addMethods(JenScript.TimePointMetrics,{_init:function(a){a=a||{},JenScript.Metrics.call(this,a),this.time=a.time},getTime:function(){return this.time},setTime:function(a){this.time=a}}),JenScript.TimeDurationMetrics=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.TimeDurationMetrics,JenScript.Metrics),JenScript.Model.addMethods(JenScript.TimeDurationMetrics,{_init:function(a){a=a||{},JenScript.Metrics.call(this,a),this.timeStart,this.timeEnd,this.metricsStart,this.metricsEnd},getMetricsStart:function(){return this.metricsStart},setMetricsStart:function(a){this.metricsStart=a},getMetricsEnd:function(){return this.metricsEnd},setMetricsEnd:function(a){this.metricsEnd=a},getTimeCenter:function(){var a=this.timeEnd.getTime()-this.timeStart.getTime(),b=this.timeStart.getTime()+a/2;return new Date(b)},getTimeStart:function(){return this.timeStart},setTimeStart:function(a){this.timeStart=a},getTimeEnd:function(){return this.timeEnd},setTimeEnd:function(a){this.timeEnd=a}})}(),function(){JenScript.MetricsPainter=function(){this.axisBaseLine},JenScript.Model.addMethods(JenScript.MetricsPainter,{setMetricsPlugin:function(a){this.metricsPlugin=a},getMetricsPlugin:function(){return this.metricsPlugin},doPaintLineMetrics:function(a,b,c,d,e,f){var g=(new JenScript.SVGElement).name("line").attr("id","metricsaxisline"+JenScript.sequenceId++).attr("x1",c.x).attr("y1",c.y).attr("x2",d.x).attr("y2",d.y).attr("style","stroke:"+e+";stroke-width:"+f);a.insertSVG(g.buildHTML())},paintMetricsTickMarker:function(a,b,c){var d=c.getTickMarkerSize(),e=c.getTickMarkerStroke(),f=c.getTickMarkerColor(),g=void 0,h=void 0,i=void 0,j=c.getMarkerLocation();"S"===c.getMarkerPosition()&&(i="southtick",g={x:j.x,y:j.y+2},h={x:j.x,y:j.y+d+2}),"N"==c.getMarkerPosition()&&(i="northtick",g={x:j.x,y:j.y-2},h={x:j.x,y:j.y-d-2}),"W"==c.getMarkerPosition()&&(i="westtick",g={x:j.x-d-2,y:j.y},h={x:j.x-2,y:j.y}),"E"==c.getMarkerPosition()&&(i="easttick",g={x:j.x+2,y:j.y},h={x:j.x+d+2,y:j.y});var k=(new JenScript.SVGElement).name("line").attr("id",i+JenScript.sequenceId++).attr("x1",g.x).attr("y1",g.y).attr("x2",h.x).attr("y2",h.y).attr("stroke",f).attr("stroke-width",e);a.insertSVG(k.buildHTML())},paintSouthMetricsLabel:function(a,b){var c=b.getMarkerLocation(),d=b.getTickMarkerSize(),e=b.getTickTextColor(),f=b.getTickTextFontSize(),g=b.getTickTextOffset(),h=(new JenScript.SVGElement).name("text").attr("id","southmetrics"+JenScript.sequenceId++).attr("x",c.x+"px").attr("y",c.y+d+f+g+2+"px").attr("font-size",f).attr("fill",e).attr("text-anchor","middle").textContent(b.format()),i=h.buildHTML();a.insertSVG(i)},paintNorthMetricsLabel:function(a,b){var c=b.getMarkerLocation(),d=b.getTickMarkerSize(),e=b.getTickTextColor(),f=b.getTickTextFontSize(),g=b.getTickTextOffset(),h=(new JenScript.SVGElement).name("text").attr("id","northmetrics"+JenScript.sequenceId++).attr("x",c.x+"px").attr("y",c.y-d-g-4+"px").attr("font-size",f).attr("fill",e).attr("text-anchor","middle").textContent(b.format());a.insertSVG(h.buildHTML())},paintWestMetricsLabel:function(a,b){if(b.isRotate()){var c=b.getMarkerLocation(),d=b.getTickMarkerSize(),e=b.getTickTextColor(),f=b.getTickTextFontSize(),g=b.getTickTextOffset(),h="metrics"+JenScript.sequenceId++,i=(new JenScript.SVGElement).name("text").attr("id",h).attr("x",c.x+"px").attr("y",c.y+"px").attr("font-size",f).attr("fill",e).attr("text-anchor","middle").attr("transform","translate("+(-d-g-6)+",0) rotate(-90,"+c.x+","+c.y+")").textContent(b.format()),j=i.buildHTML();a.insertSVG(j);var k=this.transformedBoundingBox(j);(k.y<0||k.y+k.height>this.getMetricsPlugin().getProjection().getView().getDevice().getHeight())&&a.deleteGraphicsElement(h)}else{var c=b.getMarkerLocation(),d=b.getTickMarkerSize(),e=b.getTickTextColor(),f=b.getTickTextFontSize(),g=b.getTickTextOffset(),h="metrics"+JenScript.sequenceId++,i=(new JenScript.SVGElement).name("text").attr("id",h).attr("x",c.x+"px").attr("y",c.y+"px").attr("font-size",f).attr("fill",e).attr("text-anchor","end").attr("transform","translate("+(-d-g-6)+","+f/2+")").textContent(b.format()),j=i.buildHTML();a.insertSVG(j);var k=this.transformedBoundingBox(j);(k.y<-1||k.y+k.height>this.getMetricsPlugin().getProjection().getView().getDevice().getHeight()+1)&&a.deleteGraphicsElement(h)}},transformedBoundingBox:function(a){var b=a.getBBox(),c=a.ownerSVGElement,d=a.getTransformToElement(a.parentNode),e=[c.createSVGPoint(),c.createSVGPoint(),c.createSVGPoint(),c.createSVGPoint()];e[0].x=b.x,e[0].y=b.y,e[1].x=b.x+b.width,e[1].y=b.y,e[2].x=b.x+b.width,e[2].y=b.y+b.height,e[3].x=b.x,e[3].y=b.y+b.height;var f=1/0,g=-(1/0),h=1/0,i=-(1/0);return e.forEach(function(a){a=a.matrixTransform(d),f=Math.min(f,a.x),g=Math.max(g,a.x),h=Math.min(h,a.y),i=Math.max(i,a.y)}),{x:f,y:h,width:g-f,height:i-h}},paintEastMetricsLabel:function(a,b){if(b.isRotate()){var c=b.getMarkerLocation(),d=b.getTickMarkerSize(),e=b.getTickTextColor(),f=b.getTickTextFontSize(),g=b.getTickTextOffset(),h="metrics"+JenScript.sequenceId++,i=(new JenScript.SVGElement).name("text").attr("id",h).attr("x",c.x).attr("y",c.y).attr("font-size",f).attr("fill",e).attr("text-anchor","middle").attr("transform","translate("+(d+g-6)+",0) rotate(90,"+c.x+","+c.y+")").textContent(b.format());a.insertSVG(i.buildHTML());var j=this.transformedBoundingBox(k);(j.y<0||j.y+j.height>this.getMetricsPlugin().getProjection().getView().getDevice().getHeight())&&a.deleteGraphicsElement(h)}else{var c=b.getMarkerLocation(),d=b.getTickMarkerSize(),e=b.getTickTextColor(),f=b.getTickTextFontSize(),g=b.getTickTextOffset(),h="metrics"+JenScript.sequenceId++,i=(new JenScript.SVGElement).name("text").attr("id",h).attr("x",c.x+"px").attr("y",c.y+"px").attr("font-size",f).attr("fill",e).attr("text-anchor","start").attr("transform","translate("+(d+g)+","+f/2+")").textContent(b.format()),k=i.buildHTML();a.insertSVG(k);var j=this.transformedBoundingBox(k);(j.y<-1||j.y+j.height>this.getMetricsPlugin().getProjection().getView().getDevice().getHeight()+1)&&a.deleteGraphicsElement(h)}},paintMetricsTickLabel:function(a,b,c){c.minor!==!0&&("S"===c.getMarkerPosition()&&this.paintSouthMetricsLabel(a,c),"N"===c.getMarkerPosition()&&this.paintNorthMetricsLabel(a,c),"W"===c.getMarkerPosition()&&this.paintWestMetricsLabel(a,c),"E"===c.getMarkerPosition()&&this.paintEastMetricsLabel(a,c))},doPaintMetrics:function(a,b,c){for(var d=0;d<c.length;d++){var e=c[d];e.visible&&(this.paintMetricsTickMarker(a,b,e),this.paintMetricsTickLabel(a,b,e))}}})}(),function(){JenScript.MetricsPlugin=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.MetricsPlugin,JenScript.Plugin),JenScript.Model.addMethods(JenScript.MetricsPlugin,{_init:function(a){a=a||{},this.metricsManager=a.manager,this.metricsFormat=a.metricsFormat,this.minor={tickMarkerSize:2,tickMarkerColor:"rgb(230, 193, 153)",tickMarkerStroke:.8,tickTextOffset:0},this.median={tickMarkerSize:4,tickMarkerColor:"rgb(230, 193, 153)",tickMarkerStroke:1.2,tickTextColor:"rgb(230, 193, 153)",tickTextFontSize:10,tickTextOffset:0},this.major={tickMarkerSize:6,tickMarkerColor:"rgb(37, 38, 41)",tickMarkerStroke:1.6,tickTextColor:"rgb(37, 38, 41)",tickTextFontSize:12,tickTextOffset:0},void 0!==a.minor&&(this.minor.tickMarkerSize=void 0!==a.minor.tickMarkerSize?a.minor.tickMarkerSize:2,this.minor.tickMarkerColor=void 0!==a.minor.tickMarkerColor?a.minor.tickMarkerColor:"rgb(230, 193, 153)",this.minor.tickMarkerStroke=void 0!==a.minor.tickMarkerStroke?a.minor.tickMarkerStroke:.8),void 0!==a.median&&(this.median.tickMarkerSize=void 0!==a.median.tickMarkerSize?a.median.tickMarkerSize:4,this.median.tickMarkerColor=void 0!==a.median.tickMarkerColor?a.median.tickMarkerColor:"rgb(230, 193, 153)",this.median.tickMarkerStroke=void 0!==a.median.tickMarkerStroke?a.median.tickMarkerStroke:1,this.median.tickTextColor=void 0!==a.median.tickTextColor?a.median.tickTextColor:"rgb(230, 193, 153)",this.median.tickTextFontSize=void 0!==a.median.tickTextFontSize?a.median.tickTextFontSize:10,this.median.tickTextOffset=void 0!==a.median.tickTextOffset?a.median.tickTextOffset:0),void 0!==a.major&&(this.major.tickMarkerSize=void 0!==a.major.tickMarkerSize?a.major.tickMarkerSize:6,this.major.tickMarkerColor=void 0!==a.major.tickMarkerColor?a.major.tickMarkerColor:"rgb(37, 38, 41)",this.major.tickMarkerStroke=void 0!==a.major.tickMarkerStroke?a.major.tickMarkerStroke:1.8,this.major.tickTextColor=void 0!==a.major.tickTextColor?a.major.tickTextColor:"rgb(37, 38, 41)",this.major.tickTextFontSize=void 0!==a.major.tickTextFontSize?a.major.tickTextFontSize:12,this.major.tickTextOffset=void 0!==a.major.tickTextOffset?a.major.tickTextOffset:0),this.gravity=void 0!==a.gravity?a.gravity:"natural",JenScript.Plugin.call(this,a)},setGravity:function(a){this.gravity=a},getGravity:function(){return this.gravity},setMetricsManager:function(a){this.metricsManager=a},getMetricsManager:function(){return this.metricsManager},setTickMarkerSize:function(a,b){this[a].tickMarkerSize=b},setTickMarkerColor:function(a,b){this[a].tickMarkerColor=b},setTickMarkerStrokeWidth:function(a,b){this[a].tickMarkerStroke=b},setTickTextColor:function(a,b){this[a].tickTextColor=b},setTickTextFontSize:function(a,b){this[a].tickTextFontSize=b},setTickTextOffset:function(a,b){this[a].tickTextOffset=b},onProjectionRegister:function(){var a=this;this.getProjection().addProjectionListener("boundChanged",function(){a.repaintPlugin()},a.toString())}})}(),function(){JenScript.AxisMetricsPlugin=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.AxisMetricsPlugin,JenScript.MetricsPlugin),JenScript.Model.addMethods(JenScript.AxisMetricsPlugin,{__init:function(a){a=a||{},this.metricsPainter=new JenScript.MetricsPainter,this.axis=a.axis,this.axisSpacing=void 0!==a.axisSpacing?a.axisSpacing:0,this.axisBaseLine=void 0!==a.axisBaseLine?a.axisBaseLine:!1,this.axisBaseLineColor=void 0!==a.axisBaseLineColor?a.axisBaseLineColor:"black",this.axisBaseLineStrokeWidth=void 0!==a.axisBaseLineStrokeWidth?a.axisBaseLineStrokeWidth:.8,JenScript.MetricsPlugin.call(this,a)},toString:function(){return this.name+" "+this.Id+" "+this.axis},isAccessible:function(a){return this.axis===JenScript.Axis.AxisSouth&&a!==JenScript.ViewPart.South?!1:this.axis==JenScript.Axis.AxisNorth&&a!==JenScript.ViewPart.North?!1:this.axis===JenScript.Axis.AxisWest&&a!==JenScript.ViewPart.West?!1:this.axis===JenScript.Axis.AxisEast&&a!==JenScript.ViewPart.East?!1:a==JenScript.ViewPart.Device?!1:!0},_paintAxisBaseLine:function(a,b,c){if(this.axisBaseLine){var d={},e={};if(c===JenScript.ViewPart.South){var f=a.getComponent(JenScript.ViewPart.South);d={x:a.getPlaceHolderAxisWest(),y:this.axisSpacing},e={x:f.getWidth()-a.getPlaceHolderAxisEast(),y:this.axisSpacing}}if(c===JenScript.ViewPart.West){var f=a.getComponent(JenScript.ViewPart.West);d={x:f.getWidth()-1-this.axisSpacing,y:0},e={x:f.getWidth()-1-this.axisSpacing,y:f.getHeight()}}if(c===JenScript.ViewPart.East){var f=a.getComponent(JenScript.ViewPart.East);d={x:this.axisSpacing,y:0},e={x:this.axisSpacing,y:f.getHeight()}}if(c===JenScript.ViewPart.North){var f=a.getComponent(JenScript.ViewPart.North);d={x:a.getPlaceHolderAxisWest(),y:f.getHeight()-1-this.axisSpacing},e={x:f.getWidth()-a.getPlaceHolderAxisEast(),y:f.getHeight()-1-this.axisSpacing}}this.metricsPainter.doPaintLineMetrics(b,c,d,e,this.axisBaseLineColor,this.axisBaseLineStrokeWidth)}},_paintAxisMetrics:function(a,b,c){var d=[];if(d=this.metricsManager.getDeviceMetrics(),void 0!==d){d.sort(function(a,b){var c=a.userValue,d=b.userValue;return d>c?-1:c>d?1:0});for(var e=0;e<d.length;e++){var f=d[e];f.metricsPlugin=this,f.setRotate("rotate"===this.getGravity()?!0:!1);var g={};if(c===JenScript.ViewPart.South&&(g={x:a.getPlaceHolderAxisWest()+f.getDeviceValue(),y:this.axisSpacing},f.setMarkerLocation(g),f.setMarkerPosition("S")),c===JenScript.ViewPart.West){var h=a.getComponent(JenScript.ViewPart.West);g={x:h.getWidth()-1-this.axisSpacing,y:f.getDeviceValue()},f.setMarkerLocation(g),f.setMarkerPosition("W")}if(c===JenScript.ViewPart.East&&(g={x:this.axisSpacing,y:f.getDeviceValue()},f.setMarkerLocation(g),f.setMarkerPosition("E")),c===JenScript.ViewPart.North){var h=a.getComponent(JenScript.ViewPart.North);g={x:a.getPlaceHolderAxisWest()+f.getDeviceValue(),y:h.getHeight()-1-this.axisSpacing},f.setMarkerLocation(g),f.setMarkerPosition("N")}}this.metricsPainter.doPaintMetrics(b,c,d)}},_assignType:function(){(this.axis==JenScript.Axis.AxisSouth||this.axis==JenScript.Axis.AxisNorth)&&this.metricsManager.setMetricsType(JenScript.MetricsType.XMetrics),(this.axis==JenScript.Axis.AxisEast||this.axis==JenScript.Axis.AxisWest)&&this.metricsManager.setMetricsType(JenScript.MetricsType.YMetrics)},_paintMetrics:function(a,b,c){this.isAccessible(c)&&(this.metricsManager.setMetricsPlugin(this),this.metricsPainter.setMetricsPlugin(this),this._assignType(),this._paintAxisMetrics(a,b,c),this._paintAxisBaseLine(a,b,c))},paintPlugin:function(a,b){this._paintMetrics(this.getProjection().getView(),a,b)}})}(),function(){JenScript.DeviceMetricsPlugin=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.DeviceMetricsPlugin,JenScript.MetricsPlugin),JenScript.Model.addMethods(JenScript.DeviceMetricsPlugin,{__init:function(a){a=a||{},this.metricsPainter=new JenScript.MetricsPainter,this.baseLine=a.baseLine,this.deviceAxis=a.deviceAxis,this.deviceMarkerPosition,this.paintLine=!0,this.axisBaseLineColor="red",this.axisBaseLineStrokeWidth=.8,JenScript.MetricsPlugin.call(this,a)},setBaseLine:function(a){this.baseLine=a},getBaseLine:function(){return this.baseLine},setDeviceAxis:function(a){this.deviceAxis=a},getDeviceAxis:function(){return this.deviceAxis},setDeviceMarkerPosition:function(a){this.deviceMarkerPosition=a},getDeviceMarkerPosition:function(){return this.deviceMarkerPosition},setPaintLine:function(a){this.paintLine=a},isPaintLine:function(){return this.paintLine},_assignType:function(){this.deviceAxis===JenScript.DeviceAxis.AxisX&&this.metricsManager.setMetricsType(JenScript.MetricsType.XMetrics),this.deviceAxis===JenScript.DeviceAxis.AxisY&&this.metricsManager.setMetricsType(JenScript.MetricsType.YMetrics)},isAccessible:function(a){return a===JenScript.ViewPart.Device?!0:!1},_paintMetricsX:function(a,b,c,d,e,f){for(var g=this.getProjection().userToPixel(new JenScript.Point2D(0,this.baseLine)),h=0;h<d.length;h++){var i=d[h];i.metricsPlugin=this,i.setMarkerPosition("S");var j=void 0;"S"===i.getMarkerPosition()&&(j=new JenScript.Point2D(i.getDeviceValue(),g.y+f)),"N"===i.getMarkerPosition()&&(j=new JenScript.Point2D(i.getDeviceValue(),g.y-f)),i.setMarkerLocation(j)}this.metricsPainter.doPaintMetrics(c,b,d)},_paintMetricsXBaseLine:function(a,b,c,d){var e=this.getProjection().userToPixel(new JenScript.Point2D(0,d));this.metricsPainter.doPaintLineMetrics(c,b,new JenScript.Point2D(0,e.y),new JenScript.Point2D(this.getProjection().getView().getDevice().getWidth(),e.y),this.axisBaseLineColor,this.axisBaseLineStrokeWidth)},_paintMetricsY:function(a,b,c,d,e){for(var f=this.getProjection().userToPixel(new JenScript.Point2D(e,0)),g=0;g<d.length;g++){var h=d[g];h.metricsPlugin=this;var i=void 0;i=new JenScript.Point2D(f.x,h.getDeviceValue()),h.setMarkerLocation(i),h.setMarkerPosition("W")}this.metricsPainter.doPaintMetrics(c,b,d)},_paintMetricsYBaseLine:function(a,b,c,d){var e=this.getProjection().userToPixel(new JenScript.Point2D(d,0));this.metricsPainter.doPaintLineMetrics(c,b,new JenScript.Point2D(e.x,0),new JenScript.Point2D(e.x,this.getProjection().getView().getDevice().getHeight()),this.axisBaseLineColor,this.axisBaseLineStrokeWidth)},_paintMetrics:function(a,b,c){if(this.isAccessible(c)){this.metricsManager.setMetricsPlugin(this),this.metricsPainter.setMetricsPlugin(this),this._assignType();var d=this.metricsManager.getDeviceMetrics();this.deviceAxis===JenScript.DeviceAxis.AxisX&&(this._paintMetricsX(a,c,b,d,this.baseLine,0),this.isPaintLine()&&this._paintMetricsXBaseLine(a,c,b,this.baseLine)),this.deviceAxis==JenScript.DeviceAxis.AxisY&&(this._paintMetricsY(a,c,b,d,this.baseLine,0),this.isPaintLine()&&this._paintMetricsYBaseLine(a,c,b,this.baseLine))}},paintPlugin:function(a,b){this._paintMetrics(this.getProjection().getView(),a,b)}})}(),function(){JenScript.MetricsManager=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.MetricsManager,{init:function(a){a=a||{},this.metricsType,this.metricsPlugin},setMetricsPlugin:function(a){this.metricsPlugin=a},getMetricsPlugin:function(){return this.metricsPlugin},setMetricsType:function(a){this.metricsType=a},getMetricsType:function(){return this.metricsType},getProjection:function(){return this.metricsPlugin.getProjection()},getDeviceMetrics:function(){return[]}})}(),function(){JenScript.MetricsModel=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.MetricsModel,{init:function(a){a=a||{},this.exponent=a.exponent,this.factor=a.factor,this.metricsManager,this.ref,this.maxValue,this.pixelLabelHolder,this.metricsLabelColor,this.metricsMarkerColor,this.solveType="major"},getMetricsManager:function(){return this.metricsManager},setMetricsManager:function(a){this.metricsManager=a},generateMedianMetrics:function(){this.solveType="median",this.solve();var a=this.factor;this.factor=this.factor.multiply(.5);for(var b=this,c=function(){return b.exponent<0?new JenScript.BigNumber("0").equals(this.userValue)?"0":this.userValue.toFixed(Math.abs(b.exponent)+1):this.userValue},d=this.generateMetrics(),e=0;e<d.length;e++)d[e].median=c,d[e].format=c;return this.factor=a,d},generateMetrics:function(){this.solveType="major",this.solve();var a=[],b=!0,c=this.ref,d=this,e=function(){return d.exponent<0?new JenScript.BigNumber("0").equals(this.userValue)?"0":this.userValue.toFixed(Math.abs(d.exponent)):this.userValue},f=this.getMetricsManager().generateMetrics(c.toNumber(),this);for(void 0!==f&&(a[a.length]=f,f.major=!0,f.format=e);b;){c=c.add(this.factor);var g=this.getMetricsManager().generateMetrics(c.toNumber(),this);void 0!==g&&(g.major=!0,g.format=e,a[a.length]=g),c.greaterThanOrEqualTo(this.maxValue)&&(b=!1)}return a},solve:function(){var a=this.metricsManager.getProjection();if(this.getMetricsManager().getMetricsType()===JenScript.MetricsType.XMetrics){this.userSize=new JenScript.BigNumber(a.getUserWidth()+""),JenScript.BigNumber.config({ROUNDING_MODE:JenScript.BigNumber.ROUND_CEIL});var b=new JenScript.BigNumber(a.getMinX()+"").divide(this.factor),c=new JenScript.BigNumber(b.toFixed(0));this.ref=new JenScript.BigNumber(c).multiply(this.factor),this.ref=this.ref.subtract(this.factor),this.ref.equals(0)&&(this.ref=this.ref.subtract(this.factor)),this.pixelSize=new JenScript.BigNumber(a.getPixelWidth()+""),this.maxValue=new JenScript.BigNumber(a.getMaxX()+"")}else if(this.getMetricsManager().getMetricsType()===JenScript.MetricsType.YMetrics){this.userSize=new JenScript.BigNumber(a.getUserHeight()+""),JenScript.BigNumber.config({ROUNDING_MODE:JenScript.BigNumber.ROUND_CEIL});var b=new JenScript.BigNumber(a.getMinY()+"").divide(this.factor),c=new JenScript.BigNumber(b.toFixed(0));this.ref=new JenScript.BigNumber(c).multiply(this.factor),this.ref=this.ref.subtract(this.factor),this.ref.equals(0)&&(this.ref=this.ref.subtract(this.factor)),this.pixelSize=new JenScript.BigNumber(a.getPixelHeight()+""),this.maxValue=new JenScript.BigNumber(a.getMaxY()+"")}JenScript.BigNumber.config({ROUNDING_MODE:JenScript.BigNumber.ROUND_HALF_EVEN});var d=(this.ref.toNumber()+"").length;"major"===this.solveType?this.pixelLabelHolder=.75*d*this.metricsManager.metricsPlugin.median.tickTextFontSize:"median"===this.solveType?this.pixelLabelHolder=.75*d*this.metricsManager.metricsPlugin.median.tickTextFontSize:"minor"===this.solveType&&(this.pixelLabelHolder=8)},isValid:function(){this.solve();var a=this.userSize.divide(this.factor).multiply(new JenScript.BigNumber(this.pixelLabelHolder)).compareTo(this.pixelSize);return-1===a?!0:!1}})}(),function(){JenScript.MetricsManagerModeled=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.MetricsManagerModeled,JenScript.MetricsManager),JenScript.Model.addMethods(JenScript.MetricsManagerModeled,{_init:function(a){a=a||{},JenScript.MetricsManager.call(this,a),this.metricsModels=[]},createSymmetricListModel:function(a){for(var b=[],c=-a;a>=c;c++){var d=this.createExponentModel(c);b[b.length]=d}return b},createExponentModel:function(a){var b=void 0,c="";if(0>a){c+="0.";for(var d=1;d<Math.abs(a);d++)c+="0";c+="1";var e=c;b=new JenScript.MetricsModel({exponent:a,factor:new JenScript.BigNumber(e)})}else if(a>0){c+="1";for(var d=1;d<=Math.abs(a);d++)c+="0";var e=c;b=new JenScript.MetricsModel({exponent:a,factor:new JenScript.BigNumber(e)})}else 0==a&&(b=new JenScript.MetricsModel({exponent:0,factor:new JenScript.BigNumber("1")}));return b},registerMetricsModel:function(a){a.setMetricsManager(this),this.metricsModels[this.metricsModels.length]=a,this.metricsModels.sort(function(a,b){return a.factor.compareTo(b.factor)})},registerMetricsModels:function(a){for(var b=0;b<a.length;b++)this.registerMetricsModel(a[b])},getDeviceMetrics:function(){for(var a=[],b=[],c=[],d=0;d<this.metricsModels.length;d++){var e=this.metricsModels[d].isValid();if(e){a=this.metricsModels[d].generateMetrics();var f=function(b){for(var c=0;c<a.length;c++)if(b.userValue===a[c].userValue)return!0;return!1};if(a.length<4)for(var g=this.metricsModels[d].generateMedianMetrics(),h=0;h<g.length;h++)f(g[h])||(b[b.length]=g[h]);var i=function(a){for(var c=0;c<b.length;c++)if(a.userValue===b[c].userValue)return!0;return!1},j=this.createExponentModel(this.metricsModels[d].exponent-1);if(j.setMetricsManager(this),j.solveType="minor",j.isValid())for(var k=j.generateMetrics(),l=0;l<k.length;l++)f(k[l])||i(k[l])||(k[l].minor=!0,c[c.length]=k[l]);return[].concat(a,b,c)}}},generateMetrics:function(a){var b=new JenScript.Metrics({metricsType:this.getMetricsType()}),c=this.getProjection(),d=0,e=0;return this.getMetricsType()===JenScript.MetricsType.XMetrics?(d=c.userToPixelX(a),e=c.getPixelWidth()):this.getMetricsType()===JenScript.MetricsType.YMetrics&&(d=c.userToPixelY(a),e=c.getPixelHeight()),0>d||d>e?void 0:(b.setDeviceValue(d),b.setUserValue(a),b)}})}(),function(){JenScript.TimeModel=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.TimeModel,{init:function(a){a=a||{},this.millis=a.millis,this.metricsManager,this.name=a.name,this.familyName=a.familyName,this.pixelLabelHolder=void 0!==a.pixelLabelHolder?a.pixelLabelHolder:18,this.minimal=void 0!==a.minimal?a.minimal:!1,this.unit,this.format=a.format},setFormat:function(a){this.format=a},getFormat:function(){return this.format},getMillis:function(){return this.millis},getMetricsManager:function(){return this.metricsManager},setMetricsManager:function(a){this.metricsManager=a},generateMetrics:function(){return[]},getMinify:function(){var a={};a.millis=this.millis,a.name=this.name+" minified",a.familyName=this.familyName,a.unit=this.unit,a.pixelLabelHolder=4,a.minimal=!0;var b=new JenScript.TimeModel(a);return b.generateMetrics=this.generateMetrics,b}})}(),function(){JenScript.MinuteModel=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.MinuteModel,JenScript.TimeModel),JenScript.Model.addMethods(JenScript.MinuteModel,{_init:function(a){a=a||{},a.familyName="Minute Model",a.unit="minute",this.minuteMultiplier=a.minuteMultiplier,a.millis=6e4*this.minuteMultiplier,JenScript.TimeModel.call(this,a)},generateMetrics:function(){for(var a=this.getMetricsManager().getTimingProjection(),b=new Date(a.getMinDate()),c=new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),0,0,0),d=this.getMetricsManager().generateMinutesPoint(c,a.durationMinutes()+b.getMinutes(),this.minuteMultiplier,this),e=0;e<d.length;e++)if(this.format){var f=this;d[e].format=this.minimal?function(){return""}:function(){return f.format(this.getTime())}}else d[e].format=this.minimal?function(){return""}:function(){return this.getTime().getMinutes()};return d}}),JenScript.Minute1Model=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.Minute1Model,JenScript.MinuteModel),JenScript.Model.addMethods(JenScript.Minute1Model,{__init:function(a){a=a||{},a.minuteMultiplier=1,a.name="1 minute model",JenScript.MinuteModel.call(this,a)}}),JenScript.Minute10Model=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.Minute10Model,JenScript.MinuteModel),JenScript.Model.addMethods(JenScript.Minute10Model,{__init:function(a){a=a||{},a.minuteMultiplier=10,a.name="10 minute model",JenScript.MinuteModel.call(this,a)}}),JenScript.Minute15Model=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.Minute15Model,JenScript.MinuteModel),JenScript.Model.addMethods(JenScript.Minute15Model,{__init:function(a){a=a||{},a.minuteMultiplier=15,a.name="15 minute model",JenScript.MinuteModel.call(this,a)}}),JenScript.Minute20Model=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.Minute20Model,JenScript.MinuteModel),JenScript.Model.addMethods(JenScript.Minute20Model,{__init:function(a){a=a||{},a.minuteMultiplier=20,a.name="20 minute model",JenScript.MinuteModel.call(this,a)}}),JenScript.HourModel=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.HourModel,JenScript.TimeModel),JenScript.Model.addMethods(JenScript.HourModel,{_init:function(a){a=a||{},a.millis=36e5,a.name="one hour",a.familyName="hour model",a.unit="hour",JenScript.TimeModel.call(this,a)},generateMetrics:function(){for(var a=this.getMetricsManager().getTimingProjection(),b=new Date(a.getMinDate()),c=new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),0,0,0),d=this.getMetricsManager().generateHoursPoint(c,a.durationHours(),1,this),e=0;e<d.length;e++)if(this.format){var f=this;d[e].format=this.minimal?function(){return""}:function(){return f.format(this.getTime())}}else d[e].format=this.minimal?function(){return""}:function(){return this.getTime().getHours()};return d}}),JenScript.DayModel=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.DayModel,JenScript.TimeModel),JenScript.Model.addMethods(JenScript.DayModel,{_init:function(a){a=a||{},a.millis=864e5,a.name="one day",a.familyName="day model",a.unit="day",a.pixelLabelHolder=void 0!==a.pixelLabelHolder?a.pixelLabelHolder:30,JenScript.TimeModel.call(this,a)},generateMetrics:function(){for(var a=this.getMetricsManager().getTimingProjection(),b=new Date(a.getMinDate()),c=new Date(b.getFullYear(),b.getMonth(),b.getDate(),12,0,0),d=this.getMetricsManager().generateDaysPoint(c,a.durationDays(),1,this),e=0;e<d.length;e++)if(this.format){var f=this;d[e].format=this.minimal?function(){return""}:function(){return f.format(this.getTime())}}else d[e].format=this.minimal?function(){return""}:function(){var a=["Jan.","Feb.","Mar.","Apr.","May","Jun.","Jul.","Aug.","Sep.","Oct.","Nov.","Dec."];return a[this.getTime().getMonth()]+","+this.getTime().getDate()};return d}}),JenScript.MonthModel=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.MonthModel,JenScript.TimeModel),JenScript.Model.addMethods(JenScript.MonthModel,{_init:function(a){a=a||{},a.millis=24192e5,a.name="one month",a.familyName="month model",a.unit="month",a.pixelLabelHolder=void 0!==a.pixelLabelHolder?a.pixelLabelHolder:40,JenScript.TimeModel.call(this,a)},generateMetrics:function(){for(var a=this.getMetricsManager().getTimingProjection(),b=new Date(a.getMinDate()),c=new Date(b.getFullYear(),b.getMonth(),1,0,0,0),d=this.getMetricsManager().generateMonthsPoint(c,a.durationMonth(),1,this),e=0;e<d.length;e++)if(this.format){var f=this;d[e].format=this.minimal?function(){return""}:function(){return f.format(this.getTime())}}else d[e].format=this.minimal?function(){return""}:function(){var a=["Jan.","Feb.","Mar.","Apr.","May","Jun.","Jul.","Aug.","Sep.","Oct.","Nov.","Dec."];return a[this.getTime().getMonth()]+" "+this.getTime().getFullYear()};return d}}),JenScript.YearModelOLD=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.YearModelOLD,JenScript.TimeModel),JenScript.Model.addMethods(JenScript.YearModelOLD,{_init:function(a){a=a||{},a.millis=321408e5,a.name="one year",a.familyName="year model",a.unit="year",a.pixelLabelHolder=void 0!==a.pixelLabelHolder?a.pixelLabelHolder:30,
JenScript.TimeModel.call(this,a)},generateMetrics:function(){for(var a=this.getMetricsManager().getTimingProjection(),b=new Date(a.getMinDate()),c=new Date(b.getFullYear(),0,1,0,0,0),d=this.getMetricsManager().generateMonthsPoint(c,a.durationMonth(),12,this),e=0;e<d.length;e++)if(this.format){var f=this;d[e].format=this.minimal?function(){return""}:function(){return f.format(this.getTime())}}else d[e].format=this.minimal?function(){return""}:function(){return this.getTime().getFullYear()};return d}}),JenScript.YearModel=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.YearModel,JenScript.TimeModel),JenScript.Model.addMethods(JenScript.YearModel,{_init:function(a){a=a||{},this.yearMultiplier=void 0!==a.yearMultiplier?a.yearMultiplier:1,a.millis=31536e6*this.yearMultiplier,a.name="one year",a.familyName="year model",a.unit="year",a.pixelLabelHolder=void 0!==a.pixelLabelHolder?a.pixelLabelHolder:30,JenScript.TimeModel.call(this,a)},generateMetrics:function(){for(var a=this.getMetricsManager().getTimingProjection(),b=new Date(a.getMinDate()),c=new Date(b.getFullYear(),0,1,0,0,0),d=this.getMetricsManager().generateYearsPoint(c,a.durationYear(),this.yearMultiplier,this),e=0;e<d.length;e++)if(this.format){var f=this;d[e].format=this.minimal?function(){return""}:function(){return f.format(this.getTime())}}else d[e].format=this.minimal?function(){return""}:function(){return this.getTime().getFullYear()};return d}})}(),function(){JenScript.TimeMetricsManager=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.TimeMetricsManager,JenScript.MetricsManager),JenScript.Model.addMethods(JenScript.TimeMetricsManager,{_init:function(a){if(a=a||{},JenScript.MetricsManager.call(this,a),this.timingModels=[],void 0!==a.models)for(var b=0;b<a.models.length;b++){var c=a.models[b];this.registerModel(c)}},registerModel:function(a){a.setMetricsManager(this),this.timingModels[this.timingModels.length]=a},getTimingSequence:function(){var a=[],b=this.getTimingProjection();this.timingModels.sort(function(a,b){return a.getMillis()>b.getMillis()?1:a.getMillis()>b.getMillis()?-1:0});for(var c=0;c<this.timingModels.length;c++){var d=this.timingModels[c],e=b.durationMillis(),f=d.getMillis();if(e/f*d.pixelLabelHolder<b.getTimeDurationPixel())a[a.length]=d;else if(e/f*4<b.getTimeDurationPixel()){var g=d.getMinify();a[a.length]=g}if(a.length>=3)return a}return a},getDeviceMetrics:function(){var a=this.getTimingSequence(),b=[],c=a.length,d=function(a){for(var c=[],d=0;d<b.length;d++)b[d].userValue===a.userValue||(c[c.length]=b[d]);b=c},e=function(a){for(var b=0;b<a.length;b++){var c=a[b];c.minor=!0,c.median=!1,c.major=!1}},f=function(a){for(var b=0;b<a.length;b++){var c=a[b];c.minor=!1,c.median=!0,c.major=!1}},g=function(a){for(var b=0;b<a.length;b++){var c=a[b];c.minor=!1,c.median=!1,c.major=!0}};if(1===c){a[0].setMetricsManager(this);var h=a[0].generateMetrics();a[0].minimal?e(h):g(h),b=b.concat(h)}else if(2===c){a[0].setMetricsManager(this),a[1].setMetricsManager(this);var h=a[0].generateMetrics(),i=a[1].generateMetrics();a[0].minimal?(e(h),g(i)):(f(h),g(i)),b=b.concat(h);for(var j=0;j<i.length;j++){var k=i[j];d(k)}b=b.concat(i)}else if(3===c){a[0].setMetricsManager(this),a[1].setMetricsManager(this),a[2].setMetricsManager(this);var h=a[0].generateMetrics(),i=a[1].generateMetrics(),l=a[2].generateMetrics();e(h),b=b.concat(h),f(i),b=b.concat(i),g(l);for(var m=0;m<l.length;m++){var k=l[m];d(k)}b=b.concat(l)}return b},getTimingProjection:function(){var a=this.getProjection();if(a instanceof JenScript.LinearProjection){if(this.getMetricsType()===JenScript.MetricsType.XMetrics){var b=new JenScript.TimeXProjection({minXDate:new Date(a.getMinX()),maxXDate:new Date(a.getMaxX()),minY:a.getMinY(),maxY:a.getMaxY()});return b.setView(a.getView()),b}if(this.getMetricsType()==JenScript.MetricsType.YMetrics){var c=new JenScript.TimeYProjection({minX:a.getMinX(),maxX:a.getMaxX(),minYDate:new Date(a.getMinY()),maxYDate:new Date(a.getMaxY())});return c.setView(a.getView()),c}}else if(a instanceof JenScript.TimeXProjection||a instanceof JenScript.TimeYProjection)return a;return void 0},generateMetricsPoint:function(a){var b=new JenScript.TimePointMetrics({metricsType:this.getMetricsType()});b.setTime(a);var c=a.getTime(),d=this.getTimingProjection(),e=d.timeToPixel(a),f=d.getTimeDurationPixel();return 0>e||e>f?void 0:(b.setDeviceValue(e),b.setUserValue(c),b)},generateMetricsDuration:function(a,b,c){var d=this.generateMetricsPoint(a,c),e=this.generateMetricsPoint(b,c),f=a.getTime()+(b.getTime()-a.getTime())/2,g=new Date(f),h=new JenScript.TimeDurationMetrics(this.getMetricsType()),i=g.getTime(),j=getTimingProjection(),k=j.timeToPixel(g),l=j.getTimeDurationPixel();return 0>k||k>l?null:(h.setDeviceValue(k),h.setUserValue(i),h.setMetricsStart(d),h.setMetricsEnd(e),h.setTimeStart(a.getTime()),h.setTimeEnd(b.getTime()),h)},generateSecondsPoint:function(a,b,c,d){for(var e=[],f=0;f<=parseInt(b)+1;f+=c){var g=new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds()+f,0),h=this.generateMetricsPoint(g,d);void 0!=h&&(e[e.length]=h)}return e},generateMinutesPoint:function(a,b,c,d){for(var e=[],f=0;f<=parseInt(b);f+=c){var g=new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes()+f,0,0),h=this.generateMetricsPoint(g,d);void 0!==h&&(e[e.length]=h)}return e},generateHoursPoint:function(a,b,c,d){for(var e=[],f=0;f<=parseInt(b)+1;f+=c){var g=new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours()+f,a.getMinutes(),0,0),h=this.generateMetricsPoint(g,d);void 0!=h&&(e[e.length]=h)}return e},generateDaysPoint:function(a,b,c,d){for(var e=[],f=0;f<=parseInt(b)+1;f+=c){var g=new Date(a.getFullYear(),a.getMonth(),a.getDate()+f,a.getHours(),0,0,0),h=this.generateMetricsPoint(g,d);void 0!=h&&(e[e.length]=h)}return e},generateMonthsPoint:function(a,b,c,d){for(var e=[],f=0;f<=parseInt(b)+12+1;f+=c){var g=new Date(a.getFullYear(),a.getMonth()+f,1,0,0,0),h=this.generateMetricsPoint(g,d);void 0!=h&&(e[e.length]=h)}return e},generateYearsPoint:function(a,b,c,d){for(var e=[],f=0;f<=parseInt(b);f+=c){var g=new Date(a.getFullYear()+f,0,1,0,0,0),h=this.generateMetricsPoint(g,d);void 0!=h&&(e[e.length]=h)}return e}})}(),function(){JenScript.MetricsManagerStatic=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.MetricsManagerStatic,JenScript.MetricsManager),JenScript.Model.addMethods(JenScript.MetricsManagerStatic,{_init:function(a){a=a||{},this.metricsCount=a.metricsCount,JenScript.MetricsManager.call(this,a)},getDeviceMetrics:function(){var a=[],b=this.getProjection(),c=b.getUserWidth(),d=b.getUserHeight();if(this.getMetricsType()===JenScript.MetricsType.XMetrics)for(var e,f=0;f<this.metricsCount;f++){e=b.getMinX()+f*c/(this.metricsCount-1);var g=b.userToPixelX(e),h=new JenScript.Metrics({metricsType:JenScript.MetricsType.XMetrics});h.setDeviceValue(g),h.setUserValue(e),h.format=function(){return this.userValue},a[a.length]=h}else if(this.getMetricsType()===JenScript.MetricsType.YMetrics)for(var i,f=0;f<this.metricsCount;f++){i=b.getMinY()+f*d/(this.metricsCount-1);var j=b.userToPixelY(i),h=new JenScript.Metrics({metricsType:JenScript.MetricsType.YMetrics});h.setDeviceValue(j),h.setUserValue(i),h.format=function(){return this.userValue},a[a.length]=h}return a}})}(),function(){JenScript.MetricsManagerFree=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.MetricsManagerFree,JenScript.MetricsManager),JenScript.Model.addMethods(JenScript.MetricsManagerFree,{_init:function(a){a=a||{},this.inputMetrics=[],JenScript.MetricsManager.call(this,a)},addMetrics:function(a,b){this.inputMetrics.push({value:a,label:b})},getDeviceMetrics:function(){{var a=[],b=this.getProjection();b.getUserWidth(),b.getUserHeight()}if(this.getMetricsType()===JenScript.MetricsType.XMetrics)for(var c=0;c<this.inputMetrics.length;c++){var d=this.inputMetrics[c],e=d.value;if(e>=b.getMinX()&&e<=b.getMaxX()){var f=b.userToPixelX(e),g=new JenScript.Metrics({metricsType:JenScript.MetricsType.XMetrics});g.setDeviceValue(f),g.setUserValue(e),g.label=d.label,g.format=void 0===d.label?function(){return this.userValue}:function(){return this.label},a[a.length]=g}}else if(this.getMetricsType()===JenScript.MetricsType.YMetrics){for(var c=0;c<this.inputMetrics.length;c++){var d=this.inputMetrics[c],h=d.value;if(h>b.getMinY()&&h<b.getMaxY()){var f=b.userToPixelY(h),g=new JenScript.Metrics({metricsType:JenScript.MetricsType.YMetrics});g.setDeviceValue(f),g.setUserValue(h),g.label=d.label,g.format=void 0===d.label?function(){return this.userValue}:function(){return this.label},a[a.length]=g}}return a}}})}(),function(){JenScript.AxisMetricsModeled=function(a){this.___init(a)},JenScript.Model.inheritPrototype(JenScript.AxisMetricsModeled,JenScript.AxisMetricsPlugin),JenScript.Model.addMethods(JenScript.AxisMetricsModeled,{___init:function(a){a=a||{};var b=new JenScript.MetricsManagerModeled(a),c=b.createSymmetricListModel(20);b.registerMetricsModels(c),a.manager=b,a.name="AxisMetricsModeled",JenScript.AxisMetricsPlugin.call(this,a)}})}(),function(){JenScript.AxisMetricsStatic=function(a){this.___init(a)},JenScript.Model.inheritPrototype(JenScript.AxisMetricsStatic,JenScript.AxisMetricsPlugin),JenScript.Model.addMethods(JenScript.AxisMetricsStatic,{___init:function(a){a=a||{};var b=new JenScript.MetricsManagerStatic(a);a.manager=b,JenScript.AxisMetricsPlugin.call(this,a)}})}(),function(){JenScript.AxisMetricsTiming=function(a){this.___init(a)},JenScript.Model.inheritPrototype(JenScript.AxisMetricsTiming,JenScript.AxisMetricsPlugin),JenScript.Model.addMethods(JenScript.AxisMetricsTiming,{___init:function(a){a=a||{};var b=new JenScript.TimeMetricsManager(a);a.manager=b,a.name="AxisMetricsTiming",JenScript.AxisMetricsPlugin.call(this,a)}})}(),function(){JenScript.AxisMetricsFree=function(a){this.___init(a)},JenScript.Model.inheritPrototype(JenScript.AxisMetricsFree,JenScript.AxisMetricsPlugin),JenScript.Model.addMethods(JenScript.AxisMetricsFree,{___init:function(a){a=a||{};var b=new JenScript.MetricsManagerFree(a);a.manager=b,a.name="AxisMetricsFree",JenScript.AxisMetricsPlugin.call(this,a)},addMetrics:function(a,b){this.getMetricsManager().addMetrics(a,b)}})}(),function(){JenScript.DeviceMetricsModeled=function(a){this.___init(a)},JenScript.Model.inheritPrototype(JenScript.DeviceMetricsModeled,JenScript.DeviceMetricsPlugin),JenScript.Model.addMethods(JenScript.DeviceMetricsModeled,{___init:function(a){a=a||{};var b=new JenScript.MetricsManagerModeled(a),c=b.createSymmetricListModel(20);b.registerMetricsModels(c),a.manager=b,a.name="DeviceMetrics",JenScript.DeviceMetricsPlugin.call(this,a)}})}(),function(){JenScript.Grid=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.Grid,{init:function(a){a=a||{},this.deviceValue,this.userValue,this.metricsMarkerColor,this.metricsLabelColor,this.format,this.gridLabel,this.lockMarker,this.lockLabel,this.visible=!0},setDeviceValue:function(a){this.deviceValue=a},setUserValue:function(a){this.userValue=a},getDeviceValue:function(){return this.deviceValue},getUserValue:function(){return this.userValue}})}(),function(){JenScript.AbstractGridPlugin=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.AbstractGridPlugin,JenScript.Plugin),JenScript.Model.addMethods(JenScript.AbstractGridPlugin,{_init:function(a){a=a||{},a.name=void 0!==a.name?a.name:"AbstractGridPlugin",a.priority=-1e4,this.gridOrientation=a.gridOrientation,this.gridColor=a.gridColor,this.gridWidth=void 0!==a.gridWidth?a.gridWidth:1,this.gridOpacity=void 0!==a.gridOpacity?a.gridOpacity:1,JenScript.Plugin.call(this,a)},onProjectionRegister:function(){var a=this;this.getProjection().addProjectionListener("boundChanged",function(){a.repaintPlugin()},a.toString())},getGridManager:function(){throw new Error("Abstract, grid manager should be supplied.")},paintGrids:function(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=d.deviceValue,f=this.gridOrientation,g=void 0!==this.gridColor?this.gridColor:this.getProjection().themeColor,h="Vertical"===f?e:0,i="Vertical"===f?0:e,j="Vertical"===f?e:this.getProjection().getPixelWidth(),k="Vertical"===f?this.getProjection().getPixelHeight():e,l=(new JenScript.SVGLine).Id("grid"+JenScript.sequenceId++).from(h,i).to(j,k).stroke(g).strokeWidth(this.gridWidth).strokeOpacity(this.gridOpacity).fillNone();a.insertSVG(l.toSVG())}},paintPlugin:function(a,b){if(b==JenScript.ViewPart.Device){this.getGridManager().setGridsPlugin(this);var c=this.getGridManager().getGrids();this.paintGrids(a,c)}}})}(),function(){JenScript.GridManager=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.GridManager,{init:function(a){a=a||{}},getOrientation:function(){return this.getGridsPlugin().gridOrientation},setGridsPlugin:function(a){this.gridsPlugin=a},getGridsPlugin:function(){return this.gridsPlugin},getProjection:function(){return this.getGridsPlugin().getProjection()},getGrids:function(){}})}(),function(){JenScript.GridsExponentModel=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.GridsExponentModel,{init:function(a){a=a||{},this.exponent=a.exponent,this.factor=a.factor,this.gridsManager,this.ref,this.maxValue,this.pixelLabelHolder,this.solveType="major"},getGridsManager:function(){return this.gridsManager},setGridsManager:function(a){this.gridsManager=a},generateMedianGrids:function(){this.solveType="median",this.solve();var a=this.factor;this.factor=this.factor.multiply(.5);for(var b=this,c=function(){return b.exponent<0?new JenScript.BigNumber("0").equals(this.userValue)?"0":this.userValue.toFixed(Math.abs(b.exponent)+1):this.userValue},d=this.generateGrids(),e=0;e<d.length;e++)d[e].median=!0,d[e].format=c;return this.factor=a,d},generateGrids:function(){this.solveType="major",this.solve();var a=[],b=!0,c=this.ref,d=this,e=function(){return d.exponent<0?new JenScript.BigNumber("0").equals(this.userValue)?"0":this.userValue.toFixed(Math.abs(d.exponent)):this.userValue},f=this.getGridsManager().generateGrid(c.toNumber(),this);for(void 0!==f&&(a[a.length]=f,f.major=!0,f.format=e);b;){c=c.add(this.factor);var g=this.getGridsManager().generateGrid(c.toNumber(),this);void 0!==g&&(g.major=!0,g.format=e,a[a.length]=g),c.greaterThanOrEqualTo(this.maxValue)&&(b=!1)}return a},solve:function(){var a=this.getGridsManager().getProjection();if("Vertical"===this.getGridsManager().getOrientation()){this.userSize=new JenScript.BigNumber(a.getUserWidth()+""),JenScript.BigNumber.config({ROUNDING_MODE:JenScript.BigNumber.ROUND_CEIL});var b=new JenScript.BigNumber(a.getMinX()+"").divide(this.factor),c=new JenScript.BigNumber(b.toFixed(0));this.ref=new JenScript.BigNumber(c).multiply(this.factor),this.ref=this.ref.subtract(this.factor),this.ref.equals(0)&&(this.ref=this.ref.subtract(this.factor)),this.pixelSize=new JenScript.BigNumber(a.getPixelWidth()+""),this.maxValue=new JenScript.BigNumber(a.getMaxX()+"")}else if("Horizontal"===this.getGridsManager().getOrientation()){this.userSize=new JenScript.BigNumber(a.getUserHeight()+""),JenScript.BigNumber.config({ROUNDING_MODE:JenScript.BigNumber.ROUND_CEIL});var b=new JenScript.BigNumber(a.getMinY()+"").divide(this.factor),c=new JenScript.BigNumber(b.toFixed(0));this.ref=new JenScript.BigNumber(c).multiply(this.factor),this.ref=this.ref.subtract(this.factor),this.ref.equals(0)&&(this.ref=this.ref.subtract(this.factor)),this.pixelSize=new JenScript.BigNumber(a.getPixelHeight()+""),this.maxValue=new JenScript.BigNumber(a.getMaxY()+"")}JenScript.BigNumber.config({ROUNDING_MODE:JenScript.BigNumber.ROUND_HALF_EVEN}),"major"===this.solveType?this.pixelLabelHolder=80:"median"===this.solveType?this.pixelLabelHolder=60:"minor"===this.solveType&&(this.pixelLabelHolder=8)},isValid:function(){this.solve();var a=this.userSize.divide(this.factor).multiply(new JenScript.BigNumber(this.pixelLabelHolder)).compareTo(this.pixelSize);return-1===a?!0:!1}}),JenScript.GridManagerModeled=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.GridManagerModeled,JenScript.GridManager),JenScript.Model.addMethods(JenScript.GridManagerModeled,{_init:function(a){a=a||{},JenScript.GridManager.call(this,a),this.gridsModels=[]},createSymmetricListModel:function(a){for(var b=[],c=-a;a>=c;c++){var d=this.createExponentModel(c);b[b.length]=d}return b},createExponentModel:function(a){var b=void 0,c="";if(0>a){c+="0.";for(var d=1;d<Math.abs(a);d++)c+="0";c+="1";var e=c;b=new JenScript.GridsExponentModel({exponent:a,factor:new JenScript.BigNumber(e)})}else if(a>0){c+="1";for(var d=1;d<=Math.abs(a);d++)c+="0";var e=c;b=new JenScript.GridsExponentModel({exponent:a,factor:new JenScript.BigNumber(e)})}else 0==a&&(b=new JenScript.GridsExponentModel({exponent:0,factor:new JenScript.BigNumber("1")}));return b},registerGridModel:function(a){a.setGridsManager(this),this.gridsModels[this.gridsModels.length]=a,this.gridsModels.sort(function(a,b){return a.factor.compareTo(b.factor)})},registerGridModels:function(a){for(var b=0;b<a.length;b++)this.registerGridModel(a[b])},getGrids:function(){for(var a=[],b=[],c=0;c<this.gridsModels.length;c++){var d=this.gridsModels[c].isValid();if(d){a=this.gridsModels[c].generateGrids();var e=function(b){for(var c=0;c<a.length;c++)if(b.userValue===a[c].userValue)return!0;return!1};if(a.length<4)for(var f=this.gridsModels[c].generateMedianGrids(),g=0;g<f.length;g++)e(f[g])||(b[b.length]=f[g]);return[].concat(a,b)}}},generateGrid:function(a){var b=new JenScript.Grid,c=this.getProjection(),d=0,e=0;return"Vertical"===this.getOrientation()?(d=c.userToPixelX(a),e=c.getPixelWidth()):"Horizontal"===this.getOrientation()&&(d=c.userToPixelY(a),e=c.getPixelHeight()),0>d||d>e?void 0:(b.setDeviceValue(d),b.setUserValue(a),b)}})}(),function(){JenScript.GridModeledPlugin=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.GridModeledPlugin,JenScript.AbstractGridPlugin),JenScript.Model.addMethods(JenScript.GridModeledPlugin,{__init:function(a){a=a||{},a.name="GridModeledPlugin",this.gridManager=new JenScript.GridManagerModeled(a);var b=this.gridManager.createSymmetricListModel(20);this.gridManager.registerGridModels(b),JenScript.AbstractGridPlugin.call(this,a)},getGridManager:function(){return this.gridManager}})}(),function(){JenScript.SymbolFiller={createGlue:function(){try{var a=new JenScript.SymbolComponent({});return a.setName("SymbolComponent.Glue"),a.setFillerType("Glue"),a.setOpaque(!1),a.setFiller(!0),a}catch(b){console.log("error : "+b)}return void 0},createStrut:function(a){try{var b=new JenScript.SymbolComponent({});return b.setName("SymbolComponent.Strut."+b),b.setOpaque(!1),b.setThickness(a),b.setFillerType("Strut"),b.setFiller(!0),b}catch(c){console.log("error : "+c)}return void 0}},JenScript.SymbolComponent=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.SymbolComponent,{init:function(a){a=a||{},this.Id="Symbol"+JenScript.sequenceId++,this.isFiller=!1,this.fillerType,this.layer,this.nature,this.opaque,this.thickness=void 0!==a.thickness?a.thickness:0,this.themeColor=void 0!==a.themeColor?a.themeColor:"gray",this.name=a.name,this.host,this.lockEnter=!1,this.visible=!0,this.opacity=void 0!==a.opacity?a.opacity:1,this.userObject=a.userObject,this.bound2D},getThemeColor:function(){return this.themeColor},setThemeColor:function(a){this.themeColor=a},toString:function(){return"SymbolComponent:"+this.Id},equals:function(a){return void 0===a?!1:void 0===a.Id?!1:a.Id===this.Id},getLayer:function(){return this.layer},setLayer:function(a){this.layer=a},getBound2D:function(){return this.bound2D},setBound2D:function(a){this.bound2D=a},setFiller:function(a){this.isFiller=a},getFillerType:function(){return this.fillerType},setFillerType:function(a){this.fillerType=a},getHost:function(){return this.host},setHost:function(a){this.host=a},getName:function(){return null==name&&(name=null!=getLayer()?getClass().getSimpleName()+"_"+getLayer().getSymbolIndex(this):getClass().getSimpleName()),name},setName:function(a){this.name=a},getThickness:function(){return this.thickness},setThickness:function(a){this.thickness=a},isOpaque:function(){return this.opaque},setOpaque:function(a){this.opaque=a},getLocationX:function(){if(void 0===this.layer)return 0;if("Horizontal"===this.nature)throw new Error("Horizontal symbol has no location x");return this.layer.getComponentXLocation(this)},getCenterX:function(){return null==this.layer?0:this.getLocationX()+this.getThickness()/2},getLocationY:function(){if(void 0===this.layer)return 0;if(nature==SymbolNature.Vertical)throw new Error("Vertical symbol has no location y");return this.layer.getComponentYLocation(this)},getCenterY:function(){return void 0===this.layer?0:this.getLocationY()-this.getThickness()/2},getNature:function(){return this.nature},setNature:function(a){this.nature=a},isLockEnter:function(){return this.lockEnter},setLockEnter:function(a){this.lockEnter=a},isVisible:function(){return this.visible},setVisible:function(a){this.visible=a},getUserObject:function(){return this.userObject},setUserObject:function(a){this.userObject=a}})}(),function(){JenScript.SymbolBar=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.SymbolBar,JenScript.SymbolComponent),JenScript.Model.addMethods(JenScript.SymbolBar,{_init:function(a){a=a||{},this.value=a.value,this.base=a.base,this.setBase(this.base),this.morpheStyle=void 0!==a.morpheStyle?a.morpheStyle:"Rectangle",this.symbol=void 0!==a.symbol?a.symbol:"Unamed Bar Symbol",this.round=void 0!==a.round?a.round:5,this.direction=void 0!==a.direction?a.direction:"ascent",this.ascent=!1,this.descent=!1,"descent"===this.direction?this.setDescentValue(this.value):this.setAscentValue(this.value),this.barStroke=a.barStroke,this.barFill=void 0!==a.barFill?a.barFill:new JenScript.SymbolBarFill0({}),this.barEffect=a.barEffect,this.barLabel,this.axisLabel,this.barShape,this.part,this.inflating=!1,this.deflating=!1,this.inflate,this.deflate,JenScript.SymbolComponent.call(this,a)},getBarLabel:function(){return this.barLabel},setBarLabel:function(a){this.barLabel=a},getAxisLabel:function(){return this.axisLabel},setAxisLabel:function(a){this.axisLabel=a},getPart:function(){return this.part},setPart:function(a){this.part=a},getRound:function(){return this.round},setRound:function(a){this.round=a},getMorpheStyle:function(){return this.morpheStyle},setMorpheStyle:function(a){this.morpheStyle=a},getBarShape:function(){return this.barShape},setBarShape:function(a){this.barShape=a},getSymbol:function(){return this.symbol},setSymbol:function(a){this.symbol=a},getValue:function(){return this.value},setAscentValue:function(a){if(this.ascent=!0,this.descent=!1,0>a)throw new Error("bar value should be greater than 0");this.value=a},isInflating:function(){return this.inflating},setInflating:function(a){this.inflating=a},isDeflating:function(){return this.deflating},setDeflating:function(a){this.deflating=a},setDescentValue:function(a){if(this.ascent=!1,this.descent=!0,0>a)throw new Error("bar value should be greater than 0");this.value=a},getBase:function(){return this.base},setBase:function(a){this.baseSet=!0,this.base=a},isBaseSet:function(){return this.baseSet},isAscent:function(){return this.ascent},isDescent:function(){return this.descent},isValueSet:function(){return this.ascent||this.descent},getBarStroke:function(){return this.barStroke},setBarStroke:function(a){this.barStroke=a},getBarFill:function(){return this.barFill},setBarFill:function(a){this.barFill=a},getBarEffect:function(){return this.barEffect},setBarEffect:function(a){this.barEffect=a}})}(),function(){JenScript.SymbolStack=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.SymbolStack,JenScript.SymbolBar),JenScript.Model.addMethods(JenScript.SymbolStack,{__init:function(a){a=a||{},JenScript.SymbolBar.call(this,a),this.hostSymbol,this.stackValue=a.stackValue,this.normalizedValue},toString:function(){return"Stack [hostSymbol="+this.hostSymbol+", stackValue="+this.stackValue+", normalizedValue="+this.normalizedValue+", lockEnter="+this.lockEnter+"]"},getStackValue:function(){return this.stackValue},setStackValue:function(a){this.stackValue=a},getNormalizedValue:function(){return this.normalizedValue},setNormalizedValue:function(a){this.normalizedValue=a},getHostSymbol:function(){return this.hostSymbol},setHostSymbol:function(a){this.hostSymbol=a}}),JenScript.SymbolBarStacked=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.SymbolBarStacked,JenScript.SymbolBar),JenScript.Model.addMethods(JenScript.SymbolBarStacked,{__init:function(a){a=a||{},JenScript.SymbolBar.call(this,a),this.stacks=[]},getStackBase:function(a){for(var b=this.getBase(),c=0;c<this.stacks.length;c++){var d=this.stacks[c];if(a.equals(d))return b;this.isAscent()?b+=d.getNormalizedValue():this.isDescent()&&(b-=d.getNormalizedValue())}return b},addStack:function(a){if(a.getValue()<0)throw new Error("stack proportion value should be greater than 0");a.setHostSymbol(this),this.stacks[this.stacks.length]=a},normalize:function(){for(var a=Math.abs(this.getValue()),b=0,c=0;c<this.stacks.length;c++)b+=this.stacks[c].getStackValue();for(var c=0;c<this.stacks.length;c++)this.stacks[c].setNormalizedValue(this.stacks[c].getStackValue()*a/b)},getStacks:function(){return this.stacks}})}(),function(){JenScript.SymbolBarGroup=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.SymbolBarGroup,JenScript.SymbolBar),JenScript.Model.addMethods(JenScript.SymbolBarGroup,{__init:function(a){a=a||{},JenScript.SymbolBar.call(this,a),this.symbolComponents=[]},getThickness:function(){for(var a=0,b=0;b<this.symbolComponents.length;b++)a+=this.symbolComponents[b].getThickness();return a},getMaxValue:function(){for(var a=-1,b=!1,c=0;c<this.symbolComponents.length;c++){var d=this.symbolComponents[c];if(!d.isFiller){var e=d.getBarShape().getBounds2D();"Vertical"===this.getNature()?(b||(a=e.getMaxY(),b=!0),a=Math.max(a,e.getMaxY())):"Horizontal"===this.getNature()&&(b||(a=e.getMaxX(),b=!0),a=Math.max(a,e.getMaxX()))}}return a},getMinValue:function(){for(var a=-1,b=!1,c=0;c<this.symbolComponents.length;c++){var d=this.symbolComponents[c];if(!d.isFiller){var e=d.getBarShape().getBounds2D();"Vertical"===this.getNature()?(b||(a=e.getMinY(),b=!0),a=Math.min(a,e.getMinY())):"Horizontal"==this.getNature()&&(b||(a=e.getMinX(),b=!0),a=Math.min(a,e.getMinX()))}}return a},getCenterValue:function(){var a=this.getMaxValue(),b=this.getMinValue();return b+Math.abs(a-b)/2},getBarShape:function(){},addSymbol:function(a){if(a.isFiller&&"Glue"===a.getFillerType())throw new Error("Glue can not be add in group.");this.symbolComponents.add(a)},removeSymbolComponent:function(){},getSymbolComponents:function(){return this.symbolComponents},setSymbolComponents:function(a){this.symbolComponents=a}})}(),function(){JenScript.SymbolPoint=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.SymbolPoint,JenScript.SymbolComponent),JenScript.Model.addMethods(JenScript.SymbolPoint,{_init:function(a){a=a||{},this.value=a.value,this.deviceValue,this.devicePoint,this.pointSymbolPainters=[],this.pointSymbolPainters[0]=new JenScript.SymbolPointSquare,this.sensibleRadius=10,this.sensibleShape,JenScript.SymbolComponent.call(this,a)},getValue:function(){return this.value},setValue:function(a){this.value=a},getSensibleShape:function(){return this.sensibleShape},setSensibleShape:function(a){this.sensibleShape=a},getDeviceValue:function(){return this.deviceValue},setDeviceValue:function(a){this.deviceValue=a},getDevicePoint:function(){return this.devicePoint},setDevicePoint:function(a){this.devicePoint=a},getPointSymbolPainters:function(){return this.pointSymbolPainters},setPointSymbolPainters:function(a){this.pointSymbolPainters=a},addPointSymbolPainter:function(a){this.pointSymbolPainters[this.pointSymbolPainters]=a},getSensibleRadius:function(){return this.sensibleRadius},setSensibleRadius:function(a){this.sensibleRadius=a}})}(),function(){JenScript.SymbolPolylinePoint=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.SymbolPolylinePoint,JenScript.SymbolPoint),JenScript.Model.addMethods(JenScript.SymbolPolylinePoint,{__init:function(a){a=a||{},this.symbolComponents=[],this.polylinePainter=new JenScript.SymbolPolylinePainter,JenScript.SymbolPoint.call(this,a)},getNature:function(){return this.getHost().getNature()},getThickness:function(){return 0},getPolylinePainter:function(){return this.polylinePainter},setPolylinePainter:function(a){this.polylinePainter=a},addSymbol:function(a){a instanceof JenScript.SymbolPoint&&(this.symbolComponents[this.symbolComponents.length]=a)},removeSymbolComponent:function(a){for(var b=[],c=0;c<this.symbolComponents.length;c++)this.symbolComponents[c].equals(a)||(b[b.length]=this.symbolComponents[c]);this.symbolComponents=b},getSymbolComponents:function(){return this.symbolComponents},setSymbolComponents:function(a){this.symbolComponents=a}})}(),function(){JenScript.SymbolPainter=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.SymbolPainter,{init:function(a){a=a||{}},paintSymbol:function(){}})}(),function(){JenScript.SymbolBarFill=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.SymbolBarFill,JenScript.SymbolPainter),JenScript.Model.addMethods(JenScript.SymbolBarFill,{_init:function(a){a=a||{},this.Id="symbolfill"+JenScript.sequenceId++,JenScript.SymbolPainter.call(this,a)},paintBarFill:function(){},paintSymbol:function(a,b){b.isVisible()&&this.paintBarFill(a,b)}}),JenScript.SymbolBarFill0=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.SymbolBarFill0,JenScript.SymbolBarFill),JenScript.Model.addMethods(JenScript.SymbolBarFill0,{__init:function(a){a=a||{},JenScript.SymbolBarFill.call(this,a)},paintBarFill:function(a,b){a.deleteGraphicsElement(this.Id+b.Id);var c=b.getBarShape().Id(this.Id+b.Id).fill(b.themeColor).fillOpacity(b.opacity).toSVG();a.insertSVG(c);var d=c.getBBox();b.setBound2D(new JenScript.Bound2D(d.x,d.y,d.width,d.height))}}),JenScript.SymbolBarFill1=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.SymbolBarFill1,JenScript.SymbolBarFill),JenScript.Model.addMethods(JenScript.SymbolBarFill1,{__init:function(a){a=a||{},JenScript.SymbolBarFill.call(this,a)},paintBarFill:function(a,b){"Vertical"===b.getNature()&&this.v(a,b),"Horizontal"===b.getNature()&&this.h(a,b)},v:function(a,b){a.deleteGraphicsElement(this.Id+b.Id);var c=b.getBarShape().Id(this.Id+b.Id).toSVG();a.insertSVG(c);var d=c.getBBox(),e=new JenScript.Point2D(d.x,d.y+d.height/2),f=new JenScript.Point2D(d.x+d.width,d.y+d.height/2),g=b.getThemeColor(),h=JenScript.Color.brighten(g,20),i=["0%","50%","100%"],j=[h,g,h],k=(new JenScript.SVGLinearGradient).Id(this.Id+b.Id+"gradient").from(e.x,e.y).to(f.x,f.y).shade(i,j);a.deleteGraphicsElement(this.Id+b.Id+"gradient"),a.definesSVG(k.toSVG()),c.setAttribute("fill","url(#"+this.Id+b.Id+"gradient)");var d=c.getBBox();b.setBound2D(new JenScript.Bound2D(d.x,d.y,d.width,d.height))},h:function(a,b){a.deleteGraphicsElement(b.Id);var c=b.getBarShape().Id(b.Id).toSVG();a.insertSVG(c);var d=c.getBBox(),e=new JenScript.Point2D(d.x+d.width/2,d.y),f=new JenScript.Point2D(d.x+d.width/2,d.y+d.height),g=b.getThemeColor(),h=JenScript.Color.brighten(g,20),i=["0%","50%","100%"],j=[h,g,h],k=(new JenScript.SVGLinearGradient).Id(this.Id+"gradient").from(e.x,e.y).to(f.x,f.y).shade(i,j);a.deleteGraphicsElement(this.Id+"gradient"),a.definesSVG(k.toSVG()),c.setAttribute("fill","url(#"+this.Id+"gradient)");var d=c.getBBox();b.setBound2D(new JenScript.Bound2D(d.x,d.y,d.width,d.height))}})}(),function(){JenScript.SymbolBarEffect=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.SymbolBarEffect,JenScript.SymbolPainter),JenScript.Model.addMethods(JenScript.SymbolBarEffect,{_init:function(a){a=a||{},this.Id="symboleffect"+JenScript.sequenceId++,JenScript.SymbolPainter.call(this,a)},paintBarEffect:function(){},paintSymbol:function(a,b){b.isVisible()&&this.paintBarEffect(a,b);

}}),JenScript.SymbolBarEffect0=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.SymbolBarEffect0,JenScript.SymbolBarEffect),JenScript.Model.addMethods(JenScript.SymbolBarEffect0,{__init:function(a){a=a||{},this.Id="symboleffect0_"+JenScript.sequenceId++,JenScript.SymbolBarEffect.call(this,a)},paintBarEffect:function(a,b){"Vertical"===b.getNature()&&this.v(a,b),"Horizontal"===b.getNature()&&this.h(a,b)},v:function(a,b){var c=b.getHost().getProjection(),d=null;b.isAscent()&&(d=new JenScript.Point2D(0,b.getBase()+b.getValue())),b.isDescent()&&(d=new JenScript.Point2D(0,b.getBase()-b.getValue()));var e=c.userToPixel(d),f=new JenScript.Point2D(0,b.getBase()),g=c.userToPixel(f),h=b.getLocationX(),i=e.getY();b.isDescent()&&(i=g.getY());var j=b.getThickness(),k=Math.abs(g.getY()-e.getY()),l=void 0,m=2;if(h+=m,i+=m,j-=2*m,k-=2*m,"Round"===b.getMorpheStyle()){var n=b.getRound(),o=(new JenScript.SVGPath).Id(this.Id);b.isAscent()?(o.moveTo(h,i+n),o.lineTo(h,i+k),o.lineTo(h+j/2,i+k),o.lineTo(h+j/2,i),o.lineTo(h+n,i),o.quadTo(h,i,h,i+n),o.close()):b.isDescent()&&(o.moveTo(h,i),o.lineTo(h,i+k-n),o.quadTo(h,i+k,h+n,i+k),o.lineTo(h+j/2,i+k),o.lineTo(h+j/2,i),o.close()),l=o}else if("Rectangle"===b.getMorpheStyle()){var p=(new JenScript.SVGRect).Id(this.Id).origin(h,i).size(j/2,k);l=p}var q=new JenScript.Bound2D(h,i,j,k),r=null,s=null;b.isAscent()?(r=new JenScript.Point2D(q.getX(),q.getY()),s=new JenScript.Point2D(q.getX()+q.getWidth(),q.getY()+q.getHeight())):b.isDescent()&&(r=new JenScript.Point2D(q.getX(),q.getY()),s=new JenScript.Point2D(q.getX(),q.getY()+q.getHeight()));var t=["0%","100%"],u=["rgba(255, 255, 255, 0.3)","rgba(255, 255, 255, 0.5)"],v=(new JenScript.SVGLinearGradient).Id(this.Id+"gradient").from(r.x,r.y).to(s.x,s.y).shade(t,u);a.deleteGraphicsElement(this.gradientId),a.definesSVG(v.toSVG());var w=l.fillURL(this.Id+"gradient").toSVG();a.insertSVG(w)},h:function(){}}),JenScript.SymbolBarEffect1=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.SymbolBarEffect1,JenScript.SymbolBarEffect),JenScript.Model.addMethods(JenScript.SymbolBarEffect1,{__init:function(a){a=a||{},this.Id="symboleffect1_"+JenScript.sequenceId++,JenScript.SymbolBarEffect.call(this,a)},paintBarEffect:function(a,b){"Vertical"===b.getNature()&&this.v(a,b),"Horizontal"===b.getNature()&&this.h(a,b)},v:function(a,b){var c=b.getHost().getProjection(),d=null;b.isAscent()&&(d=new JenScript.Point2D(0,b.getBase()+b.getValue())),b.isDescent()&&(d=new JenScript.Point2D(0,b.getBase()-b.getValue()));var e=c.userToPixel(d),f=new JenScript.Point2D(0,b.getBase()),g=c.userToPixel(f),h=b.getLocationX(),i=e.getY();b.isDescent()&&(i=g.getY());var j=b.getThickness(),k=Math.abs(g.getY()-e.getY()),l=null,m=2;if(h+=m,i+=m,j-=2*m,k-=2*m,"Round"===b.getMorpheStyle()){var n=b.getRound(),o=(new JenScript.SVGPath).Id(this.Id);b.isAscent()?(o.moveTo(h,i+n),o.lineTo(h,i+k),o.lineTo(h+j,i+k),o.lineTo(h+j,i+n),o.quadTo(h+j,i,h+j-n,i),o.lineTo(h+n,i),o.quadTo(h,i,h,i+n),o.close(),l=o):b.isDescent()&&(o.moveTo(h,i),o.lineTo(h,i+k-n),o.quadTo(h,i+k,h+n,i+k),o.lineTo(h+j-n,i+k),o.quadTo(h+j,i+k,h+j,i+k-n),o.lineTo(h+j,i),o.close(),l=o)}else if("Rectangle"===b.getMorpheStyle()){var p=(new JenScript.SVGRect).Id(this.Id).origin(h,i).size(j,k);l=p}var q=new JenScript.Bound2D(h,i,j,k),r=void 0,s=void 0;b.isAscent()?(r=new JenScript.Point2D(q.getX(),q.getY()),s=new JenScript.Point2D(q.getX(),q.getY()+q.getHeight())):b.isDescent()&&(r=new JenScript.Point2D(q.getX(),q.getY()+q.getHeight()),s=new JenScript.Point2D(q.getX(),q.getY()));var t=["0%","33%","66%","100%"],u=["rgba(255, 255, 255, 0.8)","rgba(255, 255, 255, 0)","rgba(40, 40, 40, 0)","rgba(40, 40, 40, 0.4)"],v=(new JenScript.SVGLinearGradient).Id(this.Id+"gradient").from(r.x,r.y).to(s.x,s.y).shade(t,u).toSVG();a.definesSVG(v),a.insertSVG(l.fillURL(this.Id+"gradient").toSVG())},h:function(){}}),JenScript.SymbolBarEffect2=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.SymbolBarEffect2,JenScript.SymbolBarEffect),JenScript.Model.addMethods(JenScript.SymbolBarEffect2,{__init:function(a){a=a||{},this.Id="symboleffect2_"+JenScript.sequenceId++,JenScript.SymbolBarEffect.call(this,a)},paintBarEffect:function(a,b){"Vertical"===b.getNature()&&this.v(a,b),"Horizontal"===b.getNature()&&this.h(a,b)},v:function(a,b){var c=b.getHost().getProjection(),d=null;b.isAscent()&&(d=new JenScript.Point2D(0,b.getBase()+b.getValue())),b.isDescent()&&(d=new JenScript.Point2D(0,b.getBase()-b.getValue()));var e=c.userToPixel(d),f=new JenScript.Point2D(0,b.getBase()),g=c.userToPixel(f),h=b.getLocationX(),i=e.getY();b.isDescent()&&(i=g.getY());var j=b.getThickness(),k=Math.abs(g.getY()-e.getY()),l=null,m=2;h+=m,i+=m,j-=2*m,k-=2*m;var n=10;if("Round"===b.getMorpheStyle()){var o=b.getRound(),p=(new JenScript.SVGPath).Id(this.Id);b.isAscent()?(p.moveTo(h,i+o),p.lineTo(h,i+k/2+n),p.lineTo(h+j,i+k/2-n),p.lineTo(h+j,i+o),p.quadTo(h+j,i,h+j-o,i),p.lineTo(h+o,i),p.quadTo(h,i,h,i+o),p.close()):b.isDescent()&&(p.moveTo(h,i+k/2-n),p.lineTo(h,i+k-o),p.quadTo(h,i+k,h+o,i+k),p.lineTo(h+j-o,i+k),p.quadTo(h+j,i+k,h+j,i+k-o),p.lineTo(h+j,i+k/2+n),p.close()),l=p}else if("Rectangle"===b.getMorpheStyle()){var p=(new JenScript.SVGPath).Id(this.Id);b.isAscent()?(p.moveTo(h,i),p.lineTo(h,i+k/2+n),p.lineTo(h+j,i+k/2-n),p.lineTo(h+j,i),p.close()):b.isDescent()&&(p.moveTo(h,i+k/2-n),p.lineTo(h,i+k),p.lineTo(h+j,i+k),p.lineTo(h+j,i+k/2+n),p.close()),l=p}var q=l.toSVG();a.insertSVG(q);var r=q.getBBox(),s=new JenScript.Bound2D(r.x,r.y,r.width,r.height),t=null,u=null;b.isAscent()?(t=new JenScript.Point2D(s.getX(),s.getY()),u=new JenScript.Point2D(s.getX(),s.getY()+s.getHeight())):b.isDescent()&&(t=new JenScript.Point2D(s.getX(),s.getY()+s.getHeight()),u=new JenScript.Point2D(s.getX(),s.getY()));var v=["0%","100%"],w=["rgba(255, 255, 255, 0.7)","rgba(255, 255, 255, 0.2)"],x=(new JenScript.SVGLinearGradient).Id(this.Id+"gradient").from(t.x,t.y).to(u.x,u.y).shade(v,w).toSVG();a.deleteGraphicsElement(this.Id+"gradient"),a.definesSVG(x),q.setAttribute("fill","url(#"+this.Id+"gradient)")},h:function(){}}),JenScript.SymbolBarEffect3=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.SymbolBarEffect3,JenScript.SymbolBarEffect),JenScript.Model.addMethods(JenScript.SymbolBarEffect3,{__init:function(a){a=a||{},this.Id="symboleffect3_"+JenScript.sequenceId++,JenScript.SymbolBarEffect.call(this,a)},paintBarEffect:function(a,b){"Vertical"===b.getNature()&&this.v(a,b),"Horizontal"===b.getNature()&&this.h(a,b)},v:function(a,b){if(void 0!==b.getHost()&&void 0!==b.getHost().getProjection()){var c=b.getHost().getProjection(),d=null;b.isAscent()&&(d=new JenScript.Point2D(0,b.getBase()+b.getValue())),b.isDescent()&&(d=new JenScript.Point2D(0,b.getBase()-b.getValue()));var e=c.userToPixel(d),f=new JenScript.Point2D(0,b.getBase()),g=c.userToPixel(f),h=b.getLocationX(),i=e.getY();b.isDescent()&&(i=g.getY());var j=b.getThickness(),k=Math.abs(g.getY()-e.getY()),l=null,m=2;h+=m,i+=m,j-=2*m,k-=2*m;var n=(new JenScript.SVGPath).Id(this.Id);if("Round"==b.getMorpheStyle()){var o=b.getRound();b.isAscent()?(n.moveTo(h,i+o),n.quadTo(h+j/2,i+k/2,h,i+k),n.lineTo(h+j,i+k),n.quadTo(h+j/2,i+k/2,h+j,i+o),n.quadTo(h+j,i,h+j-o,i),n.lineTo(h+o,i),n.quadTo(h,i,h,i+o),n.close()):b.isDescent()&&(n.moveTo(h,i),n.quadTo(h+j/2,i+k/2,h,i+k-o),n.quadTo(h,i+k,h+o,i+k),n.lineTo(h+j-o,i+k),n.quadTo(h+j,i+k,h+j,i+k-o),n.quadTo(h+j/2,i+k/2,h+j,i),n.close())}else"Rectangle"===b.getMorpheStyle()&&(n.moveTo(h,i),n.quadTo(h+j/2,i+k/2,h,i+k),n.lineTo(h+j,i+k),n.quadTo(h+j/2,i+k/2,h+j,i),n.close());l=n;var p=l.toSVG();a.insertSVG(p);var q=p.getBBox(),r=new JenScript.Bound2D(q.x,q.y,q.width,q.height),s=null,t=null;b.isAscent()?(s=new JenScript.Point2D(r.getX(),r.getY()),t=new JenScript.Point2D(r.getX(),r.getY()+r.getHeight())):b.isDescent()&&(s=new JenScript.Point2D(r.getX(),r.getY()+r.getHeight()),t=new JenScript.Point2D(r.getX(),r.getY()));var u=["0%","33%","66%","100%"],v=["rgba(255, 255, 255, 0.55)","rgba(255, 255, 255, 0)","rgba(40, 40, 40, 0)","rgba(40, 40, 40, 0.45)"],w=(new JenScript.SVGLinearGradient).Id(this.Id+"gradient").from(s.x,s.y).to(t.x,t.y).shade(u,v).toSVG();a.deleteGraphicsElement(this.Id+"gradient"),a.definesSVG(w),p.setAttribute("fill","url(#"+this.Id+"gradient)")}},h:function(){}})}(),function(){JenScript.SymbolBarStroke=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.SymbolBarStroke,JenScript.SymbolPainter),JenScript.Model.addMethods(JenScript.SymbolBarStroke,{_init:function(a){a=a||{},this.Id="symbolstroke"+JenScript.sequenceId++,this.strokeColor=a.strokeColor,this.strokeWidth=void 0!==a.strokeWidth?a.strokeWidth:1,JenScript.SymbolPainter.call(this,a)},paintBarStroke:function(a,b){a.deleteGraphicsElement(this.Id);var c=void 0!==this.strokeColor?this.strokeColor:b.getThemeColor(),d=b.getBarShape().Id(this.Id).fillNone().stroke(c).strokeWidth(this.strokeWidth).toSVG();a.insertSVG(d)},paintSymbol:function(a,b){b.isVisible()&&this.paintBarStroke(a,b)}})}(),function(){JenScript.SymbolPointPainter=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.SymbolPointPainter,JenScript.SymbolPainter),JenScript.Model.addMethods(JenScript.SymbolPointPainter,{_init:function(a){a=a||{},this.Id="symbolpainter"+JenScript.sequenceId++,JenScript.SymbolPainter.call(this,a)},paintSymbolPoint:function(){},paintSymbol:function(a,b){b.isVisible()&&this.paintSymbolPoint(a,b)}}),JenScript.SymbolPointSquare=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.SymbolPointSquare,JenScript.SymbolPointPainter),JenScript.Model.addMethods(JenScript.SymbolPointSquare,{__init:function(a){a=a||{},JenScript.SymbolPointPainter.call(this,a)},paintSymbolPoint:function(a,b){var c=(new JenScript.SVGRect).Id(this.Id).origin(b.devicePoint.x-2,b.devicePoint.y-2).size(4,4);c.fill(b.getThemeColor()),a.insertSVG(c.toSVG())}})}(),function(){JenScript.SymbolPolylinePainter=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.SymbolPolylinePainter,JenScript.SymbolPainter),JenScript.Model.addMethods(JenScript.SymbolPolylinePainter,{_init:function(a){a=a||{},this.Id="symbolpolyline"+JenScript.sequenceId++,JenScript.SymbolPainter.call(this,a)},paintSymbolPolyline:function(a,b){for(var c=b.getSymbolComponents(),d=(new JenScript.SVGPath).Id(this.Id),e=0;e<c.length;e++){var f=c[e];0==e?d.moveTo(f.devicePoint.x,f.devicePoint.y):d.lineTo(f.devicePoint.x,f.devicePoint.y)}a.insertSVG(d.stroke(b.getThemeColor()).fillNone().toSVG())},paintSymbol:function(a,b){b.isVisible()&&this.paintSymbolPolyline(a,b)}})}(),function(){JenScript.SymbolLayer=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.SymbolLayer,{init:function(a){a=a||{},this.host,this.symbols=[]},getHost:function(){return this.host},setHost:function(a){this.host=a},addSymbol:function(a,b){a.setLayer(this),this.symbols[this.symbols.length]=a,b&&void 0!==this.host&&this.host.repaintPlugin()},removeSymbol:function(){},countSymbols:function(){return this.symbols.length},getSymbol:function(a){return this.symbols[a]},getSymbols:function(){return this.symbols},setSymbols:function(a){this.symbols=a},getSymbolIndex:function(a){if(void 0===a)return-1;for(var b=0;b<this.symbols.length;b++){var c=this.symbols[b];if(c.equals(a))return b}return-1},solveSymbolComponent:function(){},paintLayer:function(){},getFlattenSymbolComponents:function(){},solveGeometry:function(){for(var a=this.getSymbols(),b=0;b<a.length;b++)a[b].isFiller||this.solveSymbolComponent(a[b])},onMove:function(){},onClick:function(){},onExit:function(){},onEnter:function(){},onPress:function(){},onRelease:function(){},onDrag:function(){},getComponentXLocation:function(a){a instanceof JenScript.SymbolStack;for(var b=this.getFlattenSymbolComponents(),c=0,d=[],e=0;e<b.length;e++){var f=b[e];f.isFiller&&"Glue"===f.getFillerType()?d[d.length]=f:c+=f.getThickness()}if(this.getHost().getProjection().getView().getDevice().getWidth()>c){var g=this.getHost().getProjection().getView().getDevice().getWidth()-c,h=d.length;if(h>0)for(var e=0;e<d.length;e++){var i=d[e];i.setThickness(g/h)}}for(var j=0,e=0;e<b.length;e++){var f=b[e];if(f.equals(a))return j;j+=f.getThickness()}return j},getComponentYLocation:function(a){for(var b=this.getFlattenSymbolComponents(),c=0,d=[],e=0;e<b.length;e++){var f=b[e];f.isFiller&&"Glue"===f.getFillerType()?d[d.length]=f:c+=f.getThickness()}if(this.getHost().getProjection().getView().getDevice().getHeight()>c){var g=this.getHost().getProjection().getView().getDevice().getHeight()-c,h=d.length;if(h>0)for(var e=0;e<d.length;e++){var i=d[e];i.setThickness(g/h)}}for(var j=0,e=0;e<b.length;e++){var f=b[e];if(f.equals(a))return j;j+=f.getThickness()}return j}})}(),function(){JenScript.SymbolBarLayer=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.SymbolBarLayer,JenScript.SymbolLayer),JenScript.Model.addMethods(JenScript.SymbolBarLayer,{_init:function(a){a=a||{},JenScript.SymbolLayer.call(this,a),this.symbolListeners=[]},toString:function(){return"JenScript.SymbolBarLayer"},addSymbolListener:function(a,b,c){if(void 0===c)throw new Error("Symbol listener, listener name should be supplied.");var d={action:a,onEvent:b,name:c};this.symbolListeners[this.symbolListeners.length]=d},fireSymbolEvent:function(a,b){for(var c=0;c<this.symbolListeners.length;c++){var d=this.symbolListeners[c];a===d.action&&d.onEvent(b)}},getFlattenSymbolComponents:function(){for(var a=[],b=0;b<this.getSymbols().length;b++){var c=this.getSymbols()[b];if(c instanceof JenScript.SymbolComponent&&!(c instanceof JenScript.SymbolBarGroup))a[a.length]=c;else if(c instanceof JenScript.SymbolBarGroup)for(var d=c.getSymbolComponents(),e=0;e<d.length;e++)a[a.length]=d[e]}return a},paintLayer:function(a,b,c){this.paintSymbols(a,this.getSymbols(),b,c)},paintSymbols:function(a,b,c,d){if(this.solveGeometry(),"Device"===c)for(var e=0;e<b.length;e++){var f=b[e];f instanceof JenScript.SymbolBar&&(f instanceof JenScript.SymbolBarGroup?this.paintGroup(a,f,c,d):f instanceof JenScript.SymbolBarStacked?this.paintBarStacked(a,f,c,d):this.paintBar(a,f,c,d))}"Device"!==c&&"LabelLayer"===d&&this.paintSymbolsAxisLabel(a,b,c)},paintGroup:function(a,b,c,d){b.setHost(this.getHost()),b.setLayer(this),"LabelLayer"===d&&this.paintBar(a,b,c,d);var e=b.getSymbolComponents();this.paintSymbols(a,e,c,d)},paintSymbolsAxisLabel:function(a,b,c){for(var d=0;d<b.length;d++){var e=b[d];if(e.setHost(this.getHost()),e instanceof JenScript.SymbolBar)if(e instanceof JenScript.SymbolBarGroup){var f=e,g=f.getSymbolComponents();this.paintSymbolsAxisLabel(a,g,c),null!=f.getAxisLabel()&&f.getAxisLabel().paintSymbol(a,f,c)}else this.paintBarAxisLabel(a,e,c)}},paintBarAxisLabel:function(a,b,c){void 0!==b.getAxisLabel()&&b.getAxisLabel().paintSymbol(a,b,c)},paintBar:function(a,b,c,d){b.setHost(this.getHost()),b.setLayer(this),"SymbolLayer"===d?(void 0!==b.getBarFill()&&b.getBarFill().paintSymbol(a,b,c),void 0!==b.getBarEffect()&&b.getBarEffect().paintSymbol(a,b,c),void 0!==b.getBarStroke()&&b.getBarStroke().paintSymbol(a,b,c)):"LabelLayer"==d&&null!=b.getBarLabel()&&b.getBarLabel().paintSymbol(a,b,c)},paintBarStacked:function(a,b,c,d){b.setHost(this.getHost()),b.setLayer(this);var e=b.getStacks();if("SymbolLayer"===d){for(var f=0;f<e.length;f++)e[f].barFill=b.barFill,this.paintBar(a,e[f],c,d);void 0!==b.getBarEffect()&&b.getBarEffect().paintSymbol(a,b,c),void 0!==b.getBarStroke()&&b.getBarStroke().paintSymbol(a,b,c)}else if("LabelLayer"==d){null!=b.getBarLabel()&&b.getBarLabel().paintSymbol(a,b,c);for(var f=0;f<e.length;f++){var g=e[f];null!=g.getBarLabel()&&g.getBarLabel().paintSymbol(a,g,c)}}},solveSymbolComponent:function(a){a.isFiller||(a.setLayer(this),"Vertical"===this.getHost().getNature()&&this.solveVSymbolComponent(a),"Horizontal"===this.getHost().getNature()&&this.solveHSymbolComponent(a))},solveVSymbolComponent:function(a){a.isFiller||(a.setNature("Vertical"),a.setLayer(this),a instanceof JenScript.SymbolBarGroup?this.solveVBarGroup(a):a instanceof JenScript.SymbolBarStacked?this.solveVStackedBar(a):this.solveVBarSymbol(a))},solveVBarSymbol:function(a){if(void 0!==this.getHost()&&void 0!==this.getHost().getProjection()){a.setHost(this.getHost());var b=this.getHost().getProjection(),c=null;if(a.isAscent()&&(c=new JenScript.Point2D(0,a.getBase()+a.getValue())),a.isDescent()&&(c=new JenScript.Point2D(0,a.getBase()-a.getValue())),!a.isValueSet())throw new Error("bar symbol ascent or descent value should be supplied.");if(!a.isBaseSet())throw new Error("bar symbol base value should be supplied.");var d=b.userToPixel(c),e=new JenScript.Point2D(0,a.getBase()),f=b.userToPixel(e),g=this.getComponentXLocation(a),h=d.y;a.isAscent()&&(h=d.y),a.isDescent()&&(h=f.y);var i=a.getThickness(),j=Math.abs(f.y-d.y);if("Round"===a.getMorpheStyle()){var k=a.getRound(),l=(new JenScript.SVGPath).Id(a.Id);a.isAscent()?(l.moveTo(g,h+k),l.lineTo(g,h+j),l.lineTo(g+i,h+j),l.lineTo(g+i,h+k),l.quadTo(g+i,h,g+i-k,h),l.lineTo(g+k,h),l.quadTo(g,h,g,h+k),l.close()):a.isDescent()&&(l.moveTo(g,h),l.lineTo(g,h+j-k),l.quadTo(g,h+j,g+k,h+j),l.lineTo(g+i-k,h+j),l.quadTo(g+i,h+j,g+i,h+j-k),l.lineTo(g+i,h),l.close()),a.setBarShape(l)}else if("Rectangle"===a.getMorpheStyle()){var m=(new JenScript.SVGRect).origin(g,h).size(i,j);a.setBarShape(m)}}},solveVStackedBar:function(a){if(void 0!==this.getHost()&&void 0!==this.getHost().getProjection()){a.setHost(this.getHost()),a.normalize();var b=this.getHost().getProjection(),c=void 0;if(a.isAscent()&&(c=new JenScript.Point2D(0,a.getBase()+a.getValue())),a.isDescent()&&(c=new new JenScript.Point2D(0,a.getBase()-a.getValue())),!a.isValueSet())throw new Error("stacked bar symbol ascent or descent value should be supplied.");if(!a.isBaseSet())throw new Error("stacked bar symbol base value should be supplied.");var d=b.userToPixel(c),e=new JenScript.Point2D(0,a.getBase()),f=b.userToPixel(e),g=this.getComponentXLocation(a),h=d.y;a.isAscent()&&(h=d.y),a.isDescent()&&(h=f.y);var i=a.getThickness(),j=Math.abs(f.y-d.y);if("Round"===a.getMorpheStyle()){var k=a.getRound(),l=(new JenScript.SVGPath).Id(a.Id);a.isAscent()?(l.moveTo(g,h+k),l.lineTo(g,h+j),l.lineTo(g+i,h+j),l.lineTo(g+i,h+k),l.quadTo(g+i,h,g+i-k,h),l.lineTo(g+k,h),l.quadTo(g,h,g,h+k),l.close()):a.isDescent()&&(l.moveTo(g,h),l.lineTo(g,h+j-k),l.quadTo(g,h+j,g+k,h+j),l.lineTo(g+i-k,h+j),l.quadTo(g+i,h+j,g+i,h+j-k),l.lineTo(g+i,h),l.close()),a.setBarShape(l)}else if("Rectangle"===a.getMorpheStyle()){var m=(new JenScript.SVGRect).Id(a.Id).origin(g,h).size(i,j);a.setBarShape(m)}for(var n=a.getStacks(),o=0,p=0;p<n.length;p++){var q=n[p];q.setThickness(a.getThickness()),q.setBase(a.getStackBase(q)),q.setNature(a.getNature()),q.setBarFill(a.getBarFill()),a.isAscent()?q.setAscentValue(q.getNormalizedValue()):a.isDescent()&&q.setDescentValue(q.getNormalizedValue());var r=void 0;a.isAscent()?r=new JenScript.Point2D(0,a.getStackBase(q)+q.getNormalizedValue()):a.isDescent()&&(r=new JenScript.Point2D(0,a.getStackBase(q)-q.getNormalizedValue()));var s=b.userToPixel(r),t=new JenScript.Point2D(0,a.getStackBase(q)),u=b.userToPixel(t),v=this.getComponentXLocation(a),w=s.y;a.isAscent()&&(w=s.y),a.isDescent()&&(w=u.y);var x=a.getThickness(),y=Math.abs(u.y-s.y);if("Round"===a.getMorpheStyle())if(o==n.length-1){var k=a.getRound(),l=(new JenScript.SVGPath).Id(q.Id);a.isAscent()?(l.moveTo(v,w+k),l.lineTo(v,w+y),l.lineTo(v+x,w+y),l.lineTo(v+x,w+k),l.quadTo(v+x,w,v+x-k,w),l.lineTo(v+k,w),l.quadTo(v,w,v,w+k),l.close()):a.isDescent()&&(l.moveTo(v,w),l.lineTo(v,w+y-k),l.quadTo(v,w+y,v+k,w+y),l.lineTo(v+x-k,w+y),l.quadTo(v+x,w+y,v+x,w+y-k),l.lineTo(v+x,w),l.close()),q.setBarShape(l)}else{var m=(new JenScript.SVGRect).Id(q.Id).origin(v,w).size(x,y);q.setBarShape(m)}else if("Rectangle"===a.getMorpheStyle()){var m=(new JenScript.SVGRect).Id(q.Id).origin(v,w).size(x,y);q.setBarShape(m)}o++}}},solveHBarGroup:function(a){a.setHost(this.getHost()),a.copyToBar();for(var b=a.getSymbolComponents(),c=0;c<b.length;c++){var d=b[c];d.setLayer(this),this.solveHSymbolComponent(d)}},solveHSymbolComponent:function(a){a.isFiller||(a.setNature("Horizontal"),a instanceof JenScript.SymbolBarGroup?this.solveHBarGroup(a):a instanceof JenScript.SymbolBarStacked?this.solveHStackedBar(a):this.solveHBarSymbol(a))},solveVBarGroup:function(a){a.setHost(this.getHost()),a.copyToBar();for(var b=a.getSymbolComponents(),c=0;c<b.length;c++){var d=b[c];d.setLayer(this),d.setHost(this.getHost()),this.solveVSymbolComponent(d)}},solveHBarSymbol:function(a){if(void 0!==this.getHost()&&void 0!==this.getHost().getProjection()){a.setHost(this.getHost());var b=this.getHost().getProjection(),c=null;if(a.isAscent()&&(c=new JenScript.Point2D(a.getBase()+a.getValue(),0)),a.isDescent()&&(c=new JenScript.Point2D(a.getBase()-a.getValue(),0)),!a.isValueSet())throw new Error("bar symbol ascent or descent value should be supplied.");if(!a.isBaseSet())throw new error("stacked bar symbol base value should be supplied.");var d=b.userToPixel(c),e=new JenScript.Point2D(a.getBase(),0),f=b.userToPixel(e),g=this.getComponentYLocation(a),h=f.x;a.isAscent()&&(h=f.x),a.isDescent()&&(h=d.x);var i=a.getThickness(),j=Math.abs(d.x-f.x);if("Round"==a.getMorpheStyle()){var k=a.getRound(),l=(new JenScript.SVGPath).Id(this.Id);a.isAscent()?(l.moveTo(h,g),l.lineTo(h+j-k,g),l.quadTo(h+j,g,h+j,g+k),l.lineTo(h+j,g+i-k),l.quadTo(h+j,g+i,h+j-k,g+i),l.lineTo(h,g+i),l.close()):a.isDescent()&&(l.moveTo(h+k,g),l.lineTo(h+j,g),l.lineTo(h+j,g+i),l.lineTo(h+k,g+i),l.quadTo(h,g+i,h,g+i-k),l.lineTo(h,g+k),l.quadTo(h,g,h+k,g),l.close()),a.setBarShape(l)}else{var m=(new JenScript.SVGRect).Id(this.Id).origin(h,g).size(j,i);a.setBarShape(m)}}},solveHStackedBar:function(a){if(null!=this.getHost()&&null!=this.getHost().getProjection()){a.setHost(this.getHost()),a.normalize();var b=getHost().getProjection(),c=null;if(a.isAscent()&&(c=new JenScript.Point2D(a.getBase()+a.getValue(),0)),a.isDescent()&&(c=new JenScript.Point2D(a.getBase()-a.getValue(),0)),!a.isValueSet())throw new Error("stacked bar symbol ascent or descent value should be supplied.");if(!a.isBaseSet())throw new Error("stacked bar symbol base value should be supplied.");var d=b.userToPixel(c),e=new JenScript.Point2D(a.getBase(),0),f=b.userToPixel(e),g=this.getComponentYLocation(a),h=f.x;a.isAscent()&&(h=f.x),a.isDescent()&&(h=d.x);var j=a.getThickness(),k=Math.abs(d.x-f.x);if("Round"===a.getMorpheStyle()){var l=a.getRound(),m=(new JenScript.SVGPath).Id(a.Id);a.isAscent()?(m.moveTo(h,g),m.lineTo(h+k-l,g),m.quadTo(h+k,g,h+k,g+l),m.lineTo(h+k,g+j-l),m.quadTo(h+k,g+j,h+k-l,g+j),m.lineTo(h,g+j),m.close()):a.isDescent()&&(m.moveTo(h+l,g),m.lineTo(h+k,g),m.lineTo(h+k,g+j),m.lineTo(h+l,g+j),m.quadTo(h,g+j,h,g+j-l),m.lineTo(h,g+l),m.quadTo(h,g,h+l,g),m.close()),a.setBarShape(m)}else{var n=(new JenScript.SVGRect).Id(a.Id).origin(h,g).size(k,j);a.setBarShape(n)}for(var o=a.getStacks(),p=0,q=0;q<o.length;q++){var r=o[i];r.setThickness(a.getThickness()),r.setBase(a.getStackBase(r)),r.setNature(a.getNature()),r.setBarFill(a.getBarFill()),a.isAscent()?r.setAscentValue(r.getNormalizedValue()):a.isDescent()&&r.setDescentValue(r.getNormalizedValue());var s=null;a.isAscent()?s=new JenScript.Point2D(a.getStackBase(r)+r.getNormalizedValue(),0):a.isDescent()&&(s=new JenScript.Point2D(a.getStackBase(r)-r.getNormalizedValue(),0));var t=b.userToPixel(s),u=new JenScript.Point2D(a.getStackBase(r),0),v=b.userToPixel(u),w=this.getComponentYLocation(a),x=v.x;a.isAscent()&&(x=v.x),a.isDescent()&&(x=t.x);var y=a.getThickness(),z=Math.abs(t.x-v.x);if("Round"===a.getMorpheStyle())if(p==o.length-1){var l=a.getRound(),m=(new JenScript.SVGPath).Id(r.Id);a.isAscent()?(m.moveTo(x,w),m.lineTo(x+z-l,w),m.quadTo(x+z,w,x+z,w+l),m.lineTo(x+z,w+y-l),m.quadTo(x+z,w+y,x+z-l,w+y),m.lineTo(x,w+y),m.close()):a.isDescent()&&(m.moveTo(x+l,w),m.lineTo(x+z,w),m.lineTo(x+z,w+y),m.lineTo(x+l,w+y),m.quadTo(x,w+y,x,w+y-l),m.lineTo(x,w+l),m.quadTo(x,w,x+l,w),m.close()),r.setBarShape(m)}else{var n=(new JenScript.SVGRect).Id(r.Id).origin(x,w).size(z,y);a.setBarShape(n)}else{var n=(new JenScript.SVGRect).Id(r.Id).origin(x,w).size(z,y);a.setBarShape(n)}p++}}},onRelease:function(a,b,c,d){this.barCheck("release",a,c,d)},onPress:function(a,b,c,d){this.barCheck("press",a,c,d)},onMove:function(a,b,c,d){this.barCheck("move",a,c,d)},barCheck:function(a,b,c,d){for(var e=this,f=function(b){"press"===a?e.fireSymbolEvent("press",{symbol:b,x:c,y:d,device:{x:c,y:d}}):"release"===a?e.fireSymbolEvent("release",{symbol:b,x:c,y:d,device:{x:c,y:d}}):e.barEnterExitTracker(b,c,d)},g=function(b){if(!b.isFiller){var e=void 0!==b.getBound2D()&&b.getBound2D().contains(c,d);"move"!==a&&e&&b.isLockEnter()?f(b):"move"===a&&f(b)}},h=this.getSymbols(),i=0;i<h.length;i++){var j=h[i];if(j instanceof JenScript.SymbolBarStacked){var k=j;g(k);for(var l=k.getStacks(),m=0;m<l.length;m++){var n=l[m];g(n)}}else if(j instanceof JenScript.SymbolBarGroup)for(var o=j,p=o.getSymbolComponents(),q=0;q<p.length;q++){var r=p[q];if(r instanceof JenScript.SymbolBarStacked){var k=r;void 0!==k.getBound2D()&&k.getBound2D().contains(c,d)&&g(k);for(var l=k.getStacks(),m=0;m<l.length;m++){var n=h[m];void 0!==n.getBound2D()&&n.getBound2D().contains(c,d)&&n.isLockEnter()&&g(n)}}else r instanceof JenScript.SymbolBar&&void 0!==r.getBound2D()&&r.getBound2D().contains(c,d)&&r.isLockEnter()&&g(r)}else j instanceof JenScript.SymbolBar&&g(j)}},barEnterExitTracker:function(a,b,c){void 0!==a.getBound2D()&&(a.getBound2D().contains(b,c)&&!a.isLockEnter()&&(a.setLockEnter(!0),this.fireSymbolEvent("enter",{symbol:a,x:b,y:c,device:{x:b,y:c}})),a.getBound2D().contains(b,c)&&a.isLockEnter()?this.fireSymbolEvent("move",{symbol:a,x:b,y:c,device:{x:b,y:c}}):!a.getBound2D().contains(b,c)&&a.isLockEnter()&&(a.setLockEnter(!1),this.fireSymbolEvent("exit",{symbol:a,x:b,y:c,device:{x:b,y:c}})))}})}(),function(){JenScript.SymbolPointLayer=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.SymbolPointLayer,JenScript.SymbolLayer),JenScript.Model.addMethods(JenScript.SymbolPointLayer,{_init:function(a){a=a||{},JenScript.SymbolLayer.call(this,a),this.symbolListeners=[]},addSymbolListener:function(a,b,c){if(void 0===c)throw new Error("Symbol listener, listener name should be supplied.");var d={action:a,onEvent:b,name:c};this.symbolListeners[this.symbolListeners.length]=d},fireSymbolEvent:function(a,b){for(var c=0;c<this.symbolListeners.length;c++){var d=this.symbolListeners[c];a===d.action&&d.onEvent(b)}},getFlattenSymbolComponents:function(){for(var a=[],b=0;b<this.getSymbols().length;b++){var c=this.getSymbols()[b];c instanceof JenScript.SymbolComponent&&!(c instanceof JenScript.SymbolPolylinePoint)&&(a[a.length]=c)}return a},paintLayer:function(a,b,c){if("Device"===b&&"SymbolLayer"===c)for(var d=0;d<this.getSymbols().length;d++){var e=this.getSymbols()[d];if(!e.isFiller)if(e instanceof JenScript.SymbolPoint&&!(e instanceof JenScript.SymbolPolylinePoint))for(var f=e.getPointSymbolPainters(),g=0;g<f.length;g++)f[g].paintSymbol(a,e,b);else e instanceof JenScript.SymbolPolylinePoint&&void 0!==e.getPolylinePainter()&&e.getPolylinePainter().paintSymbol(a,e,b)}},solveSymbolComponent:function(a){a.isFiller||("Vertical"===this.getHost().getNature()&&this.solveVSymbolComponent(a),"Horizontal"===this.getHost().getNature()&&this.solveHSymbolComponent(a))},solveVSymbolComponent:function(a){a.setNature("Vertical"),a instanceof JenScript.SymbolPoint&&!(a instanceof JenScript.SymbolPolylinePoint)?this.solveVPointSymbol(a):a instanceof JenScript.SymbolPolylinePoint},solveHSymbolComponent:function(a){a.setNature(SymbolNature.Horizontal),a instanceof PointSymbol&&!(a instanceof PolylinePointSymbol)?solveHPointSymbol(a):a instanceof PolylinePointSymbol},solveVPointSymbol:function(a){var b=this.getHost().getProjection();a.setHost(this.getHost());var c=new JenScript.Point2D(0,a.getValue()),d=b.userToPixel(c);a.setDeviceValue(d.getY());var e=this.getComponentXLocation(a),f=new JenScript.Point2D(e,d.getY()),g=(new JenScript.SVGRect).origin(f.getX()-a.getSensibleRadius(),f.getY()-a.getSensibleRadius()).size(2*a.getSensibleRadius(),2*a.getSensibleRadius());a.setSensibleShape(g),a.setDevicePoint(f)},solveHPointSymbol:function(a){var b=this.getHost().getProjection();a.setHost(this.getHost());var c=new JenScript.Point2D(a.getValue(),0),d=b.userToPixel(c);a.setDeviceValue(d.getX()),a.setDevicePoint(new JenScript.Point2D(d.getX(),a.getLocationY()))},onRelease:function(){},onPress:function(){},onMove:function(){},symbolEnterExitTracker:function(a,b,c){void 0!==a.getBound2D()&&(a.getBound2D().contains(b,c)&&!a.isLockEnter()?(a.setLockEnter(!0),this.fireSymbolEvent("enter",{symbol:a,x:b,y:c,device:{x:b,y:c}})):!a.getBound2D().contains(b,c)&&a.isLockEnter()&&(a.setLockEnter(!1),this.fireSymbolEvent("exit",{symbol:a,x:b,y:c,device:{x:b,y:c}})))}})}(),function(){JenScript.SymbolPlugin=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.SymbolPlugin,JenScript.Plugin),JenScript.Model.addMethods(JenScript.SymbolPlugin,{_init:function(a){a=a||{},a.name="SymbolPlugin",a.priority=500,JenScript.Plugin.call(this,a),this.nature=void 0!==a.nature?a.nature:"Vertical",this.layers=[]},toString:function(){return"JenScript.SymbolPlugin"},onProjectionRegister:function(){var a=this;this.getProjection().addProjectionListener("boundChanged",function(){a.repaintPlugin()},"SymbolPlugin projection bound changed")},getNature:function(){return this.nature},setNature:function(a){this.nature=a},addLayer:function(a){a.setHost(this),this.layers[this.layers.length]=a,this.repaintPlugin()},countLayers:function(){return this.layers.length},getLayer:function(a){return this.layers[a]},paintPlugin:function(a,b){if("Device"===b){this.solveLayers();for(var c=0;c<this.countLayers();c++){var d=this.getLayer(c);d.paintLayer(a,b,"SymbolLayer")}}},solveLayers:function(){for(var a=0;a<this.countLayers();a++)this.getLayer(a).solveGeometry()},onRelease:function(a,b,c,d){for(var e=0;e<this.countLayers();e++)this.getLayer(e).onRelease(a,b,c,d)},onPress:function(a,b,c,d){for(var e=0;e<this.countLayers();e++)this.getLayer(e).onPress(a,b,c,d)},onMove:function(a,b,c,d){for(var e=0;e<this.countLayers();e++)this.getLayer(e).onMove(a,b,c,d)}})}(),function(){JenScript.RayPainter=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.RayPainter,{init:function(a){a=a||{}},paintRay:function(){}})}(),function(){JenScript.RayFill=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.RayFill,JenScript.RayPainter),JenScript.Model.addMethods(JenScript.RayFill,{_init:function(a){a=a||{},this.Id="rayfill"+JenScript.sequenceId++,JenScript.RayPainter.call(this,a)},paintRayFill:function(){},paintRay:function(a,b){this.paintRayFill(a,b)}}),JenScript.RayFill0=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.RayFill0,JenScript.RayFill),JenScript.Model.addMethods(JenScript.RayFill0,{__init:function(a){a=a||{},JenScript.RayFill.call(this,a)},paintRayFill:function(a,b){a.deleteGraphicsElement(this.Id+b.Id);var c=b.getRayShape().Id(this.Id+b.Id).fill(b.themeColor).fillOpacity(b.opacity).toSVG();a.insertSVG(c);var d=c.getBBox();b.setBound2D(new JenScript.Bound2D(d.x,d.y,d.width,d.height))}}),JenScript.SymbolBarFill1=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.SymbolBarFill1,JenScript.SymbolBarFill),JenScript.Model.addMethods(JenScript.SymbolBarFill1,{__init:function(a){a=a||{},JenScript.SymbolBarFill.call(this,a)},paintBarFill:function(a,b){"Vertical"===b.getNature()&&this.v(a,b),"Horizontal"===b.getNature()&&this.h(a,b)},v:function(a,b){a.deleteGraphicsElement(this.Id+b.Id);var c=b.getBarShape().Id(this.Id+b.Id).toSVG();a.insertSVG(c);var d=c.getBBox(),e=new JenScript.Point2D(d.x,d.y+d.height/2),f=new JenScript.Point2D(d.x+d.width,d.y+d.height/2),g=b.getThemeColor(),h=JenScript.Color.brighten(g,20),i=["0%","50%","100%"],j=[h,g,h],k=(new JenScript.SVGLinearGradient).Id(this.Id+b.Id+"gradient").from(e.x,e.y).to(f.x,f.y).shade(i,j);a.deleteGraphicsElement(this.Id+b.Id+"gradient"),a.definesSVG(k.toSVG()),
c.setAttribute("fill","url(#"+this.Id+b.Id+"gradient)");var d=c.getBBox();b.setBound2D(new JenScript.Bound2D(d.x,d.y,d.width,d.height))},h:function(a,b){a.deleteGraphicsElement(b.Id);var c=b.getBarShape().Id(b.Id).toSVG();a.insertSVG(c);var d=c.getBBox(),e=new JenScript.Point2D(d.x+d.width/2,d.y),f=new JenScript.Point2D(d.x+d.width/2,d.y+d.height),g=b.getThemeColor(),h=JenScript.Color.brighten(g,20),i=["0%","50%","100%"],j=[h,g,h],k=(new JenScript.SVGLinearGradient).Id(this.Id+"gradient").from(e.x,e.y).to(f.x,f.y).shade(i,j);a.deleteGraphicsElement(this.Id+"gradient"),a.definesSVG(k.toSVG()),c.setAttribute("fill","url(#"+this.Id+"gradient)");var d=c.getBBox();b.setBound2D(new JenScript.Bound2D(d.x,d.y,d.width,d.height))}})}(),function(){JenScript.Ray=function(a){a=a||{},this.name=void 0!==a.name?a.name:"ray name undefined",this.Id=void 0!==a.Id?a.Id:"ray"+JenScript.sequenceId++,this.themeColor=void 0!==a.themeColor?a.themeColor:"blue",this.opacity=void 0!==a.opacity?a.opacity:1,this.thickness,this.thicknessType,this.ray,this.rayBase,this.rayValue,this.ascent=!1,this.descent=!1,this.rayNature,this.rayShape,this.rayDraw,this.rayFill=new JenScript.RayFill0,this.rayEffect,this.rayLabel,this.rayAxisLabel,this.plugin,this.lockEnter=!1,this.inflating=!1,this.deflating=!1,this.bound2D,this.parent},JenScript.Model.addMethods(JenScript.Ray,{getBound2D:function(){return this.bound2D},setBound2D:function(a){this.bound2D=a},getRayDraw:function(){return this.rayDraw},setRayDraw:function(a){this.rayDraw=a},getRayFill:function(){return this.rayFill},setRayFill:function(a){this.rayFill=a},getRayEffect:function(){return this.rayEffect},setRayEffect:function(a){this.rayEffect=a},getRayLabel:function(){return this.rayLabel},setRayLabel:function(a){this.rayLabel=a},getRayAxisLabel:function(){return this.rayAxisLabel},setRayAxisLabel:function(a){this.rayAxisLabel=a},getName:function(){return this.name},setName:function(a){this.name=a},getThemeColor:function(){return this.themeColor},setThemeColor:function(a){this.themeColor=a},getThickness:function(){return this.thickness},setThickness:function(a){this.thickness=a},getThicknessType:function(){return this.thicknessType},setThicknessType:function(a){this.thicknessType=a},getRayNature:function(){return this.rayNature},setRayNature:function(a){this.rayNature=a},getRay:function(){return this.ray},setRay:function(a){this.ray=a},getRayValue:function(){return this.rayValue},setAscentValue:function(a){if(this.ascent=!0,this.descent=!1,0>a)throw new Error("ray value should be greater than 0");this.rayValue=a},setDescentValue:function(a){if(this.ascent=!1,this.descent=!0,0>a)throw new Error("ray value should be greater than 0");this.rayValue=a},getRayBase:function(){return this.rayBase},setRayBase:function(a){this.rayBase=a},isAscent:function(){return this.ascent},isDescent:function(){return this.descent},getRayShape:function(){return this.rayShape},setRayShape:function(a){this.rayShape=a},getPlugin:function(){return this.plugin},setPlugin:function(a){this.plugin=a},isLockEnter:function(){return this.lockEnter},setLockEnter:function(a){this.lockEnter=a},isInflating:function(){return this.inflating},setInflating:function(a){this.inflating=a},isDeflating:function(){return this.deflating},setDeflating:function(a){this.deflating=a},setLockEnter:function(a){this.lockEnter=a}}),JenScript.StackedRay=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.StackedRay,JenScript.Ray),JenScript.Model.addMethods(JenScript.StackedRay,{_init:function(a){this.stacks=[],JenScript.Ray.call(this,a)},getStackBase:function(a){for(var b=this.getRayBase(),c=0;c<this.stacks.length;c++){var d=this.stacks[c];if(a.equals(d))return b;this.isAscent()?b+=d.getNormalizedValue():this.isDescent()&&(b-=d.getNormalizedValue())}return b},addStack:function(a){if(a.getStackValue()<0)throw new Error("stack value value should be greater than 0");a.parent=this,this.stacks.push(a)},normalize:function(){for(var a=Math.abs(this.getRayValue()),b=0,c=0;c<this.stacks.length;c++)b+=this.stacks[c].getStackValue();for(var c=0;c<this.stacks.length;c++)this.stacks[c].setNormalizedValue(this.stacks[c].getStackValue()*a/b)},getStacks:function(){return this.stacks},setStacks:function(a){this.stacks=a}}),JenScript.RayStack=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.RayStack,JenScript.Ray),JenScript.Model.addMethods(JenScript.RayStack,{_init:function(a){a=a||{},this.stackValue=void 0!==a.stackValue?a.stackValue:1,this.normalizedValue,this.ray,JenScript.Ray.call(this,a)},equals:function(a){return a.Id===this.Id},toString:function(){return"Ray Stack [name="+this.name+", Id="+this.Id+", stackValue="+this.stackValue+", normalizedValue="+this.normalizedValue+"]"},getStackValue:function(){return this.stackValue},setStackValue:function(a){this.stackValue=a},getNormalizedValue:function(){return this.normalizedValue},setNormalizedValue:function(a){this.normalizedValue=a},getRay:function(){return this.ray},setRay:function(a){this.ray=a}})}(),function(){JenScript.RayPlugin=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.RayPlugin,JenScript.Plugin),JenScript.Model.addMethods(JenScript.RayPlugin,{_init:function(a){a=a||{},this.rays=[],this.raysListeners=[],a.name="RayPlugin",JenScript.Plugin.call(this,a)},onProjectionRegister:function(){var a=this;this.getProjection().addProjectionListener("boundChanged",function(){a.repaintPlugin()},a.toString())},addRay:function(a){a.plugin=this,this.rays.push(a)},toString:function(){return"JenScript.RayPlugin"},addRayListener:function(a,b,c){if(void 0===c)throw new Error("Ray listener, listener name should be supplied.");var d={action:a,onEvent:b,name:c};this.raysListeners[this.raysListeners.length]=d},fireRayEvent:function(a,b){for(var c=0;c<this.raysListeners.length;c++){var d=this.raysListeners[c];a===d.action&&d.onEvent(b)}},checkRay:function(a){if(void 0===a.getRayNature())throw new Error("Ray nature should be supplied")},resolveRayPluginGeometry:function(){var a=this,b=function(b){a.checkRay(b),b instanceof JenScript.StackedRay?a.resolveStackedRayGeometry(b):a.resolveRayGeometry(b)};this.rays.forEach(b)},resolveRayComponent:function(a){a instanceof JenScript.StackedRay?this.resolveStackedRayGeometry(a):this.resolveRayGeometry(a)},resolveRayGeometry:function(a){var b=this.getProjection();if("XRay"===a.getRayNature()){var c=a.getRay(),d=b.userToPixel(new JenScript.Point2D(c,0)).getX(),e=0;if("Device"===a.getThicknessType())e=a.getThickness();else{var f=c-a.getThickness()/2,g=b.userToPixel(new JenScript.Point2D(f,0)),h=c+a.getThickness()/2,i=b.userToPixel(new JenScript.Point2D(h,0));e=i.getX()-g.getX()}var j=0;a.isAscent()&&(j=a.getRayBase()),a.isDescent()&&(j=a.getRayBase()-a.getRayValue());var k=b.userToPixel(new JenScript.Point2D(0,j)).getY(),l=0;a.isAscent()&&(l=a.getRayBase()+a.getRayValue()),a.isDescent()&&(l=a.getRayBase());var m=b.userToPixel(new JenScript.Point2D(0,l)).getY(),n=d-e/2,o=m,p=e,q=Math.abs(m-k),r=(new JenScript.SVGRect).origin(n,o).size(p,q);a.setRayShape(r)}else if("YRay"===a.getRayNature()){var s=a.getRay(),t=b.userToPixel(new JenScript.Point2D(0,s)).getY(),u=0;if("Device"==a.getThicknessType())u=a.getThickness();else{var v=s-a.getThickness()/2,w=b.userToPixel(new JenScript.Point2D(0,v)),x=s+a.getThickness()/2,y=b.userToPixel(new JenScript.Point2D(0,x));u=Math.abs(w.getY()-y.getY())}var z=0;a.isAscent()&&(z=a.getRayBase()),a.isDescent()&&(z=a.getRayBase()-a.getRayValue());var A=b.userToPixel(new JenScript.Point2D(z,0)).getX(),B=0;a.isAscent()&&(B=a.getRayBase()-a.getRayValue()),a.isDescent()&&(B=a.getRayBase());var C=b.userToPixel(new JenScript.Point2D(B,0)).getX(),n=A,o=t-u/2,p=Math.abs(C-A),q=u,r=(new JenScript.SVGRect).origin(n,o).size(p,q);a.setRayShape(r)}},resolveStackedRayGeometry:function(a){var b=this.getProjection();if(a.normalize(),"XRay"===a.getRayNature()){var c=a.getRay(),d=b.userToPixel(new JenScript.Point2D(c,0)).getX(),e=0;if("Device"==a.getThicknessType())e=a.getThickness();else{var f=c-a.getThickness()/2,g=b.userToPixel(new JenScript.Point2D(f,0)),h=c+a.getThickness()/2,i=b.userToPixel(new JenScript.Point2D(h,0));e=i.getX()-g.getX()}var j=0;a.isAscent()&&(j=a.getRayBase()),a.isDescent()&&(j=a.getRayBase()-a.getRayValue());var k=b.userToPixel(new JenScript.Point2D(0,j)).getY(),l=0;a.isAscent()&&(l=a.getRayBase()+a.getRayValue()),a.isDescent()&&(l=a.getRayBase());var m=b.userToPixel(new JenScript.Point2D(0,l)).getY(),n=d-e/2,o=m,p=e,q=Math.abs(m-k),r=(new JenScript.SVGRect).origin(n,o).size(p,q);a.setRayShape(r);for(var s=0;s<a.getStacks().length;s++){var t=a.getStacks()[s];t.setRayNature(a.getRayNature()),t.setThickness(a.getThickness()),t.setThicknessType(a.getThicknessType()),t.setRay(a.getRay()),t.setRayBase(a.getStackBase(t)),t.setThemeColor(t.getThemeColor()),t.setRayFill(t.getRayFill()),t.setRayDraw(t.getRayDraw()),t.setRayEffect(t.getRayEffect()),t.isAscent()?t.setAscentValue(t.getNormalizedValue()):a.isDescent()&&t.setDescentValue(t.getNormalizedValue());var u=0;a.isAscent()&&(u=a.getStackBase(t)),a.isDescent()&&(u=a.getStackBase(t)-t.getNormalizedValue());var v=b.userToPixel(new JenScript.Point2D(0,u)).getY(),w=0;a.isAscent()&&(w=a.getStackBase(t)+t.getNormalizedValue()),a.isDescent()&&(w=a.getStackBase(t));var x=b.userToPixel(new JenScript.Point2D(0,w)).getY(),y=d-e/2,z=x,A=e,B=Math.abs(x-v),C=(new JenScript.SVGRect).origin(y,z).size(A,B);t.setRayShape(C)}}else if("YRay"===a.getRayNature()){var D=a.getRay(),E=b.userToPixel(new JenScript.Point2D(0,D)).getY(),F=0;if("Device"==a.getThicknessType())F=a.getThickness();else{var G=D-a.getThickness()/2,H=b.userToPixel(new JenScript.Point2D(0,G)),I=D+a.getThickness()/2,J=b.userToPixel(new JenScript.Point2D(0,I));F=Math.abs(H.getY()-J.getY())}var K=0;a.isAscent()&&(K=a.getRayBase()),a.isDescent()&&(K=a.getRayBase()-a.getRayValue());var L=b.userToPixel(new JenScript.Point2D(K,0)).getX(),M=0;a.isAscent()&&(M=a.getRayBase()-a.getRayValue()),a.isDescent()&&(M=a.getRayBase());var N=b.userToPixel(new JenScript.Point2D(M,0)).getX(),n=L,o=E-F/2,p=Math.abs(N-L),q=F,r=(new JenScript.SVGRect).origin(n,o).size(p,q);a.setRayShape(r);for(var s=0;s<a.getStacks().length;s++){var t=a.getStacks()[s];t.setRayNature(a.getRayNature()),t.setThickness(a.getThickness()),t.setThicknessType(a.getThicknessType()),t.setRay(a.getRay()),t.setRayBase(a.getStackBase(t)),t.setThemeColor(t.getThemeColor()),t.setRayFill(t.getRayFill()),t.setRayDraw(t.getRayDraw()),t.setRayEffect(t.getRayEffect()),a.isAscent()?t.setAscentValue(t.getNormalizedValue()):a.isDescent()&&t.setDescentValue(t.getNormalizedValue());var O=0;a.isAscent()&&(O=a.getStackBase(t)),a.isDescent()&&(O=a.getStackBase(t)-t.getNormalizedValue());var P=b.userToPixel(new JenScript.Point2D(O,0)).getX(),Q=0;a.isAscent()&&(Q=a.getStackBase(t)-t.getNormalizedValue()),a.isDescent()&&(Q=a.getStackBase(t));var R=b.userToPixel(new JenScript.Point2D(Q,0)).getX(),y=P,z=E-F/2,A=Math.abs(R-P),B=F,C=(new JenScript.SVGRect).origin(y,z).size(A,B);t.setRayShape(C)}}},paintRay:function(a,b,c,d){b.plugin=this,"RayLayer"===d?(void 0!==b.getRayFill()&&b.getRayFill().paintRay(a,b,c),void 0!==b.getRayEffect()&&b.getRayEffect().paintRay(a,b,c),void 0!==b.getRayDraw()&&b.getRayDraw().paintRay(a,b,c)):null!=b.getRayLabel()&&b.getRayLabel().paintRay(a,b,c)},paintStackedRay:function(a,b,c,d){for(var e=b.getStacks(),f=0;f<e.length;f++){var g=e[f];this.paintRay(a,g,c,d)}},paintPlugin:function(a,b){if(this.resolveRayPluginGeometry(),b===JenScript.ViewPart.Device){for(var c=0;c<this.rays.length;c++){var d=this.rays[c];d instanceof JenScript.StackedRay?this.paintStackedRay(a,d,b,"RayLayer"):this.paintRay(a,d,b,"RayLayer")}for(var c=0;c<this.rays.length;c++){var d=this.rays[c];d instanceof JenScript.StackedRay?this.paintStackedRay(a,d,b,"LabelLayer"):this.paintRay(a,d,b,"LabelLayer")}}},paintRayAxisLabel:function(){},onRelease:function(a,b,c,d){this.rayCheck("release",a,c,d)},onPress:function(a,b,c,d){this.rayCheck("press",a,c,d)},onMove:function(a,b,c,d){this.rayCheck("move",a,c,d)},rayCheck:function(a,b,c,d){for(var e=this,f=function(b){"press"===a?e.fireRayEvent("press",{ray:b,x:c,y:d,device:{x:c,y:d}}):"release"===a?e.fireRayEvent("release",{ray:b,x:c,y:d,device:{x:c,y:d}}):e.rayEnterExitTracker(b,c,d)},g=function(b){if(void 0!==b.getBound2D()){var e=void 0!==b.getBound2D()&&b.getBound2D().contains(c,d);"move"!==a&&e&&b.isLockEnter()?f(b):"move"===a&&f(b)}},h=0;h<this.rays.length;h++){var i=this.rays[h];if(i instanceof JenScript.StackedRay){var j=i;g(j);for(var k=j.getStacks(),l=0;l<k.length;l++){var m=k[l];g(m)}}else i instanceof JenScript.Ray&&g(i)}},rayEnterExitTracker:function(a,b,c){void 0!==a.getBound2D()&&(a.getBound2D().contains(b,c)&&!a.isLockEnter()&&(a.setLockEnter(!0),this.fireRayEvent("enter",{ray:a,x:b,y:c,device:{x:b,y:c}})),a.getBound2D().contains(b,c)&&a.isLockEnter()?this.fireRayEvent("move",{ray:a,x:b,y:c,device:{x:b,y:c}}):!a.getBound2D().contains(b,c)&&a.isLockEnter()&&(a.setLockEnter(!1),this.fireRayEvent("exit",{ray:a,x:b,y:c,device:{x:b,y:c}})))}})}(),function(){JenScript.ProgressPlugin=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.ProgressPlugin,JenScript.Plugin),JenScript.Model.addMethods(JenScript.ProgressPlugin,{_init:function(a){this.width=a.width,this.height=a.height,this.x=a.x,this.y=a.y,a.name="ProgressPlugin",JenScript.Plugin.call(this,a),this.monitors=[]},addMonitor:function(a){a.plugin=this,this.monitors[this.monitors.length]=a,this.repaintPlugin()},paintMonitor:function(a,b,c,d,e){var f=(new JenScript.SVGRect).origin(d,e).size(this.width,this.height).radius(c.cornerRadius,c.cornerRadius).fillNone().strokeNone();if(void 0!==c.outlineColor&&f.stroke(c.outlineColor),void 0!==c.outlineStrokeWidth&&f.strokeWidth(c.outlineStrokeWidth),void 0!==c.backgroundColor&&f.fill(c.backgroundColor),f.fillOpacity(c.backgroundOpacity),a.insertSVG(f.toSVG()),void 0!==c.value&&void 0!==c.total){var g=this.width*c.value/c.total,h=(new JenScript.SVGRect).origin(d,e).size(g,this.height).radius(c.cornerRadius,c.cornerRadius);void 0!==c.outlineColor&&h.stroke(c.outlineColor),a.insertSVG(h.strokeNone().fill(c.foregroundColor).fillOpacity(c.foregroundOpacity).toSVG())}if(void 0!==c.text){var i=(new JenScript.SVGElement).name("text").attr("x",d).attr("y",e+this.height+c.fontSize).attr("font-size",c.fontSize).attr("fill",c.textColor).attr("fill-opacity",1).attr("text-anchor","start").textContent(c.text);a.insertSVG(i.buildHTML())}},paintPlugin:function(a,b){if(b==JenScript.ViewPart.Device){for(var c=this.x,d=this.y,e=[],f=5,g=0;g<this.monitors.length;g++){var h=this.monitors[g];h.completed||(this.paintMonitor(a,b,h,c,d),d=d+(this.height+h.fontSize)+f,e[e.length]=h)}this.monitors=e}},onProjectionRegister:function(){var a=this;this.getProjection().addProjectionListener("boundChanged",function(){a.repaintPlugin()},"monitor")}})}(),function(){JenScript.ProgressMonitor=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.ProgressMonitor,{init:function(a){this.Id="monitor"+JenScript.sequenceId++,this.cornerRadius=void 0!==a.cornerRadius?a.cornerRadius:2,this.outlineColor=a.outlineColor,this.name=void 0!==a.name?a.name:"unamed monitor",this.outlineStrokeWidth=a.outlineStrokeWidth,this.backgroundColor=void 0!==a.backgroundColor?a.backgroundColor:JenScript.RosePalette.COALBLACK,this.backgroundOpacity=void 0!==a.backgroundOpacity?a.backgroundOpacity:1,this.foregroundColor=void 0!==a.foregroundColor?a.foregroundColor:JenScript.RosePalette.CALYPSOBLUE,this.foregroundOpacity=void 0!==a.foregroundOpacity?a.foregroundOpacity:1,this.textColor=void 0!==a.textColor?a.textColor:JenScript.RosePalette.COALBLACK,this.fontSize=void 0!==a.fontSize?a.fontSize:10,this.total=a.total,this.value,this.text,this.completed=!1,this.onComplete=a.onComplete},setTotal:function(a){this.total=a,this.plugin.repaintPlugin()},setValue:function(a,b){this.value=a,this.text=b;var c=this;setTimeout(function(){c.plugin.repaintPlugin()},100),this.value===this.total&&void 0!==this.onComplete&&this.complete()},complete:function(){this.value=this.total,void 0!==this.onComplete&&this.onComplete(),this.completed=!0,this.plugin.repaintPlugin()},setText:function(a){this.text=a;var b=this;setTimeout(function(){b.plugin.repaintPlugin()},200)}})}(),function(){JenScript.StockPlugin=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.StockPlugin,JenScript.Plugin),JenScript.Model.addMethods(JenScript.StockPlugin,{_init:function(a){a=a||{},this.stocks=[],this.stockLayers=[],a.priority=1e4,a.name="StockPlugin",JenScript.Plugin.call(this,a),this.bearishColor=void 0!==a.bearishColor?a.bearishColor:"red",this.bullishColor=void 0!==a.bullishColor?a.bullishColor:"green"},getBearishColor:function(){return this.bearishColor},setBearishColor:function(a){this.bearishColor=a},getBullishColor:function(){return this.bullishColor},setBullishColor:function(a){this.bullishColor=a},getStocks:function(){return this.stocks},getBoundedStocks:function(){for(var a=[],b=0;b<this.stocks.length;b++){var c=this.stocks[b],d=this.stocks[b-1],e=this.stocks[b+1];c.fixing.getTime()>=this.getProjection().minX&&c.fixing.getTime()<=this.getProjection().maxX&&(void 0!==d&&d.fixing.getTime()<this.getProjection().minX&&(a[a.length]=d),a[a.length]=c,void 0!==e&&e.fixing.getTime()>this.getProjection().maxX&&(a[a.length]=e))}return a},getRangeStocks:function(a,b){for(var c=[],d=0;d<this.stocks.length;d++){var e=this.stocks[d];e.fixing.getTime()>=a.getTime()&&e.fixing.getTime()<=b.getTime()&&(c[c.length]=e)}return c},getLayers:function(){return this.stockLayers},addLayer:function(a){a.plugin=this,this.stockLayers[this.stockLayers.length]=a,this.repaintPlugin()},removeLayer:function(a){for(var b=[],c=0;c<this.stockLayers.length;c++){var d=this.stockLayers[c];d.Id!==a.Id&&(b=d)}this.stockLayers=b,this.repaintPlugin()},removeAllLayer:function(){this.stockLayers=[],this.repaintPlugin()},setStocks:function(a){this.stocks=a,a.sort(function(a,b){var c=a.fixing.getTime(),d=b.fixing.getTime();return c>d?1:-1}),this.repaintPlugin()},addStock:function(a){this.stocks[this.stocks.length]=a,this.setStocks(this.stocks)},paintPlugin:function(a,b){if("Device"===b)for(var c=0;c<this.stockLayers.length;c++){var d=this.stockLayers[c];d.solveLayer(),d.paintLayer(a,b)}},onProjectionRegister:function(){var a=this;this.getProjection().addProjectionListener("boundChanged",function(){a.repaintPlugin()},"Stock plugin listener for projection bound changed")}})}(),function(){JenScript.Stock=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.Stock,{init:function(a){this.fixing=a.fixing,this.fixingDurationMillis=a.fixingDurationMillis,this.open=a.open,this.close=a.close,this.low=a.low,this.high=a.high,this.volume=a.volume},getFixing:function(){return this.fixing},setFixing:function(a){this.fixing=a},getOpen:function(){return this.open},setOpen:function(a){this.open=a},getClose:function(){return this.close},setClose:function(a){this.close=a},getLow:function(){return this.low},setLow:function(a){this.low=a},getHigh:function(){return this.high},setHigh:function(a){this.high=a},getVolume:function(){return this.volume},setVolume:function(a){this.volume=a},getFixingDurationMillis:function(){return this.fixingDurationMillis},setFixingDurationMillis:function(a){this.fixingDurationMillis=a},isBearish:function(){return this.close<this.open},isBullish:function(){return this.close>this.open}})}(),function(){JenScript.StockGeometry=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.StockGeometry,{init:function(a){a=a||{},this.name=a.name,this.layer},setLayer:function(a){this.layer=a},getLayer:function(){return this.layer},solveGeometry:function(){}}),JenScript.StockItemGeometry=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.StockItemGeometry,JenScript.StockGeometry),JenScript.Model.addMethods(JenScript.StockItemGeometry,{_init:function(a){a=a||{},this.stock,this.deviceLow,this.deviceHigh,this.deviceOpen,this.deviceClose,this.deviceVolume,this.deviceVolumeBase,this.deviceFixing,this.deviceFixingStart,this.deviceFixingEnd,this.deviceFixingDuration,JenScript.StockGeometry.call(this,{name:"StockItemGeometry"})},setStock:function(a){this.stock=a},getStock:function(){return this.stock},solveGeometry:function(){var a=this.stock;this.deviceLow=this.getProjection().userToPixel(new JenScript.Point2D(a.getFixing().getTime(),a.getLow())),this.deviceHigh=this.getProjection().userToPixel(new JenScript.Point2D(a.getFixing().getTime(),a.getHigh())),this.deviceOpen=this.getProjection().userToPixel(new JenScript.Point2D(a.getFixing().getTime(),a.getOpen())),this.deviceClose=this.getProjection().userToPixel(new JenScript.Point2D(a.getFixing().getTime(),a.getClose())),this.deviceVolume=this.getProjection().userToPixel(new JenScript.Point2D(a.getFixing().getTime(),a.getVolume())),this.deviceVolumeBase=this.getProjection().userToPixel(new JenScript.Point2D(a.getFixing().getTime(),0)),this.deviceFixingStart=this.getProjection().userToPixelX(a.getFixing().getTime()-a.getFixingDurationMillis()/2),this.deviceFixingEnd=this.getProjection().userToPixelX(a.getFixing().getTime()+a.getFixingDurationMillis()/2),this.deviceFixingDuration=Math.abs(this.deviceFixingEnd-this.deviceFixingStart),this.deviceFixing=this.getProjection().userToPixelX(a.getFixing().getTime()),this.solveItemGeometry()},solveItemGeometry:function(){},getProjection:function(){return this.getLayer().plugin.getProjection()}}),JenScript.StockGroupGeometry=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.StockGroupGeometry,JenScript.StockGeometry),JenScript.Model.addMethods(JenScript.StockGroupGeometry,{_init:function(a){a=a||{},this.stockItemGeometries=[],JenScript.StockGeometry.call(this,{name:"StockGroupGeometry"})},setStockItemGeometries:function(a){this.stockItemGeometries=a},addStockItemGeometries:function(a){this.stockItemGeometries[this.stockItemGeometries.length]=a},getStockItemGeometries:function(){return this.stockItemGeometries},solveGeometry:function(){}})}(),function(){JenScript.StockLayer=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.StockLayer,{init:function(a){a=a||{},this.Id="layer"+JenScript.sequenceId++,this.name=a.name,this.plugin,this.geometries=[]},clearGeometries:function(){this.geometries=[]},getGeometries:function(){return this.geometries},addGeometry:function(a){this.geometries[this.geometries.length]=a},getHost:function(){return this.plugin},solveLayer:function(){},paintLayer:function(){}})}(),function(){JenScript.CandleStickGeometry=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.CandleStickGeometry,JenScript.StockItemGeometry),JenScript.Model.addMethods(JenScript.CandleStickGeometry,{__init:function(a){a=a||{},this.lowHighColor="darkgray",this.deviceLowHighGap,this.deviceOpenCloseGap},solveItemGeometry:function(){var a=this.deviceLow,b=this.deviceHigh,c=this.deviceOpen,d=this.deviceClose,e=this.deviceFixingStart,f=this.deviceFixingDuration;this.deviceLowHighGap=(new JenScript.SVGLine).from(a.x,a.y).to(b.x,b.y),this.deviceOpenCloseGap=this.getStock().getOpen()>this.getStock().getClose()?(new JenScript.SVGRect).origin(e,c.y).size(f,Math.abs(c.y-d.y)):(new JenScript.SVGRect).origin(e,d.y).size(f,Math.abs(c.y-d.y))}}),JenScript.CandleStickLayer=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.CandleStickLayer,JenScript.StockLayer),JenScript.Model.addMethods(JenScript.CandleStickLayer,{_init:function(a){a=a||{},this.lowHighColor=void 0!==a.lowHighColor?a.lowHighColor:"black",JenScript.StockLayer.call(this,{name:"CandleStickLayer"})},setLowHighColor:function(a){this.color=a},getLowHighColor:function(){return this.color},solveLayer:function(){this.geometries=[];for(var a=0;a<this.plugin.getBoundedStocks().length;a++){var b=this.plugin.getBoundedStocks()[a],c=new JenScript.CandleStickGeometry;c.setLayer(this),c.setStock(b),c.solveGeometry(),this.addGeometry(c)}},paintLayer:function(a,b){if("Device"===b){for(var c=(new JenScript.SVGGroup).Id(this.Id).name("CandleStickLayer"),d=0;d<this.getGeometries().length;d++){var e=this.getGeometries()[d],f=e.deviceLowHighGap.stroke(this.lowHighColor).fillNone();c.child(f.toSVG());var g=e.getStock().isBearish()?this.plugin.getBearishColor():this.plugin.getBullishColor(),h=e.deviceOpenCloseGap.strokeNone().fill(g);c.child(h.toSVG())}a.deleteGraphicsElement(this.Id),a.insertSVG(c.toSVG())}}})}(),function(){JenScript.OhlcGeometry=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.OhlcGeometry,JenScript.StockItemGeometry),JenScript.Model.addMethods(JenScript.OhlcGeometry,{__init:function(a){a=a||{},this.deviceLowHighGap,this.deviceOpenTick,this.deviceCloseTick},solveItemGeometry:function(){var a=this.deviceLow,b=this.deviceHigh,c=this.deviceOpen,d=this.deviceClose,e=this.deviceFixingStart,f=this.deviceFixingDuration;this.deviceLowHighGap=(new JenScript.SVGLine).from(a.x,a.y).to(b.x,b.y),this.deviceLowOpenCloseGap=this.getStock().getOpen()>this.getStock().getClose()?(new JenScript.SVGRect).origin(e,c.y).size(f,Math.abs(c.y-d.y)):(new JenScript.SVGRect).origin(e,d.y).size(f,Math.abs(c.y-d.y)),this.deviceLowHighGap=(new JenScript.SVGLine).from(a.x,a.y).to(b.x,b.y),this.deviceOpenTick=(new JenScript.SVGLine).from(c.x-f/2,c.y).to(c.x,c.y),this.deviceCloseTick=(new JenScript.SVGLine).from(d.x,d.y).to(d.x+f/2,d.y)}}),JenScript.OhlcLayer=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.OhlcLayer,JenScript.StockLayer),JenScript.Model.addMethods(JenScript.OhlcLayer,{_init:function(a){a=a||{},this.markerColor=void 0!==a.markerColor?a.markerColor:"black",this.markerWidth=void 0!==a.markerWidth?a.markerWidth:1.5,JenScript.StockLayer.call(this,{name:"OhlcLayer"})},setMarkerColor:function(a){this.markerColor=a},setMarkerWidth:function(a){this.markerWidth=a},solveLayer:function(){this.geometries=[];for(var a=0;a<this.plugin.getBoundedStocks().length;a++){var b=this.plugin.getBoundedStocks()[a],c=new JenScript.OhlcGeometry;c.setLayer(this),c.setStock(b),c.solveGeometry(),this.addGeometry(c)}},paintLayer:function(a,b){if("Device"===b){for(var c=(new JenScript.SVGGroup).Id(this.Id),d=0;d<this.getGeometries().length;d++){var e=this.getGeometries()[d];c.child(e.deviceLowHighGap.fillNone().stroke(this.markerColor).strokeWidth(this.markerWidth).toSVG()),c.child(e.deviceOpenTick.fillNone().stroke(this.markerColor).strokeWidth(this.markerWidth).toSVG()),c.child(e.deviceCloseTick.fillNone().stroke(this.markerColor).strokeWidth(this.markerWidth).toSVG())}a.deleteGraphicsElement(this.Id),a.insertSVG(c.toSVG())}}})}(),function(){JenScript.VolumeBarGeometry=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.VolumeBarGeometry,JenScript.StockItemGeometry),JenScript.Model.addMethods(JenScript.VolumeBarGeometry,{__init:function(a){a=a||{},this.lowHighColor="darkgray",this.deviceVolumeGap},solveItemGeometry:function(){var a=this.deviceFixingStart,b=this.deviceFixingDuration,c=this.deviceVolume,d=this.deviceVolumeBase;this.deviceVolumeGap=(new JenScript.SVGRect).origin(a,c.y).size(b,Math.abs(c.y-d.y))}}),JenScript.VolumeBarLayer=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.VolumeBarLayer,JenScript.StockLayer),JenScript.Model.addMethods(JenScript.VolumeBarLayer,{_init:function(a){a=a||{},this.volumeColor=void 0!==a.volumeColor?a.volumeColor:"cyan",JenScript.StockLayer.call(this,{name:"VolumeBarLayer"})},solveLayer:function(){this.geometries=[];for(var a=0;a<this.plugin.getBoundedStocks().length;a++){var b=this.plugin.getBoundedStocks()[a],c=new JenScript.VolumeBarGeometry;c.setLayer(this),c.setStock(b),c.solveGeometry(),this.addGeometry(c)}},paintLayer:function(a,b){if("Device"===b){for(var c=(new JenScript.SVGGroup).Id(this.Id),d=0;d<this.getGeometries().length;d++){var e=this.getGeometries()[d];c.child(e.deviceVolumeGap.fill(this.volumeColor).strokeNone().toSVG())}a.deleteGraphicsElement(this.Id),a.insertSVG(c.toSVG())}}})}(),function(){JenScript.CurveStockGeometry=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.CurveStockGeometry,JenScript.StockGroupGeometry),JenScript.Model.addMethods(JenScript.CurveStockGeometry,{__init:function(a){a=a||{},this.moveCount=void 0!==a.moveCount?a.moveCount:20,JenScript.StockGroupGeometry.call(this,a),this.points=[]},setMoveCount:function(a){this.moveCount=a},getMoveCount:function(){return this.moveCount},getCurvePoints:function(){return this.points},solveGeometry:function(){throw new Error("CurveStockGeometry solve should be supplied")}}),JenScript.StockCurveLayer=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.StockCurveLayer,JenScript.StockLayer),JenScript.Model.addMethods(JenScript.StockCurveLayer,{_init:function(a){a=a||{},this.curveColor=void 0!==a.curveColor?a.curveColor:"black",this.curveWidth=void 0!==a.curveWidth?a.curveWidth:1,this.moveCount=void 0!==a.moveCount?a.moveCount:20,this.Id="fixing"+JenScript.sequenceId++,a.name=void 0!==a.name?a.name:"StockCurveLayer",JenScript.StockLayer.call(this,a)},setMoveCount:function(a){this.moveCount=a},getMoveCount:function(){return this.moveCount},getGeomInstance:function(){throw new Error("Geometry should be supplied")},solveLayer:function(){this.clearGeometries();var a=this.getGeomInstance();a.setLayer(this),a.solveGeometry(),this.addGeometry(a)},paintLayer:function(a,b){if("Device"===b)for(var c=0;c<this.getGeometries().length;c++){for(var d=this.getGeometries()[c],e=this.plugin.getProjection(),f=d.getCurvePoints(),g=(new JenScript.SVGGroup).Id(this.Id).name(this.name),h=(new JenScript.SVGPath).Id(this.Id+"_path"),i=0;i<f.length;i++){var j=f[i];0==i?h.moveTo(e.userToPixelX(j.x),e.userToPixelY(j.y)):h.lineTo(e.userToPixelX(j.x),e.userToPixelY(j.y))}a.deleteGraphicsElement(this.Id),g.child(h.stroke(this.curveColor).strokeWidth(this.curveWidth).fillNone().toSVG()),a.insertSVG(g.toSVG())}}})}(),function(){JenScript.StockFixingGeometry=function(a){this.___init(a)},JenScript.Model.inheritPrototype(JenScript.StockFixingGeometry,JenScript.CurveStockGeometry),JenScript.Model.addMethods(JenScript.StockFixingGeometry,{___init:function(a){a=a||{},JenScript.CurveStockGeometry.call(this,a)},solveGeometry:function(){for(var a=[],b=this.getLayer().getHost().getStocks(),c=this.getLayer().getHost().getProjection(),d=c.minX,e=c.maxX,f=0;f<b.length;f++){var g=b[f],h=g.getFixing().getTime();h>d&&e>h&&(a[a.length]={x:g.getFixing().getTime(),y:g.getClose()})}this.points=a}}),JenScript.StockFixingLayer=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.StockFixingLayer,JenScript.StockCurveLayer),JenScript.Model.addMethods(JenScript.StockFixingLayer,{__init:function(a){a=a||{},a.name="StockFixingLayer",JenScript.StockCurveLayer.call(this,a)},getGeomInstance:function(){return new JenScript.StockFixingGeometry}})}(),function(){JenScript.StockMovingAverageGeometry=function(a){this.___init(a)},JenScript.Model.inheritPrototype(JenScript.StockMovingAverageGeometry,JenScript.CurveStockGeometry),JenScript.Model.addMethods(JenScript.StockMovingAverageGeometry,{___init:function(a){a=a||{},JenScript.CurveStockGeometry.call(this,a)},solveGeometry:function(){var a=this.getLayer().getHost().getProjection(),b=a.minX,c=a.maxX,d=[],e=this.getLayer().getHost().getStocks();e&&e.sort(function(a,b){return a.getFixing().getTime()>b.getFixing().getTime()?1:-1});for(var f=this.moveCount;f<e.length;f++){for(var g=e[f],h=0,i=0;i<this.moveCount;i++){var j=e[f-i];h+=j.getClose()}var k=h/this.moveCount,l=g.getFixing().getTime();l>=b&&c>=l&&(d[d.length]=new JenScript.Point2D(g.getFixing().getTime(),k))}this.points=d}}),JenScript.StockMovingAverageLayer=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.StockMovingAverageLayer,JenScript.StockCurveLayer),JenScript.Model.addMethods(JenScript.StockMovingAverageLayer,{__init:function(a){a=a||{},a.name="StockMovingAverageLayer",JenScript.StockCurveLayer.call(this,a)},getGeomInstance:function(){var a={moveCount:this.moveCount
};return new JenScript.StockMovingAverageGeometry(a)}})}(),function(){JenScript.StockWeightedMovingAverageGeometry=function(a){this.___init(a)},JenScript.Model.inheritPrototype(JenScript.StockWeightedMovingAverageGeometry,JenScript.CurveStockGeometry),JenScript.Model.addMethods(JenScript.StockWeightedMovingAverageGeometry,{___init:function(a){a=a||{},JenScript.CurveStockGeometry.call(this,a)},solveGeometry:function(){var a=this.getLayer().getHost().getProjection(),b=a.minX,c=a.maxX,d=[],e=this.getLayer().getHost().getStocks();e&&e.sort(function(a,b){return a.getFixing().getTime()>b.getFixing().getTime()?1:-1});for(var f=this.moveCount;f<e.length;f++){for(var g=e[f],h=0,i=0,j=0;j<this.moveCount;j++){var k=e[f-j];h+=(this.moveCount-j)*k.getClose(),i+=this.moveCount-j}var l=h/i,m=g.getFixing().getTime();m>=b&&c>=m&&(d[d.length]=new JenScript.Point2D(g.getFixing().getTime(),l))}this.points=d}}),JenScript.StockWeightedMovingAverageLayer=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.StockWeightedMovingAverageLayer,JenScript.StockCurveLayer),JenScript.Model.addMethods(JenScript.StockWeightedMovingAverageLayer,{__init:function(a){a=a||{},a.name="StockWeightedMovingAverageLayer",JenScript.StockCurveLayer.call(this,a)},getGeomInstance:function(){var a={moveCount:this.moveCount};return new JenScript.StockWeightedMovingAverageGeometry(a)}})}(),function(){JenScript.StockExponentialMovingAverageGeometry=function(a){this.___init(a)},JenScript.Model.inheritPrototype(JenScript.StockExponentialMovingAverageGeometry,JenScript.CurveStockGeometry),JenScript.Model.addMethods(JenScript.StockExponentialMovingAverageGeometry,{___init:function(a){a=a||{},JenScript.CurveStockGeometry.call(this,a)},solveGeometry:function(){var a=this.getLayer().getHost().getProjection(),b=a.minX,c=a.maxX,d=[],e=this.getLayer().getHost().getStocks();e&&e.sort(function(a,b){return a.getFixing().getTime()>b.getFixing().getTime()?1:-1});for(var f=2/(this.moveCount+1),g=this.moveCount;g<e.length;g++){for(var h=e[g],i=h.getClose(),j=1,k=1;k<this.moveCount;k++){var l=e[g-k];i+=Math.pow(1-f,k)*l.getClose(),j+=Math.pow(1-f,k)}var m=i/j,n=h.getFixing().getTime();n>=b&&c>=n&&(d[d.length]=new JenScript.Point2D(h.getFixing().getTime(),m))}this.points=d}}),JenScript.StockExponentialMovingAverageLayer=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.StockExponentialMovingAverageLayer,JenScript.StockCurveLayer),JenScript.Model.addMethods(JenScript.StockExponentialMovingAverageLayer,{__init:function(a){a=a||{},a.name="StockExponentialMovingAverageLayer",JenScript.StockCurveLayer.call(this,a)},getGeomInstance:function(){var a={moveCount:this.moveCount};return new JenScript.StockExponentialMovingAverageGeometry(a)}})}(),function(){JenScript.BollingerStockGeometry=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.BollingerStockGeometry,JenScript.StockGroupGeometry),JenScript.Model.addMethods(JenScript.BollingerStockGeometry,{__init:function(a){a=a||{},JenScript.StockGroupGeometry.call(this,a),this.moveCount=void 0!==a.moveCount?a.moveCount:20,this.upperPoint=[],this.bottomPoint=[]},setMoveCount:function(a){this.moveCount=a},getMoveCount:function(){return this.moveCount},getCurveUp:function(){return this.upperPoint},getCurveAverage:function(){return this.stockMAs},getCurveBottom:function(){return this.bottomPoint},solveGeometry:function(){var a=this.getLayer().getHost().getProjection(),b=a.minX,c=a.maxX,d=[],e=[],f=[],g=this.getLayer().getHost().getStocks();g&&g.sort(function(a,b){return a.getFixing().getTime()>b.getFixing().getTime()?1:-1});for(var h=this.moveCount;h<g.length;h++){for(var i=g[h],j=i.getFixing().getTime(),k=0,l=0;l<this.moveCount;l++){var m=g[h-l];k+=m.getClose()}var n=k/this.moveCount;j>=b&&c>=j&&(f[f.length]=new JenScript.Point2D(i.getFixing().getTime(),n));for(var o=0,l=0;l<this.moveCount;l++){var m=g[h-l];o+=Math.pow(m.getClose()-n,2)}var p=Math.sqrt(o/this.moveCount);j>=b&&c>=j&&(d[d.length]=new JenScript.Point2D(i.getFixing().getTime(),n+2*p),e[e.length]=new JenScript.Point2D(i.getFixing().getTime(),n-2*p))}this.upperPoint=d,this.bottomPoint=e,this.stockMAs=f}}),JenScript.StockBollingerLayer=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.StockBollingerLayer,JenScript.StockLayer),JenScript.Model.addMethods(JenScript.StockBollingerLayer,{_init:function(a){a=a||{},this.lineColor=void 0!==a.lineColor?a.lineColor:"black",this.lineOpacity=void 0!==a.lineOpacity?a.lineOpacity:1,this.lineWidth=void 0!==a.lineWidth?a.lineWidth:1,this.bandColor=void 0!==a.bandColor?a.bandColor:"orange",this.bandOpacity=void 0!==a.bandOpacity?a.bandOpacity:.4,this.Id="StockBollinger"+JenScript.sequenceId++,this.bandId=this.Id+"_band",this.upId=this.Id+"_up",this.bottomId=this.Id+"_bottom",JenScript.StockLayer.call(this,{name:"StockBollingerLayer"})},solveLayer:function(){this.clearGeometries();var a=new JenScript.BollingerStockGeometry;a.setLayer(this),a.solveGeometry(),this.addGeometry(a)},paintCurve:function(a,b,c,d,e){for(var f=this.plugin.getProjection(),g=(new JenScript.SVGPath).Id(e),h=0;h<d.length;h++){var i=d[h];0==h?g.moveTo(f.userToPixelX(i.x),f.userToPixelY(i.y)):g.lineTo(f.userToPixelX(i.x),f.userToPixelY(i.y))}var j=g.stroke(this.lineColor).strokeWidth(this.lineWidth).strokeOpacity(this.lineOpacity).fillNone().toSVG();a.child(j)},paintBand:function(a,b,c,d,e){for(var f=this.plugin.getProjection(),g=(new JenScript.SVGPath).Id(this.bandId),h=0;h<d.length;h++){var i=d[h];0==h?g.moveTo(f.userToPixelX(i.x),f.userToPixelY(i.y)):g.lineTo(f.userToPixelX(i.x),f.userToPixelY(i.y))}for(var h=e.length-1;h>=0;h--){var i=e[h];g.lineTo(f.userToPixelX(i.x),f.userToPixelY(i.y))}d.length>0&&e.length>0&&g.close();var j=g.strokeNone().fill(this.bandColor).fillOpacity(this.bandOpacity).toSVG();a.child(j)},paintLayer:function(a,b){if("Device"===b)for(var c=0;c<this.getGeometries().length;c++){var d=(new JenScript.SVGGroup).Id(this.Id).name("StockBollingerLayer"),e=this.getGeometries()[c];this.paintBand(d,a,b,e.getCurveUp(),e.getCurveBottom()),this.paintCurve(d,a,b,e.getCurveBottom(),this.bottomId),this.paintCurve(d,a,b,e.getCurveUp(),this.upId),a.deleteGraphicsElement(this.Id),a.insertSVG(d.toSVG())}}})}(),function(){JenScript.StockMACDGeometry=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.StockMACDGeometry,JenScript.StockGeometry),JenScript.Model.addMethods(JenScript.StockMACDGeometry,{_init:function(a){a=a||{},this.moveCountMin=void 0!==a.moveCountMin?a.moveCountMin:12,this.moveCountMax=void 0!==a.moveCountMax?a.moveCountMax:26,this.moveCountSignal=void 0!==a.moveCountSignal?a.moveCountSignal:9,JenScript.StockGeometry.call(this,a),this.fixingMap=[]},getFixing:function(a){for(var b=0;b<this.fixingMap.length;b++){var c=this.fixingMap[b];if(a.getFixing().getTime()===c.stock.getFixing().getTime())return c}var d={stock:a};return this.fixingMap[this.fixingMap.length]=d,d},_solveGeometry:function(a,b,c){for(var d=2/(b+1),e=b;e<c.length;e++){for(var f=c[e],g=f.getClose(),h=1,i=1;b>i;i++){var j=c[e-i];g+=Math.pow(1-d,i)*j.getClose(),h+=Math.pow(1-d,i)}var k=g/h;"min"===a&&(this.getFixing(f).min=k),"max"===a&&(this.getFixing(f).max=k)}},_solveSignal:function(a,b){for(var c=2/(a+1),d=a;d<b.length;d++){for(var e=b[d],f=this.getFixing(e),g=f.macd,h=1,i=1;a>i;i++){var j=b[d-i],k=this.getFixing(j);g+=Math.pow(1-c,i)*k.macd,h+=Math.pow(1-c,i)}var l=g/h;f.signal=l}},solveGeometry:function(){var a=this.getLayer().getHost().getStocks();this._solveGeometry("min",this.moveCountMin,a),this._solveGeometry("max",this.moveCountMax,a);for(var b=this.getLayer().getHost().getProjection(),c=(b.minX,b.maxX,0);c<a.length;c++){var d=a[c],e=this.getFixing(d);if(void 0!==e.min&&void 0!==e.max){var f=e.min-e.max;e.macd=f}}this._solveSignal(this.moveCountSignal,a)},getMACD:function(){for(var a=[],b=this.getLayer().getHost().getProjection(),c=b.minX,d=b.maxX,e=this.getLayer().getHost().getStocks(),f=0;f<e.length;f++){var g=e[f],h=g.getFixing().getTime(),i=this.getFixing(g);h>=c&&d>=h&&(a[a.length]=new JenScript.Point2D(g.getFixing().getTime(),i.macd))}return a},getSignal:function(){for(var a=[],b=this.getLayer().getHost().getProjection(),c=b.minX,d=b.maxX,e=this.getLayer().getHost().getStocks(),f=0;f<e.length;f++){var g=e[f],h=g.getFixing().getTime(),i=this.getFixing(g);h>=c&&d>=h&&(a[a.length]=new JenScript.Point2D(g.getFixing().getTime(),i.signal))}return a}}),JenScript.StockMACDLayer=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.StockMACDLayer,JenScript.StockLayer),JenScript.Model.addMethods(JenScript.StockMACDLayer,{_init:function(a){a=a||{},this.macdId="macdlayer"+JenScript.sequenceId++,this.signalId="signallayer"+JenScript.sequenceId++,this.lineColor=void 0!==a.lineColor?a.lineColor:"black",this.lineOpacity=void 0!==a.lineOpacity?a.lineOpacity:1,this.lineWidth=void 0!==a.lineWidth?a.lineWidth:1,this.signalColor=void 0!==a.signalColor?a.signalColor:"red",this.signalOpacity=void 0!==a.signalOpacity?a.signalOpacity:1,this.signalWidth=void 0!==a.signalWidth?a.signalWidth:1,this.macdColor=void 0!==a.macdColor?a.macdColor:"blue",this.macdOpacity=void 0!==a.macdOpacity?a.macdOpacity:1,this.macdWidth=void 0!==a.macdWidth?a.macdWidth:1,this.moveCountSignal=void 0!==a.moveCountSignal?a.moveCountSignal:9,this.moveCountMin=void 0!==a.moveCountMin?a.moveCountMin:12,this.moveCountMax=void 0!==a.moveCountMax?a.moveCountMax:26,a.name="StockMACDLayer",JenScript.StockLayer.call(this,a)},solveLayer:function(){this.clearGeometries();var a={moveCountSignal:this.moveCountSignal,moveCountMin:this.moveCountMin,moveCountMax:this.moveCountMax},b=new JenScript.StockMACDGeometry(a);b.setLayer(this),b.solveGeometry(),this.addGeometry(b)},paintCurve:function(a,b,c,d,e,f,g,h){for(var i=this.plugin.getProjection(),j=(new JenScript.SVGPath).Id(e),k=0;k<d.length;k++){var l=d[k];0==k?j.moveTo(i.userToPixelX(l.x),i.userToPixelY(l.y)):j.lineTo(i.userToPixelX(l.x),i.userToPixelY(l.y))}a.child(j.stroke(f).strokeWidth(g).strokeOpacity(h).fillNone().toSVG())},paintLayer:function(a,b){if("Device"===b)for(var c=0;c<this.getGeometries().length;c++){var d=(new JenScript.SVGGroup).Id(this.Id).name("StockMACDLayer"),e=this.getGeometries()[c],f=e.getMACD(),g=e.getSignal();this.paintCurve(d,a,b,f,this.macdId,this.macdColor,this.macdWidth,this.macdOpacity),this.paintCurve(d,a,b,g,this.signalId,this.signalColor,this.signalWidth,this.signalOpacity),a.deleteGraphicsElement(this.Id),a.insertSVG(d.toSVG())}}})}(),function(){JenScript.BubblePlugin=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.BubblePlugin,JenScript.Plugin),JenScript.Model.addMethods(JenScript.BubblePlugin,{_init:function(a){a=a||{},a.priority=100,a.name="BubblePlugin",JenScript.Plugin.call(this,a),this.bubbles=[]},addBubble:function(a){return a.plugin=this,this.bubbles[this.bubbles.length]=a,this.repaintPlugin(),this},bubble:function(a){var b=new JenScript.Bubble(a);return this.addBubble(b),this},removeBubble:function(a){for(var b=[],c=0;c<this.bubbles.length;c++)this.bubbles[c].equals(a)||(b[b.length]=this.bubbles[c]);this.bubbles=b},onProjectionRegister:function(){var a=this;this.getProjection().addProjectionListener("boundChanged",function(){a.repaintPlugin()},"BubblePlugin projection bound changed")},paintPlugin:function(a,b){if("Device"===b)for(var c=0;c<this.bubbles.length;c++){var d=this.bubbles[c],e=this.getProjection().userToPixel(d.center),f=(new JenScript.SVGCircle).Id(d.Id).center(e.x,e.y).radius(d.radius);f.fill(d.fillColor).fillOpacity(d.fillOpacity),void 0!==d.strokeColor&&f.stroke(d.strokeColor).strokeWidth(d.strokeWidth).strokeOpacity(d.strokeOpacity),a.deleteGraphicsElement(d.Id),a.insertSVG(f.toSVG())}}})}(),function(){JenScript.Bubble=function(a){this.init(a)},JenScript.Model.inheritPrototype(JenScript.Bubble,JenScript.Plugin),JenScript.Model.addMethods(JenScript.Bubble,{init:function(a){a=a||{},a.priority=100,this.Id="bubble"+JenScript.sequenceId++,this.center=void 0!==a.center?a.center:new JenScript.Point2D(0,0),this.radius=void 0!==a.radius?a.radius:50,this.fillColor=void 0!==a.fillColor?a.fillColor:JenScript.RosePalette.INDIGO,this.fillOpacity=void 0!==a.fillOpacity?a.fillOpacity:1,this.strokeColor=a.strokeColor,this.strokeWidth=void 0!==a.strokeWidth?a.strokeWidth:1,this.strokeOpacity=void 0!==a.strokeOpacity?a.strokeOpacity:1},getCenter:function(){return this.center},setCenter:function(a){this.center=a},getRadius:function(){return this.radius},setRadius:function(a){this.radius=a},equals:function(a){return a instanceof JenScript.Bubble?a.Id===this.Id?!0:void 0:!1}})}(),function(){JenScript.ImagePlugin=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.ImagePlugin,JenScript.Plugin),JenScript.Model.addMethods(JenScript.ImagePlugin,{_init:function(a){a=a||{},this.images=[],JenScript.Plugin.call(this,a)},onProjectionRegister:function(){var a=this;this.getProjection().addProjectionListener("boundChanged",function(){a.repaintPlugin()},"ImagePlugin projection bound changed")},addImage:function(a){this.images[this.images.length]=a,this.repaintPlugin()},removeAll:function(){this.images=[],this.repaintPlugin()},paintPlugin:function(a,b){if(b===JenScript.ViewPart.Device)for(var c=0;c<this.images.length;c++){var d=(new JenScript.SVGImage).opacity(1).xlinkHref(this.images[c].url).origin(this.images[c].x,this.images[c].y);void 0!==this.images[c].width&&void 0!==this.images[c].height&&d.size(this.images[c].width,this.images[c].height),a.insertSVG(d.toSVG())}}})}(),function(){JenScript.RadialGaugePlugin=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.RadialGaugePlugin,JenScript.Plugin),JenScript.Model.addMethods(JenScript.RadialGaugePlugin,{_init:function(a){a=a||{},a.name="JenScript.RadialGaugePlugin",this.gauge=a.gauge,JenScript.Plugin.call(this,a)},paintPlugin:function(a,b){if(b===JenScript.ViewPart.Device){if(this.gauge.setProjection(this.getProjection()),void 0!==this.gauge.getEnvelop()&&this.gauge.getEnvelop().paintPart(a,this.gauge),void 0!==this.gauge.getBackgrounds())for(var c=0;c<this.gauge.getBackgrounds().length;c++)this.gauge.getBackgrounds()[c].paintPart(a,this.gauge);if(void 0!==this.gauge.getGlasses())for(var c=0;c<this.gauge.getGlasses().length;c++)this.gauge.getGlasses()[c].paintPart(a,this.gauge);if(void 0!==this.gauge.getBodies())for(var c=0;c<this.gauge.getBodies().length;c++)this.gauge.getBodies()[c].paintPart(a,this.gauge)}}})}(),function(){JenScript.GaugePart=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.GaugePart,{init:function(){this.gauge,this.partBuffer},getGauge:function(){return this.gauge},setGauge:function(a){this.gauge=a},paintPart:function(){throw new Error("JenScript.GaugePart, paintPart method should be provide by override.")}})}(),function(){JenScript.GaugeEnvelope=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.GaugeEnvelope,JenScript.GaugePart),JenScript.Model.addMethods(JenScript.GaugeEnvelope,{_init:function(a){a=a||{},JenScript.GaugePart.call(this,a)},paintEnvelope:function(){},paintPart:function(a,b){this.paintEnvelope(a,b)}}),JenScript.Cisero=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.Cisero,JenScript.GaugeEnvelope),JenScript.Model.addMethods(JenScript.Cisero,{__init:function(a){a=a||{},this.extendsRatio=void 0!==a.extendsRatio?a.extendsRatio:3,this.alpha=void 0!==a.alpha?a.alpha:10,JenScript.GaugeEnvelope.call(this,a)},createFragment:function(a,b,c,d,e,f){var g=f.getProjection().userToPixelX(f.getX()),h=f.getProjection().userToPixelY(f.getY()),i=(f.getRadius(),new JenScript.Point2D(g+d*Math.cos(JenScript.Math.toRadians(b-c-c/2)),h-d*Math.sin(JenScript.Math.toRadians(b-c-c/2)))),j=new JenScript.Point2D(g+e*Math.cos(JenScript.Math.toRadians(b-c/2)),h-e*Math.sin(JenScript.Math.toRadians(b-c/2))),k=(new JenScript.Point2D(g+e*Math.cos(JenScript.Math.toRadians(b+c/2)),h-e*Math.sin(JenScript.Math.toRadians(b+c/2))),new JenScript.Point2D(g+d*Math.cos(JenScript.Math.toRadians(b+c+c/2)),h-d*Math.sin(JenScript.Math.toRadians(b+c+c/2)))),l=new JenScript.Point2D(g+d*Math.cos(JenScript.Math.toRadians(b-c)),h-d*Math.sin(JenScript.Math.toRadians(b-c))),m=new JenScript.Point2D(g+e*Math.cos(JenScript.Math.toRadians(b-c)),h-e*Math.sin(JenScript.Math.toRadians(b-c))),n=new JenScript.Point2D(g+e*Math.cos(JenScript.Math.toRadians(b+c)),h-e*Math.sin(JenScript.Math.toRadians(b+c))),o=new JenScript.Point2D(g+d*Math.cos(JenScript.Math.toRadians(b+c)),h-d*Math.sin(JenScript.Math.toRadians(b+c)));this.first&&(a.moveTo(i.getX(),i.getY()),this.first=!1),a.curveTo(l.getX(),l.getY(),m.getX(),m.getY(),j.getX(),j.getY());var p=g+e*Math.cos(JenScript.Math.toRadians(b+c/2)),q=h-e*Math.sin(JenScript.Math.toRadians(b+c/2));a.arcTo(e,e,0,0,0,p,q),a.curveTo(n.getX(),n.getY(),o.getX(),o.getY(),k.getX(),k.getY())},createArcFragment:function(a,b,c,d,e,f,g){var h=g.getProjection().userToPixelX(g.getX()),i=g.getProjection().userToPixelY(g.getY()),j=c-2*d+d/2,k=h+e*Math.cos(JenScript.Math.toRadians(j)),l=i-e*Math.sin(JenScript.Math.toRadians(j));a.arcTo(e,e,0,0,0,k,l)},paintEnvelope:function(a,b){var c=b.getRadius()/this.extendsRatio,d=b.getRadius()+c,e=b.getProjection().userToPixelX(b.getX()),f=b.getProjection().userToPixelY(b.getY()),g=(new JenScript.SVGCircle).center(e,f).radius(d),h=new JenScript.Point2D(e,f-d),i=new JenScript.Point2D(e,f+d),j={percents:["0%","50%","100%"],colors:["darkgray","lightgray","black"]},k=(new JenScript.SVGLinearGradient).Id("ciseroGd1").from(h.x,h.y).to(i.x,i.y).shade(j.percents,j.colors);a.definesSVG(k.toSVG()),a.insertSVG(g.fillURL("ciseroGd1").strokeNone().toSVG());var l=this.alpha,m=new JenScript.SVGPath,n=2,o=b.getRadius()+c/2,p=b.getRadius()+c-n;this.first=!0;var q=(this.createFragment(m,30,l,o,p,b),this.createArcFragment(m,30,90,l,o,p,b),this.createFragment(m,90,l,o,p,b),this.createArcFragment(m,90,150,l,o,p,b),this.createFragment(m,150,l,o,p,b),this.createArcFragment(m,150,210,l,o,p,b),this.createFragment(m,210,l,o,p,b),this.createArcFragment(m,210,270,l,o,p,b),this.createFragment(m,270,l,o,p,b),this.createArcFragment(m,270,330,l,o,p,b),this.createFragment(m,330,l,o,p,b),this.createArcFragment(m,-30,30,l,o,p,b),new JenScript.Point2D(e,f-p)),r=new JenScript.Point2D(e,f+p),s={percents:["0%","50%","100%"],colors:["black","gray","black"]},t=(new JenScript.SVGLinearGradient).Id("ciseroGd2").from(q.x,q.y).to(r.x,r.y).shade(s.percents,s.colors);a.definesSVG(t.toSVG()),a.insertSVG(m.stroke(JenScript.RosePalette.MELON).attr("fill-rule","nonzero").fillURL("ciseroGd2").toSVG())}})}(),function(){JenScript.GaugeBackground=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.GaugeBackground,JenScript.GaugePart),JenScript.Model.addMethods(JenScript.GaugeBackground,{_init:function(a){a=a||{},JenScript.GaugePart.call(this,a)},paintBackground:function(){},paintPart:function(a,b){this.paintBackground(a,b)}}),JenScript.CircularBackground=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.CircularBackground,JenScript.GaugeBackground),JenScript.Model.addMethods(JenScript.CircularBackground,{__init:function(a){a=a||{},this.radius=void 0!==a.radius?a.radius:0,this.polarRadius=void 0!==a.polarRadius?a.polarRadius:0,this.polarAngle=void 0!==a.polarAngle?a.polarAngle:0,JenScript.GaugeBackground.call(this,a)},getRadius:function(){return this.radius},setRadius:function(a){this.radius=a},getPolarRadius:function(){return this.polarRadius},setPolarRadius:function(a){this.polarRadius=a},getPolarAngle:function(){return this.polarAngle},setPolarAngle:function(a){this.polarAngle=a},fill:function(){throw new Error("JenScript.CircularBackground, fill method should be provide by override.")},paintBackground:function(a,b){var c=b.getRadialPointAt(this.polarRadius,this.polarAngle);0==this.radius&&(this.radius=b.getRadius());var d=(new JenScript.SVGCircle).center(c.getX(),c.getY()).radius(this.radius);this.fill(a,b,d)}}),JenScript.GradientCircularBackground=function(a){this.___init(a)},JenScript.Model.inheritPrototype(JenScript.GradientCircularBackground,JenScript.CircularBackground),JenScript.Model.addMethods(JenScript.GradientCircularBackground,{___init:function(a){a=a||{},this.shader=void 0!==a.shader?a.shader:{percents:["0%","100%"],colors:["red","black"]},JenScript.CircularBackground.call(this,a)},fill:function(a,b,c){var d=this.getGradient(b),e="gradient"+JenScript.sequenceId++;d.Id(e),a.definesSVG(d.toSVG()),a.insertSVG(c.fillURL(e).toSVG())},getGradient:function(){throw new Error("JenScript.GradientCircularBackground, getGradient method should be provide by override")}}),JenScript.LinearGradientCircularBackground=function(a){this.____init(a)},JenScript.Model.inheritPrototype(JenScript.LinearGradientCircularBackground,JenScript.GradientCircularBackground),JenScript.Model.addMethods(JenScript.LinearGradientCircularBackground,{____init:function(a){a=a||{},this.gradientAngle=void 0!==a.gradientAngle?a.gradientAngle:90,a.name="JenScript.LinearGradientCircularBackground",JenScript.GradientCircularBackground.call(this,a)},getGradient:function(a){var b=a.getRadialPointAt(this.polarRadius,this.polarAngle),c=b.getX()+this.getRadius()*Math.cos(JenScript.Math.toRadians(this.gradientAngle)),d=b.getY()-this.getRadius()*Math.sin(JenScript.Math.toRadians(this.gradientAngle)),e=b.getX()+this.getRadius()*Math.cos(JenScript.Math.toRadians(this.gradientAngle)+Math.PI),f=b.getY()-this.getRadius()*Math.sin(JenScript.Math.toRadians(this.gradientAngle)+Math.PI),g=new JenScript.Point2D(c,d),h=new JenScript.Point2D(e,f),i=(new JenScript.SVGLinearGradient).from(g.x,g.y).to(h.x,h.y).shade(this.shader.percents,this.shader.colors);return i}}),JenScript.TextureCircularBackground=function(a){this.___init(a)},JenScript.Model.inheritPrototype(JenScript.TextureCircularBackground,JenScript.CircularBackground),JenScript.Model.addMethods(JenScript.TextureCircularBackground,{___init:function(a){a=a||{},this.opacity=void 0!==a.opacity?a.opacity:.5,this.texture=void 0!==a.texture?a.texture:JenScript.Texture.getTriangleCarbonFiber(5),JenScript.CircularBackground.call(this,a)},fill:function(a,b,c){a.definesTexture(this.texture),a.insertSVG(c.fillURL(this.texture.Id).opacity(this.opacity).toSVG())}})}(),function(){JenScript.GaugeBody=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.GaugeBody,JenScript.GaugePart),JenScript.Model.addMethods(JenScript.GaugeBody,{_init:function(a){a=a||{},this.gaugeMetricsPaths=[],this.gaugeTextPaths=[],JenScript.GaugePart.call(this,a)},paintBody:function(a,b){for(var c=0;c<this.getMetricsPaths().length;c++){var d=this.getMetricsPaths()[c];if(d.setProjection(this.getGauge().getProjection()),void 0!==d.getPathBinder()){var e=d.getPathBinder().bindPath(b);void 0!==e&&(d.extPath=e,d.draw(a),a.insertSVG(e.stroke("black").strokeWidth(1).fillNone().toSVG()))}void 0!==d.getPathBinder()&&d.getPathBinder().isDebug()&&d.getPathBinder().paintDebug(a,b)}for(var c=0;c<this.getMetricsPaths().length;c++){var d=this.getMetricsPaths()[c];void 0!=d.getGaugeNeedlePainter()&&d.getGaugeNeedlePainter().paintNeedle(a,d)}},registerGaugeMetricsPath:function(a){a.setBody(this),this.gaugeMetricsPaths[this.gaugeMetricsPaths.length]=a},getMetricsPaths:function(){return this.gaugeMetricsPaths},registerGaugeTextPath:function(a){a.setBody(this),this.gaugeTextPaths[this.gaugeTextPaths.length]=a},getTextPaths:function(){return this.gaugeTextPaths},paintPart:function(a,b){this.paintBody(a,b)}})}(),function(){JenScript.AnchorBinder=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.AnchorBinder,{init:function(a){a=a||{},this.metricsPath},getMetricsPath:function(){return this.metricsPath},setMetricsPath:function(a){this.metricsPath=a},bindAnchor:function(){throw new Error("JenScript.AnchorBinder, bindAnchor method should be provide by override")}}),JenScript.AnchorBaseBinder=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.AnchorBaseBinder,JenScript.AnchorBinder),JenScript.Model.addMethods(JenScript.AnchorBaseBinder,{_init:function(a){a=a||{},this.radius=void 0!==a.radius?a.radius:0,this.angleDegree=void 0!==a.angleDegree?a.angleDegree:0,JenScript.AnchorBinder.call(this,a)},getRadius:function(){return this.radius},setRadius:function(a){this.radius=a},getAngleDegree:function(){return this.angleDegree},setAngleDegree:function(a){this.angleDegree=a},bindAnchor:function(a){var b=a.getCenterDevice().getX()+this.radius*Math.cos(JenScript.Math.toRadians(this.angleDegree)),c=a.getCenterDevice().getY()-this.radius*Math.sin(JenScript.Math.toRadians(this.angleDegree));return new JenScript.Point2D(b,c)}}),JenScript.AnchorValueBinder=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.AnchorValueBinder,JenScript.AnchorBinder),JenScript.Model.addMethods(JenScript.AnchorValueBinder,{_init:function(a){a=a||{},this.radialOffset=void 0!==a.radialOffset?a.radialOffset:10,JenScript.AnchorBinder.call(this,a)},getRadialOffset:function(){return this.radialOffset},setRadialOffset:function(a){this.radialOffset=a},bindAnchor:function(a){this.baseAnchor=this.getMetricsPath().getNeedleBaseAnchorBinder().bindAnchor(a);var b=this.getMetricsPath().getMetricsPoint(this.getMetricsPath().getCurrentValue(),this.radialOffset),c=Math.sqrt((this.baseAnchor.x-b.x)*(this.baseAnchor.x-b.x)+(this.baseAnchor.y-b.y)*(this.baseAnchor.y-b.y)),d=JenScript.Math.getPolarAngle(this.baseAnchor.x,this.baseAnchor.y,b.x,b.y),e=this.baseAnchor.x+(c-this.radialOffset)*Math.cos(d),f=this.baseAnchor.y-(c-this.radialOffset)*Math.sin(d);return new JenScript.Point2D(e,f)}})}(),function(){JenScript.PathBinder=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.PathBinder,{init:function(a){a=a||{},this.debug=void 0!==a.debug?a.debug:!1,this.metricsPath},isDebug:function(){return this.debug},setDebug:function(a){this.debug=a},getMetricsPath:function(){return this.metricsPath},setMetricsPath:function(a){this.metricsPath=a},bindPath:function(){throw new Error("JenScript.PathBinder, bindPath method should be provide by override.")},paintDebug:function(){}}),JenScript.AbstractPathAutoBinder=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.AbstractPathAutoBinder,JenScript.PathBinder),JenScript.Model.addMethods(JenScript.AbstractPathAutoBinder,{_init:function(a){a=a||{},this.radius=a.radius,this.polarRadius=a.polarRadius,this.polarDegree=a.polarDegree,this.direction=void 0!==a.direction?a.direction:"Clockwise",this.x0,this.y0,this.r0,this.arc0,this.x1,this.y1,this.r1,this.arc1,this.intersectionPointStart,this.theta1Radian1,this.intersectionPointEnd,this.theta1Radian2,JenScript.PathBinder.call(this,a)},getPolarAngle:function(a,b,c,d){var e=-1;return c-a>0&&b-d>=0?e=Math.atan((b-d)/(c-a)):c-a>0&&0>b-d?e=Math.atan((b-d)/(c-a))+2*Math.PI:0>c-a?e=Math.atan((b-d)/(c-a))+Math.PI:c-a==0&&b-d>0?e=Math.PI/2:c-a==0&&0>b-d&&(e=3*Math.PI/2),e},bindPath:function(){return this.solveIntersectionPoints()?this.createPath():void 0},createPath:function(){throw new Error("JenScript.AbstractPathAutoBinder, createPath should be supplied by override.")},solveIntersectionPoints:function(){var a=this.getMetricsPath().getBody().getGauge();this.x0=a.getCenterDevice().getX(),this.y0=a.getCenterDevice().getY(),this.r0=a.getRadius(),this.arc0=(new JenScript.SVGCircle).center(this.x0,this.y0).radius(this.r0),this.x1=this.x0+this.polarRadius*Math.cos(JenScript.Math.toRadians(this.polarDegree)),this.y1=this.y0-this.polarRadius*Math.sin(JenScript.Math.toRadians(this.polarDegree)),this.r1=this.radius,this.arc1=(new JenScript.SVGCircle).center(this.x1,this.y1).radius(this.r1);var b=this.x0,c=this.y0,d=this.r0,e=this.x1,f=this.y1,g=this.r1;if(0!=this.polarDegree&&180!=this.polarDegree){var h=(g*g-d*d-e*e+b*b-f*f+c*c)/(2*(c-f)),i=Math.pow((b-e)/(c-f),2)+1,j=2*c*(b-e)/(c-f)-2*h*(b-e)/(c-f)-2*b,k=b*b+c*c+h*h-d*d-2*c*h,l=Math.sqrt(j*j-4*i*k);if(0>l)return!1;if(l>=0){var m=(-j-l)/(2*i),n=h-m*(b-e)/(c-f);this.intersectionPointStart=new JenScript.Point2D(m,n);var o=(-j+l)/(2*i),p=h-o*(b-e)/(c-f);return this.intersectionPointEnd=new JenScript.Point2D(o,p),this.theta1Radian1=this.getPolarAngle(e,f,m,n),this.theta1Radian2=this.getPolarAngle(e,f,o,p),!0}}else if(0==this.polarDegree||180==this.polarDegree){var q=(g*g-d*d-e*e+b*b)/(2*(b-e)),i=1,j=-2*f,k=e*e+q*q-2*e*q+f*f-g*g,l=Math.sqrt(j*j-4*i*k);if(0>l)return!1;if(l>=0){var m=q,n=(-j-l)/2*i;this.intersectionPointStart=new JenScript.Point2D(m,n);var o=q,p=(-j+l)/2*i;return this.intersectionPointEnd=new JenScript.Point2D(o,p),this.theta1Radian1=this.getPolarAngle(e,f,m,n),this.theta1Radian2=this.getPolarAngle(e,f,o,p),!0}}},paintDebug:function(a){var b=this.createPath();if(void 0!==b){this.solveIntersectionPoints();var c=(new JenScript.SVGPath).moveTo(this.x1,this.y1).lineTo(this.x0,this.y0);if(a.insertSVG(c.stroke(JenScript.Color.brighten(JenScript.RosePalette.CALYPSOBLUE,30).toHexString()).fillNone().toSVG()),a.insertSVG(this.arc0.stroke("black").fillNone().toSVG()),a.insertSVG(this.arc1.stroke("darkgray").fillNone().toSVG()),void 0!==this.intersectionPointStart&&void 0!==this.intersectionPointEnd){var d=(new JenScript.SVGPath).moveTo(this.x1,this.y1).lineTo(this.intersectionPointStart.x,this.intersectionPointStart.y);a.insertSVG(d.stroke("yellow").fillNone().toSVG());var e=(new JenScript.SVGPath).moveTo(this.x1,this.y1).lineTo(this.intersectionPointEnd.x,this.intersectionPointEnd.y);a.insertSVG(e.stroke("yellow").fillNone().toSVG());var f=(new JenScript.SVGCircle).center(this.intersectionPointStart.getX(),this.intersectionPointStart.getY()).radius(4),g=(new JenScript.SVGCircle).center(this.intersectionPointEnd.getX(),this.intersectionPointEnd.getY()).radius(4),h="Clockwise"==this.direction?"cyan":"orange";this.drawPath(a,b,h),a.insertSVG(f.fill(JenScript.RosePalette.LIME).toSVG()),a.insertSVG(g.fill(JenScript.RosePalette.LIME).toSVG())}}},drawPath:function(a,b,c){if(void 0!=b){a.insertSVG(b.stroke(c).strokeWidth(2).fillNone().toSVG());var d=new JenScript.GeometryPath(b.toSVG()),e=this.creatTickDirection(b,d.lengthOfPath()/2,5),f=this.creatTickDirection(b,d.lengthOfPath()/4,4),g=this.creatTickDirection(b,3*d.lengthOfPath()/4,4);void 0!=e&&a.insertSVG(e.fill(c).toSVG()),void 0!=f&&a.insertSVG(f.fill(c).toSVG()),void 0!=g&&a.insertSVG(g.fill(c).toSVG())}},creatTickDirection:function(a,b,c){var d=new JenScript.GeometryPath(a.toSVG()),e=c;if(b-e>0&&b+2*e<d.lengthOfPath()){var f=new JenScript.SVGPath,g=d.pointAtLength(b+2*e),h=d.orthoLeftPointAtLength(b-e,e),i=d.orthoRightPointAtLength(b-e,e);return f.moveTo(g.getX(),g.getY()),f.lineTo(i.getX(),i.getY()),f.lineTo(h.getX(),h.getY()),f.close(),f}return void 0}}),JenScript.PathArcAutoBinder=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.PathArcAutoBinder,JenScript.AbstractPathAutoBinder),JenScript.Model.addMethods(JenScript.PathArcAutoBinder,{__init:function(a){a=a||{},this.intersectionArc,JenScript.AbstractPathAutoBinder.call(this,a)},getIntersectionArc:function(){return this.intersectionArc},setIntersectionArc:function(a){this.intersectionArc=a},createPath:function(){var a=function(a,b,c){return{x:a.x+b*Math.cos(c),y:a.y-b*Math.sin(c)}},b=this.x1,c=this.y1,d=this.r1,e=this.theta1Radian1,f=this.theta1Radian2,g=new JenScript.SVGPath;if(this.polarDegree>0&&this.polarDegree<180)if(this.theta1Radian2>this.theta1Radian1){var h=JenScript.Math.toDegrees(this.theta1Radian2)-JenScript.Math.toDegrees(this.theta1Radian1),i=h>=180||-180>=h?1:0;if("AntiClockwise"==this.direction){var j=a({x:b,y:c},d,e),k=a({x:b,y:c},d,e+JenScript.Math.toRadians(h));g.moveTo(j.x,j.y).arcTo(d,d,0,i,0,k.x,k.y)}else if("Clockwise"==this.direction){var j=a({x:b,y:c},d,f),k=a({x:b,y:c},d,f-JenScript.Math.toRadians(h));g.moveTo(j.x,j.y).arcTo(d,d,0,i,1,k.x,k.y)}}else{var h=Math.abs(JenScript.Math.toDegrees(2*Math.PI+f)-JenScript.Math.toDegrees(e)),i=h>=180||-180>=h?1:0;if("AntiClockwise"==this.direction){var j=a({x:b,y:c},d,e),k=a({x:b,y:c},d,e+JenScript.Math.toRadians(h));g.moveTo(j.x,j.y).arcTo(d,d,0,i,0,k.x,k.y)}else if("Clockwise"==this.direction){
var j=a({x:b,y:c},d,f),k=a({x:b,y:c},d,f-JenScript.Math.toRadians(h));g.moveTo(j.x,j.y).arcTo(d,d,0,i,1,k.x,k.y)}}else if(this.polarDegree>180&&this.polarDegree<360)if(this.theta1Radian2>this.theta1Radian1){var h=360-(JenScript.Math.toDegrees(f)-JenScript.Math.toDegrees(e)),i=h>=180||-180>=h?1:0;if("AntiClockwise"==this.direction){var j=a({x:b,y:c},d,f),k=a({x:b,y:c},d,f+JenScript.Math.toRadians(h));g.moveTo(j.x,j.y).arcTo(d,d,0,i,0,k.x,k.y)}else if("Clockwise"==this.direction){var j=a({x:b,y:c},d,e),k=a({x:b,y:c},d,e-JenScript.Math.toRadians(h));g.moveTo(j.x,j.y).arcTo(d,d,0,i,1,k.x,k.y)}}else{var h=JenScript.Math.toDegrees(e)-JenScript.Math.toDegrees(f),i=h>=180||-180>=h?1:0;if("AntiClockwise"==this.direction){var j=a({x:b,y:c},d,f),k=a({x:b,y:c},d,f+JenScript.Math.toRadians(h));g.moveTo(j.x,j.y).arcTo(d,d,0,i,0,k.x,k.y)}else if("Clockwise"==this.direction){var j=a({x:b,y:c},d,e),k=a({x:b,y:c},d,e-JenScript.Math.toRadians(h));g.moveTo(j.x,j.y).arcTo(d,d,0,i,1,k.x,k.y)}}else if(0===this.polarDegree){var h=JenScript.Math.toDegrees(f)-JenScript.Math.toDegrees(e),i=h>=180||-180>=h?1:0;if("AntiClockwise"===this.direction){var j=a({x:b,y:c},d,e),k=a({x:b,y:c},d,e+JenScript.Math.toRadians(h));g.moveTo(j.x,j.y).arcTo(d,d,0,i,0,k.x,k.y)}else if("Clockwise"===this.direction){var j=a({x:b,y:c},d,f),k=a({x:b,y:c},d,f-JenScript.Math.toRadians(h));g.moveTo(j.x,j.y).arcTo(d,d,0,i,1,k.x,k.y)}}else if(180===this.polarDegree){var h=360-JenScript.Math.toDegrees(f)+JenScript.Math.toDegrees(e),i=h>=180||-180>=h?1:0;if("AntiClockwise"===this.direction){var j=a({x:b,y:c},d,f),k=a({x:b,y:c},d,f+JenScript.Math.toRadians(h));g.moveTo(j.x,j.y).arcTo(d,d,0,i,0,k.x,k.y)}else if("Clockwise"===this.direction){var j=a({x:b,y:c},d,e),k=a({x:b,y:c},d,e-JenScript.Math.toRadians(h));g.moveTo(j.x,j.y).arcTo(d,d,0,i,1,k.x,k.y)}}return this.intersectionArc=g,this.intersectionArc}}),JenScript.PathArcManualBinder=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.PathArcManualBinder,JenScript.PathBinder),JenScript.Model.addMethods(JenScript.PathArcManualBinder,{_init:function(a){a=a||{},this.radius=a.radius,this.startAngleDegree=a.startAngleDegree,this.extendsAngleDegree=a.extendsAngleDegree,this.shiftRadius=void 0!==a.shiftRadius?a.shiftRadius:0,this.shiftAngleDegree=void 0!==a.shiftAngleDegree?a.shiftAngleDegree:0},bindPath:function(a){var b=a.getCenterDevice().getX(),c=a.getCenterDevice().getY(),d=b+this.shiftRadius*Math.cos(JenScript.Math.toRadians(this.shiftAngleDegree)),e=c-this.shiftRadius*Math.sin(JenScript.Math.toRadians(this.shiftAngleDegree)),f=function(a,b,c){return{x:a.x+b*Math.cos(JenScript.Math.toRadians(c)),y:a.y-b*Math.sin(JenScript.Math.toRadians(c))}},g={x:d,y:e},h=f(g,this.radius,this.startAngleDegree),i=f(g,this.radius,this.startAngleDegree+this.extendsAngleDegree),j=new JenScript.SVGPath,k=this.extendsAngleDegree>=180||this.extendsAngleDegree<=-180?1:0,l=this.extendsAngleDegree<0?1:0;return j.moveTo(h.x,h.y).arcTo(this.radius,this.radius,0,k,l,i.x,i.y),j}}),JenScript.PathCubicAutoBinder=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.PathCubicAutoBinder,JenScript.AbstractPathAutoBinder),JenScript.Model.addMethods(JenScript.PathCubicAutoBinder,{__init:function(a){a=a||{},this.intersectionCubicCurve,this.controlOffsetRadius=10,this.controlOffsetAngleDegree=10,a.name="JenScript.PathCubicAutoBinder",JenScript.AbstractPathAutoBinder.call(this,a)},getIntersectionCubicCurve:function(){return this.intersectionCubicCurve},setIntersectionCubicCurve:function(a){this.intersectionCubicCurve=a},getControlOffsetRadius:function(){return this.controlOffsetRadius},setControlOffsetRadius:function(a){if(0>a)throw new Error("control offset radius must be positive");this.controlOffsetRadius=a},getControlOffsetAngleDegree:function(){return this.controlOffsetAngleDegree},setControlOffsetAngleDegree:function(a){if(0>a)throw new Error("control offset angle must be positive");this.controlOffsetAngleDegree=a},createCubicStart2End:function(){return(new JenScript.SVGPath).moveTo(this.intersectionPointStart.getX(),this.intersectionPointStart.getY()).cubicTo(this.getControlPoint1().getX(),this.getControlPoint1().getY(),this.getControlPoint2().getX(),this.getControlPoint2().getY(),this.intersectionPointEnd.getX(),this.intersectionPointEnd.getY())},createCubicEnd2Start:function(){return(new JenScript.SVGPath).moveTo(this.intersectionPointEnd.getX(),this.intersectionPointEnd.getY()).cubicTo(this.getControlPoint1().getX(),this.getControlPoint1().getY(),this.getControlPoint2().getX(),this.getControlPoint2().getY(),this.intersectionPointStart.getX(),this.intersectionPointStart.getY())},createPath:function(){return void 0===this.intersectionPointStart||void 0===this.intersectionPointEnd?void 0:(this.polarDegree>=0&&this.polarDegree<180?"AntiClockwise"===this.direction?this.intersectionCubicCurve=this.createCubicStart2End():"Clockwise"===this.direction&&(this.intersectionCubicCurve=this.createCubicEnd2Start()):this.polarDegree>=180&&this.polarDegree<360&&("AntiClockwise"===this.direction?this.intersectionCubicCurve=this.createCubicEnd2Start():"Clockwise"===this.direction&&(this.intersectionCubicCurve=this.createCubicStart2End())),this.intersectionCubicCurve)},getControlPoint1:function(){if("Clockwise"===this.direction){var a=this.x1+(this.radius+this.controlOffsetRadius)*Math.cos(JenScript.Math.toRadians(this.polarDegree)+Math.PI+JenScript.Math.toRadians(this.controlOffsetAngleDegree)),b=this.y1-(this.radius+this.controlOffsetRadius)*Math.sin(JenScript.Math.toRadians(this.polarDegree)+Math.PI+JenScript.Math.toRadians(this.controlOffsetAngleDegree));return new JenScript.Point2D(a,b)}if("AntiClockwise"===this.direction){var a=this.x1+(this.radius+this.controlOffsetRadius)*Math.cos(JenScript.Math.toRadians(this.polarDegree)+Math.PI-JenScript.Math.toRadians(this.controlOffsetAngleDegree)),b=this.y1-(this.radius+this.controlOffsetRadius)*Math.sin(JenScript.Math.toRadians(this.polarDegree)+Math.PI-JenScript.Math.toRadians(this.controlOffsetAngleDegree));return new JenScript.Point2D(a,b)}},getControlPoint2:function(){if("Clockwise"===this.direction){var a=this.x1+(this.radius+this.controlOffsetRadius)*Math.cos(JenScript.Math.toRadians(this.polarDegree)+Math.PI-JenScript.Math.toRadians(this.controlOffsetAngleDegree)),b=this.y1-(this.radius+this.controlOffsetRadius)*Math.sin(JenScript.Math.toRadians(this.polarDegree)+Math.PI-JenScript.Math.toRadians(this.controlOffsetAngleDegree));return new JenScript.Point2D(a,b)}if("AntiClockwise"===this.direction){var a=this.x1+(this.radius+this.controlOffsetRadius)*Math.cos(JenScript.Math.toRadians(this.polarDegree)+Math.PI+JenScript.Math.toRadians(this.controlOffsetAngleDegree)),b=this.y1-(this.radius+this.controlOffsetRadius)*Math.sin(JenScript.Math.toRadians(this.polarDegree)+Math.PI+JenScript.Math.toRadians(this.controlOffsetAngleDegree));return new JenScript.Point2D(a,b)}},paintDebug:function(a){var b=this.createPath();if(void 0!==b){this.solveIntersectionPoints();var c=(new JenScript.SVGPath).moveTo(this.x1,this.y1).lineTo(this.x0,this.y0);if(a.insertSVG(c.stroke(JenScript.Color.brighten(JenScript.RosePalette.CALYPSOBLUE,30).toHexString()).fillNone().toSVG()),a.insertSVG(this.arc0.stroke("black").fillNone().toSVG()),a.insertSVG(this.arc1.stroke("darkgray").fillNone().toSVG()),void 0!==this.intersectionPointStart&&void 0!==this.intersectionPointEnd){var d=(new JenScript.SVGPath).moveTo(this.x1,this.y1).lineTo(this.intersectionPointStart.x,this.intersectionPointStart.y);a.insertSVG(d.stroke("yellow").fillNone().toSVG());var e=(new JenScript.SVGPath).moveTo(this.x1,this.y1).lineTo(this.intersectionPointEnd.x,this.intersectionPointEnd.y);a.insertSVG(e.stroke("yellow").fillNone().toSVG());var f=(new JenScript.SVGCircle).center(this.intersectionPointStart.getX(),this.intersectionPointStart.getY()).radius(4),g=(new JenScript.SVGCircle).center(this.intersectionPointEnd.getX(),this.intersectionPointEnd.getY()).radius(4),h="Clockwise"==this.direction?"cyan":"orange";this.drawPath(a,b,h),a.insertSVG(f.fill(JenScript.RosePalette.LIME).toSVG()),a.insertSVG(g.fill(JenScript.RosePalette.LIME).toSVG())}}}}),JenScript.PathQuadAutoBinder=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.PathQuadAutoBinder,JenScript.AbstractPathAutoBinder),JenScript.Model.addMethods(JenScript.PathQuadAutoBinder,{__init:function(a){a=a||{},this.intersectionQuadCurve,this.controlOffsetRadius=10,a.name="JenScript.PathQuadAutoBinder",JenScript.AbstractPathAutoBinder.call(this,a)},getIntersectionQuadCurve:function(){return this.intersectionQuadCurve},setIntersectionQuadCurve:function(a){this.intersectionQuadCurve=a},getControlOffsetRadius:function(){return this.controlOffsetRadius},setControlOffsetRadius:function(a){if(this.controlOffsetRadius<0)throw new Error("control offset radius must be positive");this.controlOffsetRadius=a},createQuadStart2End:function(){return(new JenScript.SVGPath).moveTo(this.intersectionPointStart.getX(),this.intersectionPointStart.getY()).quadTo(this.getControlPoint().getX(),this.getControlPoint().getY(),this.intersectionPointEnd.getX(),this.intersectionPointEnd.getY())},createQuadEnd2Start:function(){return(new JenScript.SVGPath).moveTo(this.intersectionPointEnd.getX(),this.intersectionPointEnd.getY()).quadTo(this.getControlPoint().getX(),this.getControlPoint().getY(),this.intersectionPointStart.getX(),this.intersectionPointStart.getY())},createPath:function(){return void 0===this.intersectionPointStart||void 0==this.intersectionPointEnd?void 0:(this.polarDegree>=0&&this.polarDegree<180?"AntiClockwise"===this.direction?this.intersectionQuadCurve=this.createQuadStart2End():this.direction==Direction.Clockwise&&(this.intersectionQuadCurve=this.createQuadEnd2Start()):this.polarDegree>=180&&this.polarDegree<360&&("AntiClockwise"===this.direction?this.intersectionQuadCurve=this.createQuadEnd2Start():this.direction==Direction.Clockwise&&(this.intersectionQuadCurve=this.createQuadStart2End())),this.intersectionQuadCurve)},getControlPoint:function(){var a=this.x1+(this.radius+this.controlOffsetRadius)*Math.cos(JenScript.Math.toRadians(this.polarDegree)+Math.PI),b=this.y1-(this.radius+this.controlOffsetRadius)*Math.sin(JenScript.Math.toRadians(this.polarDegree)+Math.PI);return new JenScript.Point2D(a,b)},paintDebug:function(a){var b=this.createPath();if(void 0!==b){this.solveIntersectionPoints();var c=(new JenScript.SVGPath).moveTo(this.x1,this.y1).lineTo(this.x0,this.y0);if(a.insertSVG(c.stroke(JenScript.Color.brighten(JenScript.RosePalette.CALYPSOBLUE,30).toHexString()).fillNone().toSVG()),a.insertSVG(this.arc0.stroke("black").fillNone().toSVG()),a.insertSVG(this.arc1.stroke("darkgray").fillNone().toSVG()),void 0!==this.intersectionPointStart&&void 0!==this.intersectionPointEnd){var d=(new JenScript.SVGPath).moveTo(this.x1,this.y1).lineTo(this.intersectionPointStart.x,this.intersectionPointStart.y);a.insertSVG(d.stroke("yellow").fillNone().toSVG());var e=(new JenScript.SVGPath).moveTo(this.x1,this.y1).lineTo(this.intersectionPointEnd.x,this.intersectionPointEnd.y);a.insertSVG(e.stroke("yellow").fillNone().toSVG());var f=(new JenScript.SVGCircle).center(this.intersectionPointStart.getX(),this.intersectionPointStart.getY()).radius(4),g=(new JenScript.SVGCircle).center(this.intersectionPointEnd.getX(),this.intersectionPointEnd.getY()).radius(4),h="Clockwise"==this.direction?"cyan":"orange";this.drawPath(a,b,h),a.insertSVG(f.fill(JenScript.RosePalette.LIME).toSVG()),a.insertSVG(g.fill(JenScript.RosePalette.LIME).toSVG())}}}})}(),function(){JenScript.GaugeNeedlePainter=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.GaugeNeedlePainter,{init:function(a){a=a||{}},paintNeedle:function(){throw new Error("JenScript.GaugeNeedlePainter, paintNeedle method should be provide by override")}}),JenScript.GaugeNeedleClassicPainter=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.GaugeNeedleClassicPainter,JenScript.GaugeNeedlePainter),JenScript.Model.addMethods(JenScript.GaugeNeedleClassicPainter,{_init:function(a){a=a||{},JenScript.GaugeNeedlePainter.call(this,a)},paintNeedle:function(a,b){var c=b.getNeedleBaseAnchorBinder().bindAnchor(b.getBody().getGauge()),d=b.getNeedleValueAnchorBinder().bindAnchor(b.getBody().getGauge()),e=(new JenScript.SVGPath).moveTo(c.x,c.y).lineTo(d.x,d.y),f=e.strokeWidth(4).strokeLineCap("round").opacity(.6).stroke("black").toSVG(),g=e.strokeWidth(10).strokeLineCap("round").opacity(.4).stroke(JenScript.RosePalette.AEGEANBLUE).toSVG();a.insertSVG(g),a.insertSVG(f);var h=14,i={percents:["0%","100%"],colors:[JenScript.RosePalette.AEGEANBLUE,"black"]},j="gradient"+JenScript.sequenceId++,k=(new JenScript.SVGRadialGradient).Id(j).center(c.getX(),c.getY()).focus(c.getX(),c.getY()).radius(h).shade(i.percents,i.colors).toSVG();a.definesSVG(k);var l=(new JenScript.SVGCircle).center(c.getX(),c.getY()).radius(h);a.insertSVG(l.fillURL(j).fillOpacity(.6).strokeOpacity(.5).strokeWidth(2).stroke(JenScript.RosePalette.AEGEANBLUE).toSVG())}})}(),function(){JenScript.GaugeMetricsPath=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.GaugeMetricsPath,JenScript.GeneralMetricsPath),JenScript.Model.addMethods(JenScript.GaugeMetricsPath,{_init:function(a){console.log("create gauge metrics path"),a=a||{},a.nature="Device",this.currentValue,this.needleBaseAnchorBinder,this.needleValueAnchorBinder,this.body,this.pathBinder,this.gaugeNeedlePainter,JenScript.GeneralMetricsPath.call(this,a)},getGaugeNeedlePainter:function(){return this.gaugeNeedlePainter},setGaugeNeedlePainter:function(a){this.gaugeNeedlePainter=a},getCurrentValue:function(){return this.currentValue},setCurrentValue:function(a){if(this.currentValue<this.getMin()||this.currentValue>this.getMax())throw new Error("Gauge Metrics out of range. "+this.currentValue+" [min,max] path range.");this.currentValue=a},getPathBinder:function(){return this.pathBinder},setPathBinder:function(a){void 0!==a&&a.setMetricsPath(this),this.pathBinder=a},getNeedleBaseAnchorBinder:function(){return this.needleBaseAnchorBinder},setNeedleBaseAnchorBinder:function(a){a.setMetricsPath(this),this.needleBaseAnchorBinder=a},getNeedleValueAnchorBinder:function(){return this.needleValueAnchorBinder},setNeedleValueAnchorBinder:function(a){a.setMetricsPath(this),this.needleValueAnchorBinder=a},getBody:function(){return this.body},setBody:function(a){this.body=a},draw:function(a){console.log("gauge metrics path draw"),this.graphicsContext=a,this.getMetrics()}})}(),function(){JenScript.RadialGauge=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.RadialGauge,{init:function(a){this.x=void 0!==a.x?a.x:0,this.y=void 0!==a.y?a.y:0,this.radius=a.radius,this.projection,this.envelop,this.glasses=[],this.backgrounds=[],this.bodies=[]},getCenterDevice:function(){var a=this.getProjection().userToPixelX(this.x),b=this.getProjection().userToPixelY(this.y);return new JenScript.Point2D(a,b)},getRadialPointAt:function(a,b){var c=this.getCenterDevice(),d=c.getX(),e=c.getY(),f=d+a*Math.cos(JenScript.Math.toRadians(b)),g=e-a*Math.sin(JenScript.Math.toRadians(b));return new JenScript.Point2D(f,g)},getBackgrounds:function(){return this.backgrounds},setBackgrounds:function(a){this.backgrounds=a},addBackground:function(a){this.backgrounds[this.backgrounds.length]=a},getProjection:function(){return this.projection},setProjection:function(a){this.projection=a},getRadius:function(){return this.radius},setRadius:function(a){this.radius=a},getX:function(){return this.x},setX:function(a){this.x=a},getY:function(){return this.y},setY:function(a){this.y=a},getEnvelop:function(){return this.envelop},setEnvelop:function(a){a.setGauge(this),this.envelop=a},getGlasses:function(){return this.glasses},setGlasses:function(a){for(var b=0;b<a.length;b++)this.addGlass(a[b])},addGlass:function(a){a.setGauge(this),this.glasses[this.glasses.length]=a},getBodies:function(){return this.bodies},setBodies:function(a){for(var b=0;b<a.length;b++)this.addBody(a[b])},addBody:function(a){a.setGauge(this),this.bodies[this.bodies.length]=a}})}(),function(){JenScript.GaugeCompass=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.GaugeCompass,JenScript.RadialGauge),JenScript.Model.addMethods(JenScript.GaugeCompass,{_init:function(a){a=a||{},this.gaugeRadius=110,a.radius=110,JenScript.RadialGauge.call(this,a);var b=new JenScript.Cisero;this.setEnvelop(b);var c=new JenScript.TextureCircularBackground;this.addBackground(c),this.body=new JenScript.GaugeBody,this.addBody(this.body),this.createSecondaryMetrics()},createSecondaryMetrics:function(){this.secondaryPathManager=new JenScript.GaugeMetricsPath,this.secondaryPathManager.setRange(0,360),this.secondaryPathManager.setPathBinder(new JenScript.PathArcManualBinder({radius:this.gaugeRadius-50,startAngleDegree:0,extendsAngleDegree:359})),this.body.registerGaugeMetricsPath(this.secondaryPathManager);var a=new JenScript.GlyphMetric;a.setValue(30),a.setMetricsLabel("30"),this.secondaryPathManager.addMetric(a),a=new JenScript.GlyphMetric,a.setValue(60),a.setMetricsLabel("60"),this.secondaryPathManager.addMetric(a),a=new JenScript.GlyphMetric,a.setValue(120),a.setMetricsLabel("120"),this.secondaryPathManager.addMetric(a),a=new JenScript.GlyphMetric,a.setValue(150),a.setMetricsLabel("150"),this.secondaryPathManager.addMetric(a),a=new JenScript.GlyphMetric,a.setValue(210),a.setMetricsLabel("210"),this.secondaryPathManager.addMetric(a),a=new JenScript.GlyphMetric,a.setValue(240),a.setMetricsLabel("240"),this.secondaryPathManager.addMetric(a),a=new JenScript.GlyphMetric,a.setValue(300),this.secondaryPathManager.addMetric(a),a=new JenScript.GlyphMetric,a.setValue(330),a.setMetricsLabel("330"),this.secondaryPathManager.addMetric(a)}})}(),function(){JenScript.UnivariateRealFunction=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.UnivariateRealFunction,{init:function(){},value:function(){}}),JenScript.DifferentiableUnivariateRealFunction=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.DifferentiableUnivariateRealFunction,JenScript.UnivariateRealFunction),JenScript.Model.addMethods(JenScript.DifferentiableUnivariateRealFunction,{_init:function(a){JenScript.UnivariateRealFunction.call(this,a)},derivative:function(){}}),JenScript.UnivariateRealInterpolator=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.UnivariateRealInterpolator,{init:function(){},interpolate:function(){}}),JenScript.PolynomialFunction=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.PolynomialFunction,JenScript.DifferentiableUnivariateRealFunction),JenScript.Model.addMethods(JenScript.PolynomialFunction,{__init:function(a){a=a||{};var b=a.coefficients,c=b.length;if(0==c)throw new Error("coefficients should be supplied");for(;c>1&&0==b[c-1];)--c;this.coefficients=[];for(var d=0;c>d;d++)this.coefficients[d]=b[d];JenScript.DifferentiableUnivariateRealFunction.call(this,a)},value:function(a){return this.evaluate(this.coefficients,a)},degree:function(){return this.coefficients.length-1},getCoefficients:function(){return this.coefficients.clone()},evaluate:function(a,b){var c=a.length;if(0==c)throw new Error("coefficients should be supplied");for(var d=a[c-1],e=c-2;e>=0;e--)d=b*d+a[e];return d},add:function(a){for(var b=this.min(this.coefficients.length,a.coefficients.length),c=this.max(this.coefficients.length,a.coefficients.length),d=[],e=0;b>e;++e)d[e]=this.coefficients[e]+a.coefficients[e];if(coefficients.length<a.coefficients.length)for(var e=b;c-b>e;e++){var f=a.coefficients[e];d[d.length]=f}else for(var e=b;c-b>e;e++){var f=this.coefficients[e];d[d.length]=f}return new JenScript.PolynomialFunction(d)},subtract:function(a){for(var b=this.min(this.coefficients.length,a.coefficients.length),c=this.max(this.coefficients.length,a.coefficients.length),d=[],e=0;b>e;++e)d[e]=this.coefficients[e]-a.coefficients[e];if(this.coefficients.length<a.coefficients.length)for(var e=b;c>e;++e)d[e]=-a.coefficients[e];else for(var e=b;c-b>e;e++){var f=this.coefficients[e];d[d.length]=f}return new JenScript.PolynomialFunction(d)},negate:function(){for(var a=[],b=0;b<this.coefficients.length;++b)a[b]=-this.coefficients[b];return new JenScript.PolynomialFunction(a)},multiply:function(a){for(var b=[],c=0;c<this.coefficients.length+a.coefficients.length-1;++c){b[c]=0;for(var d=this.max(0,c+1-a.coefficients.length);d<this.min(this.coefficients.length,c+1);++d)b[c]+=this.coefficients[d]*a.coefficients[c-d]}return new JenScript.PolynomialFunction(b)},differentiate:function(a){var b=a.length;if(0==b)throw new Error("coefficients should be supplied");if(1==b)return[0];for(var c=[],d=b-1;d>0;d--)c[d-1]=d*this.coefficients[d];return c},polynomialDerivative:function(){return new JenScript.PolynomialFunction({coefficients:this.differentiate(this.coefficients)})},derivative:function(){return this.polynomialDerivative()},min:function(a,b){return b>=a?a:b},max:function(a,b){return b>=a?b:a},abs:function(a){return 0>a?-a:0==a?0:a},toString:function(){return"JenScript.PolynomialFunction"}}),JenScript.PolynomialSplineFunction=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.PolynomialSplineFunction,JenScript.DifferentiableUnivariateRealFunction),JenScript.Model.addMethods(JenScript.PolynomialSplineFunction,{__init:function(a){if(a=a||{},this.knots=[],this.polynomials=[],this.n,this.knots=a.knots,this.polynomials=a.polynomials,this.knots.length<2)throw new Error("spline partition must have at least 2 points");if(this.knots.length-1!=this.polynomials.length)throw new Error("number of polynomial interpolants must match the number of segments");if(!this.isStrictlyIncreasing(this.knots))throw new Error("knot values must be strictly increasing");this.n=this.knots.length-1},binarySearch:function(a,b){for(var c=0,d=a.length-1;d>=c;){var e=c+d>>>1,f=a[e];if(b>f)c=e+1;else{if(!(f>b))return e;d=e-1}}return-(c+1)},value:function(a){if(a<this.knots[0]||a>this.knots[this.n])throw new Error("value "+a+" is outside function domain.");var b=this.binarySearch(this.knots,a);return 0>b&&(b=-b-2),b>=this.polynomials.length&&b--,this.polynomials[b].value(a-this.knots[b])},derivative:function(){return this.polynomialSplineDerivative()},polynomialSplineDerivative:function(){for(var a=[],b=0;b<this.n;b++)a[b]=this.polynomials[b].polynomialDerivative();return new JenScript.PolynomialSplineFunction({knots:knots,polynomials:a})},getN:function(){return this.n},getPolynomials:function(){for(var a=[],b=0;b<this.polynomials.length;b++)a[b]=this.polynomials[b];return a},getKnots:function(){for(var a=[],b=0;b<this.knots.length;b++)a[b]=this.knots[b];return a},isStrictlyIncreasing:function(a){for(var b=1;b<a.length;++b)if(a[b-1]>=a[b])return!1;return!0}}),JenScript.SplineInterpolator=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.SplineInterpolator,JenScript.UnivariateRealInterpolator),JenScript.Model.addMethods(JenScript.SplineInterpolator,{_init:function(a){a=a||{}},interpolate:function(a,b){if(a.length!=b.length)throw new Error("x and y array values dimensions mismatch");if(a.length<3)throw new Error("the number of points must be greater than 3");var c=a.length-1;this.checkOrder(a,"INCREASING",!0);for(var d=[],e=0;c>e;e++)d[e]=a[e+1]-a[e];var f=[],g=[];f[0]=0,g[0]=0;for(var h=0,e=1;c>e;e++)h=2*(a[e+1]-a[e-1])-d[e-1]*f[e-1],f[e]=d[e]/h,g[e]=(3*(b[e+1]*d[e-1]-b[e]*(a[e+1]-a[e-1])+b[e-1]*d[e])/(d[e-1]*d[e])-d[e-1]*g[e-1])/h;var i=[],j=[],k=[];g[c]=0,j[c]=0;for(var l=c-1;l>=0;l--)j[l]=g[l]-f[l]*j[l+1],i[l]=(b[l+1]-b[l])/d[l]-d[l]*(j[l+1]+2*j[l])/3,k[l]=(j[l+1]-j[l])/(3*d[l]);for(var m=[],n=[],e=0;c>e;e++)n[0]=b[e],n[1]=i[e],n[2]=j[e],n[3]=k[e],m[e]=new JenScript.PolynomialFunction({coefficients:n});return new JenScript.PolynomialSplineFunction({knots:a,polynomials:m})},checkOrder:function(a,b,c){for(var d=a[0],e=!0,f=a.length,g=1;f>g;g++){switch(b){case"INCREASING":c?a[g]<=d&&(e=!1):a[g]<d&&(e=!1);break;case"DECREASING":c?a[g]>=d&&(e=!1):a[g]>d&&(e=!1);break;default:throw new Error("checkOrder error")}if(!e)throw new Error("Spline interpolator can not be used with values which are not order");d=a[g]}}})}(),function(){JenScript.FunctionNature=function(a){this.nature=a,this.isXFunction=function(){return void 0===this.nature?!1:this.nature instanceof JenScript.FunctionNature?this.nature.isXFunction():"xfunction"===this.nature.toLowerCase()||"x"===this.nature.toLowerCase()?!0:!1},this.isYFunction=function(){return void 0===this.nature?!1:this.nature instanceof JenScript.FunctionNature?this.nature.isYFunction():"yfunction"===this.nature.toLowerCase()||"y"===this.nature.toLowerCase()?!0:!1},this.toString=function(){return this.isXFunction()?"x":this.isYFunction()?"y":"undefined nature"}}}(),function(){JenScript.PathSegment=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.PathSegment,{init:function(a){this.segmentUserStart=a.userStart,this.segmentUserEnd=a.userEnd,this.segmentDeviceStart=a.deviceStart,this.segmentDeviceEnd=a.deviceEnd},getSegmentDeviceStart:function(){return this.segmentDeviceStart},setSegmentDeviceStart:function(a){this.segmentDeviceStart=a},getSegmentDeviceEnd:function(){return this.segmentDeviceEnd},setSegmentDeviceEnd:function(a){this.segmentDeviceEnd=a},match:function(a){return this.sourceFunction.getNature().isXFunction()?a>=this.segmentUserStart.getX()&&a<=this.segmentUserEnd.getX():this.sourceFunction.getNature().isYFunction()?a>=this.segmentUserStart.getY()&&a<=this.segmentUserEnd.getY():void 0},getUserPoint:function(a){if(this.sourceFunction.getNature().isXFunction()){var b=this.getCoefficient()*a+this.getConstant();return new JenScript.Point2D(a,b)}if(this.sourceFunction.getNature().isYFunction()){var c=this.getCoefficient()*a+this.getConstant();return new JenScript.Point2D(c,a)}},getSegmentUserStart:function(){return this.segmentUserStart},setSegmentUserStart:function(a){this.segmentUserStart=a},getSegmentUserEnd:function(){return this.segmentUserEnd},setSegmentUserEnd:function(a){this.segmentUserEnd=a},deviceLength:function(){var a=Math.pow(this.segmentDeviceStart.getX()-this.segmentDeviceEnd.getX(),2),b=Math.pow(this.segmentDeviceStart.getY()-this.segmentDeviceEnd.getY(),2);return Math.sqrt(a+b)},getCoefficient:function(){return this.sourceFunction.getNature().isXFunction()?(this.segmentUserEnd.getY()-this.segmentUserStart.getY())/(this.segmentUserEnd.getX()-this.segmentUserStart.getX()):this.sourceFunction.getNature().isYFunction()?(this.segmentUserEnd.getX()-this.segmentUserStart.getX())/(this.segmentUserEnd.getY()-this.segmentUserStart.getY()):void 0},getConstant:function(){return this.sourceFunction.getNature().isXFunction()?this.segmentUserStart.getY()-this.getCoefficient()*this.segmentUserStart.getX():this.sourceFunction.getNature().isYFunction()?this.segmentUserStart.getX()-this.getCoefficient()*this.segmentUserStart.getY():void 0},toString:function(){return"PathSegment [segmentUserStart="+this.segmentUserStart+", segmentUserEnd="+this.segmentUserEnd+"]"},equals:function(a){return void 0===a?!1:!a instanceof JenScript.PathSegment?!1:this.segmentUserStart.equals(a.segmentUserStart)&&this.segmentUserEnd.equals(a.segmentUserEnd)?!0:!1}})}(),function(){JenScript.AbstractSourceFunction=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.AbstractSourceFunction,{init:function(a){a=a||{},this.hostFunction,this.id,this.name,this.nature=new JenScript.FunctionNature(void 0!==a.nature?a.nature:"x"),this.currentFunction=void 0},clearCurrentFunction:function(){this.currentFunction=[]},getCurrentFunction:function(){if(void 0===this.currentFunction||0===this.currentFunction.length){var a=this.getHostFunction().getProjection();this.getNature().isXFunction()?this.currentFunction=this.solveFunction(a.getMinX(),a.getMaxX()):this.getNature().isYFunction()&&(this.currentFunction=this.solveFunction(a.getMinY(),a.getMaxY()))}return this.currentFunction},solveFunction:function(){throw new Error("SourceFunction Error, solveFunction method should be provided.")},evaluate:function(){},getHostFunction:function(){return this.hostFunction},setHostFunction:function(a){this.hostFunction=a},getId:function(){return this.id},setId:function(a){this.id=a},getName:function(){return this.name},setName:function(a){this.name=a},getNature:function(){return this.nature},setNature:function(a){this.nature=a}}),JenScript.UserSourceFunction=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.UserSourceFunction,JenScript.AbstractSourceFunction),JenScript.Model.addMethods(JenScript.UserSourceFunction,{_init:function(a){a=a||{},JenScript.AbstractSourceFunction.call(this,a)}}),JenScript.LineSource=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.LineSource,JenScript.UserSourceFunction),JenScript.Model.addMethods(JenScript.LineSource,{__init:function(a){a=a||{},this.xValues=a.xValues,this.yValues=a.yValues,this.source=this.createPointsFromArray(this.xValues,this.yValues),JenScript.UserSourceFunction.call(this,a)},createPointsFromArray:function(a,b){if(a.length!==b.length)throw new Error(" x and y  array values length does not match");for(var c=[],d=0;d<a.length;d++)c[c.length]=new JenScript.Point2D(a[d],b[d]);return c},setSource:function(a){this.source=a,this.clearCurrentFunction(),this.sortFunction()},getSource:function(){return this.source},solveFunction:function(a,b){var c=[],d=this.getSource();if(this.getNature().isXFunction())for(var e=0;e<d.length;e++){var f=d[e];f.x>=a&&f.x<=b&&(c[c.length]=f)}else if(this.getNature().isYFunction())for(var e=0;e<d.length;e++){var f=d[e];f.y>=a&&f.y<=b&&(c[c.length]=f)}if(c.length>=1){var g=void 0,h=void 0;if(this.getNature().isXFunction()?(g=this.previous(c[0].x),h=this.next(c[c.length-1].x)):this.getNature().isYFunction()&&(g=this.previous(c[0].y),h=this.next(c[c.length-1].y)),void 0!=g&&!g.equals(c[0])){var i=[g].concat(c);c=i}void 0==h||h.equals(c[c.length-1])||(c[c.length]=h)}else{var g=this.previous(a),h=this.next(b);if(void 0!=g){var i=[g].concat(c);c=i}null!=h&&(c[c.length]=h)}return c},next:function(a){for(var b=this.getSource(),c=0;c<b.length;c++){var d=b[c];if(this.getNature().isXFunction()){if(d.x>a)return new JenScript.Point2D(d.x,d.y)}else if(this.getNature().isYFunction()&&d.y>a)return new JenScript.Point2D(d.x,d.y)}return void 0},previous:function(a){for(var b=this.getSource(),c=b.length-1;c>=0;c--){var d=b[c];if(this.getNature().isXFunction()){if(d.x<a)return new JenScript.Point2D(d.x,d.y)}else if(this.getNature().isYFunction()&&d.y<a)return new JenScript.Point2D(d.x,d.y)}return void 0},evaluate:function(a){var b=this.previous(a),c=this.next(a);if(void 0==b||void 0==c)return void 0;var d=0,e=0;return this.getNature().isXFunction()?(d=(c.getY()-b.getY())/(c.getX()-b.getX()),e=b.getY()-d*b.getX(),new JenScript.Point2D(a,d*a+e)):this.getNature().isYFunction()?(d=(c.getX()-b.getX())/(c.getY()-b.getY()),e=b.getX()-d*b.getY(),new JenScript.Point2D(d*a+e,a)):void 0},sortFunction:function(){var a=this;this.getSource().sort(function(b,c){return a.getNature().isXFunction()?b.x>c.x?1:b.x<c.x?-1:0:a.getNature().isYFunction()?b.y>c.y?1:b.y<c.y?-1:0:void 0})}}),JenScript.SplineSource=function(a){this.___init(a)},JenScript.Model.inheritPrototype(JenScript.SplineSource,JenScript.LineSource),JenScript.Model.addMethods(JenScript.SplineSource,{___init:function(a){a=a||{},this.delta=a.delta,this.evaluateFunction=void 0,JenScript.LineSource.call(this,a)},setSource:function(a){this.source=a,this.clearCurrentFunction(),this.sortFunction(),this.evaluateFunction=void 0},evaluate:function(a){void 0===this.evaluateFunction&&this.createInterpolateFunction();var b=void 0;try{this.getNature().isXFunction()?b=new JenScript.Point2D(a,this.evaluateFunction.value(a)):this.getNature().isYFunction()&&(b=new Point2D.Double(this.evaluateFunction.value(a),a))}catch(c){console.log(c)}return b},solveFunction:function(){this.sortFunction();var a=[],b=this.getSource();if(void 0===this.evaluateFunction&&this.createInterpolateFunction(),
void 0===this.evaluateFunction)return this.getSource();var c=b[0],d=b[b.length-1];if(this.getNature().isXFunction())for(var e=c.x;e<=d.x;e+=this.delta)try{e>=c.x&&e<=d.x&&(a[a.length]=new JenScript.Point2D(e,this.evaluateFunction.value(e)))}catch(f){return this.getSource()}else if(this.getNature().isYFunction())for(var g=c.y;g<=d.y;g+=this.delta)try{g>=c.y&&g<=d.y&&(a[a.length]=new JenScript.Point2D(this.evaluateFunction.value(g),g))}catch(f){return this.getSource()}return a},createInterpolateFunction:function(){try{for(var a=this.getSource(),b=a.length,c=[],d=[],e=0;b>e;e++){var f=a[e];c[e]=f.x,d[e]=f.y}var g=new JenScript.SplineInterpolator;this.getNature().isXFunction()?this.evaluateFunction=g.interpolate(c,d):this.getNature().isYFunction()&&(this.evaluateFunction=g.interpolate(d,c))}catch(h){console.log(h)}}})}(),function(){JenScript.AbstractPathFunction=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.AbstractPathFunction,{init:function(a){a=a||{},this.name=void 0!==a.name?a.name:"Abstract Path Function",this.themeColor=void 0!==a.themeColor?a.themeColor:"red",this.strokeWidth=void 0!==a.strokeWidth?a.strokeWidth:1,this.source=a.source,this.source.hostFunction=this,this.hostPlugin,this.Id="pathfunction"+JenScript.sequenceId++,this.geometryPath,this.lengthPathDevice,this.metrics=[],this.segments=[],this.pathSegments=[],this.graphicsContext},getProjection:function(){return this.hostPlugin.getProjection()},getHostPlugin:function(){return this.hostPlugin},setHostPlugin:function(a){this.hostPlugin=a},getThemeColor:function(){return this.themeColor},setThemeColor:function(a){this.themeColor=a},getName:function(){return this.name},setName:function(a){this.name=a},setSource:function(a){this.source=a,this.source.hostFunction=this},minFunction:function(){var a=this.source.getCurrentFunction(),b=a[0];if(this.source.getNature().isXFunction())for(var c=0;c<a.length;c++){var d=a[c];d.getY()<b.getY()&&(b=d)}if(this.source.getNature().isYFunction())for(var c=0;c<a.length;c++){var d=a[c];d.getX()<b.getX()&&(b=d)}return b},maxFunction:function(){var a=this.source.getCurrentFunction(),b=a[0];if(this.source.getNature().isXFunction())for(var c=0;c<a.length;c++){var d=a[c];d.getY()>b.getY()&&(b=d)}if(this.source.getNature().isYFunction())for(var c=0;c<a.length;c++){var d=a[c];d.getX()>b.getX()&&(b=d)}return b},createPath:function(){return this.svgPathElement=(new JenScript.SVGElement).attr("id",this.Id).name("path").attr("stroke","none").attr("fill","none").attr("d",this.buildPath()).buildHTML(),this.geometryPath=new JenScript.GeometryPath(this.svgPathElement),this.lengthPathDevice=this.geometryPath.lengthOfPath(),this.svgPathElement},addMetric:function(a){this.metrics[this.metrics.length]=a,void 0!==this.hostPlugin&&this.hostPlugin.repaintPlugin()},clearMetric:function(){this.metrics=[]},getMetrics:function(){this.createPath();var a=(new JenScript.SVGElement).attr("id",this.Id+"_path").name("path").attr("stroke","none").attr("fill","none").attr("d",this.buildPath()).buildHTML();if(this.graphicsContext.deleteGraphicsElement(this.Id+"_path"),this.graphicsContext.definesSVG(a),void 0!==this.svgPathElement){if(0===this.geometryPath.lengthOfPath())return[];for(var b=0;b<this.metrics.length;b++){var c=this.metrics[b],d=this.getProjection();if(this.source.getNature().isXFunction()){if(c.getValue()<d.getMinX()||c.getValue()>d.getMaxX())return}else if(this.source.getNature().isYFunction()&&(c.getValue()<d.getMinY()||c.getValue()>d.getMaxY()))return;var e=c.getValue(),f=this.getPathSegment(e);if(void 0!==f){var g=f.getUserPoint(e),h=function(){return d.userToPixelX(g.x)},i=function(){return d.userToPixelY(g.y)},j=this.getLengthAtSegment(f),k=this.geometryPath.pointAtLength(this.getLengthAtSegment(f)),l=Math.pow(k.x-h(),2),m=Math.pow(k.y-i(),2),n=Math.sqrt(l+m),o=(new JenScript.SVGRect).origin(h(),i()).size(3,3).fill("pink");this.graphicsContext.insertSVG(o.toSVG());var p=j+n,q=p/this.lengthPathDevice*100;c.setLengthOnPath(p),c.setPercentOnPath(q),c.setMetricPointRef(this.geometryPath.pointAtLength(j+n)),c.setMetricAngle(this.geometryPath.angleAtLength(j+n).deg);var r=(new JenScript.SVGText).textAnchor("middle").attr("id",this.Id+"_metrics"+b).attr("transform","rotate("+c.getRotate()+" "+c.getMetricPointRef().x+" "+c.getMetricPointRef().y+")").fill(c.getFillColor()).stroke("white").strokeWidth(.5).fontSize(c.getFontSize()),s=(new JenScript.SVGTextPath).xlinkHref("#"+this.Id+"_path").startOffset(c.getPercentOnPath()+"%"),t=(new JenScript.SVGTSpan).dy(c.getDy()).textContent(c.getMetricsLabel());s.methodStretch(),s.spacingExact(),s.child(t.toSVG());var u=s.toSVG();r.child(u);var v=r.toSVG();this.graphicsContext.insertSVG(v)}}return this.metrics}},getMetricsPoint:function(a){if(this.source.getNature().isXFunction()){if(m.getValue()<proj.getMinX()||m.getValue()>proj.getMaxX())return}else if(this.source.getNature().isYFunction()&&(m.getValue()<proj.getMinY()||m.getValue()>proj.getMaxY()))return;var b=this.getPathSegment(a),c=b.getUserPoint(a),d=this.getLengthAtSegment(b),e=this.geometryPath.pointAtLength(this.getLengthAtSegment(b)),f=Math.pow(e.x-proj.userToPixelX(c.x),2),g=Math.pow(e.y-proj.userToPixelY(c.y),2),h=Math.sqrt(f+g);return this.geometryPath.pointAtLength(d+h)},getSegments:function(){return this.segments},getPathSegment:function(a){for(var b=0;b<this.pathSegments.length;b++)if(this.pathSegments[b].match(a))return this.pathSegments[b];return void 0},getLengthAtSegment:function(a){for(var b=0,c=0;c<this.pathSegments.length;c++){var d=this.pathSegments[c];if(d.equals(a))return b;b+=d.deviceLength()}return 0},buildPath:function(){this.segments=[],this.pathSegments=[],this.source.clearCurrentFunction();for(var a=this.source.getCurrentFunction(),b=0;b<a.length;b++){var c=a[b];0==b?this.moveTo(c.x,c.y):this.lineTo(c.x,c.y)}for(var d="",e=this.segments,f=this.getProjection(),g=function(a){return f.userToPixelX(a)},h=function(a){return f.userToPixelY(a)},b=0;b<e.length;b++){var i=e[b].x,j=e[b].y,k=g(i),l=h(j);if("M"===e[b].type&&(d=d+e[b].type+k+","+l+" "),"L"===e[b].type&&(d=d+e[b].type+k+","+l+" "),"Z"===e[b].type&&(d=d+e[b].type+" "),b<e.length-1){var m=e[b+1].x,n=e[b+1].y,o=g(m),p=h(n),q=new JenScript.PathSegment({userStart:new JenScript.Point2D(i,j),userEnd:new JenScript.Point2D(m,n),deviceStart:new JenScript.Point2D(k,l),deviceEnd:new JenScript.Point2D(o,p)});q.sourceFunction=this.source,this.pathSegments[this.pathSegments.length]=q}}return this.pathdata=d,d},paintPathFunction:function(a){this.createPath(),a.deleteGraphicsElement(this.Id);var b=(new JenScript.SVGElement).attr("id",this.Id).name("path").attr("stroke",this.themeColor).attr("stroke-width",this.strokeWidth).attr("fill","none").attr("d",this.buildPath()).buildHTML();a.insertSVG(b)},paintFunction:function(){throw new Error("Paint function should be supplied.")},registerSegment:function(a){return this.segments[this.segments.length]=a,this},moveTo:function(a,b){return this.registerSegment({type:"M",x:a,y:b}),this},lineTo:function(a,b){return this.registerSegment({type:"L",x:a,y:b}),this},close:function(){return this.registerSegment({type:"Z"}),this}})}(),function(){JenScript.Curve=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.Curve,JenScript.AbstractPathFunction),JenScript.Model.addMethods(JenScript.Curve,{_init:function(a){a=a||{},a.name="CurvePathFunction",JenScript.AbstractPathFunction.call(this,a)},paintFunction:function(a){this.paintPathFunction(a)}})}(),function(){JenScript.Area=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.Area,JenScript.AbstractPathFunction),JenScript.Model.addMethods(JenScript.Area,{_init:function(a){a=a||{},a.name="AreaPathFunction",this.areaBase=a.areaBase,this.shader=a.shader,JenScript.AbstractPathFunction.call(this,a)},createAreaPath:function(){var a=this.buildPath(),b=this.getProjection();if(this.source.getNature().isXFunction()){void 0===this.areaBase&&(this.areaBase=this.minFunction().y),this.base=b.userToPixelY(this.areaBase);var c=this.maxFunction().y;this.max=b.userToPixelY(c);var d=this.source.getCurrentFunction(),e=d[0],f=d[d.length-1];a=a+"L"+b.userToPixelX(f.x)+","+this.base+"L"+b.userToPixelX(e.x)+","+this.base+"Z"}else if(this.source.getNature().isYFunction()){void 0===this.areaBase&&(this.areaBase=this.minFunction().x);var c=(b.userToPixelX(this.areaBase),this.maxFunction().x);this.max=b.userToPixelX(c);var d=this.source.getCurrentFunction(),e=d[0],f=d[d.length-1];a=a+"L"+this.base+","+b.userToPixelY(f.y)+"L"+this.base+","+b.userToPixelY(e.y)+"Z"}return a},paintFunction:function(a){var b=this.createAreaPath(),c=this.Id+"_areagradient";a.deleteGraphicsElement(c),void 0===this.shader&&(this.shader={percents:["0%","100%"],opacity:[1,.2],colors:[this.themeColor,this.themeColor]});var d=(new JenScript.SVGLinearGradient).Id(c).from(0,this.max).to(0,this.base).shade(this.shader.percents,this.shader.colors,this.shader.opacity);this.source.getNature().isXFunction()?d.from(0,this.max).to(0,this.base):this.source.getNature().isYFunction()&&d.from(this.max,0).to(this.base,0),a.definesSVG(d.toSVG());var e=(new JenScript.SVGElement).attr("id",this.Id).name("path").attr("stroke",this.strokeWidth).attr("fill","url(#"+c+")").attr("d",b).buildHTML();a.insertSVG(e)}})}(),function(){JenScript.Scatter=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.Scatter,JenScript.AbstractPathFunction),JenScript.Model.addMethods(JenScript.Scatter,{_init:function(a){a=a||{},a.name="ScatterPathFunction",JenScript.AbstractPathFunction.call(this,a)},paintFunction:function(a){this.source.clearCurrentFunction();for(var b=this.source.getCurrentFunction(),c=this.getProjection(),d=0;d<b.length;d++){var e=b[d],f=(new JenScript.SVGRect).origin(c.userToPixelX(e.x),c.userToPixelY(e.y)).size(3,3).fill(this.getThemeColor());a.insertSVG(f.toSVG())}}})}(),function(){JenScript.FunctionPlugin=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.FunctionPlugin,JenScript.Plugin),JenScript.Model.addMethods(JenScript.FunctionPlugin,{_init:function(a){a=a||{},a.priority=100,a.name="FunctionPlugin",this.functions=[],JenScript.Plugin.call(this,a)},onProjectionRegister:function(){var a=this;this.getProjection().addProjectionListener("boundChanged",function(){a.repaintPlugin()},"FunctionPlugin projection bound changed")},addFunction:function(a){a.setHostPlugin(this),this.functions[this.functions.length]=a,this.repaintPlugin()},getFunctions:function(){return this.functions},paintFunctions:function(a,b){if(b===JenScript.ViewPart.Device)for(var c=0;c<this.getFunctions().length;c++){var d=this.getFunctions()[c];d.paintFunction(a)}},paintMetricsGlyphFunction:function(a,b){if(b===JenScript.ViewPart.Device)for(var c=0;c<this.getFunctions().length;c++){var d=this.getFunctions()[c];d.graphicsContext=a;{d.getMetrics()}}},paintPlugin:function(a,b){b===JenScript.ViewPart.Device&&(this.paintFunctions(a,b),this.paintMetricsGlyphFunction(a,b))}})}(),function(){JenScript.TitleLegendPlugin=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.TitleLegendPlugin,JenScript.Plugin),JenScript.Model.addMethods(JenScript.TitleLegendPlugin,{_init:function(a){a=a||{},a.priority=100,this.text=a.text,this.fontSize=void 0!==a.fontSize?a.fontSize:12,this.textColor=void 0!==a.textColor?a.textColor:"red",this.fontWeight=void 0!==a.fontWeight?a.fontWeight:"normal",this.part=void 0!==a.part?a.part:JenScript.ViewPart.Device,this.layout=void 0!==a.layout?a.layout:"absolute",this.x=void 0!==a.x?a.x:30,this.y=void 0!==a.y?a.y:30,this.textAnchor=void 0!==a.textAnchor?a.textAnchor:"middle",this.rotate=void 0!==a.rotate?a.rotate:!1,this.rotateAngle=void 0!==a.rotateAngle?a.rotateAngle:90,this.xAlign=void 0!==a.xAlign?a.xAlign:"right",this.yAlign=void 0!==a.yAlign?a.yAlign:"bottom",this.xMargin=void 0!==a.xMargin?a.xMargin:5,this.yMargin=void 0!==a.yMargin?a.yMargin:5,JenScript.Plugin.call(this,a)},paintAbsoluteLegend:function(a,b){if(this.part===b){var c=(new JenScript.SVGElement).name("text").attr("id",JenScript.sequenceId++).attr("x",this.x).attr("y",this.y).attr("font-size",this.fontSize).attr("font-weight",this.fontWeight).attr("fill",this.textColor).attr("text-anchor",this.textAnchor).textContent(this.text);this.rotate&&c.attr("transform","rotate("+this.rotateAngle+","+this.x+","+this.y+")"),a.insertSVG(c.buildHTML())}},paintRelativeLegend:function(a,b){if(this.part===b){var c=this.getProjection().getView().getComponent(b).getWidth(),d=this.getProjection().getView().getComponent(b).getHeight();"right"===this.xAlign&&(this.x=c-this.xMargin),"left"===this.xAlign&&(this.x=this.xMargin),"center"===this.xAlign&&(this.x=c/2),"top"===this.yAlign&&(this.y=this.fontSize+this.yMargin),"bottom"===this.yAlign&&(this.y=d-this.yMargin),"center"===this.yAlign&&(this.y=d/2),this.textAnchor="middle","right"===this.xAlign&&"top"===this.yAlign&&(this.textAnchor="end"),"right"===this.xAlign&&"bottom"===this.yAlign&&(this.textAnchor=this.rotate?"start":"end"),"left"===this.xAlign&&"top"===this.yAlign&&(this.textAnchor="start"),"left"===this.xAlign&&"bottom"===this.yAlign&&(this.textAnchor=this.rotate?"end":"start");var e=(new JenScript.SVGElement).name("text").attr("id",JenScript.sequenceId++).attr("x",this.x).attr("y",this.y).attr("font-size",this.fontSize).attr("font-weight",this.fontWeight).attr("fill",this.textColor).attr("text-anchor",this.textAnchor).textContent(this.text);this.rotate&&e.attr("transform","rotate("+this.rotateAngle+","+this.x+","+this.y+")"),a.insertSVG(e.buildHTML())}},paintPlugin:function(a,b){if("absolute"===this.layout)this.paintAbsoluteLegend(a,b);else{if("relative"!==this.layout)throw new Error("Invalid legend layout");this.paintRelativeLegend(a,b)}}})}(),function(){JenScript.PlotPlugin=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.PlotPlugin,JenScript.Plugin),JenScript.Model.addMethods(JenScript.PlotPlugin,{_init:function(a){a=a||{},a.priority=100,a.name="PlotPlugin",JenScript.Plugin.call(this,a),this.plots=[]},addPlot:function(a){a.plugin=this,this.plots[this.plots.length]=a,this.repaintPlugin()},removePlot:function(a){for(var b=[],c=0;c<this.plots.length;c++)this.plots[c].equals(a)||(b[b.length]=this.plots[c]);this.plots=b},onProjectionRegister:function(){var a=this;this.getProjection().addProjectionListener("boundChanged",function(){a.repaintPlugin()},"PlotPlugin projection bound changed")},paintPlugin:function(a,b){if("Device"===b)for(var c=0;c<this.plots.length;c++){var d=this.plots[c];d.solvePlot();for(var e=d.devicePoints,f=(new JenScript.SVGPath).Id(d.Id),c=0;c<e.length;c++){var g=e[c];0===c?f.moveTo(g.x,g.y):f.lineTo(g.x,g.y)}a.deleteGraphicsElement(d.Id),a.insertSVG(f.fillNone().stroke(d.plotColor).strokeWidth(d.plotWidth).toSVG())}}})}(),function(){JenScript.Plot=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.Plot,{init:function(a){this.Id="plot"+JenScript.sequenceId++,this.userPoints=[],this.devicePoints=[],this.anchorsPoints=[],this.plugin,this.plotColor=void 0!==a.plotColor?a.plotColor:"red",this.plotWidth=void 0!==a.plotWidth?a.plotWidth:2},addPoint:function(a,b){this.userPoints[this.userPoints.length]=new JenScript.Point2D(a,b)},getPoints:function(){return this.userPoints},solvePlot:function(){throw new Error("SolvePlot should be provided")}})}(),function(){JenScript.LinePlot=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.LinePlot,JenScript.Plot),JenScript.Model.addMethods(JenScript.LinePlot,{_init:function(a){a=a||{},JenScript.Plot.call(this,a)},solvePlot:function(){for(var a=[],b=0;b<this.getPoints().length;b++){var c=this.plugin.getProjection().userToPixel(this.getPoints()[b]);a[a.length]=c}this.devicePoints=a}})}(),function(){JenScript.BezierPlot=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.BezierPlot,JenScript.Plot),JenScript.Model.addMethods(JenScript.BezierPlot,{_init:function(a){a=a||{},this.STEPS=void 0!==a.step?a.step:12,JenScript.Plot.call(this,a)},b:function(a,b){switch(a){case 0:return(1-b)*(1-b)*(1-b);case 1:return 3*b*(1-b)*(1-b);case 2:return 3*b*b*(1-b);case 3:return b*b*b}return 0},p:function(a,b){for(var c=0,d=0,e=0;3>=e;e++)c+=this.b(e,b)*this.getPoints()[a+e].getX(),d+=this.b(e,b)*this.getPoints()[a+e].getY();return new JenScript.Point2D(c,d)},solvePlot:function(){var a=[],b=this.p(0,0),c=this.plugin.getProjection().userToPixel(b);a[0]=c;for(var d=0;d<this.getPoints().length-3;d+=3)for(var e=1;e<=this.STEPS;e++)b=this.p(d,e/this.STEPS),c=this.plugin.getProjection().userToPixel(b),a[a.length]=c;this.devicePoints=a}})}(),function(){JenScript.BezierG1Plot=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.BezierG1Plot,JenScript.BezierPlot),JenScript.Model.addMethods(JenScript.BezierG1Plot,{__init:function(a){a=a||{},JenScript.BezierPlot.call(this,a)},forceCollinear:function(a,b,c){var d=function(a,b,c,d){return Math.sqrt((a-c)*(a-c)+(b-d)*(b-d))},e=d(this.userPoints[a].getX(),this.userPoints[a].getY(),this.userPoints[b].getX(),this.userPoints[b].getY()),f=d(this.userPoints[b].getX(),this.userPoints[b].getY(),this.userPoints[c].getX(),this.userPoints[c].getY()),g=f/e,h=this.userPoints[b].getX()+g*(this.userPoints[b].getX()-this.userPoints[a].getX()),i=this.userPoints[b].getY()+g*(this.userPoints[b].getY()-this.userPoints[a].getY());this.userPoints[c]=new JenScript.Point2D(h,i)},addPoint:function(a,b){this.userPoints[this.userPoints.length]=new JenScript.Point2D(a,b);var c=this.userPoints.length-1;c%3==1&&c>1&&this.forceCollinear(c,c-1,c-2)}})}(),function(){JenScript.BSplinePlot=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.BSplinePlot,JenScript.Plot),JenScript.Model.addMethods(JenScript.BSplinePlot,{_init:function(a){a=a||{},this.STEPS=void 0!==a.step?a.step:12,JenScript.Plot.call(this,a)},b:function(a,b){switch(a){case-2:return(((-b+3)*b-3)*b+1)/6;case-1:return((3*b-6)*b*b+4)/6;case 0:return(((-3*b+3)*b+3)*b+1)/6;case 1:return b*b*b/6}return 0},p:function(a,b){for(var c=0,d=0,e=-2;1>=e;e++)c+=this.b(e,b)*this.getPoints()[a+e].getX(),d+=this.b(e,b)*this.getPoints()[a+e].getY();return new JenScript.Point2D(Math.round(c),Math.round(d))},solvePlot:function(){var a=[],b=this.p(2,0),c=this.plugin.getProjection().userToPixel(b);a[0]=c;for(var d=2;d<this.getPoints().length-1;d++)for(var e=1;e<=this.STEPS;e++)b=this.p(d,e/this.STEPS),c=this.plugin.getProjection().userToPixel(b),a[a.length]=c;this.devicePoints=a}})}(),function(){JenScript.PlotCubic=function(a,b,c,d){this.a=a,this.b=b,this.c=c,this.d=d,this.eval=function(a){return((this.d*a+this.c)*a+this.b)*a+this.a}},JenScript.NaturalCubicPlot=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.NaturalCubicPlot,JenScript.Plot),JenScript.Model.addMethods(JenScript.NaturalCubicPlot,{_init:function(a){a=a||{},this.STEPS=void 0!==a.step?a.step:12,JenScript.Plot.call(this,a)},calcNaturalCubic:function(a,b){var c=[],d=[],e=[];c[0]=.5;for(var f=1;a>f;f++)c[f]=1/(4-c[f-1]);c[a]=1/(2-c[a-1]),d[0]=3*(b[1]-b[0])*c[0];for(var f=1;a>f;f++)d[f]=(3*(b[f+1]-b[f-1])-d[f-1])*c[f];d[a]=(3*(b[a]-b[a-1])-d[a-1])*c[a],e[a]=d[a];for(var f=a-1;f>=0;f--)e[f]=d[f]-c[f]*e[f+1];var g=[];for(f=0;a>f;f++)g[f]=new JenScript.PlotCubic(b[f],e[f],3*(b[f+1]-b[f])-2*e[f]-e[f+1],2*(b[f]-b[f+1])+e[f]+e[f+1]);return g},solvePlot:function(){var a=[];if(this.userPoints.length>=2){for(var b=[],c=[],d=0;d<this.userPoints.length;d++)b[d]=this.userPoints[d].x,c[d]=this.userPoints[d].y;var e=this.calcNaturalCubic(this.userPoints.length-1,b),f=this.calcNaturalCubic(this.userPoints.length-1,c),g=new JenScript.Point2D(Math.round(e[0].eval(0)),Math.round(f[0].eval(0))),h=this.plugin.getProjection().userToPixel(g);a[0]=h;for(var i=0;i<e.length;i++)for(var j=1;j<=this.STEPS;j++){var k=j/this.STEPS,l=new JenScript.Point2D(Math.round(e[i].eval(k)),Math.round(f[i].eval(k))),m=this.plugin.getProjection().userToPixel(l);a[a.length]=m}}this.devicePoints=a}})}(),function(){JenScript.NaturalClosedCubicPlot=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.NaturalClosedCubicPlot,JenScript.NaturalCubicPlot),JenScript.Model.addMethods(JenScript.NaturalClosedCubicPlot,{__init:function(a){a=a||{},JenScript.NaturalCubicPlot.call(this,a)},calcNaturalCubic:function(a,b){var c,d,e,f,g=[],h=[],i=[],j=[];g[1]=h[1]=c=.25,i[0]=3*c*(b[1]-b[a]),f=4,d=3*(b[0]-b[a-1]),e=1;for(var k=1;a>k;k++)h[k+1]=c=1/(4-h[k]),g[k+1]=-c*g[k],i[k]=c*(3*(b[k+1]-b[k-1])-i[k-1]),f-=e*g[k],d-=e*i[k-1],e=-h[k]*e;f-=(e+1)*(h[a]+g[a]),i[a]=d-(e+1)*i[a-1],j[a]=i[a]/f,j[a-1]=i[a-1]-(h[a]+g[a])*j[a];for(var k=a-2;k>=0;k--)j[k]=i[k]-h[k+1]*j[k+1]-g[k+1]*j[a];for(var l=[],k=0;a>k;k++)l[k]=new JenScript.PlotCubic(b[k],j[k],3*(b[k+1]-b[k])-2*j[k]-j[k+1],2*(b[k]-b[k+1])+j[k]+j[k+1]);return l[a]=new JenScript.PlotCubic(b[a],j[a],3*(b[0]-b[a])-2*j[a]-j[0],2*(b[a]-b[0])+j[a]+j[0]),l}})}(),function(){JenScript.CatmullRomPlot=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.CatmullRomPlot,JenScript.BSplinePlot),JenScript.Model.addMethods(JenScript.CatmullRomPlot,{__init:function(a){a=a||{},JenScript.BSplinePlot.call(this,a)},b:function(a,b){switch(a){case-2:return((-b+2)*b-1)*b/2;case-1:return((3*b-5)*b*b+2)/2;case 0:return((-3*b+4)*b+1)*b/2;case 1:return(b-1)*b*b/2}return 0}})}(),function(){JenScript.GeoJSON=function(a){this.init(a),this.Id="GeoJSON"+JenScript.sequenceId++,this.geom=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"]},JenScript.Model.addMethods(JenScript.GeoJSON,{init:function(a){this.data=a||{}},getId:function(){return this.Id},isFeatureCollection:function(){return"FeatureCollection"===this.getType()},isFeature:function(){return"Feature"===this.getType()},isGeometry:function(){for(var a=0;a<this.geom.length;a++){var b=this.geom[a];if(this.getType()===b)return!0}return!1},getProperties:function(){return this.data.properties},getProperty:function(a){return this.data.properties[a]},getType:function(){return this.data.type}}),JenScript.MapGeometry=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.MapGeometry,JenScript.GeoJSON),JenScript.Model.addMethods(JenScript.MapGeometry,{_init:function(a){JenScript.GeoJSON.call(this,a),this.Id="mapgeometry"+JenScript.sequenceId++,this.coordinates=this.data.coordinates},toString:function(){return"JenScript.MapGeometry"},getCoordinates:function(){return this.coordinates},isPolygon:function(){return"Polygon"===this.getType()},isMultiPolygon:function(){return"MultiPolygon"===this.getType()},isPoint:function(){return"Point"===this.getType()}}),JenScript.MapPoint=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.MapPoint,JenScript.MapGeometry),JenScript.Model.addMethods(JenScript.MapPoint,{__init:function(a){JenScript.MapGeometry.call(this,a),this.Id="mappoint"+JenScript.sequenceId++},toString:function(){return"JenScript.MapPoint"}}),JenScript.MapPolygon=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.MapPolygon,JenScript.MapGeometry),JenScript.Model.addMethods(JenScript.MapPolygon,{__init:function(a){JenScript.MapGeometry.call(this,a),this.Id="mappolygon"+JenScript.sequenceId++},toString:function(){return"JenScript.MapPolygon"}}),JenScript.MapMultiPolygon=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.MapMultiPolygon,JenScript.MapGeometry),JenScript.Model.addMethods(JenScript.MapMultiPolygon,{__init:function(a){JenScript.MapGeometry.call(this,a),this.Id="mapmultipolygon"+JenScript.sequenceId++},toString:function(){return"JenScript.MapMultiPolygon"}}),JenScript.MapFeature=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.MapFeature,JenScript.GeoJSON),JenScript.Model.addMethods(JenScript.MapFeature,{_init:function(a){JenScript.GeoJSON.call(this,a),this.Id="mapfeature"+JenScript.sequenceId++,this.geometry=new JenScript.MapGeometry(this.data.geometry),this.geometry.isPolygon()?this.geometry=new JenScript.MapPolygon(this.data.geometry):this.geometry.isMultiPolygon()?this.geometry=new JenScript.MapMultiPolygon(this.data.geometry):this.geometry.isPoint()&&(this.geometry=new JenScript.MapPoint(this.data.geometry)),this.fillColor="orange",this.fillOpacity=.2,this.strokeColor="white",this.strokeOpacity=1,this.strokeWidth=.5},getGeometry:function(){return this.geometry}}),JenScript.MapFeatureCollection=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.MapFeatureCollection,JenScript.GeoJSON),JenScript.Model.addMethods(JenScript.MapFeatureCollection,{_init:function(a){JenScript.GeoJSON.call(this,a),this.Id="mapfeaturecollection"+JenScript.sequenceId++,this.features=[];for(var b=0;b<this.data.features.length;b++)this.features[b]=new JenScript.MapFeature(this.data.features[b])},size:function(){return this.features.length},getFeature:function(a){return this.features[a]},getFeatures:function(){return this.features}})}(),function(){JenScript.MapBackgroundPlugin=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.MapBackgroundPlugin,JenScript.Plugin),JenScript.Model.addMethods(JenScript.MapBackgroundPlugin,{_init:function(a){a=a||{},a.priority=1e3,a.name="MapBackgroundPlugin",JenScript.Plugin.call(this,a)},paintPlugin:function(a,b){if(b===JenScript.ViewPart.Device){var c=this.getProjection().getView().getDevice().getWidth(),d=this.getProjection().getView().getDevice().getHeight(),e=(new JenScript.SVGRect).origin(0,0).size(c,d);a.insertSVG(e.strokeNone().fill(JenScript.Color.brighten(JenScript.RosePalette.CALYPSOBLUE,30)).toSVG())}}})}(),function(){JenScript.TilePlugin=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.TilePlugin,JenScript.Plugin),JenScript.Model.addMethods(JenScript.TilePlugin,{_init:function(a){a=a||{},this.tileServer=void 0!==a.tileServer?a.tileServer:"https://a.tile.openstreetmap.org",this.opacity=void 0!==a.opacity?a.opacity:1,a.priority=1e3,a.name="TilePlugin",this.tms=void 0!==a.tms?a.tms:!1,JenScript.Plugin.call(this,a)},onProjectionRegister:function(){var a=this;this.getProjection().addProjectionListener("boundChanged",function(){a.repaintPlugin()},"Tile plugin listener for projection bound changed"),this.addPluginListener("scale",function(){a.repaintPlugin()},"Tile plugin listener for scale changed"),this.addPluginListener("translate",function(){a.repaintPlugin()},"Tile plugin listener for translate changed")},createDalle:function(a){this.destroyGraphics();var b=this.getProjection(),c=b.getCenterPosition(),d=b.getProjection(),e=d.getSquareTileSize(),f=0,g=1;if(this.sx<1)for(var h=!0,i=1,j=-1;h;){var k=i/2,l=i;this.sx>=k&&this.sx<l&&(f=j,g=k,h=!1),j--,i=k}else for(var h=!0,i=1,j=0;h;){var k=i,l=2*i;this.sx>=k&&this.sx<l&&(f=j,g=k,h=!1),j++,i=l}var m=new JenScript.MapProjection({level:d.getZoom()+f,centerPosition:c});m.view=this.getView();for(var n=m.getProjection(),o=this.getView().getDevice().getWidth(),p=this.getView().getDevice().getHeight(),q=this.p2u({x:0,y:0}).x,r=this.p2u({x:o,y:0}).x,s=this.p2u({x:0,y:0}).y,t=this.p2u({x:0,y:p}).y,u=n.longToXIndex(q),v=n.longToXIndex(r),w=n.latToYIndex(s),x=n.latToYIndex(t),y=b.longToPixel(m.getMinX()),z=m.longToPixel(m.getMinX()),A=b.latToPixel(m.getMinY()),B=m.latToPixel(m.getMinY()),C=y-z,D=A-B,E=u;v>=E;E++)for(var F=w;x>=F;F++){var G=n.tileToLong(E),H=n.tileToLat(F),I=m.longToPixel(G),J=m.latToPixel(H);if(n.getZoom()>=0&&E>=0&&F>=0&&E<=n.getMaxTileIndex()&&F<=n.getMaxTileIndex()){var K;K=this.tms?this.tileServer+"/"+n.getZoom()+"/"+E+"/"+(n.getMaxTileIndex()-F)+".png":this.tileServer+"/"+n.getZoom()+"/"+E+"/"+F+".png";var L=(new JenScript.SVGImage).attr("transform","translate("+C+","+-D+") scale("+1/g+")").opacity(this.opacity).xlinkHref(K).origin(I,J).size(e,e);a.insertSVG(L.toSVG())}}},paintPlugin:function(a,b){b===JenScript.ViewPart.Device&&this.createDalle(a)}})}(),function(){JenScript.MapTranslatePlugin=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.MapTranslatePlugin,JenScript.Plugin),JenScript.Model.addMethods(JenScript.MapTranslatePlugin,{_init:function(a){a=a||{},a.priority=1e3,a.name="MapTranslatePlugin",JenScript.Plugin.call(this,a),this.startPoint,this.currentPoint,this.translate=!1},onPress:function(a,b,c,d){a.preventDefault&&a.preventDefault(),this.translate=!0,this.startPoint=new JenScript.Point2D(c,d)},onRelease:function(){this.translate=!1},onMove:function(a,b,c,d){if(this.translate){this.currentPoint=new JenScript.Point2D(c,d);var e=this.getProjection().pixelToLong(this.startPoint.x)-this.getProjection().pixelToLong(this.currentPoint.x),f=this.getProjection().pixelToLat(this.startPoint.y)-this.getProjection().pixelToLat(this.currentPoint.y),g=this.getProjection().getCenterPosition();this.getProjection().setCenterPosition(new JenScript.GeoPosition(g.latitude+f,g.longitude+e)),this.startPoint=this.currentPoint}}})}(),function(){JenScript.ZoomMapWheelPlugin=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.ZoomMapWheelPlugin,JenScript.Plugin),JenScript.Model.addMethods(JenScript.ZoomMapWheelPlugin,{_init:function(a){a=a||{},a.name="ZoomMapWheelPlugin",a.selectable=!1,a.priority=1e3,this.increment=void 0!==a.increment?a.increment:1,this.wheelListeners=[],JenScript.Plugin.call(this,a)},addWheelListener:function(a,b,c){var d={action:a,onEvent:b,name:c};this.wheelListeners[this.wheelListeners.length]=d},fireWheelEvent:function(a){for(var b=0;b<this.wheelListeners.length;b++){var c=this.wheelListeners[b];c.action===a&&c.onEvent(this)}},onPress:function(){this.stopWheel=!0},onRelease:function(){this.stopWheel=!1},onMove:function(a,b,c,d){var e=new JenScript.Point2D(c,d);this.mp=this.getProjection().pixelToUser(e)},onWheel:function(a){a.preventDefault();var b=this,c=function(a){setTimeout(function(){b.zoomIn()},100*a)},d=function(a){setTimeout(function(){b.zoomOut()},100*a)},e=function(a){if(0>a)for(var b=-a,e=0;b>e;e++)c(e);else for(var b=a,e=0;b>e;e++)d(e)};a.deltaY&&e(a.deltaY)},zoomIn:function(){this.stopWheel||(this.getProjection().setLevel(this.getProjection().getLevel()+this.increment),void 0!==this.mp,this.fireWheelEvent("zoomIn"))},zoomOut:function(){this.stopWheel||(this.getProjection().setLevel(this.getProjection().getLevel()-this.increment),void 0!==this.mp,this.fireWheelEvent("zoomOut"))}})}(),function(){JenScript.GeoRemote=function(a){this.path=a,this.fill=function(a){this.path.element.setAttribute("fill",a),this.path.feature.fillColor=a},this.fillOpacity=function(a){this.path.element.setAttribute("fill-opacity",a),this.path.feature.fillOpacity=a},this.stroke=function(a){this.path.element.setAttribute("stroke",a),this.path.feature.strokeColor=a},this.strokeOpacity=function(a){this.path.element.setAttribute("stroke-opacity",a),this.path.feature.strokeOpacity=a},this.strokeWidth=function(a){this.path.element.setAttribute("stroke-width",a),this.path.feature.strokeWidth=a}},JenScript.GeoJSONPlugin=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.GeoJSONPlugin,JenScript.Plugin),JenScript.Model.addMethods(JenScript.GeoJSONPlugin,{_init:function(a){a=a||{},a.priority=1e3,a.name="GeoJSONPlugin",JenScript.Plugin.call(this,a),this.async=void 0!==a.async?a.async:!1,this.data=[],this.paths=[],this.features=[],this.geoListeners=[]},onProjectionRegister:function(){var a=this;this.getProjection().addProjectionListener("boundChanged",function(){a.repaintPlugin()},"GeoJSONPlugin plugin listener for projection bound changed"),this.addPluginListener("scale",function(){for(var b=0;b<a.paths.length;b++){var c=a.paths[b];void 0!==c.revertScale&&1==c.revertScale&&c.element.setAttribute("stroke-width",c.feature.strokeWidth/a.sx)}},"GeoJSONPlugin plugin listener for scale changed, change stroke according to scale")},addGeoListener:function(a,b,c){if(void 0===c)throw new Error("GeoJSON listener, listener name should be supplied.");var d={action:a,onEvent:b,name:c};this.geoListeners[this.geoListeners.length]=d},fireGeoJSONEvent:function(a,b){for(var c=0;c<this.geoListeners.length;c++){var d=this.geoListeners[c];a===d.action&&d.onEvent(b)}},getFeatures:function(){return this.features;

},addGeoJSON:function(a){this.data[this.data.length]=a;var b=new JenScript.GeoJSON(a);if(b.isFeatureCollection())for(var c=new JenScript.MapFeatureCollection(a),d=0;d<c.size();d++){var e=c.getFeature(d);this.features[this.features.length]=e,this.fireGeoJSONEvent("register",{type:"register",target:void 0,feature:e,remote:void 0})}this.repaintPlugin()},check:function(a,b,c,d,e){for(var f=0;f<this.paths.length;f++){var g=this.paths[f].polygon;if(this.isPointInPoly(g,new JenScript.Point2D(d,e))){if(0==this.paths[f].lockEnter){for(var h=0;h<this.paths.length;h++)1==this.paths[h].lockEnter&&(this.paths[h].lockEnter=!1,this.fireGeoJSONEvent("exit",{type:"exit",x:d,y:e,point:new JenScript.Point2D(d,e),target:this.paths[h],feature:this.paths[h].feature,remote:new JenScript.GeoRemote(this.paths[h])}));this.paths[f].lockEnter=!0,this.fireGeoJSONEvent("enter",{type:"enter",x:d,y:e,point:new JenScript.Point2D(d,e),target:this.paths[f],feature:this.paths[f].feature,remote:new JenScript.GeoRemote(this.paths[f])})}this.fireGeoJSONEvent(a,{type:a,x:d,y:e,point:new JenScript.Point2D(d,e),target:this.paths[f],feature:this.paths[f].feature,remote:new JenScript.GeoRemote(this.paths[f])})}else 1==this.paths[f].lockEnter&&(this.paths[f].lockEnter=!1,this.fireGeoJSONEvent("exit",{type:"exit",x:d,y:e,point:new JenScript.Point2D(d,e),target:this.paths[f],feature:this.paths[f].feature,remote:new JenScript.GeoRemote(this.paths[f])}))}},onPress:function(a,b,c,d){b===JenScript.ViewPart.Device&&this.check("press",a,b,c,d)},isPointInPoly:function(a,b){b=new JenScript.Point2D((b.x-this.tx)/this.sx,(b.y-this.ty)/this.sy);for(var c=!1,d=-1,e=a.length,f=e-1;++d<e;f=d)(a[d].y<=b.y&&b.y<a[f].y||a[f].y<=b.y&&b.y<a[d].y)&&b.x<(a[f].x-a[d].x)*(b.y-a[d].y)/(a[f].y-a[d].y)+a[d].x&&(c=!c);return c},isNearLine:function(a,b){for(var c=b.x,d=b.y,e=0;e<a.length-1;e++){var f=a[e],g=f.x,h=f.y,i=a[e+1],j=i.x,k=i.y,l=j-g,m=k-h,n=Math.abs(m*c-l*d-g*k+j*h)/Math.sqrt(Math.pow(l,2)+Math.pow(m,2));if(4>n)return!0}return!1},onRelease:function(a,b,c,d){b===JenScript.ViewPart.Device&&this.check("release",a,b,c,d)},onMove:function(a,b,c,d){b===JenScript.ViewPart.Device&&this.check("move",a,b,c,d)},paintPoint:function(a,b,c){var d=c.getCoordinates(),e=this.getProjection(),f=d[0],g=d[1],h=e.userToPixel({x:f,y:g}),i=(new JenScript.SVGCircle).center(h.x,h.y).radius(2).attr("transform","scale("+1/this.sx+")");i.fill("black").fillOpacity(.8),a.insertSVG(i.toSVG())},paintPolygon:function(a,b,c){for(var d=c.getCoordinates(),e=this.getProjection(),f=(new JenScript.SVGPath).Id(c.Id).attr("fill-rule","evenodd"),g=[],h=0;h<d.length;h++){for(var i=d[h],j=0;j<i.length;j++){var k=i[j],l=e.userToPixel({x:k[0],y:k[1]});g[g.length]=l,0==j?f.moveTo(l.x,l.y):f.lineTo(l.x,l.y)}f.close()}var m=f.stroke(b.strokeColor).strokeOpacity(b.strokeOpacity).strokeWidth(b.strokeWidth).fill(b.fillColor).fillOpacity(b.fillOpacity);void 0!==b.texture&&(a.deleteGraphicsElement(b.texture.getId()),a.definesTexture(b.texture),m.fillURL(b.texture.getId())),m=m.toSVG(),a.deleteGraphicsElement(c.Id),a.insertSVG(m),this.paths[this.paths.length]={element:m,polygon:g,feature:b,lockEnter:!1,revertScale:!0}},paintMultiPolygon:function(a,b,c){for(var d=c.getCoordinates(),e=0;e<d.length;e++){for(var f=d[e],g=this.getProjection(),h=(new JenScript.SVGPath).Id(c.Id+"_"+e).attr("fill-rule","evenodd"),i=[],j=0;j<f.length;j++){for(var k=f[j],l=0;l<k.length;l+=1){var m=k[l],n=g.userToPixel({x:m[0],y:m[1]});i[i.length]=n,0==l?h.moveTo(n.x,n.y):h.lineTo(n.x,n.y)}h.close()}var o=h.stroke(b.strokeColor).strokeOpacity(b.strokeOpacity).strokeWidth(b.strokeWidth).fill(b.fillColor).fillOpacity(b.fillOpacity);void 0!==b.texture&&(a.deleteGraphicsElement(b.texture.getId()),a.definesTexture(b.texture),o.fillURL(b.texture.getId())),o=o.toSVG(),a.deleteGraphicsElement(c.Id+"_"+e),a.insertSVG(o),this.paths[this.paths.length]={element:o,polygon:i,feature:b,lockEnter:!1,revertScale:!0}}},paintFeature:function(a,b){if(void 0===b.visible||b.visible!==!1){var c=b.getGeometry(),d=this,e=function(c){setTimeout(function(){d.paintPolygon(a,b,c)},20)},f=function(c){setTimeout(function(){d.paintMultiPolygon(a,b,c)},20)};c.isPolygon()?this.async?e(c):d.paintPolygon(a,b,c):c.isMultiPolygon()?this.async?f(c):d.paintMultiPolygon(a,b,c):c.isPoint()&&this.paintPoint(a,b,c)}},paintPlugin:function(a,b){if(b===JenScript.ViewPart.Device){this.paths=[];for(var c=this,d=function(b){setTimeout(function(){c.paintFeature(a,b)},20)},e=0;e<this.features.length;e++){var f=this.features[e];this.async?d(f):this.paintFeature(a,f)}}}})}(),function(){JenScript.AffineTranformPlugin=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.AffineTranformPlugin,JenScript.Plugin),JenScript.Model.addMethods(JenScript.AffineTranformPlugin,{_init:function(a){a=a||{},a.priority=1e3,this.slaves=void 0!==a.slaves?a.slaves:[],a.name="AffineTranformPlugin",JenScript.Plugin.call(this,a),this.startPoint,this.currentPoint,this.translate=!1,this.factor=void 0!==a.factor?a.factor:1.1},onPress:function(a,b,c,d){a.preventDefault&&a.preventDefault(),"Device"===b&&(this.translate=!0,this.startPoint=new JenScript.Point2D(c,d))},onRelease:function(){this.translate=!1,this.firePluginEvent("transform-release")},onMove:function(a,b,c,d){"Device"===b&&this.translate&&(this.affineTranslate(a,b,c,d),this.startPoint=this.currentPoint)},onWheel:function(a){a.preventDefault();var b=this,c=function(a){setTimeout(function(){b.affineScale(b.factor)},20*a)},d=function(a){setTimeout(function(){b.affineScale(1/b.factor)},20*a)},e=function(a){if(0>a)for(var b=-a,e=0;b>e;e++)c(e);else for(var b=a,e=0;b>e;e++)d(e)};a.deltaY&&e(a.deltaY)},u2p:function(a,b){var c=this.getProjection().userToPixel(b);return new JenScript.Point2D(c.x*a.sx+a.tx,c.y*a.sy+a.ty)},p2u:function(a,b){return this.getProjection().pixelToUser(new JenScript.Point2D((b.x-a.tx)/a.sx,(b.y-a.ty)/a.sy))},minX:function(a){return this.p2u(a,{x:0,y:0}).x},maxX:function(a){return this.p2u(a,{x:this.getDevice().getWidth(),y:0}).x},minY:function(a){return this.p2u(a,{x:0,y:this.getDevice().getHeight()}).y},maxY:function(a){return this.p2u(a,{x:0,y:0}).y},affineTranslate:function(a,b,c,d){if(this.currentPoint=new JenScript.Point2D(c,d),void 0!==this.startPoint)for(var e=this.currentPoint.x-this.startPoint.x,f=this.currentPoint.y-this.startPoint.y,g=0;g<this.slaves.length;g++){var h=this.slaves[g],i=h.tx+e,j=h.ty+f;h.translate(i,j)}},affineScale:function(a){for(var b=0;b<this.slaves.length;b++){var c=this.slaves[b],d=this.getProjection().getView().getDevice().getWidth(),e=this.getProjection().getView().getDevice().getHeight(),f=this.p2u(c,new JenScript.Point2D(d/2,e/2)),g=c.sx,h=c.sy,i=c.sx*a,j=c.sy*a;c.scale(i,j);var k=this.p2u(c,new JenScript.Point2D(d/2,e/2)),l=this.u2p(c,k),m=this.u2p(c,f);if(void 0!==l&&void 0!==m){var n=c.tx-(m.x-l.x),o=c.ty-(m.y-l.y);isFinite(n)&&isFinite(o)?c.translate(n,o):c.scale(g,h)}}this.firePluginEvent("transform-release")}})}();