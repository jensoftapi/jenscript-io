// JenScript -  JavaScript HTML5/SVG Library
// version : 1.3.1
// Author : Sebastien Janaud 
// Web Site : http://jenscript.io
// Twitter  : http://twitter.com/JenSoftAPI
// Copyright (C) 2008 - 2017 JenScript, product by JenSoftAPI company, France.
// build: 2017-06-02
// All Rights reserved

!function(){JenScript.RadialGaugePlugin=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.RadialGaugePlugin,JenScript.Plugin),JenScript.Model.addMethods(JenScript.RadialGaugePlugin,{_init:function(a){a=a||{},a.name="JenScript.RadialGaugePlugin",this.gauge=a.gauge,JenScript.Plugin.call(this,a)},paintPlugin:function(a,b){if(b===JenScript.ViewPart.Device){if(this.gauge.setProjection(this.getProjection()),void 0!==this.gauge.getEnvelop()&&this.gauge.getEnvelop().paintPart(a,this.gauge),void 0!==this.gauge.getBackgrounds())for(var c=0;c<this.gauge.getBackgrounds().length;c++)this.gauge.getBackgrounds()[c].paintPart(a,this.gauge);if(void 0!==this.gauge.getGlasses())for(var c=0;c<this.gauge.getGlasses().length;c++)this.gauge.getGlasses()[c].paintPart(a,this.gauge);if(void 0!==this.gauge.getBodies())for(var c=0;c<this.gauge.getBodies().length;c++)this.gauge.getBodies()[c].paintPart(a,this.gauge)}}})}(),function(){JenScript.GaugePart=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.GaugePart,{init:function(){this.gauge,this.partBuffer},getGauge:function(){return this.gauge},setGauge:function(a){this.gauge=a},paintPart:function(){throw new Error("JenScript.GaugePart, paintPart method should be provide by override.")}})}(),function(){JenScript.GaugeEnvelope=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.GaugeEnvelope,JenScript.GaugePart),JenScript.Model.addMethods(JenScript.GaugeEnvelope,{_init:function(a){a=a||{},JenScript.GaugePart.call(this,a)},paintEnvelope:function(){},paintPart:function(a,b){this.paintEnvelope(a,b)}}),JenScript.Cisero=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.Cisero,JenScript.GaugeEnvelope),JenScript.Model.addMethods(JenScript.Cisero,{__init:function(a){a=a||{},this.extendsRatio=void 0!==a.extendsRatio?a.extendsRatio:3,this.alpha=void 0!==a.alpha?a.alpha:10,JenScript.GaugeEnvelope.call(this,a)},createFragment:function(a,b,c,d,e,f){var g=f.getProjection().userToPixelX(f.getX()),h=f.getProjection().userToPixelY(f.getY()),i=(f.getRadius(),new JenScript.Point2D(g+d*Math.cos(JenScript.Math.toRadians(b-c-c/2)),h-d*Math.sin(JenScript.Math.toRadians(b-c-c/2)))),j=new JenScript.Point2D(g+e*Math.cos(JenScript.Math.toRadians(b-c/2)),h-e*Math.sin(JenScript.Math.toRadians(b-c/2))),k=(new JenScript.Point2D(g+e*Math.cos(JenScript.Math.toRadians(b+c/2)),h-e*Math.sin(JenScript.Math.toRadians(b+c/2))),new JenScript.Point2D(g+d*Math.cos(JenScript.Math.toRadians(b+c+c/2)),h-d*Math.sin(JenScript.Math.toRadians(b+c+c/2)))),l=new JenScript.Point2D(g+d*Math.cos(JenScript.Math.toRadians(b-c)),h-d*Math.sin(JenScript.Math.toRadians(b-c))),m=new JenScript.Point2D(g+e*Math.cos(JenScript.Math.toRadians(b-c)),h-e*Math.sin(JenScript.Math.toRadians(b-c))),n=new JenScript.Point2D(g+e*Math.cos(JenScript.Math.toRadians(b+c)),h-e*Math.sin(JenScript.Math.toRadians(b+c))),o=new JenScript.Point2D(g+d*Math.cos(JenScript.Math.toRadians(b+c)),h-d*Math.sin(JenScript.Math.toRadians(b+c)));this.first&&(a.moveTo(i.getX(),i.getY()),this.first=!1),a.curveTo(l.getX(),l.getY(),m.getX(),m.getY(),j.getX(),j.getY());var p=g+e*Math.cos(JenScript.Math.toRadians(b+c/2)),q=h-e*Math.sin(JenScript.Math.toRadians(b+c/2));a.arcTo(e,e,0,0,0,p,q),a.curveTo(n.getX(),n.getY(),o.getX(),o.getY(),k.getX(),k.getY())},createArcFragment:function(a,b,c,d,e,f,g){var h=g.getProjection().userToPixelX(g.getX()),i=g.getProjection().userToPixelY(g.getY()),j=c-2*d+d/2,k=h+e*Math.cos(JenScript.Math.toRadians(j)),l=i-e*Math.sin(JenScript.Math.toRadians(j));a.arcTo(e,e,0,0,0,k,l)},paintEnvelope:function(a,b){var c=b.getRadius()/this.extendsRatio,d=b.getRadius()+c,e=b.getProjection().userToPixelX(b.getX()),f=b.getProjection().userToPixelY(b.getY()),g=(new JenScript.SVGCircle).center(e,f).radius(d),h=new JenScript.Point2D(e,f-d),i=new JenScript.Point2D(e,f+d),j={percents:["0%","50%","100%"],colors:["darkgray","lightgray","black"]},k=(new JenScript.SVGLinearGradient).Id("ciseroGd1").from(h.x,h.y).to(i.x,i.y).shade(j.percents,j.colors);a.definesSVG(k.toSVG()),a.insertSVG(g.fillURL("ciseroGd1").strokeNone().toSVG());var l=this.alpha,m=new JenScript.SVGPath,n=2,o=b.getRadius()+c/2,p=b.getRadius()+c-n;this.first=!0;var q=(this.createFragment(m,30,l,o,p,b),this.createArcFragment(m,30,90,l,o,p,b),this.createFragment(m,90,l,o,p,b),this.createArcFragment(m,90,150,l,o,p,b),this.createFragment(m,150,l,o,p,b),this.createArcFragment(m,150,210,l,o,p,b),this.createFragment(m,210,l,o,p,b),this.createArcFragment(m,210,270,l,o,p,b),this.createFragment(m,270,l,o,p,b),this.createArcFragment(m,270,330,l,o,p,b),this.createFragment(m,330,l,o,p,b),this.createArcFragment(m,-30,30,l,o,p,b),new JenScript.Point2D(e,f-p)),r=new JenScript.Point2D(e,f+p),s={percents:["0%","50%","100%"],colors:["black","gray","black"]},t=(new JenScript.SVGLinearGradient).Id("ciseroGd2").from(q.x,q.y).to(r.x,r.y).shade(s.percents,s.colors);a.definesSVG(t.toSVG()),a.insertSVG(m.stroke(JenScript.RosePalette.MELON).attr("fill-rule","nonzero").fillURL("ciseroGd2").toSVG())}})}(),function(){JenScript.GaugeBackground=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.GaugeBackground,JenScript.GaugePart),JenScript.Model.addMethods(JenScript.GaugeBackground,{_init:function(a){a=a||{},JenScript.GaugePart.call(this,a)},paintBackground:function(){},paintPart:function(a,b){this.paintBackground(a,b)}}),JenScript.CircularBackground=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.CircularBackground,JenScript.GaugeBackground),JenScript.Model.addMethods(JenScript.CircularBackground,{__init:function(a){a=a||{},this.radius=void 0!==a.radius?a.radius:0,this.polarRadius=void 0!==a.polarRadius?a.polarRadius:0,this.polarAngle=void 0!==a.polarAngle?a.polarAngle:0,JenScript.GaugeBackground.call(this,a)},getRadius:function(){return this.radius},setRadius:function(a){this.radius=a},getPolarRadius:function(){return this.polarRadius},setPolarRadius:function(a){this.polarRadius=a},getPolarAngle:function(){return this.polarAngle},setPolarAngle:function(a){this.polarAngle=a},fill:function(){throw new Error("JenScript.CircularBackground, fill method should be provide by override.")},paintBackground:function(a,b){var c=b.getRadialPointAt(this.polarRadius,this.polarAngle);0==this.radius&&(this.radius=b.getRadius());var d=(new JenScript.SVGCircle).center(c.getX(),c.getY()).radius(this.radius);this.fill(a,b,d)}}),JenScript.GradientCircularBackground=function(a){this.___init(a)},JenScript.Model.inheritPrototype(JenScript.GradientCircularBackground,JenScript.CircularBackground),JenScript.Model.addMethods(JenScript.GradientCircularBackground,{___init:function(a){a=a||{},this.shader=void 0!==a.shader?a.shader:{percents:["0%","100%"],colors:["red","black"]},JenScript.CircularBackground.call(this,a)},fill:function(a,b,c){var d=this.getGradient(b),e="gradient"+JenScript.sequenceId++;d.Id(e),a.definesSVG(d.toSVG()),a.insertSVG(c.fillURL(e).toSVG())},getGradient:function(){throw new Error("JenScript.GradientCircularBackground, getGradient method should be provide by override")}}),JenScript.LinearGradientCircularBackground=function(a){this.____init(a)},JenScript.Model.inheritPrototype(JenScript.LinearGradientCircularBackground,JenScript.GradientCircularBackground),JenScript.Model.addMethods(JenScript.LinearGradientCircularBackground,{____init:function(a){a=a||{},this.gradientAngle=void 0!==a.gradientAngle?a.gradientAngle:90,a.name="JenScript.LinearGradientCircularBackground",JenScript.GradientCircularBackground.call(this,a)},getGradient:function(a){var b=a.getRadialPointAt(this.polarRadius,this.polarAngle),c=b.getX()+this.getRadius()*Math.cos(JenScript.Math.toRadians(this.gradientAngle)),d=b.getY()-this.getRadius()*Math.sin(JenScript.Math.toRadians(this.gradientAngle)),e=b.getX()+this.getRadius()*Math.cos(JenScript.Math.toRadians(this.gradientAngle)+Math.PI),f=b.getY()-this.getRadius()*Math.sin(JenScript.Math.toRadians(this.gradientAngle)+Math.PI),g=new JenScript.Point2D(c,d),h=new JenScript.Point2D(e,f),i=(new JenScript.SVGLinearGradient).from(g.x,g.y).to(h.x,h.y).shade(this.shader.percents,this.shader.colors);return i}}),JenScript.TextureCircularBackground=function(a){this.___init(a)},JenScript.Model.inheritPrototype(JenScript.TextureCircularBackground,JenScript.CircularBackground),JenScript.Model.addMethods(JenScript.TextureCircularBackground,{___init:function(a){a=a||{},this.opacity=void 0!==a.opacity?a.opacity:.5,this.texture=void 0!==a.texture?a.texture:JenScript.Texture.getTriangleCarbonFiber(5),JenScript.CircularBackground.call(this,a)},fill:function(a,b,c){a.definesTexture(this.texture),a.insertSVG(c.fillURL(this.texture.Id).opacity(this.opacity).toSVG())}})}(),function(){JenScript.GaugeBody=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.GaugeBody,JenScript.GaugePart),JenScript.Model.addMethods(JenScript.GaugeBody,{_init:function(a){a=a||{},this.gaugeMetricsPaths=[],this.gaugeTextPaths=[],JenScript.GaugePart.call(this,a)},paintBody:function(a,b){for(var c=0;c<this.getMetricsPaths().length;c++){var d=this.getMetricsPaths()[c];if(d.setProjection(this.getGauge().getProjection()),void 0!==d.getPathBinder()){var e=d.getPathBinder().bindPath(b);void 0!==e&&(d.extPath=e,d.draw(a),a.insertSVG(e.stroke("black").strokeWidth(1).fillNone().toSVG()))}void 0!==d.getPathBinder()&&d.getPathBinder().isDebug()&&d.getPathBinder().paintDebug(a,b)}for(var c=0;c<this.getMetricsPaths().length;c++){var d=this.getMetricsPaths()[c];void 0!=d.getGaugeNeedlePainter()&&d.getGaugeNeedlePainter().paintNeedle(a,d)}},registerGaugeMetricsPath:function(a){a.setBody(this),this.gaugeMetricsPaths[this.gaugeMetricsPaths.length]=a},getMetricsPaths:function(){return this.gaugeMetricsPaths},registerGaugeTextPath:function(a){a.setBody(this),this.gaugeTextPaths[this.gaugeTextPaths.length]=a},getTextPaths:function(){return this.gaugeTextPaths},paintPart:function(a,b){this.paintBody(a,b)}})}(),function(){JenScript.AnchorBinder=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.AnchorBinder,{init:function(a){a=a||{},this.metricsPath},getMetricsPath:function(){return this.metricsPath},setMetricsPath:function(a){this.metricsPath=a},bindAnchor:function(){throw new Error("JenScript.AnchorBinder, bindAnchor method should be provide by override")}}),JenScript.AnchorBaseBinder=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.AnchorBaseBinder,JenScript.AnchorBinder),JenScript.Model.addMethods(JenScript.AnchorBaseBinder,{_init:function(a){a=a||{},this.radius=void 0!==a.radius?a.radius:0,this.angleDegree=void 0!==a.angleDegree?a.angleDegree:0,JenScript.AnchorBinder.call(this,a)},getRadius:function(){return this.radius},setRadius:function(a){this.radius=a},getAngleDegree:function(){return this.angleDegree},setAngleDegree:function(a){this.angleDegree=a},bindAnchor:function(a){var b=a.getCenterDevice().getX()+this.radius*Math.cos(JenScript.Math.toRadians(this.angleDegree)),c=a.getCenterDevice().getY()-this.radius*Math.sin(JenScript.Math.toRadians(this.angleDegree));return new JenScript.Point2D(b,c)}}),JenScript.AnchorValueBinder=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.AnchorValueBinder,JenScript.AnchorBinder),JenScript.Model.addMethods(JenScript.AnchorValueBinder,{_init:function(a){a=a||{},this.radialOffset=void 0!==a.radialOffset?a.radialOffset:10,JenScript.AnchorBinder.call(this,a)},getRadialOffset:function(){return this.radialOffset},setRadialOffset:function(a){this.radialOffset=a},bindAnchor:function(a){this.baseAnchor=this.getMetricsPath().getNeedleBaseAnchorBinder().bindAnchor(a);var b=this.getMetricsPath().getMetricsPoint(this.getMetricsPath().getCurrentValue(),this.radialOffset),c=Math.sqrt((this.baseAnchor.x-b.x)*(this.baseAnchor.x-b.x)+(this.baseAnchor.y-b.y)*(this.baseAnchor.y-b.y)),d=JenScript.Math.getPolarAngle(this.baseAnchor.x,this.baseAnchor.y,b.x,b.y),e=this.baseAnchor.x+(c-this.radialOffset)*Math.cos(d),f=this.baseAnchor.y-(c-this.radialOffset)*Math.sin(d);return new JenScript.Point2D(e,f)}})}(),function(){JenScript.PathBinder=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.PathBinder,{init:function(a){a=a||{},this.debug=void 0!==a.debug?a.debug:!1,this.metricsPath},isDebug:function(){return this.debug},setDebug:function(a){this.debug=a},getMetricsPath:function(){return this.metricsPath},setMetricsPath:function(a){this.metricsPath=a},bindPath:function(){throw new Error("JenScript.PathBinder, bindPath method should be provide by override.")},paintDebug:function(){}}),JenScript.AbstractPathAutoBinder=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.AbstractPathAutoBinder,JenScript.PathBinder),JenScript.Model.addMethods(JenScript.AbstractPathAutoBinder,{_init:function(a){a=a||{},this.radius=a.radius,this.polarRadius=a.polarRadius,this.polarDegree=a.polarDegree,this.direction=void 0!==a.direction?a.direction:"Clockwise",this.x0,this.y0,this.r0,this.arc0,this.x1,this.y1,this.r1,this.arc1,this.intersectionPointStart,this.theta1Radian1,this.intersectionPointEnd,this.theta1Radian2,JenScript.PathBinder.call(this,a)},getPolarAngle:function(a,b,c,d){var e=-1;return c-a>0&&b-d>=0?e=Math.atan((b-d)/(c-a)):c-a>0&&0>b-d?e=Math.atan((b-d)/(c-a))+2*Math.PI:0>c-a?e=Math.atan((b-d)/(c-a))+Math.PI:c-a==0&&b-d>0?e=Math.PI/2:c-a==0&&0>b-d&&(e=3*Math.PI/2),e},bindPath:function(){return this.solveIntersectionPoints()?this.createPath():void 0},createPath:function(){throw new Error("JenScript.AbstractPathAutoBinder, createPath should be supplied by override.")},solveIntersectionPoints:function(){var a=this.getMetricsPath().getBody().getGauge();this.x0=a.getCenterDevice().getX(),this.y0=a.getCenterDevice().getY(),this.r0=a.getRadius(),this.arc0=(new JenScript.SVGCircle).center(this.x0,this.y0).radius(this.r0),this.x1=this.x0+this.polarRadius*Math.cos(JenScript.Math.toRadians(this.polarDegree)),this.y1=this.y0-this.polarRadius*Math.sin(JenScript.Math.toRadians(this.polarDegree)),this.r1=this.radius,this.arc1=(new JenScript.SVGCircle).center(this.x1,this.y1).radius(this.r1);var b=this.x0,c=this.y0,d=this.r0,e=this.x1,f=this.y1,g=this.r1;if(0!=this.polarDegree&&180!=this.polarDegree){var h=(g*g-d*d-e*e+b*b-f*f+c*c)/(2*(c-f)),i=Math.pow((b-e)/(c-f),2)+1,j=2*c*(b-e)/(c-f)-2*h*(b-e)/(c-f)-2*b,k=b*b+c*c+h*h-d*d-2*c*h,l=Math.sqrt(j*j-4*i*k);if(0>l)return!1;if(l>=0){var m=(-j-l)/(2*i),n=h-m*(b-e)/(c-f);this.intersectionPointStart=new JenScript.Point2D(m,n);var o=(-j+l)/(2*i),p=h-o*(b-e)/(c-f);return this.intersectionPointEnd=new JenScript.Point2D(o,p),this.theta1Radian1=this.getPolarAngle(e,f,m,n),this.theta1Radian2=this.getPolarAngle(e,f,o,p),!0}}else if(0==this.polarDegree||180==this.polarDegree){var q=(g*g-d*d-e*e+b*b)/(2*(b-e)),i=1,j=-2*f,k=e*e+q*q-2*e*q+f*f-g*g,l=Math.sqrt(j*j-4*i*k);if(0>l)return!1;if(l>=0){var m=q,n=(-j-l)/2*i;this.intersectionPointStart=new JenScript.Point2D(m,n);var o=q,p=(-j+l)/2*i;return this.intersectionPointEnd=new JenScript.Point2D(o,p),this.theta1Radian1=this.getPolarAngle(e,f,m,n),this.theta1Radian2=this.getPolarAngle(e,f,o,p),!0}}},paintDebug:function(a){var b=this.createPath();if(void 0!==b){this.solveIntersectionPoints();var c=(new JenScript.SVGPath).moveTo(this.x1,this.y1).lineTo(this.x0,this.y0);if(a.insertSVG(c.stroke(JenScript.Color.brighten(JenScript.RosePalette.CALYPSOBLUE,30).toHexString()).fillNone().toSVG()),a.insertSVG(this.arc0.stroke("black").fillNone().toSVG()),a.insertSVG(this.arc1.stroke("darkgray").fillNone().toSVG()),void 0!==this.intersectionPointStart&&void 0!==this.intersectionPointEnd){var d=(new JenScript.SVGPath).moveTo(this.x1,this.y1).lineTo(this.intersectionPointStart.x,this.intersectionPointStart.y);a.insertSVG(d.stroke("yellow").fillNone().toSVG());var e=(new JenScript.SVGPath).moveTo(this.x1,this.y1).lineTo(this.intersectionPointEnd.x,this.intersectionPointEnd.y);a.insertSVG(e.stroke("yellow").fillNone().toSVG());var f=(new JenScript.SVGCircle).center(this.intersectionPointStart.getX(),this.intersectionPointStart.getY()).radius(4),g=(new JenScript.SVGCircle).center(this.intersectionPointEnd.getX(),this.intersectionPointEnd.getY()).radius(4),h="Clockwise"==this.direction?"cyan":"orange";this.drawPath(a,b,h),a.insertSVG(f.fill(JenScript.RosePalette.LIME).toSVG()),a.insertSVG(g.fill(JenScript.RosePalette.LIME).toSVG())}}},drawPath:function(a,b,c){if(void 0!=b){a.insertSVG(b.stroke(c).strokeWidth(2).fillNone().toSVG());var d=new JenScript.GeometryPath(b.toSVG()),e=this.creatTickDirection(b,d.lengthOfPath()/2,5),f=this.creatTickDirection(b,d.lengthOfPath()/4,4),g=this.creatTickDirection(b,3*d.lengthOfPath()/4,4);void 0!=e&&a.insertSVG(e.fill(c).toSVG()),void 0!=f&&a.insertSVG(f.fill(c).toSVG()),void 0!=g&&a.insertSVG(g.fill(c).toSVG())}},creatTickDirection:function(a,b,c){var d=new JenScript.GeometryPath(a.toSVG()),e=c;if(b-e>0&&b+2*e<d.lengthOfPath()){var f=new JenScript.SVGPath,g=d.pointAtLength(b+2*e),h=d.orthoLeftPointAtLength(b-e,e),i=d.orthoRightPointAtLength(b-e,e);return f.moveTo(g.getX(),g.getY()),f.lineTo(i.getX(),i.getY()),f.lineTo(h.getX(),h.getY()),f.close(),f}return void 0}}),JenScript.PathArcAutoBinder=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.PathArcAutoBinder,JenScript.AbstractPathAutoBinder),JenScript.Model.addMethods(JenScript.PathArcAutoBinder,{__init:function(a){a=a||{},this.intersectionArc,JenScript.AbstractPathAutoBinder.call(this,a)},getIntersectionArc:function(){return this.intersectionArc},setIntersectionArc:function(a){this.intersectionArc=a},createPath:function(){var a=function(a,b,c){return{x:a.x+b*Math.cos(c),y:a.y-b*Math.sin(c)}},b=this.x1,c=this.y1,d=this.r1,e=this.theta1Radian1,f=this.theta1Radian2,g=new JenScript.SVGPath;if(this.polarDegree>0&&this.polarDegree<180)if(this.theta1Radian2>this.theta1Radian1){var h=JenScript.Math.toDegrees(this.theta1Radian2)-JenScript.Math.toDegrees(this.theta1Radian1),i=h>=180||-180>=h?1:0;if("AntiClockwise"==this.direction){var j=a({x:b,y:c},d,e),k=a({x:b,y:c},d,e+JenScript.Math.toRadians(h));g.moveTo(j.x,j.y).arcTo(d,d,0,i,0,k.x,k.y)}else if("Clockwise"==this.direction){var j=a({x:b,y:c},d,f),k=a({x:b,y:c},d,f-JenScript.Math.toRadians(h));g.moveTo(j.x,j.y).arcTo(d,d,0,i,1,k.x,k.y)}}else{var h=Math.abs(JenScript.Math.toDegrees(2*Math.PI+f)-JenScript.Math.toDegrees(e)),i=h>=180||-180>=h?1:0;if("AntiClockwise"==this.direction){var j=a({x:b,y:c},d,e),k=a({x:b,y:c},d,e+JenScript.Math.toRadians(h));g.moveTo(j.x,j.y).arcTo(d,d,0,i,0,k.x,k.y)}else if("Clockwise"==this.direction){var j=a({x:b,y:c},d,f),k=a({x:b,y:c},d,f-JenScript.Math.toRadians(h));g.moveTo(j.x,j.y).arcTo(d,d,0,i,1,k.x,k.y)}}else if(this.polarDegree>180&&this.polarDegree<360)if(this.theta1Radian2>this.theta1Radian1){var h=360-(JenScript.Math.toDegrees(f)-JenScript.Math.toDegrees(e)),i=h>=180||-180>=h?1:0;if("AntiClockwise"==this.direction){var j=a({x:b,y:c},d,f),k=a({x:b,y:c},d,f+JenScript.Math.toRadians(h));g.moveTo(j.x,j.y).arcTo(d,d,0,i,0,k.x,k.y)}else if("Clockwise"==this.direction){var j=a({x:b,y:c},d,e),k=a({x:b,y:c},d,e-JenScript.Math.toRadians(h));g.moveTo(j.x,j.y).arcTo(d,d,0,i,1,k.x,k.y)}}else{var h=JenScript.Math.toDegrees(e)-JenScript.Math.toDegrees(f),i=h>=180||-180>=h?1:0;if("AntiClockwise"==this.direction){var j=a({x:b,y:c},d,f),k=a({x:b,y:c},d,f+JenScript.Math.toRadians(h));g.moveTo(j.x,j.y).arcTo(d,d,0,i,0,k.x,k.y)}else if("Clockwise"==this.direction){var j=a({x:b,y:c},d,e),k=a({x:b,y:c},d,e-JenScript.Math.toRadians(h));g.moveTo(j.x,j.y).arcTo(d,d,0,i,1,k.x,k.y)}}else if(0===this.polarDegree){var h=JenScript.Math.toDegrees(f)-JenScript.Math.toDegrees(e),i=h>=180||-180>=h?1:0;if("AntiClockwise"===this.direction){var j=a({x:b,y:c},d,e),k=a({x:b,y:c},d,e+JenScript.Math.toRadians(h));g.moveTo(j.x,j.y).arcTo(d,d,0,i,0,k.x,k.y)}else if("Clockwise"===this.direction){var j=a({x:b,y:c},d,f),k=a({x:b,y:c},d,f-JenScript.Math.toRadians(h));g.moveTo(j.x,j.y).arcTo(d,d,0,i,1,k.x,k.y)}}else if(180===this.polarDegree){var h=360-JenScript.Math.toDegrees(f)+JenScript.Math.toDegrees(e),i=h>=180||-180>=h?1:0;if("AntiClockwise"===this.direction){var j=a({x:b,y:c},d,f),k=a({x:b,y:c},d,f+JenScript.Math.toRadians(h));g.moveTo(j.x,j.y).arcTo(d,d,0,i,0,k.x,k.y)}else if("Clockwise"===this.direction){var j=a({x:b,y:c},d,e),k=a({x:b,y:c},d,e-JenScript.Math.toRadians(h));g.moveTo(j.x,j.y).arcTo(d,d,0,i,1,k.x,k.y)}}return this.intersectionArc=g,this.intersectionArc}}),JenScript.PathArcManualBinder=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.PathArcManualBinder,JenScript.PathBinder),JenScript.Model.addMethods(JenScript.PathArcManualBinder,{_init:function(a){a=a||{},this.radius=a.radius,this.startAngleDegree=a.startAngleDegree,this.extendsAngleDegree=a.extendsAngleDegree,this.shiftRadius=void 0!==a.shiftRadius?a.shiftRadius:0,this.shiftAngleDegree=void 0!==a.shiftAngleDegree?a.shiftAngleDegree:0},bindPath:function(a){var b=a.getCenterDevice().getX(),c=a.getCenterDevice().getY(),d=b+this.shiftRadius*Math.cos(JenScript.Math.toRadians(this.shiftAngleDegree)),e=c-this.shiftRadius*Math.sin(JenScript.Math.toRadians(this.shiftAngleDegree)),f=function(a,b,c){return{x:a.x+b*Math.cos(JenScript.Math.toRadians(c)),y:a.y-b*Math.sin(JenScript.Math.toRadians(c))}},g={x:d,y:e},h=f(g,this.radius,this.startAngleDegree),i=f(g,this.radius,this.startAngleDegree+this.extendsAngleDegree),j=new JenScript.SVGPath,k=this.extendsAngleDegree>=180||this.extendsAngleDegree<=-180?1:0,l=this.extendsAngleDegree<0?1:0;return j.moveTo(h.x,h.y).arcTo(this.radius,this.radius,0,k,l,i.x,i.y),j}}),JenScript.PathCubicAutoBinder=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.PathCubicAutoBinder,JenScript.AbstractPathAutoBinder),JenScript.Model.addMethods(JenScript.PathCubicAutoBinder,{__init:function(a){a=a||{},this.intersectionCubicCurve,this.controlOffsetRadius=10,this.controlOffsetAngleDegree=10,a.name="JenScript.PathCubicAutoBinder",JenScript.AbstractPathAutoBinder.call(this,a)},getIntersectionCubicCurve:function(){return this.intersectionCubicCurve},setIntersectionCubicCurve:function(a){this.intersectionCubicCurve=a},getControlOffsetRadius:function(){return this.controlOffsetRadius},setControlOffsetRadius:function(a){if(0>a)throw new Error("control offset radius must be positive");this.controlOffsetRadius=a},getControlOffsetAngleDegree:function(){return this.controlOffsetAngleDegree},setControlOffsetAngleDegree:function(a){if(0>a)throw new Error("control offset angle must be positive");this.controlOffsetAngleDegree=a},createCubicStart2End:function(){return(new JenScript.SVGPath).moveTo(this.intersectionPointStart.getX(),this.intersectionPointStart.getY()).cubicTo(this.getControlPoint1().getX(),this.getControlPoint1().getY(),this.getControlPoint2().getX(),this.getControlPoint2().getY(),this.intersectionPointEnd.getX(),this.intersectionPointEnd.getY())},createCubicEnd2Start:function(){return(new JenScript.SVGPath).moveTo(this.intersectionPointEnd.getX(),this.intersectionPointEnd.getY()).cubicTo(this.getControlPoint1().getX(),this.getControlPoint1().getY(),this.getControlPoint2().getX(),this.getControlPoint2().getY(),this.intersectionPointStart.getX(),this.intersectionPointStart.getY())},createPath:function(){return void 0===this.intersectionPointStart||void 0===this.intersectionPointEnd?void 0:(this.polarDegree>=0&&this.polarDegree<180?"AntiClockwise"===this.direction?this.intersectionCubicCurve=this.createCubicStart2End():"Clockwise"===this.direction&&(this.intersectionCubicCurve=this.createCubicEnd2Start()):this.polarDegree>=180&&this.polarDegree<360&&("AntiClockwise"===this.direction?this.intersectionCubicCurve=this.createCubicEnd2Start():"Clockwise"===this.direction&&(this.intersectionCubicCurve=this.createCubicStart2End())),this.intersectionCubicCurve)},getControlPoint1:function(){if("Clockwise"===this.direction){var a=this.x1+(this.radius+this.controlOffsetRadius)*Math.cos(JenScript.Math.toRadians(this.polarDegree)+Math.PI+JenScript.Math.toRadians(this.controlOffsetAngleDegree)),b=this.y1-(this.radius+this.controlOffsetRadius)*Math.sin(JenScript.Math.toRadians(this.polarDegree)+Math.PI+JenScript.Math.toRadians(this.controlOffsetAngleDegree));return new JenScript.Point2D(a,b)}if("AntiClockwise"===this.direction){var a=this.x1+(this.radius+this.controlOffsetRadius)*Math.cos(JenScript.Math.toRadians(this.polarDegree)+Math.PI-JenScript.Math.toRadians(this.controlOffsetAngleDegree)),b=this.y1-(this.radius+this.controlOffsetRadius)*Math.sin(JenScript.Math.toRadians(this.polarDegree)+Math.PI-JenScript.Math.toRadians(this.controlOffsetAngleDegree));return new JenScript.Point2D(a,b)}},getControlPoint2:function(){if("Clockwise"===this.direction){var a=this.x1+(this.radius+this.controlOffsetRadius)*Math.cos(JenScript.Math.toRadians(this.polarDegree)+Math.PI-JenScript.Math.toRadians(this.controlOffsetAngleDegree)),b=this.y1-(this.radius+this.controlOffsetRadius)*Math.sin(JenScript.Math.toRadians(this.polarDegree)+Math.PI-JenScript.Math.toRadians(this.controlOffsetAngleDegree));return new JenScript.Point2D(a,b)}if("AntiClockwise"===this.direction){var a=this.x1+(this.radius+this.controlOffsetRadius)*Math.cos(JenScript.Math.toRadians(this.polarDegree)+Math.PI+JenScript.Math.toRadians(this.controlOffsetAngleDegree)),b=this.y1-(this.radius+this.controlOffsetRadius)*Math.sin(JenScript.Math.toRadians(this.polarDegree)+Math.PI+JenScript.Math.toRadians(this.controlOffsetAngleDegree));return new JenScript.Point2D(a,b)}},paintDebug:function(a){var b=this.createPath();if(void 0!==b){this.solveIntersectionPoints();var c=(new JenScript.SVGPath).moveTo(this.x1,this.y1).lineTo(this.x0,this.y0);if(a.insertSVG(c.stroke(JenScript.Color.brighten(JenScript.RosePalette.CALYPSOBLUE,30).toHexString()).fillNone().toSVG()),a.insertSVG(this.arc0.stroke("black").fillNone().toSVG()),a.insertSVG(this.arc1.stroke("darkgray").fillNone().toSVG()),void 0!==this.intersectionPointStart&&void 0!==this.intersectionPointEnd){var d=(new JenScript.SVGPath).moveTo(this.x1,this.y1).lineTo(this.intersectionPointStart.x,this.intersectionPointStart.y);a.insertSVG(d.stroke("yellow").fillNone().toSVG());var e=(new JenScript.SVGPath).moveTo(this.x1,this.y1).lineTo(this.intersectionPointEnd.x,this.intersectionPointEnd.y);a.insertSVG(e.stroke("yellow").fillNone().toSVG());var f=(new JenScript.SVGCircle).center(this.intersectionPointStart.getX(),this.intersectionPointStart.getY()).radius(4),g=(new JenScript.SVGCircle).center(this.intersectionPointEnd.getX(),this.intersectionPointEnd.getY()).radius(4),h="Clockwise"==this.direction?"cyan":"orange";this.drawPath(a,b,h),a.insertSVG(f.fill(JenScript.RosePalette.LIME).toSVG()),a.insertSVG(g.fill(JenScript.RosePalette.LIME).toSVG())}}}}),JenScript.PathQuadAutoBinder=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.PathQuadAutoBinder,JenScript.AbstractPathAutoBinder),JenScript.Model.addMethods(JenScript.PathQuadAutoBinder,{__init:function(a){a=a||{},this.intersectionQuadCurve,this.controlOffsetRadius=10,a.name="JenScript.PathQuadAutoBinder",JenScript.AbstractPathAutoBinder.call(this,a)},getIntersectionQuadCurve:function(){return this.intersectionQuadCurve},setIntersectionQuadCurve:function(a){this.intersectionQuadCurve=a},getControlOffsetRadius:function(){return this.controlOffsetRadius},setControlOffsetRadius:function(a){if(this.controlOffsetRadius<0)throw new Error("control offset radius must be positive");this.controlOffsetRadius=a},createQuadStart2End:function(){return(new JenScript.SVGPath).moveTo(this.intersectionPointStart.getX(),this.intersectionPointStart.getY()).quadTo(this.getControlPoint().getX(),this.getControlPoint().getY(),this.intersectionPointEnd.getX(),this.intersectionPointEnd.getY())},createQuadEnd2Start:function(){return(new JenScript.SVGPath).moveTo(this.intersectionPointEnd.getX(),this.intersectionPointEnd.getY()).quadTo(this.getControlPoint().getX(),this.getControlPoint().getY(),this.intersectionPointStart.getX(),this.intersectionPointStart.getY())},createPath:function(){return void 0===this.intersectionPointStart||void 0==this.intersectionPointEnd?void 0:(this.polarDegree>=0&&this.polarDegree<180?"AntiClockwise"===this.direction?this.intersectionQuadCurve=this.createQuadStart2End():this.direction==Direction.Clockwise&&(this.intersectionQuadCurve=this.createQuadEnd2Start()):this.polarDegree>=180&&this.polarDegree<360&&("AntiClockwise"===this.direction?this.intersectionQuadCurve=this.createQuadEnd2Start():this.direction==Direction.Clockwise&&(this.intersectionQuadCurve=this.createQuadStart2End())),this.intersectionQuadCurve)},getControlPoint:function(){var a=this.x1+(this.radius+this.controlOffsetRadius)*Math.cos(JenScript.Math.toRadians(this.polarDegree)+Math.PI),b=this.y1-(this.radius+this.controlOffsetRadius)*Math.sin(JenScript.Math.toRadians(this.polarDegree)+Math.PI);return new JenScript.Point2D(a,b)},paintDebug:function(a){var b=this.createPath();if(void 0!==b){this.solveIntersectionPoints();var c=(new JenScript.SVGPath).moveTo(this.x1,this.y1).lineTo(this.x0,this.y0);if(a.insertSVG(c.stroke(JenScript.Color.brighten(JenScript.RosePalette.CALYPSOBLUE,30).toHexString()).fillNone().toSVG()),a.insertSVG(this.arc0.stroke("black").fillNone().toSVG()),a.insertSVG(this.arc1.stroke("darkgray").fillNone().toSVG()),void 0!==this.intersectionPointStart&&void 0!==this.intersectionPointEnd){var d=(new JenScript.SVGPath).moveTo(this.x1,this.y1).lineTo(this.intersectionPointStart.x,this.intersectionPointStart.y);a.insertSVG(d.stroke("yellow").fillNone().toSVG());var e=(new JenScript.SVGPath).moveTo(this.x1,this.y1).lineTo(this.intersectionPointEnd.x,this.intersectionPointEnd.y);a.insertSVG(e.stroke("yellow").fillNone().toSVG());var f=(new JenScript.SVGCircle).center(this.intersectionPointStart.getX(),this.intersectionPointStart.getY()).radius(4),g=(new JenScript.SVGCircle).center(this.intersectionPointEnd.getX(),this.intersectionPointEnd.getY()).radius(4),h="Clockwise"==this.direction?"cyan":"orange";this.drawPath(a,b,h),a.insertSVG(f.fill(JenScript.RosePalette.LIME).toSVG()),a.insertSVG(g.fill(JenScript.RosePalette.LIME).toSVG())}}}})}(),function(){JenScript.GaugeNeedlePainter=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.GaugeNeedlePainter,{init:function(a){a=a||{}},paintNeedle:function(){throw new Error("JenScript.GaugeNeedlePainter, paintNeedle method should be provide by override")}}),JenScript.GaugeNeedleClassicPainter=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.GaugeNeedleClassicPainter,JenScript.GaugeNeedlePainter),JenScript.Model.addMethods(JenScript.GaugeNeedleClassicPainter,{_init:function(a){a=a||{},JenScript.GaugeNeedlePainter.call(this,a)},paintNeedle:function(a,b){var c=b.getNeedleBaseAnchorBinder().bindAnchor(b.getBody().getGauge()),d=b.getNeedleValueAnchorBinder().bindAnchor(b.getBody().getGauge()),e=(new JenScript.SVGPath).moveTo(c.x,c.y).lineTo(d.x,d.y),f=e.strokeWidth(4).strokeLineCap("round").opacity(.6).stroke("black").toSVG(),g=e.strokeWidth(10).strokeLineCap("round").opacity(.4).stroke(JenScript.RosePalette.AEGEANBLUE).toSVG();a.insertSVG(g),a.insertSVG(f);var h=14,i={percents:["0%","100%"],colors:[JenScript.RosePalette.AEGEANBLUE,"black"]},j="gradient"+JenScript.sequenceId++,k=(new JenScript.SVGRadialGradient).Id(j).center(c.getX(),c.getY()).focus(c.getX(),c.getY()).radius(h).shade(i.percents,i.colors).toSVG();a.definesSVG(k);var l=(new JenScript.SVGCircle).center(c.getX(),c.getY()).radius(h);a.insertSVG(l.fillURL(j).fillOpacity(.6).strokeOpacity(.5).strokeWidth(2).stroke(JenScript.RosePalette.AEGEANBLUE).toSVG())}})}(),function(){JenScript.GaugeMetricsPath=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.GaugeMetricsPath,JenScript.GeneralMetricsPath),JenScript.Model.addMethods(JenScript.GaugeMetricsPath,{_init:function(a){console.log("create gauge metrics path"),a=a||{},a.nature="Device",this.currentValue,this.needleBaseAnchorBinder,this.needleValueAnchorBinder,this.body,this.pathBinder,this.gaugeNeedlePainter,JenScript.GeneralMetricsPath.call(this,a)},
getGaugeNeedlePainter:function(){return this.gaugeNeedlePainter},setGaugeNeedlePainter:function(a){this.gaugeNeedlePainter=a},getCurrentValue:function(){return this.currentValue},setCurrentValue:function(a){if(this.currentValue<this.getMin()||this.currentValue>this.getMax())throw new Error("Gauge Metrics out of range. "+this.currentValue+" [min,max] path range.");this.currentValue=a},getPathBinder:function(){return this.pathBinder},setPathBinder:function(a){void 0!==a&&a.setMetricsPath(this),this.pathBinder=a},getNeedleBaseAnchorBinder:function(){return this.needleBaseAnchorBinder},setNeedleBaseAnchorBinder:function(a){a.setMetricsPath(this),this.needleBaseAnchorBinder=a},getNeedleValueAnchorBinder:function(){return this.needleValueAnchorBinder},setNeedleValueAnchorBinder:function(a){a.setMetricsPath(this),this.needleValueAnchorBinder=a},getBody:function(){return this.body},setBody:function(a){this.body=a},draw:function(a){console.log("gauge metrics path draw"),this.graphicsContext=a,this.getMetrics()}})}(),function(){JenScript.RadialGauge=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.RadialGauge,{init:function(a){this.x=void 0!==a.x?a.x:0,this.y=void 0!==a.y?a.y:0,this.radius=a.radius,this.projection,this.envelop,this.glasses=[],this.backgrounds=[],this.bodies=[]},getCenterDevice:function(){var a=this.getProjection().userToPixelX(this.x),b=this.getProjection().userToPixelY(this.y);return new JenScript.Point2D(a,b)},getRadialPointAt:function(a,b){var c=this.getCenterDevice(),d=c.getX(),e=c.getY(),f=d+a*Math.cos(JenScript.Math.toRadians(b)),g=e-a*Math.sin(JenScript.Math.toRadians(b));return new JenScript.Point2D(f,g)},getBackgrounds:function(){return this.backgrounds},setBackgrounds:function(a){this.backgrounds=a},addBackground:function(a){this.backgrounds[this.backgrounds.length]=a},getProjection:function(){return this.projection},setProjection:function(a){this.projection=a},getRadius:function(){return this.radius},setRadius:function(a){this.radius=a},getX:function(){return this.x},setX:function(a){this.x=a},getY:function(){return this.y},setY:function(a){this.y=a},getEnvelop:function(){return this.envelop},setEnvelop:function(a){a.setGauge(this),this.envelop=a},getGlasses:function(){return this.glasses},setGlasses:function(a){for(var b=0;b<a.length;b++)this.addGlass(a[b])},addGlass:function(a){a.setGauge(this),this.glasses[this.glasses.length]=a},getBodies:function(){return this.bodies},setBodies:function(a){for(var b=0;b<a.length;b++)this.addBody(a[b])},addBody:function(a){a.setGauge(this),this.bodies[this.bodies.length]=a}})}(),function(){JenScript.GaugeCompass=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.GaugeCompass,JenScript.RadialGauge),JenScript.Model.addMethods(JenScript.GaugeCompass,{_init:function(a){a=a||{},this.gaugeRadius=110,a.radius=110,JenScript.RadialGauge.call(this,a);var b=new JenScript.Cisero;this.setEnvelop(b);var c=new JenScript.TextureCircularBackground;this.addBackground(c),this.body=new JenScript.GaugeBody,this.addBody(this.body),this.createSecondaryMetrics()},createSecondaryMetrics:function(){this.secondaryPathManager=new JenScript.GaugeMetricsPath,this.secondaryPathManager.setRange(0,360),this.secondaryPathManager.setPathBinder(new JenScript.PathArcManualBinder({radius:this.gaugeRadius-50,startAngleDegree:0,extendsAngleDegree:359})),this.body.registerGaugeMetricsPath(this.secondaryPathManager);var a=new JenScript.GlyphMetric;a.setValue(30),a.setMetricsLabel("30"),this.secondaryPathManager.addMetric(a),a=new JenScript.GlyphMetric,a.setValue(60),a.setMetricsLabel("60"),this.secondaryPathManager.addMetric(a),a=new JenScript.GlyphMetric,a.setValue(120),a.setMetricsLabel("120"),this.secondaryPathManager.addMetric(a),a=new JenScript.GlyphMetric,a.setValue(150),a.setMetricsLabel("150"),this.secondaryPathManager.addMetric(a),a=new JenScript.GlyphMetric,a.setValue(210),a.setMetricsLabel("210"),this.secondaryPathManager.addMetric(a),a=new JenScript.GlyphMetric,a.setValue(240),a.setMetricsLabel("240"),this.secondaryPathManager.addMetric(a),a=new JenScript.GlyphMetric,a.setValue(300),this.secondaryPathManager.addMetric(a),a=new JenScript.GlyphMetric,a.setValue(330),a.setMetricsLabel("330"),this.secondaryPathManager.addMetric(a)}})}();