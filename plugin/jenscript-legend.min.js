// JenScript -  JavaScript HTML5/SVG Library
// version : 1.3.1
// Author : Sebastien Janaud 
// Web Site : http://jenscript.io
// Twitter  : http://twitter.com/JenSoftAPI
// Copyright (C) 2008 - 2017 JenScript, product by JenSoftAPI company, France.
// build: 2017-05-31
// All Rights reserved

!function(){JenScript.TitleLegendPlugin=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.TitleLegendPlugin,JenScript.Plugin),JenScript.Model.addMethods(JenScript.TitleLegendPlugin,{_init:function(a){a=a||{},a.priority=100,a.name="TitleLegendPlugin",this.text=a.text,this.fontSize=void 0!==a.fontSize?a.fontSize:12,this.textColor=void 0!==a.textColor?a.textColor:"red",this.fontWeight=void 0!==a.fontWeight?a.fontWeight:"normal",this.part=void 0!==a.part?a.part:JenScript.ViewPart.Device,this.layout=void 0!==a.layout?a.layout:"absolute",this.x=void 0!==a.x?a.x:30,this.y=void 0!==a.y?a.y:30,this.textAnchor=void 0!==a.textAnchor?a.textAnchor:"middle",this.rotate=void 0!==a.rotate?a.rotate:!1,this.rotateAngle=void 0!==a.rotateAngle?a.rotateAngle:90,this.xAlign=void 0!==a.xAlign?a.xAlign:"right",this.yAlign=void 0!==a.yAlign?a.yAlign:"bottom",this.xMargin=void 0!==a.xMargin?a.xMargin:5,this.yMargin=void 0!==a.yMargin?a.yMargin:5,JenScript.Plugin.call(this,a)},paintAbsoluteLegend:function(a,b){if(this.part===b){var c=(new JenScript.SVGElement).name("text").attr("id",JenScript.sequenceId++).attr("x",this.x).attr("y",this.y).attr("font-size",this.fontSize).attr("font-weight",this.fontWeight).attr("fill",this.textColor).attr("text-anchor",this.textAnchor).textContent(this.text);this.rotate&&c.attr("transform","rotate("+this.rotateAngle+","+this.x+","+this.y+")"),a.insertSVG(c.buildHTML())}},paintRelativeLegend:function(a,b){if(this.part===b){var c=this.getProjection().getView().getComponent(b).getWidth(),d=this.getProjection().getView().getComponent(b).getHeight();"right"===this.xAlign&&(this.x=c-this.xMargin),"left"===this.xAlign&&(this.x=this.xMargin),"center"===this.xAlign&&(this.x=c/2),"top"===this.yAlign&&(this.y=this.fontSize+this.yMargin),"bottom"===this.yAlign&&(this.y=d-this.yMargin),"center"===this.yAlign&&(this.y=d/2),this.textAnchor="middle","right"===this.xAlign&&"top"===this.yAlign&&(this.textAnchor="end"),"right"===this.xAlign&&"bottom"===this.yAlign&&(this.textAnchor=this.rotate?"start":"end"),"left"===this.xAlign&&"top"===this.yAlign&&(this.textAnchor="start"),"left"===this.xAlign&&"bottom"===this.yAlign&&(this.textAnchor=this.rotate?"end":"start");var e=(new JenScript.SVGElement).name("text").attr("id",JenScript.sequenceId++).attr("x",this.x).attr("y",this.y).attr("font-size",this.fontSize).attr("font-weight",this.fontWeight).attr("fill",this.textColor).attr("text-anchor",this.textAnchor).textContent(this.text);this.rotate&&e.attr("transform","rotate("+this.rotateAngle+","+this.x+","+this.y+")"),a.insertSVG(e.buildHTML())}},paintPlugin:function(a,b){if("absolute"===this.layout)this.paintAbsoluteLegend(a,b);else{if("relative"!==this.layout)throw new Error("Invalid legend layout");this.paintRelativeLegend(a,b)}}})}();