// JenScript -  JavaScript HTML5/SVG Library
// version : 1.3.1
// Author : Sebastien Janaud 
// Web Site : http://jenscript.io
// Twitter  : http://twitter.com/JenSoftAPI
// Copyright (C) 2008 - 2017 JenScript, product by JenSoftAPI company, France.
// build: 2017-06-02
// All Rights reserved

!function(){JenScript.Donut2DPlugin=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.Donut2DPlugin,JenScript.Plugin),JenScript.Model.addMethods(JenScript.Donut2DPlugin,{_init:function(a){a=a||{},a.name="Donut2DPlugin",this.donuts=[],this.donutListeners=[],JenScript.Plugin.call(this,a)},addDonut:function(a){a.plugin=this,this.donuts[this.donuts.length]=a,this.repaintPlugin()},select:function(a){for(var b=0;b<this.donuts.length;b++)if(this.donuts[b].name===a)return this.donuts[b]},addDonutListener:function(a,b){var c={action:a,onEvent:b};this.donutListeners[this.donutListeners.length]=c},fireDonutEvent:function(a,b){for(var c=0;c<this.donutListeners.length;c++)this.donutListeners[c].action===a&&this.donutListeners[c].onEvent(b)},dispatchDonutAction:function(a,b,c,d){for(var e=this,f=function(a){"move"===b?a.lockRollover?e.fireDonutEvent("move",{slice:a,x:c,y:d,device:{x:c,y:d}}):(a.lockRollover=!0,e.fireDonutEvent("enter",{slice:a,x:c,y:d,device:{x:c,y:d}}),e.fireDonutEvent("move",{slice:a,x:c,y:d,device:{x:c,y:d}})):"press"===b?e.fireDonutEvent("press",{slice:a,x:c,y:d,device:{x:c,y:d}}):"release"===b&&e.fireDonutEvent("release",{slice:a,x:c,y:d,device:{x:c,y:d}})},g=function(a){return"move"===b&&a.lockRollover?(a.lockRollover=!1,e.fireDonutEvent("exit",{slice:a,x:c,y:d,device:{x:c,y:d}}),!0):void 0},h=0;h<this.donuts.length;h++)for(var i=this.donuts[h],j=0;j<i.slices.length;j++){var k=i.slices[j],l=Math.sqrt((k.sc.y-d)*(k.sc.y-d)+(k.sc.x-c)*(k.sc.x-c)),m=0;if(l<=i.outerRadius&&l>=i.innerRadius){c>k.sc.x&&d<k.sc.y?m=Math.atan((k.sc.y-d)/(c-k.sc.x)):c>k.sc.x&&d>=k.sc.y?m=Math.atan((k.sc.y-d)/(c-k.sc.x))+2*Math.PI:c<k.sc.x?m=Math.atan((k.sc.y-d)/(c-k.sc.x))+Math.PI:c===k.sc.x&&d<k.sc.y?m=Math.PI/2:c===k.sc.x&&d>k.sc.y&&(m=3*Math.PI/2);var n=JenScript.Math.toDegrees(m);n>k.startAngleDegree&&n<k.startAngleDegree+k.extendsDegree?f(k):n<k.startAngle&&k.startAngleDegree+k.extendsDegree>360&&k.startAngleDegree+k.extendsDegree-360>=n?f(k):g(k)}else g(k)}return!1},onPress:function(a,b,c,d){return this.dispatchDonutAction(a,"press",c,d)},onRelease:function(a,b,c,d){return this.dispatchDonutAction(a,"release",c,d)},onMove:function(a,b,c,d){return this.dispatchDonutAction(a,"move",c,d)},onClick:function(a,b,c,d){return this.dispatchDonutAction(a,"click",c,d)},onEnter:function(a,b,c,d){return this.dispatchDonutAction(a,"enter",c,d)},onExit:function(a,b,c,d){return this.dispatchDonutAction(a,"exit",c,d)},onProjectionRegister:function(){var a=this;this.getProjection().addProjectionListener("boundChanged",function(){a.repaintPlugin()},"donut2D projection bound changed")},repaintDonuts:function(){this.repaintPlugin()},paintPlugin:function(a,b){if(b===JenScript.ViewPart.Device)for(var c=0;c<this.donuts.length;c++){var d=this.donuts[c];if(d.isSolvable()){d.solveDonut2D(),a.deleteGraphicsElement(d.Id),d.svg.donutRoot=(new JenScript.SVGGroup).Id(d.Id).toSVG(),a.insertSVG(d.svg.donutRoot),void 0!==d.fill&&d.fill.fillDonut2D(a,d),void 0!==d.stroke&&d.stroke.strokeDonut2D(a,d);for(var c=0;c<d.effects.length;c++){var e=d.effects[c];e.effectDonut2D(a,d)}for(var c=0;c<d.slices.length;c++){var f=d.slices[c];void 0!==f.fill&&f.fill.fillDonut2DSlice(a,f),void 0!==f.stroke&&f.stroke.strokeDonut2DSlice(a,f)}for(var g=0;g<d.slices.length;g++){var h=d.slices[g],i=h.getSliceLabel();void 0!==i&&i.paintDonut2DSliceLabel(a,h)}}}}})}(),function(){JenScript.Donut2D=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.Donut2D,{init:function(a){a=a||{},this.Id="donut2d"+JenScript.sequenceId++,this.name=void 0!==a.name?a.name:"Donut2D name undefined",this.nature=void 0!==a.nature?a.nature:"User",this.centerX=void 0!==a.x?a.x:0,this.centerY=void 0!==a.y?a.y:0,this.outerRadius=void 0!==a.outerRadius?a.outerRadius:100,this.innerRadius=void 0!==a.innerRadius?a.innerRadius:60,this.startAngleDegree=void 0!==a.startAngleDegree?a.startAngleDegree:0,this.stroke,this.fill=new JenScript.Donut2DDefaultFill,this.effects=[],this.slices=[],this.plugin,this.svg={}},getId:function(){return this.Id},repaint:function(){void 0!==this.plugin&&this.plugin.repaintPlugin()},setStartAngleDegree:function(a){this.startAngleDegree=a,this.repaint()},getInnerRadius:function(){return this.innerRadius},setInnerRadius:function(a){this.innerRadius=a,this.repaint()},getOuterRadius:function(){return this.outerRadius},setOuterRadius:function(a){this.outerRadius=a,this.repaint()},getCenterX:function(){return this.centerX},getCenterY:function(){return this.centerY},setStroke:function(a){this.stroke=a,this.repaint()},setFill:function(a){this.fill=a,this.repaint()},addEffect:function(a){this.effects[this.effects.length]=a,this.repaint()},addSlice:function(a){return a.donut=this,this.slices[this.slices.length]=a,this.repaint(),this},slice:function(a){var b=new JenScript.Donut2DSlice(a);return this.addSlice(b),this},addSlices:function(a){for(var b=0;b<a.length;b++)this.addSlice(a[b]);return this},select:function(a){for(var b=0;b<this.slices.length;b++)if(this.slices[b].name===a)return this.slices[b]},isSolvable:function(){return this.slices.length>0},solveDonut2D:function(){for(var a=this,b=(function(){if("User"==a.nature){var b=a.plugin.getProjection().userToPixel(new JenScript.Point2D(a.centerX,a.centerY));a.buildCenterX=b.x,a.buildCenterY=b.y}else"Device"==a.nature&&(a.buildCenterX=a.centerX,a.buildCenterY=a.centerY);a.buildCenter=new JenScript.Point2D(a.buildCenterX,a.buildCenterY)}(),function(){for(var b=0,c=0;c<a.slices.length;c++){var d=a.slices[c];b+=d.value}for(var c=0;c<a.slices.length;c++){var d=a.slices[c],e=d.value/b;d.ratio=e}}(),0);b<this.slices.length;b++){var c=this.slices[b];this.solveSlice(c)}},solveSlice:function(a){var b=360*a.getRatio();this.startAngleDegree>360&&(this.startAngleDegree=this.startAngleDegree-360);var c=this.startAngleDegree+b/2;c>360&&(c-=360);var d=this.startAngleDegree,e=this.buildCenterX+a.divergence*Math.cos(JenScript.Math.toRadians(c)),f=this.buildCenterY-a.divergence*Math.sin(JenScript.Math.toRadians(c));a.sc={x:e,y:f};var g={x:e+this.outerRadius*Math.cos(JenScript.Math.toRadians(d)),y:f-this.outerRadius*Math.sin(JenScript.Math.toRadians(d))},h={x:e+this.outerRadius*Math.cos(JenScript.Math.toRadians(d+b)),y:f-this.outerRadius*Math.sin(JenScript.Math.toRadians(d+b))};a.ob=g,a.oe=h;var i=b>180?"1":"0",j="M"+g.x+","+g.y+" A"+this.outerRadius+","+this.outerRadius+" 0 "+i+",0 "+h.x+","+h.y;a.outerArc=j;var k={x:e+this.innerRadius*Math.cos(JenScript.Math.toRadians(d)),y:f-this.innerRadius*Math.sin(JenScript.Math.toRadians(d))},l={x:e+this.innerRadius*Math.cos(JenScript.Math.toRadians(d+b)),y:f-this.innerRadius*Math.sin(JenScript.Math.toRadians(d+b))};a.ib=k,a.ie=l;var m="M"+k.x+","+k.y+" A"+this.sliceInnerEnd+","+this.sliceInnerEnd+" 0 "+i+",0 "+l.x+","+l.y;a.innerArc=m;var n="M"+g.x+","+g.y+" A"+this.outerRadius+","+this.outerRadius+" 0 "+i+",0 "+h.x+","+h.y+" L "+l.x+","+l.y+" A"+this.innerRadius+","+this.innerRadius+" 0 "+i+",1 "+k.x+","+k.y+" Z";a.face=n,a.medianDegree=c,a.startAngleDegree=d,a.endAngleDegree=d+b,a.extendsDegree=b,d+=b,this.startAngleDegree=d},getSlices:function(){return this.slices},isLockRollover:function(){for(var a=0;a<this.slices.length;a++){var b=this.slices[a];if(b.lockRollover)return!0}return!1},shift:function(){function a(a){setTimeout(function(){b.startAngleDegree=b.startAngleDegree+36,b.repaint()},100*a)}for(var b=this,c=0;10>c;c++)a(c)}})}(),function(){JenScript.Donut2DSlice=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.Donut2DSlice,{init:function(a){if(a=a||{},this.name=void 0!==a.name?a.name:"Donut2DSlice name undefined",this.value=void 0!==a.value?a.value:1,this.themeColor=void 0!==a.themeColor?a.themeColor:JenScript.createColor(),this.divergence=void 0!==a.divergence?a.divergence:0,this.fillOpacity=void 0!==a.fillOpacity?a.fillOpacity:1,this.strokeOpacity=void 0!==a.strokeOpacity?a.strokeOpacity:1,this.ratio,this.startAngleDegree,this.endAngleDegree,this.face,this.outerArc,this.innerArc,this.lockRollover=!1,this.stroke,this.fill,this.sliceLabel,this.donut,this.value<=0)throw new Error("Slice value should be greater than 0")},repaint:function(){void 0!==this.donut&&this.donut.repaint()},setThemeColor:function(a){this.color=a,this.repaint()},getThemeColor:function(){return this.themeColor},setDivergence:function(a){this.divergence=a,this.repaint()},getDivergence:function(){return this.divergence},setFillOpacity:function(a){this.fillOpacity=a,this.repaint()},getFillOpacity:function(){return this.fillOpacity},setStrokeOpacity:function(a){this.strokeOpacity=a,this.repaint()},getStrokeOpacity:function(){return this.strokeOpacity},setSliceLabel:function(a){void 0!==a&&(a.slice=this),this.sliceLabel=a,this.repaint()},getSliceLabel:function(){return this.sliceLabel},getRatio:function(){return this.ratio},setStroke:function(a){this.stroke=a,this.repaint()},setFill:function(a){this.fill=a,this.repaint()},getStroke:function(){return this.stroke},getFill:function(){return this.fill}})}(),function(){JenScript.AbstractDonut2DFill=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.AbstractDonut2DFill,{init:function(a){a=a||{},this.name=a.name},fillDonut2D:function(){throw new Error("AbstractDonut2DFill fillDonut2D method should be provide by override.")}}),JenScript.Donut2DDefaultFill=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.Donut2DDefaultFill,JenScript.AbstractDonut2DFill),JenScript.Model.addMethods(JenScript.Donut2DDefaultFill,{_init:function(a){a=a||{},this.fillColor=a.fillColor,a.name="JenScript.Donut2DDefaultFill",JenScript.AbstractDonut2DFill.call(this,a)},fillDonut2D:function(a,b){for(var c=0;c<b.slices.length;c++){var d=b.slices[c],e=void 0!==this.fillColor?this.fillColor:d.themeColor,f=(new JenScript.SVGElement).name("path").attr("d",d.face).attr("stroke","none").attr("fill",e).attr("fill-opacity",d.fillOpacity);b.svg.donutRoot.appendChild(f.buildHTML())}}}),JenScript.Donut2DRadialFill=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.Donut2DRadialFill,JenScript.AbstractDonut2DFill),JenScript.Model.addMethods(JenScript.Donut2DRadialFill,{_init:function(a){a=a||{},this.fillColor=a.fillColor,a.name="JenScript.Donut2DRadialFill",JenScript.AbstractDonut2DFill.call(this,a)},fillDonut2D:function(a,b){for(var c=b.outerRadius,d=b.innerRadius,e=d+(c-d)/2,f=e/c*100+"%",g=d/c*100+"%",h=[g,f,"100%"],i=0;i<b.slices.length;i++){var j=b.slices[i],k=void 0!==this.fillColor?new JenScript.Color(this.fillColor).toHexString():new JenScript.Color(j.themeColor).toHexString(),l=JenScript.Color.darken(k).toHexString(),m=[l,k,l],n="gradient"+JenScript.sequenceId++,o=(new JenScript.SVGRadialGradient).Id(n).center(j.sc.x,j.sc.y).focus(j.sc.x,j.sc.y).radius(b.outerRadius).shade(h,m).toSVG();a.definesSVG(o);var p=(new JenScript.SVGElement).name("path").attr("d",j.face).attr("stroke","none").attr("fill","url(#"+n+")").attr("fill-opacity",j.fillOpacity);b.svg.donutRoot.appendChild(p.buildHTML())}}}),JenScript.AbstractDonut2DSliceFill=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.AbstractDonut2DSliceFill,{init:function(a){a=a||{},this.name=a.name},fillDonut2DSlice:function(){throw new Error("JenScript.AbstractDonut2DSliceFill fillDonut2DSlice method should be provide by override")}}),JenScript.Donut2DSliceDefaultFill=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.Donut2DSliceDefaultFill,JenScript.AbstractDonut2DSliceFill),JenScript.Model.addMethods(JenScript.Donut2DSliceDefaultFill,{_init:function(a){a=a||{},this.fillColor=a.fillColor,a.name="JenScript.Donut2DSliceDefaultFill",JenScript.AbstractDonut2DSliceFill.call(this,a)},fillDonut2DSlice:function(a,b){var c=void 0!==this.fillColor?this.fillColor:b.themeColor,d=(new JenScript.SVGElement).name("path").attr("d",b.face).attr("stroke","none").attr("fill",c).attr("fill-opacity",b.fillOpacity);b.donut.svg.donutRoot.appendChild(d.buildHTML())}}),JenScript.Donut2DSliceRadialFill=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.Donut2DSliceRadialFill,JenScript.AbstractDonut2DFill),JenScript.Model.addMethods(JenScript.Donut2DSliceRadialFill,{_init:function(a){a=a||{},this.fillColor=a.fillColor,a.name="JenScript.Donut2DSliceRadialFill",JenScript.AbstractDonut2DSliceFill.call(this,a)},fillDonut2DSlice:function(a,b){var c=b.donut.outerRadius,d=b.donut.innerRadius,e=d+(c-d)/2,f=e/c*100+"%",g=d/c*100+"%",h=[g,f,"100%"],i=void 0!==this.fillColor?new JenScript.Color(this.fillColor).toHexString():new JenScript.Color(b.themeColor).toHexString(),j=JenScript.Color.darken(i).toHexString(),k=[j,i,j],l="gradient"+JenScript.sequenceId++,m=(new JenScript.SVGRadialGradient).Id(l).center(b.sc.x,b.sc.y).focus(b.sc.x,b.sc.y).radius(b.donut.outerRadius).shade(h,k).toSVG();a.definesSVG(m);var n=(new JenScript.SVGElement).name("path").attr("d",b.face).attr("stroke","none").attr("fill","url(#"+l+")");b.donut.svg.donutRoot.appendChild(n.buildHTML())}})}(),function(){JenScript.AbstractDonut2Stroke=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.AbstractDonut2Stroke,{init:function(a){a=a||{},this.name=a.name},strokeDonut2D:function(){throw new Error("AbstractDonut2Stroke, strokeDonut2D method should be provide by override")}}),JenScript.Donut2DDefaultStroke=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.Donut2DDefaultStroke,JenScript.AbstractDonut2Stroke),JenScript.Model.addMethods(JenScript.Donut2DDefaultStroke,{_init:function(a){a=a||{},this.strokeColor=a.strokeColor,this.strokeWidth=a.strokeWidth,a.name="JenScript.Donut2DDefaultDraw",JenScript.AbstractDonut2Stroke.call(this,a)},strokeDonut2D:function(a,b){for(var c=0;c<b.slices.length;c++){var d=b.slices[c],e=void 0!==this.strokeColor?this.strokeColor:d.themeColor,f=(new JenScript.SVGElement).name("path").attr("d",d.face).attr("stroke",e).attr("stroke-opacity",d.strokeOpacity).attr("fill","none");b.svg.donutRoot.appendChild(f.buildHTML())}}}),JenScript.AbstractDonut2DSliceStroke=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.AbstractDonut2DSliceStroke,{init:function(a){a=a||{},this.name=a.name},strokeDonut2DSlice:function(){throw new Error("JenScript.AbstractDonut2DSliceStroke strokeDonut2DSlice method should be provide by override.")}}),JenScript.Donut2DSliceDefaultStroke=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.Donut2DSliceDefaultStroke,JenScript.AbstractDonut2DSliceStroke),JenScript.Model.addMethods(JenScript.Donut2DSliceDefaultStroke,{_init:function(a){a=a||{},this.strokeColor=a.strokeColor,this.strokeWidth=a.strokeWidth,a.name="JenScript.Donut2DSliceDefaultStroke",JenScript.AbstractDonut2DSliceStroke.call(this,a)},strokeDonut2DSlice:function(a,b){var c=void 0!==this.strokeColor?this.strokeColor:b.themeColor,d=(new JenScript.SVGElement).name("path").attr("d",b.face).attr("stroke",c).attr("fill","none");b.donut.svg.donutRoot.appendChild(d.buildHTML())}})}(),function(){JenScript.AbstractDonut2DEffect=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.AbstractDonut2DEffect,{init:function(a){a=a||{},this.name=a.name},effectDonut2D:function(){}}),JenScript.Donut2DLinearEffect=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.Donut2DLinearEffect,JenScript.AbstractDonut2DEffect),JenScript.Model.addMethods(JenScript.Donut2DLinearEffect,{_init:function(a){a=a||{},this.offsetRadius=void 0!==a.offsetRadius?a.offsetRadius:3,this.incidence=void 0!==a.incidence?a.incidence:120,this.defaultShader={percents:["0%","49%","51%","100%"],opacity:[.6,0,0,.6],colors:["rgb(60, 60, 60)","rgb(255,255,255)","rgb(255,255,255)","rgb(255, 255, 255)"]},this.shader=void 0!==a.shader?a.shader:this.defaultShader,a.name="JenScript.Donut2DLinearEffect",this.fillOpacity=void 0!==a.fillOpacity?a.fillOpacity:1,this.gradientsIds=[],JenScript.AbstractDonut2DEffect.call(this,a)},effectDonut2D:function(a,b){for(var c=0;c<this.gradientsIds.length;c++)a.deleteGraphicsElement(this.gradientsIds[c]);this.gradientsIds=[];for(var c=0;c<b.slices.length;c++){var d=b.slices[c],e=b.outerRadius-this.offsetRadius,f=b.innerRadius+this.offsetRadius,g=d.startAngleDegree,h=d.extendsDegree,i=h>180?"1":"0",j=function(a,b){return{x:d.sc.x+a*Math.cos(JenScript.Math.toRadians(b)),y:d.sc.y-a*Math.sin(JenScript.Math.toRadians(b))}},k=j(e,g),l=j(e,g+h),m=j(f,g),n=j(f,g+h),o="M"+k.x+","+k.y+" A"+e+","+e+" 0 "+i+",0 "+l.x+","+l.y+" L "+n.x+","+n.y+" A"+f+","+f+" 0 "+i+",1 "+m.x+","+m.y+" Z",p=j(e,this.incidence),q=j(e,this.incidence+180);void 0===this.shader&&(this.shader=this.defaultShader);var r="gradient"+JenScript.sequenceId++;this.gradientsIds[this.gradientsIds.length]=r;var s=(new JenScript.SVGLinearGradient).Id(r).from(p.x,p.y).to(q.x,q.y).shade(this.shader.percents,this.shader.colors,this.shader.opacity).toSVG();a.definesSVG(s);var t=(new JenScript.SVGElement).name("path").attr("d",o).attr("stroke","none").attr("fill-opacity",d.fillOpacity).attr("fill","url(#"+r+")");b.svg.donutRoot.appendChild(t.buildHTML())}}}),JenScript.Donut2DReflectionEffect=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.Donut2DReflectionEffect,JenScript.AbstractDonut2DEffect),JenScript.Model.addMethods(JenScript.Donut2DReflectionEffect,{_init:function(a){a=a||{},this.deviation=void 0!==a.deviation?a.deviation:3,this.opacity=void 0!==a.opacity?a.opacity:.3,this.length=void 0!==a.length?a.length:.5,this.verticalOffset=void 0!==a.verticalOffset?a.verticalOffset:0,a.name="JenScript.Donut2DReflectionEffect",JenScript.AbstractDonut2DEffect.call(this,a)},effectDonut2D:function(a,b){var c=b.svg.donutRoot.getBBox(),d="clip"+JenScript.sequenceId++,e=(new JenScript.SVGRect).origin(c.x,c.y+c.height).size(c.width,c.height*this.length),f=(new JenScript.SVGClipPath).Id(d).appendPath(e);a.definesSVG(f.toSVG());var g="filter"+JenScript.sequenceId++,h=(new JenScript.SVGFilter).Id(g).from(c.x,c.y).size(c.width,c.height).toSVG(),i=(new JenScript.SVGElement).name("feGaussianBlur").attr("in","SourceGraphic").attr("stdDeviation",this.deviation);h.appendChild(i.buildHTML()),a.definesSVG(h);var j=b.svg.donutRoot.cloneNode(!0);j.removeAttribute("id"),j.setAttribute("filter","url(#"+g+")"),j.setAttribute("transform","translate(0,"+c.height+"), scale(1,-1), translate(0,"+(-2*(c.y+c.height/2)-this.verticalOffset)+")"),j.setAttribute("opacity",this.opacity);var k=(new JenScript.SVGElement).name("g").buildHTML();j.setAttribute("id",j.getAttribute("id")+"_reflection"+JenScript.sequenceId++),k.setAttribute("clip-path","url(#"+d+")"),k.appendChild(j),a.insertSVG(k)}})}(),function(){JenScript.Donut2DAbstractLabel=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.Donut2DAbstractLabel,JenScript.AbstractLabel),JenScript.Model.addMethods(JenScript.Donut2DAbstractLabel,{_init:function(a){JenScript.AbstractLabel.call(this,a)},paintDonut2DSliceLabel:function(){throw new Error("paintDonut2DSliceLabel method should be provide by override")}}),JenScript.Donut2DBorderLabel=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.Donut2DBorderLabel,JenScript.Donut2DAbstractLabel),JenScript.Model.addMethods(JenScript.Donut2DBorderLabel,{__init:function(a){a=a||{},this.margin=void 0!==a.margin?a.margin:50,this.linkExtends=void 0!==a.linkExtends?a.linkExtends:30,a.name="JenScript.Donut2DBorderLabel",JenScript.Donut2DAbstractLabel.call(this,a)},setMargin:function(a){this.margin=a,this.slice.donut.plugin.repaintPlugin()},setLinkExtends:function(a){this.linkExtends=a,this.slice.donut.plugin.repaintPlugin()},paintDonut2DSliceLabel:function(a,b){var c=b.donut.getOuterRadius(),d=b.medianDegree,e=b.donut.buildCenterX+(c+b.getDivergence())*Math.cos(JenScript.Math.toRadians(d)),f=b.donut.buildCenterY-(c+b.getDivergence())*Math.sin(JenScript.Math.toRadians(d)),g=b.donut.buildCenterX+(c+this.linkExtends+b.getDivergence())*Math.cos(JenScript.Math.toRadians(d)),h=b.donut.buildCenterY-(c+this.linkExtends+b.getDivergence())*Math.sin(JenScript.Math.toRadians(d)),i=0,j=h,k=0,l=h,m="middle";d>=270&&360>=d||d>=0&&90>=d?(i=b.donut.buildCenterX+c+this.margin-5,k=b.donut.buildCenterX+c+this.margin+5,m="start",270===d&&(m="middle"),90===d&&(m="middle")):(i=b.donut.buildCenterX-c-this.margin+5,k=b.donut.buildCenterX-c-this.margin-5,m="end");var n="M "+e+","+f+" Q "+g+","+h+" "+i+","+j,o=(new JenScript.SVGElement).name("path").attr("d",n).attr("fill","none").attr("stroke","darkgray").buildHTML();this.setTextAnchor(m),this.setLocation(new JenScript.Point2D(k,l));var p=void 0!==this.textColor?this.textColor:b.themeColor;this.setTextColor(p),this.paintLabel(a),this.svg.label.appendChild(o)}}),JenScript.Donut2DRadialLabel=function(a){this.__init(a)},JenScript.Model.inheritPrototype(JenScript.Donut2DRadialLabel,JenScript.Donut2DAbstractLabel),JenScript.Model.addMethods(JenScript.Donut2DRadialLabel,{__init:function(a){a=a||{},this.offsetRadius=void 0!==a.offsetRadius?a.offsetRadius:20,a.name="JenScript.Donut2DAbstractLabel",JenScript.Donut2DAbstractLabel.call(this,a)},setOffsetRadius:function(a){this.offsetRadius=a,this.slice.donut.plugin.repaintPlugin()},paintDonut2DSliceLabel:function(a,b){var c={x:b.sc.x+(b.donut.outerRadius+this.offsetRadius)*Math.cos(JenScript.Math.toRadians(b.medianDegree)),y:b.sc.y-(b.donut.outerRadius+this.offsetRadius)*Math.sin(JenScript.Math.toRadians(b.medianDegree))},d="middle",e=0;b.medianDegree>0&&b.medianDegree<90?(d="start",e=10):b.medianDegree>90&&b.medianDegree<270?(d="end",e=-10):b.medianDegree>270&&b.medianDegree<=360?(d="start",e=10):(90===b.medianDegree||270===b.medianDegree)&&(d="middle"),this.setLocation(new JenScript.Point2D(c.x,c.y)),this.setTextAnchor(d);var f=void 0!==this.textColor?this.textColor:b.themeColor;this.setTextColor(f),this.paintLabel(a)}})}(),function(){JenScript.Donut2DBuilder=function(a,b,c){a.registerProjection(b);var d=new JenScript.Donut2DPlugin;b.registerPlugin(d);var e=new JenScript.Donut2D(c);d.addDonut(e);var f,g=[],h=[],i=[],j=function(a){var b=new JenScript.Donut2DSlice(a);return f=b,e.addSlice(b),h.push(b),this},k=function(a,b){var c;return"radial"===a&&(c=new JenScript.Donut2DRadialLabel(b)),"border"===a&&(c=new JenScript.Donut2DBorderLabel(b)),f.setSliceLabel(c),g.push(c),this},l=function(a,b){var c;return"linear"===a&&(c=new JenScript.Donut2DLinearEffect(b)),"reflection"===a&&(c=new JenScript.Donut2DReflectionEffect(b)),e.addEffect(c),i.push(c),this},m=function(a){return l("linear",a),this},n=function(a){return l("reflection",a),this};return{slice:j,label:k,effect:l,linearFx:m,reflectFx:n,view:function(){return a},projection:function(){return b},donut:function(){return e},labels:function(){return g},slices:function(){return j}}}}();