// JenScript -  JavaScript HTML5/SVG Library
// version : 1.3.1
// Author : Sebastien Janaud 
// Web Site : http://jenscript.io
// Twitter  : http://twitter.com/JenSoftAPI
// Copyright (C) 2008 - 2017 JenScript, product by JenSoftAPI company, France.
// build: 2017-05-31
// All Rights reserved

!function(){JenScript.BubblePlugin=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.BubblePlugin,JenScript.Plugin),JenScript.Model.addMethods(JenScript.BubblePlugin,{_init:function(a){a=a||{},a.priority=100,a.name="BubblePlugin",JenScript.Plugin.call(this,a),this.bubbles=[]},addBubble:function(a){return a.plugin=this,this.bubbles[this.bubbles.length]=a,this.repaintPlugin(),this},bubble:function(a){var b=new JenScript.Bubble(a);return this.addBubble(b),this},removeBubble:function(a){for(var b=[],c=0;c<this.bubbles.length;c++)this.bubbles[c].equals(a)||(b[b.length]=this.bubbles[c]);this.bubbles=b},onProjectionRegister:function(){var a=this;this.getProjection().addProjectionListener("boundChanged",function(){a.repaintPlugin()},"BubblePlugin projection bound changed")},paintPlugin:function(a,b){if("Device"===b)for(var c=0;c<this.bubbles.length;c++){var d=this.bubbles[c],e=this.getProjection().userToPixel(d.center),f=(new JenScript.SVGCircle).Id(d.Id).center(e.x,e.y).radius(d.radius);f.fill(d.fillColor).fillOpacity(d.fillOpacity),void 0!==d.strokeColor&&f.stroke(d.strokeColor).strokeWidth(d.strokeWidth).strokeOpacity(d.strokeOpacity),a.deleteGraphicsElement(d.Id),a.insertSVG(f.toSVG())}}})}(),function(){JenScript.Bubble=function(a){this.init(a)},JenScript.Model.inheritPrototype(JenScript.Bubble,JenScript.Plugin),JenScript.Model.addMethods(JenScript.Bubble,{init:function(a){a=a||{},a.priority=100,this.Id="bubble"+JenScript.sequenceId++,this.center=void 0!==a.center?a.center:new JenScript.Point2D(0,0),this.radius=void 0!==a.radius?a.radius:50,this.fillColor=void 0!==a.fillColor?a.fillColor:JenScript.RosePalette.INDIGO,this.fillOpacity=void 0!==a.fillOpacity?a.fillOpacity:1,this.strokeColor=a.strokeColor,this.strokeWidth=void 0!==a.strokeWidth?a.strokeWidth:1,this.strokeOpacity=void 0!==a.strokeOpacity?a.strokeOpacity:1},getCenter:function(){return this.center},setCenter:function(a){this.center=a},getRadius:function(){return this.radius},setRadius:function(a){this.radius=a},equals:function(a){return a instanceof JenScript.Bubble?a.Id===this.Id?!0:void 0:!1}})}();