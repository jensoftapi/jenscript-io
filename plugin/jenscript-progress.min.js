// JenScript - 1.3.1 2017-06-03
// http://jenscript.io - Copyright 2017 SÃ©bastien Janaud. All Rights reserved


!function(){JenScript.ProgressPlugin=function(a){this._init(a)},JenScript.Model.inheritPrototype(JenScript.ProgressPlugin,JenScript.Plugin),JenScript.Model.addMethods(JenScript.ProgressPlugin,{_init:function(a){this.width=a.width,this.height=a.height,this.x=a.x,this.y=a.y,a.name="ProgressPlugin",JenScript.Plugin.call(this,a),this.monitors=[]},addMonitor:function(a){a.plugin=this,this.monitors[this.monitors.length]=a,this.repaintPlugin()},paintMonitor:function(a,b,c,d,e){var f=(new JenScript.SVGRect).origin(d,e).size(this.width,this.height).radius(c.cornerRadius,c.cornerRadius).fillNone().strokeNone();if(void 0!==c.outlineColor&&f.stroke(c.outlineColor),void 0!==c.outlineStrokeWidth&&f.strokeWidth(c.outlineStrokeWidth),void 0!==c.backgroundColor&&f.fill(c.backgroundColor),f.fillOpacity(c.backgroundOpacity),a.insertSVG(f.toSVG()),void 0!==c.value&&void 0!==c.total){var g=this.width*c.value/c.total,h=(new JenScript.SVGRect).origin(d,e).size(g,this.height).radius(c.cornerRadius,c.cornerRadius);void 0!==c.outlineColor&&h.stroke(c.outlineColor),a.insertSVG(h.strokeNone().fill(c.foregroundColor).fillOpacity(c.foregroundOpacity).toSVG())}if(void 0!==c.text){var i=(new JenScript.SVGElement).name("text").attr("x",d).attr("y",e+this.height+c.fontSize).attr("font-size",c.fontSize).attr("fill",c.textColor).attr("fill-opacity",1).attr("text-anchor","start").textContent(c.text);a.insertSVG(i.buildHTML())}},paintPlugin:function(a,b){if(b==JenScript.ViewPart.Device){for(var c=this.x,d=this.y,e=[],f=5,g=0;g<this.monitors.length;g++){var h=this.monitors[g];h.completed||(this.paintMonitor(a,b,h,c,d),d=d+(this.height+h.fontSize)+f,e[e.length]=h)}this.monitors=e}},onProjectionRegister:function(){var a=this;this.getProjection().addProjectionListener("boundChanged",function(){a.repaintPlugin()},"monitor")}})}(),function(){JenScript.ProgressMonitor=function(a){this.init(a)},JenScript.Model.addMethods(JenScript.ProgressMonitor,{init:function(a){this.Id="monitor"+JenScript.sequenceId++,this.cornerRadius=void 0!==a.cornerRadius?a.cornerRadius:2,this.outlineColor=a.outlineColor,this.name=void 0!==a.name?a.name:"unamed monitor",this.outlineStrokeWidth=a.outlineStrokeWidth,this.backgroundColor=void 0!==a.backgroundColor?a.backgroundColor:"black",this.backgroundOpacity=void 0!==a.backgroundOpacity?a.backgroundOpacity:1,this.foregroundColor=void 0!==a.foregroundColor?a.foregroundColor:"#2980b9",this.foregroundOpacity=void 0!==a.foregroundOpacity?a.foregroundOpacity:1,this.textColor=void 0!==a.textColor?a.textColor:"black",this.fontSize=void 0!==a.fontSize?a.fontSize:10,this.total=a.total,this.value,this.text,this.completed=!1,this.onComplete=a.onComplete},setTotal:function(a){this.total=a,this.plugin.repaintPlugin()},setValue:function(a,b){this.value=a,this.text=b;var c=this;setTimeout(function(){c.plugin.repaintPlugin()},100),this.value===this.total&&void 0!==this.onComplete&&this.complete()},complete:function(){this.value=this.total,void 0!==this.onComplete&&this.onComplete(),this.completed=!0,this.plugin.repaintPlugin()},setText:function(a){this.text=a;var b=this;setTimeout(function(){b.plugin.repaintPlugin()},200)}})}();
//# sourceMappingURL=jenscript-progress.min.js.map